{"error":{"code":"AUTH_002","message":"Token scaduto","metadata":{},"status":401},"ip":"::1","level":"error","message":"Authentication failed","path":"/verify","timestamp":"2025-03-12T10:43:26.456Z"}
{"error":{"code":"AUTH_002","message":"Token scaduto","metadata":{},"status":401},"ip":"::1","level":"error","message":"Auth Error:","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-03-12T10:43:26.458Z"}
{"error":{"code":"AUTH_002","message":"Token scaduto","metadata":{},"status":401},"ip":"::1","level":"error","message":"Authentication failed","path":"/refresh-token","timestamp":"2025-03-12T10:43:26.597Z"}
{"error":{"code":"AUTH_002","message":"Token scaduto","metadata":{},"status":401},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/refresh-token","timestamp":"2025-03-12T10:43:26.598Z"}
{"error":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","level":"error","message":"Error deleting school:","schoolId":"679fdad474255ebc8afab683","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:16:04.481Z"}
{"context":{"schoolId":"679fdad474255ebc8afab683"},"errorMessage":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","errorName":"ValidationError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:16:04.485Z"}
{"error":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","level":"error","message":"Error deleting school:","schoolId":"679fdad474255ebc8afab683","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:16:19.408Z"}
{"context":{"schoolId":"679fdad474255ebc8afab683"},"errorMessage":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","errorName":"ValidationError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:16:19.410Z"}
{"error":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","level":"error","message":"Error deleting school:","schoolId":"679fdad474255ebc8afab683","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:17:08.263Z"}
{"context":{"schoolId":"679fdad474255ebc8afab683"},"errorMessage":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","errorName":"ValidationError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:17:08.265Z"}
{"error":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","level":"error","message":"Error deleting school:","schoolId":"679fdad474255ebc8afab683","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:19:29.205Z"}
{"context":{"schoolId":"679fdad474255ebc8afab683"},"errorMessage":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","errorName":"ValidationError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:19:29.207Z"}
{"error":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","level":"error","message":"Error deleting school:","schoolId":"679fdad474255ebc8afab683","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:19:57.424Z"}
{"context":{"schoolId":"679fdad474255ebc8afab683"},"errorMessage":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","errorName":"ValidationError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:19:57.425Z"}
{"error":{},"level":"error","message":"Errore nel recupero della scuola","schoolId":"679fdad474255ebc8afab683","timestamp":"2025-03-12T19:03:48.827Z"}
{"error":{},"level":"error","message":"Errore nel recupero della scuola","schoolId":"679fdad474255ebc8afab683","timestamp":"2025-03-12T19:04:23.705Z"}
{"error":"E11000 duplicate key error collection: brainScannerDB.studentAuth index: username_1 dup key: { username: \"pippo@test.it\" }","level":"error","message":"Errore durante la generazione delle credenziali","stack":"MongoServerError: E11000 duplicate key error collection: brainScannerDB.studentAuth index: username_1 dup key: { username: \"pippo@test.it\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\lib\\operations\\insert.js:50:33\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\lib\\operations\\command.js:84:64\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","studentId":"67d1dc3cf6b1bd007cd5a301","timestamp":"2025-03-12T19:10:52.628Z"}
{"error":{"code":11000,"index":0,"keyPattern":{"username":1},"keyValue":{"username":"pippo@test.it"}},"level":"error","message":"Errore nella generazione automatica delle credenziali","studentId":"67d1dc3cf6b1bd007cd5a301","timestamp":"2025-03-12T19:10:52.631Z"}
{"error":{},"level":"error","message":"Errore nel recupero della scuola","schoolId":"679fdad474255ebc8afab683","timestamp":"2025-03-12T19:51:48.986Z"}
{"context":{"studentId":"67d1dc3cf6b1bd007cd5a301","updateData":{"fiscalCode":null,"mainTeacher":null,"parentEmail":null,"session":{"_events":{},"_eventsCount":1,"client":{"_events":{},"_eventsCount":1,"_maxListeners":0,"mongoLogger":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"s":{"activeSessions":{},"bsonOptions":{"bsonRegExp":false,"enableUtf8Validation":true,"fieldsAsRaw":{},"ignoreUndefined":false,"promoteBuffers":false,"promoteLongs":true,"promoteValues":true,"raw":false,"serializeFunctions":false,"useBigInt64":false},"hasBeenClosed":false,"isMongoClient":true,"namespace":{"db":"admin"},"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"readPreference":{"mode":"primary"},"sessionPool":{"client":"[Circular]","sessions":{"count":6,"head":{"next":{"next":{"next":{"next":{"next":{"next":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39246747,"txnNumber":14}},"prev":"[Circular]","value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39246747,"txnNumber":18}},"prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39246747,"txnNumber":18}},"value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39246747,"txnNumber":14}},"value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"value":null}}},"url":"mongodb+srv://RaikaSama:H9Fm51BisUke4rPK@cluster0.4nf56.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0","writeConcern":{"w":"majority"}},"topology":{"_events":{"topologyDescriptionChanged":[null,null]},"_eventsCount":26,"client":"[Circular]","s":{"clusterTime":{"clusterTime":{"$timestamp":"7481015078880280622"},"signature":{"hash":"o3ZjqkcIr4pgQ3CTzn1qiIVbpxs=","keyId":{"high":1731944570,"low":59,"unsigned":false}}},"connectionTimers":{},"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"description":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":30,"maxElectionId":"7fffffff00000000000003fd","maxSetVersion":378,"servers":{},"setName":"atlas-ewe2jc-shard-0","stale":false,"type":"ReplicaSetWithPrimary"},"heartbeatFrequencyMS":10000,"id":0,"minHeartbeatFrequencyMS":500,"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"seedlist":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"serverSelectionTimeoutMS":5000,"servers":{},"srvPoller":{"_events":{},"_eventsCount":0,"generation":0,"haMode":false,"heartbeatFrequencyMS":10000,"rescanSrvIntervalMS":60000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb"},"state":"connected"}}},"clientOptions":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"defaultTransactionOptions":{},"explicit":true,"hasEnded":false,"sessionPool":{"client":{"_events":{},"_eventsCount":1,"_maxListeners":0,"mongoLogger":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"s":{"activeSessions":{},"bsonOptions":{"bsonRegExp":false,"enableUtf8Validation":true,"fieldsAsRaw":{},"ignoreUndefined":false,"promoteBuffers":false,"promoteLongs":true,"promoteValues":true,"raw":false,"serializeFunctions":false,"useBigInt64":false},"hasBeenClosed":false,"isMongoClient":true,"namespace":{"db":"admin"},"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"readPreference":{"mode":"primary"},"sessionPool":"[Circular]","url":"mongodb+srv://RaikaSama:H9Fm51BisUke4rPK@cluster0.4nf56.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0","writeConcern":{"w":"majority"}},"topology":{"_events":{"topologyDescriptionChanged":[null,null]},"_eventsCount":26,"client":"[Circular]","s":{"clusterTime":{"clusterTime":{"$timestamp":"7481015078880280622"},"signature":{"hash":"o3ZjqkcIr4pgQ3CTzn1qiIVbpxs=","keyId":{"high":1731944570,"low":59,"unsigned":false}}},"connectionTimers":{},"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"description":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":30,"maxElectionId":"7fffffff00000000000003fd","maxSetVersion":378,"servers":{},"setName":"atlas-ewe2jc-shard-0","stale":false,"type":"ReplicaSetWithPrimary"},"heartbeatFrequencyMS":10000,"id":0,"minHeartbeatFrequencyMS":500,"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"seedlist":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"serverSelectionTimeoutMS":5000,"servers":{},"srvPoller":{"_events":{},"_eventsCount":0,"generation":0,"haMode":false,"heartbeatFrequencyMS":10000,"rescanSrvIntervalMS":60000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb"},"state":"connected"}}},"sessions":{"count":6,"head":{"next":{"next":{"next":{"next":{"next":{"next":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39246747,"txnNumber":14}},"prev":"[Circular]","value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39246747,"txnNumber":18}},"prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39246747,"txnNumber":18}},"value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39246747,"txnNumber":14}},"value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"value":null}}},"supports":{"causalConsistency":true},"transaction":{"options":{"readPreference":{"mode":"primary"},"writeConcern":{"w":"majority"}},"state":"STARTING_TRANSACTION"}},"teachers":["67c0296a250c5746c3d96444","67c0c560285a82c16495c615"]}},"errorMessage":"a circular reference in the update value, updateValue:\n{\n  teachers: [ '67c0296a250c5746c3d96444', '67c0c560285a82c16495c615' ],\n  mainTeacher: null,\n  fiscalCode: null,\n  parentEmail: null,\n  session: ClientSession {\n    _events: [Object: null prototype],\n    _eventsCount: 1,\n    _maxListeners: undefined,\n    client: [MongoClient],\n    sessionPool: [ServerSessionPool],\n    hasEnded: false,\n    clientOptions: [Object: null prototype],\n    explicit: true,\n    supports: [Object],\n    clusterTime: undefined,\n    operationTime: undefined,\n    owner: undefined,\n    defaultTransactionOptions: {},\n    transaction: [Transaction],\n    [Symbol(shapeMode)]: false,\n    [Symbol(kCapture)]: false,\n    [Symbol(snapshotEnabled)]: false,\n    [Symbol(serverSession)]: [ServerSession],\n    [Symbol(txnNumberIncrement)]: 1\n  }\n}\nupdatePath: ''","errorName":"MongooseError","level":"error","message":"Errore in StudentRepository.update:","stack":"MongooseError: a circular reference in the update value, updateValue:\n{\n  teachers: [ '67c0296a250c5746c3d96444', '67c0c560285a82c16495c615' ],\n  mainTeacher: null,\n  fiscalCode: null,\n  parentEmail: null,\n  session: ClientSession {\n    _events: [Object: null prototype],\n    _eventsCount: 1,\n    _maxListeners: undefined,\n    client: [MongoClient],\n    sessionPool: [ServerSessionPool],\n    hasEnded: false,\n    clientOptions: [Object: null prototype],\n    explicit: true,\n    supports: [Object],\n    clusterTime: undefined,\n    operationTime: undefined,\n    owner: undefined,\n    defaultTransactionOptions: {},\n    transaction: [Transaction],\n    [Symbol(shapeMode)]: false,\n    [Symbol(kCapture)]: false,\n    [Symbol(snapshotEnabled)]: false,\n    [Symbol(serverSession)]: [ServerSession],\n    [Symbol(txnNumberIncrement)]: 1\n  }\n}\nupdatePath: ''\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:85:11)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\modifiedPaths.js:30:3)\n    at updatedPathsByArrayFilter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\updatedPathsByArrayFilter.js:9:24)\n    at castArrayFilters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\castArrayFilters.js:12:32)\n    at _castArrayFilters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2250:5)","timestamp":"2025-03-12T19:59:16.407Z"}
{"level":"error","message":"undefined error:","timestamp":"2025-03-12T19:59:16.451Z"}
{"context":{"studentId":"67d1dc3cf6b1bd007cd5a301","updateData":{"fiscalCode":null,"mainTeacher":null,"parentEmail":null,"session":{"_events":{},"_eventsCount":1,"client":{"_events":{},"_eventsCount":1,"_maxListeners":0,"mongoLogger":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"s":{"activeSessions":{},"bsonOptions":{"bsonRegExp":false,"enableUtf8Validation":true,"fieldsAsRaw":{},"ignoreUndefined":false,"promoteBuffers":false,"promoteLongs":true,"promoteValues":true,"raw":false,"serializeFunctions":false,"useBigInt64":false},"hasBeenClosed":false,"isMongoClient":true,"namespace":{"db":"admin"},"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"readPreference":{"mode":"primary"},"sessionPool":{"client":"[Circular]","sessions":{"count":6,"head":{"next":{"next":{"next":{"next":{"next":{"next":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39432404,"txnNumber":18}},"prev":"[Circular]","value":{"id":{"id":"na5DhY44R8eL/gX/gl+6lQ=="},"isDirty":false,"lastUse":39432402,"txnNumber":18}},"prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"na5DhY44R8eL/gX/gl+6lQ=="},"isDirty":false,"lastUse":39432402,"txnNumber":18}},"value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39432404,"txnNumber":18}},"value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"value":null}}},"url":"mongodb+srv://RaikaSama:H9Fm51BisUke4rPK@cluster0.4nf56.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0","writeConcern":{"w":"majority"}},"topology":{"_events":{"topologyDescriptionChanged":[null,null]},"_eventsCount":26,"client":"[Circular]","s":{"clusterTime":{"clusterTime":{"$timestamp":"7481015830499557456"},"signature":{"hash":"+PyLTzPA4ZIhTrirNa1wctNPqH4=","keyId":{"high":1731944570,"low":59,"unsigned":false}}},"connectionTimers":{},"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"description":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":30,"maxElectionId":"7fffffff00000000000003fd","maxSetVersion":378,"servers":{},"setName":"atlas-ewe2jc-shard-0","stale":false,"type":"ReplicaSetWithPrimary"},"heartbeatFrequencyMS":10000,"id":0,"minHeartbeatFrequencyMS":500,"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"seedlist":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"serverSelectionTimeoutMS":5000,"servers":{},"srvPoller":{"_events":{},"_eventsCount":0,"generation":0,"haMode":false,"heartbeatFrequencyMS":10000,"rescanSrvIntervalMS":60000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb"},"state":"connected"}}},"clientOptions":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"defaultTransactionOptions":{},"explicit":true,"hasEnded":false,"sessionPool":{"client":{"_events":{},"_eventsCount":1,"_maxListeners":0,"mongoLogger":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"s":{"activeSessions":{},"bsonOptions":{"bsonRegExp":false,"enableUtf8Validation":true,"fieldsAsRaw":{},"ignoreUndefined":false,"promoteBuffers":false,"promoteLongs":true,"promoteValues":true,"raw":false,"serializeFunctions":false,"useBigInt64":false},"hasBeenClosed":false,"isMongoClient":true,"namespace":{"db":"admin"},"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"readPreference":{"mode":"primary"},"sessionPool":"[Circular]","url":"mongodb+srv://RaikaSama:H9Fm51BisUke4rPK@cluster0.4nf56.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0","writeConcern":{"w":"majority"}},"topology":{"_events":{"topologyDescriptionChanged":[null,null]},"_eventsCount":26,"client":"[Circular]","s":{"clusterTime":{"clusterTime":{"$timestamp":"7481015830499557456"},"signature":{"hash":"+PyLTzPA4ZIhTrirNa1wctNPqH4=","keyId":{"high":1731944570,"low":59,"unsigned":false}}},"connectionTimers":{},"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"description":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":30,"maxElectionId":"7fffffff00000000000003fd","maxSetVersion":378,"servers":{},"setName":"atlas-ewe2jc-shard-0","stale":false,"type":"ReplicaSetWithPrimary"},"heartbeatFrequencyMS":10000,"id":0,"minHeartbeatFrequencyMS":500,"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"seedlist":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"serverSelectionTimeoutMS":5000,"servers":{},"srvPoller":{"_events":{},"_eventsCount":0,"generation":0,"haMode":false,"heartbeatFrequencyMS":10000,"rescanSrvIntervalMS":60000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb"},"state":"connected"}}},"sessions":{"count":6,"head":{"next":{"next":{"next":{"next":{"next":{"next":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39432404,"txnNumber":18}},"prev":"[Circular]","value":{"id":{"id":"na5DhY44R8eL/gX/gl+6lQ=="},"isDirty":false,"lastUse":39432402,"txnNumber":18}},"prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"na5DhY44R8eL/gX/gl+6lQ=="},"isDirty":false,"lastUse":39432402,"txnNumber":18}},"value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39432404,"txnNumber":18}},"value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"value":null}}},"supports":{"causalConsistency":true},"transaction":{"options":{"readPreference":{"mode":"primary"},"writeConcern":{"w":"majority"}},"state":"STARTING_TRANSACTION"}},"teachers":["67c0296a250c5746c3d96444","67c0c560285a82c16495c615"]}},"errorMessage":"a circular reference in the update value, updateValue:\n{\n  teachers: [ '67c0296a250c5746c3d96444', '67c0c560285a82c16495c615' ],\n  mainTeacher: null,\n  fiscalCode: null,\n  parentEmail: null,\n  session: ClientSession {\n    _events: [Object: null prototype],\n    _eventsCount: 1,\n    _maxListeners: undefined,\n    client: [MongoClient],\n    sessionPool: [ServerSessionPool],\n    hasEnded: false,\n    clientOptions: [Object: null prototype],\n    explicit: true,\n    supports: [Object],\n    clusterTime: undefined,\n    operationTime: undefined,\n    owner: undefined,\n    defaultTransactionOptions: {},\n    transaction: [Transaction],\n    [Symbol(shapeMode)]: false,\n    [Symbol(kCapture)]: false,\n    [Symbol(snapshotEnabled)]: false,\n    [Symbol(serverSession)]: [ServerSession],\n    [Symbol(txnNumberIncrement)]: 1\n  }\n}\nupdatePath: ''","errorName":"MongooseError","level":"error","message":"Errore in StudentRepository.update:","stack":"MongooseError: a circular reference in the update value, updateValue:\n{\n  teachers: [ '67c0296a250c5746c3d96444', '67c0c560285a82c16495c615' ],\n  mainTeacher: null,\n  fiscalCode: null,\n  parentEmail: null,\n  session: ClientSession {\n    _events: [Object: null prototype],\n    _eventsCount: 1,\n    _maxListeners: undefined,\n    client: [MongoClient],\n    sessionPool: [ServerSessionPool],\n    hasEnded: false,\n    clientOptions: [Object: null prototype],\n    explicit: true,\n    supports: [Object],\n    clusterTime: undefined,\n    operationTime: undefined,\n    owner: undefined,\n    defaultTransactionOptions: {},\n    transaction: [Transaction],\n    [Symbol(shapeMode)]: false,\n    [Symbol(kCapture)]: false,\n    [Symbol(snapshotEnabled)]: false,\n    [Symbol(serverSession)]: [ServerSession],\n    [Symbol(txnNumberIncrement)]: 1\n  }\n}\nupdatePath: ''\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:85:11)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\modifiedPaths.js:30:3)\n    at updatedPathsByArrayFilter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\updatedPathsByArrayFilter.js:9:24)\n    at castArrayFilters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\castArrayFilters.js:12:32)\n    at _castArrayFilters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2250:5)","timestamp":"2025-03-12T20:02:11.744Z"}
{"level":"error","message":"undefined error:","timestamp":"2025-03-12T20:02:11.753Z"}
{"context":{"studentId":"67d1dc3cf6b1bd007cd5a301","updateData":{"fiscalCode":null,"mainTeacher":null,"parentEmail":null,"session":{"_events":{},"_eventsCount":1,"client":{"_events":{},"_eventsCount":1,"_maxListeners":0,"mongoLogger":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"s":{"activeSessions":{},"bsonOptions":{"bsonRegExp":false,"enableUtf8Validation":true,"fieldsAsRaw":{},"ignoreUndefined":false,"promoteBuffers":false,"promoteLongs":true,"promoteValues":true,"raw":false,"serializeFunctions":false,"useBigInt64":false},"hasBeenClosed":false,"isMongoClient":true,"namespace":{"db":"admin"},"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"readPreference":{"mode":"primary"},"sessionPool":{"client":"[Circular]","sessions":{"count":6,"head":{"next":{"next":{"next":{"next":{"next":{"next":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39481754,"txnNumber":25}},"prev":"[Circular]","value":{"id":{"id":"IGomXQOURaaL02YGKVkG8w=="},"isDirty":false,"lastUse":39481754,"txnNumber":13}},"prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"IGomXQOURaaL02YGKVkG8w=="},"isDirty":false,"lastUse":39481754,"txnNumber":13}},"value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39481754,"txnNumber":25}},"value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"value":null}}},"url":"mongodb+srv://RaikaSama:H9Fm51BisUke4rPK@cluster0.4nf56.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0","writeConcern":{"w":"majority"}},"topology":{"_events":{"topologyDescriptionChanged":[null,null]},"_eventsCount":26,"client":"[Circular]","s":{"clusterTime":{"clusterTime":{"$timestamp":"7481016071017725966"},"signature":{"hash":"o7IbSK/f/B5KUoUaXCX86UVUM90=","keyId":{"high":1731944570,"low":59,"unsigned":false}}},"connectionTimers":{},"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"description":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":30,"maxElectionId":"7fffffff00000000000003fd","maxSetVersion":378,"servers":{},"setName":"atlas-ewe2jc-shard-0","stale":false,"type":"ReplicaSetWithPrimary"},"heartbeatFrequencyMS":10000,"id":0,"minHeartbeatFrequencyMS":500,"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"seedlist":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"serverSelectionTimeoutMS":5000,"servers":{},"srvPoller":{"_events":{},"_eventsCount":0,"generation":0,"haMode":false,"heartbeatFrequencyMS":10000,"rescanSrvIntervalMS":60000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb"},"state":"connected"}}},"clientOptions":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"defaultTransactionOptions":{},"explicit":true,"hasEnded":false,"sessionPool":{"client":{"_events":{},"_eventsCount":1,"_maxListeners":0,"mongoLogger":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"s":{"activeSessions":{},"bsonOptions":{"bsonRegExp":false,"enableUtf8Validation":true,"fieldsAsRaw":{},"ignoreUndefined":false,"promoteBuffers":false,"promoteLongs":true,"promoteValues":true,"raw":false,"serializeFunctions":false,"useBigInt64":false},"hasBeenClosed":false,"isMongoClient":true,"namespace":{"db":"admin"},"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"readPreference":{"mode":"primary"},"sessionPool":"[Circular]","url":"mongodb+srv://RaikaSama:H9Fm51BisUke4rPK@cluster0.4nf56.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0","writeConcern":{"w":"majority"}},"topology":{"_events":{"topologyDescriptionChanged":[null,null]},"_eventsCount":26,"client":"[Circular]","s":{"clusterTime":{"clusterTime":{"$timestamp":"7481016071017725966"},"signature":{"hash":"o7IbSK/f/B5KUoUaXCX86UVUM90=","keyId":{"high":1731944570,"low":59,"unsigned":false}}},"connectionTimers":{},"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"description":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":30,"maxElectionId":"7fffffff00000000000003fd","maxSetVersion":378,"servers":{},"setName":"atlas-ewe2jc-shard-0","stale":false,"type":"ReplicaSetWithPrimary"},"heartbeatFrequencyMS":10000,"id":0,"minHeartbeatFrequencyMS":500,"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"seedlist":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"serverSelectionTimeoutMS":5000,"servers":{},"srvPoller":{"_events":{},"_eventsCount":0,"generation":0,"haMode":false,"heartbeatFrequencyMS":10000,"rescanSrvIntervalMS":60000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb"},"state":"connected"}}},"sessions":{"count":6,"head":{"next":{"next":{"next":{"next":{"next":{"next":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39481754,"txnNumber":25}},"prev":"[Circular]","value":{"id":{"id":"IGomXQOURaaL02YGKVkG8w=="},"isDirty":false,"lastUse":39481754,"txnNumber":13}},"prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"IGomXQOURaaL02YGKVkG8w=="},"isDirty":false,"lastUse":39481754,"txnNumber":13}},"value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39481754,"txnNumber":25}},"value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"value":null}}},"supports":{"causalConsistency":true},"transaction":{"options":{"readPreference":{"mode":"primary"},"writeConcern":{"w":"majority"}},"state":"STARTING_TRANSACTION"}},"teachers":["67c0296a250c5746c3d96444","67c0c560285a82c16495c615"]}},"errorMessage":"a circular reference in the update value, updateValue:\n{\n  teachers: [ '67c0296a250c5746c3d96444', '67c0c560285a82c16495c615' ],\n  mainTeacher: null,\n  fiscalCode: null,\n  parentEmail: null,\n  session: ClientSession {\n    _events: [Object: null prototype],\n    _eventsCount: 1,\n    _maxListeners: undefined,\n    client: [MongoClient],\n    sessionPool: [ServerSessionPool],\n    hasEnded: false,\n    clientOptions: [Object: null prototype],\n    explicit: true,\n    supports: [Object],\n    clusterTime: undefined,\n    operationTime: undefined,\n    owner: undefined,\n    defaultTransactionOptions: {},\n    transaction: [Transaction],\n    [Symbol(shapeMode)]: false,\n    [Symbol(kCapture)]: false,\n    [Symbol(snapshotEnabled)]: false,\n    [Symbol(serverSession)]: [ServerSession],\n    [Symbol(txnNumberIncrement)]: 1\n  }\n}\nupdatePath: ''","errorName":"MongooseError","level":"error","message":"Errore in StudentRepository.update:","stack":"MongooseError: a circular reference in the update value, updateValue:\n{\n  teachers: [ '67c0296a250c5746c3d96444', '67c0c560285a82c16495c615' ],\n  mainTeacher: null,\n  fiscalCode: null,\n  parentEmail: null,\n  session: ClientSession {\n    _events: [Object: null prototype],\n    _eventsCount: 1,\n    _maxListeners: undefined,\n    client: [MongoClient],\n    sessionPool: [ServerSessionPool],\n    hasEnded: false,\n    clientOptions: [Object: null prototype],\n    explicit: true,\n    supports: [Object],\n    clusterTime: undefined,\n    operationTime: undefined,\n    owner: undefined,\n    defaultTransactionOptions: {},\n    transaction: [Transaction],\n    [Symbol(shapeMode)]: false,\n    [Symbol(kCapture)]: false,\n    [Symbol(snapshotEnabled)]: false,\n    [Symbol(serverSession)]: [ServerSession],\n    [Symbol(txnNumberIncrement)]: 1\n  }\n}\nupdatePath: ''\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:85:11)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\modifiedPaths.js:30:3)\n    at updatedPathsByArrayFilter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\updatedPathsByArrayFilter.js:9:24)\n    at castArrayFilters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\castArrayFilters.js:12:32)\n    at _castArrayFilters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2250:5)","timestamp":"2025-03-12T20:03:06.980Z"}
{"level":"error","message":"undefined error:","timestamp":"2025-03-12T20:03:06.985Z"}
{"context":{"studentId":"67d1dc3cf6b1bd007cd5a301","updateData":{"session":{"_events":{},"_eventsCount":1,"client":{"_events":{},"_eventsCount":1,"_maxListeners":0,"mongoLogger":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"s":{"activeSessions":{},"bsonOptions":{"bsonRegExp":false,"enableUtf8Validation":true,"fieldsAsRaw":{},"ignoreUndefined":false,"promoteBuffers":false,"promoteLongs":true,"promoteValues":true,"raw":false,"serializeFunctions":false,"useBigInt64":false},"hasBeenClosed":false,"isMongoClient":true,"namespace":{"db":"admin"},"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"readPreference":{"mode":"primary"},"sessionPool":{"client":"[Circular]","sessions":{"count":6,"head":{"next":{"next":{"next":{"next":{"next":{"next":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39702179,"txnNumber":28}},"prev":"[Circular]","value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39702180,"txnNumber":21}},"prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39702180,"txnNumber":21}},"value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39702179,"txnNumber":28}},"value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"value":null}}},"url":"mongodb+srv://RaikaSama:H9Fm51BisUke4rPK@cluster0.4nf56.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0","writeConcern":{"w":"majority"}},"topology":{"_events":{"topologyDescriptionChanged":[null,null]},"_eventsCount":26,"client":"[Circular]","s":{"clusterTime":{"clusterTime":{"$timestamp":"7481016998730661909"},"signature":{"hash":"NlZBu7BM1nUPE7D++d40hBLeN4s=","keyId":{"high":1731944570,"low":59,"unsigned":false}}},"connectionTimers":{},"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"description":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":30,"maxElectionId":"7fffffff00000000000003fd","maxSetVersion":378,"servers":{},"setName":"atlas-ewe2jc-shard-0","stale":false,"type":"ReplicaSetWithPrimary"},"heartbeatFrequencyMS":10000,"id":0,"minHeartbeatFrequencyMS":500,"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"seedlist":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"serverSelectionTimeoutMS":5000,"servers":{},"srvPoller":{"_events":{},"_eventsCount":0,"generation":0,"haMode":false,"heartbeatFrequencyMS":10000,"rescanSrvIntervalMS":60000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb"},"state":"connected"}}},"clientOptions":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"defaultTransactionOptions":{},"explicit":true,"hasEnded":false,"sessionPool":{"client":{"_events":{},"_eventsCount":1,"_maxListeners":0,"mongoLogger":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"s":{"activeSessions":{},"bsonOptions":{"bsonRegExp":false,"enableUtf8Validation":true,"fieldsAsRaw":{},"ignoreUndefined":false,"promoteBuffers":false,"promoteLongs":true,"promoteValues":true,"raw":false,"serializeFunctions":false,"useBigInt64":false},"hasBeenClosed":false,"isMongoClient":true,"namespace":{"db":"admin"},"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"readPreference":{"mode":"primary"},"sessionPool":"[Circular]","url":"mongodb+srv://RaikaSama:H9Fm51BisUke4rPK@cluster0.4nf56.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0","writeConcern":{"w":"majority"}},"topology":{"_events":{"topologyDescriptionChanged":[null,null]},"_eventsCount":26,"client":"[Circular]","s":{"clusterTime":{"clusterTime":{"$timestamp":"7481016998730661909"},"signature":{"hash":"NlZBu7BM1nUPE7D++d40hBLeN4s=","keyId":{"high":1731944570,"low":59,"unsigned":false}}},"connectionTimers":{},"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"description":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":30,"maxElectionId":"7fffffff00000000000003fd","maxSetVersion":378,"servers":{},"setName":"atlas-ewe2jc-shard-0","stale":false,"type":"ReplicaSetWithPrimary"},"heartbeatFrequencyMS":10000,"id":0,"minHeartbeatFrequencyMS":500,"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"seedlist":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"serverSelectionTimeoutMS":5000,"servers":{},"srvPoller":{"_events":{},"_eventsCount":0,"generation":0,"haMode":false,"heartbeatFrequencyMS":10000,"rescanSrvIntervalMS":60000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb"},"state":"connected"}}},"sessions":{"count":6,"head":{"next":{"next":{"next":{"next":{"next":{"next":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39702179,"txnNumber":28}},"prev":"[Circular]","value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39702180,"txnNumber":21}},"prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39702180,"txnNumber":21}},"value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39702179,"txnNumber":28}},"value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"value":null}}},"supports":{"causalConsistency":true},"transaction":{"options":{"readPreference":{"mode":"primary"},"writeConcern":{"w":"majority"}},"state":"STARTING_TRANSACTION"}},"teachers":["67c0296a250c5746c3d96444","67c0c560285a82c16495c615"]}},"errorMessage":"a circular reference in the update value, updateValue:\n{\n  teachers: [ '67c0296a250c5746c3d96444', '67c0c560285a82c16495c615' ],\n  session: ClientSession {\n    _events: [Object: null prototype],\n    _eventsCount: 1,\n    _maxListeners: undefined,\n    client: [MongoClient],\n    sessionPool: [ServerSessionPool],\n    hasEnded: false,\n    clientOptions: [Object: null prototype],\n    explicit: true,\n    supports: [Object],\n    clusterTime: undefined,\n    operationTime: undefined,\n    owner: undefined,\n    defaultTransactionOptions: {},\n    transaction: [Transaction],\n    [Symbol(shapeMode)]: false,\n    [Symbol(kCapture)]: false,\n    [Symbol(snapshotEnabled)]: false,\n    [Symbol(serverSession)]: [ServerSession],\n    [Symbol(txnNumberIncrement)]: 1\n  }\n}\nupdatePath: ''","errorName":"MongooseError","level":"error","message":"Errore in StudentRepository.update:","stack":"MongooseError: a circular reference in the update value, updateValue:\n{\n  teachers: [ '67c0296a250c5746c3d96444', '67c0c560285a82c16495c615' ],\n  session: ClientSession {\n    _events: [Object: null prototype],\n    _eventsCount: 1,\n    _maxListeners: undefined,\n    client: [MongoClient],\n    sessionPool: [ServerSessionPool],\n    hasEnded: false,\n    clientOptions: [Object: null prototype],\n    explicit: true,\n    supports: [Object],\n    clusterTime: undefined,\n    operationTime: undefined,\n    owner: undefined,\n    defaultTransactionOptions: {},\n    transaction: [Transaction],\n    [Symbol(shapeMode)]: false,\n    [Symbol(kCapture)]: false,\n    [Symbol(snapshotEnabled)]: false,\n    [Symbol(serverSession)]: [ServerSession],\n    [Symbol(txnNumberIncrement)]: 1\n  }\n}\nupdatePath: ''\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:85:11)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\modifiedPaths.js:30:3)\n    at updatedPathsByArrayFilter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\updatedPathsByArrayFilter.js:9:24)\n    at castArrayFilters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\castArrayFilters.js:12:32)\n    at _castArrayFilters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2250:5)","timestamp":"2025-03-12T20:06:43.030Z"}
{"level":"error","message":"undefined error:","timestamp":"2025-03-12T20:06:43.043Z"}

{"level":"error","message":"connect ECONNREFUSED ::1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{},"setName":null,"stale":false,"type":"Unknown"},"timestamp":"2025-01-05T15:01:46.076Z"}
{"error":"connect ECONNREFUSED ::1:27017","level":"error","message":"Migration failed:","stack":"MongooseServerSelectionError: connect ECONNREFUSED ::1:27017\n    at _handleConnectionErrors (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\connection.js:816:11)\n    at NativeConnection.openUri (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\connection.js:791:11)\n    at async runMigration (C:\\Users\\ricca\\Desktop\\BSc\\src\\database\\migrations\\initial-setup.js:13:9)","timestamp":"2025-01-05T15:06:22.227Z"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"message":"jwt malformed","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at exports.protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:30:29)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736098415486_3wxcb31en","timestamp":"2025-01-05T17:33:35.489Z","url":"/api/v1/schools"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"message":"AppError is not a constructor","stack":"TypeError: AppError is not a constructor\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:63:17\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at exports.protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:53:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736098528910_ad22wg35f","timestamp":"2025-01-05T17:35:28.943Z","url":"/api/v1/schools"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"message":"currentUser.hasPasswordChangedAfter is not a function","stack":"TypeError: currentUser.hasPasswordChangedAfter is not a function\n    at exports.protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:37:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736098733328_4mq4sju46","timestamp":"2025-01-05T17:38:53.359Z","url":"/api/v1/schools"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"message":"AppError is not a constructor","stack":"TypeError: AppError is not a constructor\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:63:17\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at exports.protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:53:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736098766744_on7nphpk0","timestamp":"2025-01-05T17:39:26.791Z","url":"/api/v1/schools"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"message":"Non hai i permessi per questa azione","stack":"Error: Non hai i permessi per questa azione\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:63:17\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at exports.protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:53:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736098883279_n9dey9vp0","timestamp":"2025-01-05T17:41:23.334Z","url":"/api/v1/schools"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"message":"userRepository is not defined","stack":"ReferenceError: userRepository is not defined\n    at exports.protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:31:22)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:328:13)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736098925597_q4fpxctnd","timestamp":"2025-01-05T17:42:05.603Z","url":"/api/v1/schools"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"message":"currentUser.hasPasswordChangedAfter is not a function","stack":"TypeError: currentUser.hasPasswordChangedAfter is not a function\n    at exports.protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:37:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736098969420_rbub8l0tb","timestamp":"2025-01-05T17:42:49.452Z","url":"/api/v1/schools"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"message":"currentUser.hasPasswordChangedAfter is not a function","stack":"TypeError: currentUser.hasPasswordChangedAfter is not a function\n    at exports.protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:37:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736099072156_oul9om319","timestamp":"2025-01-05T17:44:32.191Z","url":"/api/v1/schools"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"message":"Non hai i permessi per questa azione","stack":"Error: Non hai i permessi per questa azione\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:48:19\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at exports.protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:39:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736099121809_4z5j39ofr","timestamp":"2025-01-05T17:45:21.841Z","url":"/api/v1/schools"}
{"level":"error","message":"school error:","timestamp":"2025-01-05T17:49:39.400Z"}
{"level":"error","message":"school error:","timestamp":"2025-01-05T17:50:15.101Z"}
{"error":{},"level":"error","message":"Errore durante la registrazione","timestamp":"2025-01-05T18:16:02.873Z"}
{"body":{"email":"admin@test.com","firstName":"Test","lastName":"Admin","password":"[REDACTED]","role":"admin"},"error":{"message":"AppError is not a constructor","stack":"TypeError: AppError is not a constructor\n    at UserRepository.create (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:25:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AuthController.register (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:68:29)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736100962861_caahy2ndd","timestamp":"2025-01-05T18:16:02.874Z","url":"/api/v1/auth/register"}
{"level":"error","message":"AppError is not a constructor","stack":"TypeError: AppError is not a constructor\n    at UserRepository.create (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:25:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AuthController.register (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:68:29)","timestamp":"2025-01-05T18:16:02.875Z"}
{"error":{"_message":"User validation failed","errors":{"password":{"kind":"minlength","message":"Path `password` (`12345`) is shorter than the minimum allowed length (8).","name":"ValidatorError","path":"password","properties":{"message":"Path `password` (`12345`) is shorter than the minimum allowed length (8).","minlength":8,"path":"password","type":"minlength","value":"12345"},"value":"12345"}},"message":"User validation failed: password: Path `password` (`12345`) is shorter than the minimum allowed length (8).","name":"ValidationError"},"level":"error","message":"Errore nella creazione di User","timestamp":"2025-01-05T18:17:13.470Z"}
{"error":{"code":"DB_001","message":"Errore nella creazione di User","metadata":{"originalError":"User validation failed: password: Path `password` (`12345`) is shorter than the minimum allowed length (8)."},"status":500},"level":"error","message":"Errore durante la registrazione","timestamp":"2025-01-05T18:17:13.471Z"}
{"body":{"email":"admin@test.com","firstName":"Test","lastName":"Admin","password":"[REDACTED]","role":"admin"},"error":{"code":"DB_001","message":"Errore nella creazione di User"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736101033457_8ril6vyao","timestamp":"2025-01-05T18:17:13.472Z","url":"/api/v1/auth/register"}
{"level":"error","message":"Errore nella creazione di User","timestamp":"2025-01-05T18:17:13.473Z"}
{"error":{},"level":"error","message":"Errore durante la registrazione","timestamp":"2025-01-05T18:17:27.345Z"}
{"body":{"email":"admin@test.com","firstName":"Test","lastName":"Admin","password":"[REDACTED]","role":"admin"},"error":{"message":"option expires is invalid","stack":"TypeError: option expires is invalid\n    at Object.serialize (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\node_modules\\cookie\\index.js:234:13)\n    at res.cookie (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\response.js:892:36)\n    at AuthController._sendTokenResponse (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:54:14)\n    at AuthController.register (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:70:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736101047308_sokmxhpf1","timestamp":"2025-01-05T18:17:27.346Z","url":"/api/v1/auth/register"}
{"level":"error","message":"option expires is invalid","stack":"TypeError: option expires is invalid\n    at Object.serialize (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\node_modules\\cookie\\index.js:234:13)\n    at res.cookie (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\response.js:892:36)\n    at AuthController._sendTokenResponse (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:54:14)\n    at AuthController.register (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:70:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-05T18:17:27.347Z"}
{"error":{"code":11000,"index":0,"keyPattern":{"email":1},"keyValue":{"email":"admin@test.com"}},"level":"error","message":"Errore nella creazione di User","timestamp":"2025-01-05T18:20:17.907Z"}
{"error":{"code":"DB_001","message":"Errore nella creazione di User","metadata":{"originalError":"E11000 duplicate key error collection: brainScannerDB.users index: email_1 dup key: { email: \"admin@test.com\" }"},"status":500},"level":"error","message":"Errore durante la registrazione","timestamp":"2025-01-05T18:20:17.908Z"}
{"body":{"email":"admin@test.com","firstName":"Test","lastName":"Admin","password":"[REDACTED]","role":"admin"},"error":{"code":"DB_001","message":"Errore nella creazione di User"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736101217872_ra8d6lmzc","timestamp":"2025-01-05T18:20:17.910Z","url":"/api/v1/auth/register"}
{"level":"error","message":"Errore nella creazione di User","timestamp":"2025-01-05T18:20:17.911Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"institutionType":{"kind":"enum","message":"`higher` is not a valid enum value for path `institutionType`.","name":"ValidatorError","path":"institutionType","properties":{"enumValues":["scientific","classical","artistic","none"],"message":"`higher` is not a valid enum value for path `institutionType`.","path":"institutionType","type":"enum","value":"higher"},"value":"higher"},"manager":{"kind":"required","message":"Path `manager` is required.","name":"ValidatorError","path":"manager","properties":{"message":"Path `manager` is required.","path":"manager","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"schoolType":{"kind":"enum","message":"`technical` is not a valid enum value for path `schoolType`.","name":"ValidatorError","path":"schoolType","properties":{"enumValues":["middle_school","high_school"],"message":"`technical` is not a valid enum value for path `schoolType`.","path":"schoolType","type":"enum","value":"technical"},"value":"technical"}},"message":"School validation failed: manager: Path `manager` is required., address: Path `address` is required., province: Path `province` is required., schoolType: `technical` is not a valid enum value for path `schoolType`., institutionType: `higher` is not a valid enum value for path `institutionType`.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-05T18:22:54.919Z"}
{"error":{"code":"DB_001","message":"Errore nella creazione di School","metadata":{"originalError":"School validation failed: manager: Path `manager` is required., address: Path `address` is required., province: Path `province` is required., schoolType: `technical` is not a valid enum value for path `schoolType`., institutionType: `higher` is not a valid enum value for path `institutionType`."},"status":500},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-05T18:22:54.924Z"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"code":"SYS_001","message":"Errore nella creazione della scuola"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736101374884_5kxt8uc7z","timestamp":"2025-01-05T18:22:54.925Z","url":"/api/v1/schools"}
{"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-05T18:22:54.926Z"}
{"body":{"address":"Via Test 123","institutionType":"scientific","name":"ITS Angelo Rizzoli","numberOfYears":3,"province":"Milano","region":"Lombardia","schoolType":"middle_school","sections":["A","B"]},"error":{"code":"AUTH_004","message":"Effettua il login per accedere"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736101708717_prn84905w","timestamp":"2025-01-05T18:28:28.720Z","url":"/api/v1/schools"}
{"level":"error","message":"Effettua il login per accedere","timestamp":"2025-01-05T18:28:28.721Z"}
{"body":{"classId":"677acfd6d33af57f632c3156","email":"mario.rossi@student.test.com","firstName":"Mario","gender":"M","isActive":true,"lastName":"Rossi","mainTeacher":"677acd8c2cd87e502e584023","schoolId":"677acf7ed33af57f632c3153","section":"A","teachers":["677acd8c2cd87e502e584023"]},"error":{"message":"logger is not defined","stack":"ReferenceError: logger is not defined\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\studentRoutes.js:37:5\n    at Layer.handle_error (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:71:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:326:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:97:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736101950448_zhbff1pph","timestamp":"2025-01-05T18:32:30.458Z","url":"/api/v1/students"}
{"level":"error","message":"logger is not defined","stack":"ReferenceError: logger is not defined\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\studentRoutes.js:37:5\n    at Layer.handle_error (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:71:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:326:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:97:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)","timestamp":"2025-01-05T18:32:30.459Z"}
{"level":"error","message":"student error:","timestamp":"2025-01-05T18:47:34.856Z"}
{"error":{"kind":"ObjectId","message":"Cast to ObjectId failed for value \"search\" (type string) at path \"_id\" for model \"Student\"","name":"CastError","path":"_id","reason":{},"stringValue":"\"search\"","value":"search","valueType":"string"},"level":"error","message":"Errore nel recupero di Student","timestamp":"2025-01-05T18:50:00.302Z"}
{"code":"DB_001","level":"error","message":"Errore nel recupero di Student","metadata":{"originalError":"Cast to ObjectId failed for value \"search\" (type string) at path \"_id\" for model \"Student\""},"status":500,"timestamp":"2025-01-05T18:50:00.303Z"}
{"error":{"kind":"ObjectId","message":"Cast to ObjectId failed for value \"search\" (type string) at path \"_id\" for model \"Student\"","name":"CastError","path":"_id","reason":{},"stringValue":"\"search\"","value":"search","valueType":"string"},"level":"error","message":"Errore nel recupero di Student","timestamp":"2025-01-05T18:51:38.155Z"}
{"code":"DB_001","level":"error","message":"Errore nel recupero di Student","metadata":{"originalError":"Cast to ObjectId failed for value \"search\" (type string) at path \"_id\" for model \"Student\""},"status":500,"timestamp":"2025-01-05T18:51:38.156Z"}
{"level":"error","message":"Errore nell'assegnazione della classe:","timestamp":"2025-01-05T19:03:22.522Z"}
{"level":"error","message":"this.repository.findClass is not a function","stack":"TypeError: this.repository.findClass is not a function\n    at StudentController.assignToClass (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\studentController.js:99:50)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-05T19:03:22.523Z"}
{"code":"INVALID_ASSIGNMENT_PARAMS","level":"error","message":"È necessario specificare almeno classId, section o year","statusCode":400,"timestamp":"2025-01-05T19:04:56.187Z"}
{"level":"error","message":"class error:","timestamp":"2025-01-05T19:24:28.480Z"}
{"level":"error","message":"class error:","timestamp":"2025-01-05T19:37:35.117Z"}
{"level":"error","message":"Errore di autenticazione:","timestamp":"2025-01-05T19:42:39.623Z"}
{"level":"error","message":"Errore di autenticazione:","timestamp":"2025-01-05T19:43:03.180Z"}
{"code":"AUTH_004","level":"error","message":"Utente non autenticato","metadata":{},"status":401,"timestamp":"2025-01-05T19:47:38.024Z"}
{"error":{},"level":"error","message":"Errore durante il login","timestamp":"2025-01-05T19:51:02.207Z"}
{"body":{"email":"admin2@test.it","password":"[REDACTED]"},"error":{"message":"this.repository.findOne(...).select is not a function","stack":"TypeError: this.repository.findOne(...).select is not a function\n    at AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:103:67)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\authRoutes.js:19:5\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736106662204_crjbk35u7","timestamp":"2025-01-05T19:51:02.212Z","url":"/api/v1/auth/login"}
{"level":"error","message":"this.repository.findOne(...).select is not a function","stack":"TypeError: this.repository.findOne(...).select is not a function\n    at AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:103:67)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\authRoutes.js:19:5\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-01-05T19:51:02.213Z"}
{"error":{},"level":"error","message":"Errore durante il login","timestamp":"2025-01-05T19:51:19.105Z"}
{"body":{"email":"admin2@test.com","password":"[REDACTED]"},"error":{"message":"this.repository.findOne(...).select is not a function","stack":"TypeError: this.repository.findOne(...).select is not a function\n    at AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:103:67)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\authRoutes.js:19:5\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736106679103_ac1xcv1pk","timestamp":"2025-01-05T19:51:19.107Z","url":"/api/v1/auth/login"}
{"level":"error","message":"this.repository.findOne(...).select is not a function","stack":"TypeError: this.repository.findOne(...).select is not a function\n    at AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:103:67)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\authRoutes.js:19:5\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-01-05T19:51:19.108Z"}
{"error":{},"level":"error","message":"Errore durante il login","timestamp":"2025-01-05T19:51:45.406Z"}
{"body":{"email":"admin2@test.com","password":"[REDACTED]"},"error":{"message":"this.repository.findOne(...).select is not a function","stack":"TypeError: this.repository.findOne(...).select is not a function\n    at AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:103:67)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\authRoutes.js:19:5\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736106705402_78btm29wv","timestamp":"2025-01-05T19:51:45.412Z","url":"/api/v1/auth/login"}
{"level":"error","message":"this.repository.findOne(...).select is not a function","stack":"TypeError: this.repository.findOne(...).select is not a function\n    at AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:103:67)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\authRoutes.js:19:5\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-01-05T19:51:45.413Z"}
{"error":{},"level":"error","message":"Errore durante il login","timestamp":"2025-01-05T19:52:21.898Z"}
{"body":{"email":"admin2@test.com","password":"[REDACTED]"},"error":{"message":"this.repository.findOne(...).select is not a function","stack":"TypeError: this.repository.findOne(...).select is not a function\n    at AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:103:67)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\authRoutes.js:19:5\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736106741894_xj5qk4odm","timestamp":"2025-01-05T19:52:21.904Z","url":"/api/v1/auth/login"}
{"level":"error","message":"this.repository.findOne(...).select is not a function","stack":"TypeError: this.repository.findOne(...).select is not a function\n    at AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:103:67)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\authRoutes.js:19:5\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-01-05T19:52:21.905Z"}
{"error":{},"level":"error","message":"Errore durante il login","timestamp":"2025-01-05T19:54:10.825Z"}
{"body":{"email":"admin2@test.com","password":"[REDACTED]"},"error":{"message":"this.repository.findOne(...).select is not a function","stack":"TypeError: this.repository.findOne(...).select is not a function\n    at AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:103:67)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\authRoutes.js:19:5\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736106850821_tx07gbf14","timestamp":"2025-01-05T19:54:10.832Z","url":"/api/v1/auth/login"}
{"level":"error","message":"this.repository.findOne(...).select is not a function","stack":"TypeError: this.repository.findOne(...).select is not a function\n    at AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:103:67)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\authRoutes.js:19:5\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-01-05T19:54:10.833Z"}
{"error":{},"level":"error","message":"Errore durante il login","timestamp":"2025-01-05T19:54:23.460Z"}
{"body":{"email":"admin2@test.com","password":"[REDACTED]"},"error":{"message":"this.repository.findOne(...).select is not a function","stack":"TypeError: this.repository.findOne(...).select is not a function\n    at AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:103:67)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\authRoutes.js:19:5\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736106863458_m3y7d87zn","timestamp":"2025-01-05T19:54:23.462Z","url":"/api/v1/auth/login"}
{"level":"error","message":"this.repository.findOne(...).select is not a function","stack":"TypeError: this.repository.findOne(...).select is not a function\n    at AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:103:67)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\authRoutes.js:19:5\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-01-05T19:54:23.463Z"}
{"error":{},"level":"error","message":"Errore durante il login","timestamp":"2025-01-05T20:01:32.288Z"}
{"body":{"email":"admin2@test.com","password":"[REDACTED]"},"error":{"message":"user.matchPassword is not a function","stack":"TypeError: user.matchPassword is not a function\n    at AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:111:39)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736107292258_gpeozfu6k","timestamp":"2025-01-05T20:01:32.289Z","url":"/api/v1/auth/login"}
{"level":"error","message":"user.matchPassword is not a function","stack":"TypeError: user.matchPassword is not a function\n    at AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:111:39)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-05T20:01:32.290Z"}
{"error":{},"level":"error","message":"Errore durante il login","timestamp":"2025-01-05T20:01:46.853Z"}
{"body":{"email":"admin2@test.com","password":"[REDACTED]"},"error":{"message":"user.matchPassword is not a function","stack":"TypeError: user.matchPassword is not a function\n    at AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:111:39)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736107306825_muh3g5gum","timestamp":"2025-01-05T20:01:46.855Z","url":"/api/v1/auth/login"}
{"level":"error","message":"user.matchPassword is not a function","stack":"TypeError: user.matchPassword is not a function\n    at AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:111:39)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-05T20:01:46.856Z"}
{"error":{},"level":"error","message":"Errore durante il login","timestamp":"2025-01-05T20:07:08.626Z"}
{"body":{"email":"admin2@test.com","password":"[REDACTED]"},"error":{"message":"Errore nel confronto delle password","stack":"Error: Errore nel confronto delle password\n    at userSchema.methods.comparePassword (C:\\Users\\ricca\\Desktop\\BSc\\src\\models\\User.js:70:15)\n    at AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:112:39)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736107628594_g7l1mgsa3","timestamp":"2025-01-05T20:07:08.627Z","url":"/api/v1/auth/login"}
{"level":"error","message":"Errore nel confronto delle password","stack":"Error: Errore nel confronto delle password\n    at userSchema.methods.comparePassword (C:\\Users\\ricca\\Desktop\\BSc\\src\\models\\User.js:70:15)\n    at AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:112:39)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-05T20:07:08.628Z"}
{"candidatePassword":true,"hashedPassword":false,"level":"error","message":"Password mancante nel confronto","timestamp":"2025-01-05T20:10:32.734Z"}
{"error":"Email o password non validi","level":"error","message":"Errore durante il login","timestamp":"2025-01-05T20:10:32.735Z"}
{"body":{"email":"admin2@test.com","password":"[REDACTED]"},"error":{"code":"AUTH_001","message":"Email o password non validi"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736107832704_m363flouq","timestamp":"2025-01-05T20:10:32.736Z","url":"/api/v1/auth/login"}
{"level":"error","message":"Email o password non validi","timestamp":"2025-01-05T20:10:32.736Z"}
{"candidatePassword":true,"hashedPassword":false,"level":"error","message":"Password mancante nel confronto","timestamp":"2025-01-05T20:10:47.339Z"}
{"error":"Email o password non validi","level":"error","message":"Errore durante il login","timestamp":"2025-01-05T20:10:47.339Z"}
{"body":{"email":"admin2@test.com","password":"[REDACTED]"},"error":{"code":"AUTH_001","message":"Email o password non validi"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736107847318_8xa2da7c8","timestamp":"2025-01-05T20:10:47.340Z","url":"/api/v1/auth/login"}
{"level":"error","message":"Email o password non validi","timestamp":"2025-01-05T20:10:47.341Z"}
{"candidatePassword":true,"hashedPassword":false,"level":"error","message":"Password mancante nel confronto","timestamp":"2025-01-05T20:18:21.243Z"}
{"error":"Email o password non validi","level":"error","message":"Errore durante il login","timestamp":"2025-01-05T20:18:21.243Z"}
{"body":{"email":"admin@test.com","password":"[REDACTED]"},"error":{"code":"AUTH_001","message":"Email o password non validi"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736108301221_as5yhou55","timestamp":"2025-01-05T20:18:21.244Z","url":"/api/v1/auth/login"}
{"level":"error","message":"Email o password non validi","timestamp":"2025-01-05T20:18:21.244Z"}
{"body":{},"error":{"message":"Utente non associato ad alcuna scuola"},"level":"error","message":"Errore richiesta","method":"GET","query":{},"requestId":"req_1736108336443_fx5vnar9r","timestamp":"2025-01-05T20:18:56.467Z","url":"/api/v1/auth/me"}
{"level":"error","message":"Utente non associato ad alcuna scuola","timestamp":"2025-01-05T20:18:56.468Z"}
{"body":{},"error":{"message":"Utente non associato ad alcuna scuola"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736108343496_dlji1siza","timestamp":"2025-01-05T20:19:03.516Z","url":"/api/v1/auth/logout"}
{"level":"error","message":"Utente non associato ad alcuna scuola","timestamp":"2025-01-05T20:19:03.517Z"}
{"error":{"code":"AUTH_001","message":"Email o password non validi","metadata":{},"status":401},"level":"error","message":"Errore durante il login","timestamp":"2025-01-05T20:22:19.251Z"}
{"body":{"email":"admin@test.com","password":"[REDACTED]"},"error":{"code":"AUTH_001","message":"Email o password non validi"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736108539219_k0ja1jqex","timestamp":"2025-01-05T20:22:19.252Z","url":"/api/v1/auth/login"}
{"level":"error","message":"Email o password non validi","timestamp":"2025-01-05T20:22:19.253Z"}
{"error":{"code":"AUTH_001","message":"Email o password non validi","metadata":{},"status":401},"level":"error","message":"Errore durante il login","timestamp":"2025-01-05T20:22:50.080Z"}
{"body":{"email":"admin@test.com","password":"[REDACTED]"},"error":{"code":"AUTH_001","message":"Email o password non validi"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736108570050_xo4q20u1h","timestamp":"2025-01-05T20:22:50.081Z","url":"/api/v1/auth/login"}
{"level":"error","message":"Email o password non validi","timestamp":"2025-01-05T20:22:50.082Z"}
{"error":"Email o password non validi","level":"error","message":"Errore durante il login","timestamp":"2025-01-05T20:26:26.766Z"}
{"body":{"email":"admin@test.com","password":"[REDACTED]"},"error":{"code":"AUTH_001","message":"Email o password non validi"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736108786732_f5wuwcaf5","timestamp":"2025-01-05T20:26:26.767Z","url":"/api/v1/auth/login"}
{"level":"error","message":"Email o password non validi","timestamp":"2025-01-05T20:26:26.769Z"}
{"body":{},"error":{"message":"Non autorizzato ad accedere a questa risorsa"},"level":"error","message":"Errore richiesta","method":"GET","query":{},"requestId":"req_1736108965282_9r4uvbru0","timestamp":"2025-01-05T20:29:25.287Z","url":"/api/v1/auth/me"}
{"level":"error","message":"Non autorizzato ad accedere a questa risorsa","timestamp":"2025-01-05T20:29:25.288Z"}
{"error":{"code":"AUTH_001","message":"Password corrente non valida","metadata":{},"status":401},"level":"error","message":"Errore nell'aggiornamento della password","timestamp":"2025-01-05T20:34:46.436Z"}
{"body":{"currentPassword":"12345678","newPassword":"87654321"},"error":{"code":"AUTH_001","message":"Password corrente non valida"},"level":"error","message":"Errore richiesta","method":"PUT","query":{},"requestId":"req_1736109286395_g58fuw95y","timestamp":"2025-01-05T20:34:46.437Z","url":"/api/v1/auth/update-password"}
{"level":"error","message":"Password corrente non valida","timestamp":"2025-01-05T20:34:46.438Z"}
{"error":{"code":"AUTH_001","message":"Password corrente non valida","metadata":{},"status":401},"level":"error","message":"Errore nell'aggiornamento della password","timestamp":"2025-01-05T20:41:07.660Z"}
{"body":{"currentPassword":"12345678","newPassword":"87654321"},"error":{"code":"AUTH_001","message":"Password corrente non valida"},"level":"error","message":"Errore richiesta","method":"PUT","query":{},"requestId":"req_1736109667603_yojzukv9f","timestamp":"2025-01-05T20:41:07.661Z","url":"/api/v1/auth/update-password"}
{"level":"error","message":"Password corrente non valida","timestamp":"2025-01-05T20:41:07.662Z"}
{"error":{},"level":"error","message":"Errore durante il login","timestamp":"2025-01-05T20:49:19.853Z"}
{"body":{"email":"admin@test.com","password":"[REDACTED]"},"error":{"message":"AppError is not a constructor","stack":"TypeError: AppError is not a constructor\n    at UserRepository.verifyCredentials (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\UserRepository.js:118:19)\n    at async AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:101:26)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736110159759_nt5bv6dp5","timestamp":"2025-01-05T20:49:19.855Z","url":"/api/v1/auth/login"}
{"level":"error","message":"AppError is not a constructor","stack":"TypeError: AppError is not a constructor\n    at UserRepository.verifyCredentials (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\UserRepository.js:118:19)\n    at async AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:101:26)","timestamp":"2025-01-05T20:49:19.856Z"}
{"error":{},"level":"error","message":"Errore nella procedura di reset password","timestamp":"2025-01-05T20:49:25.782Z"}
{"body":{"email":"admin@test.com"},"error":{"message":"crypto.randomBytes is not a function","stack":"TypeError: crypto.randomBytes is not a function\n    at userSchema.methods.getResetPasswordToken (C:\\Users\\ricca\\Desktop\\BSc\\src\\models\\User.js:91:35)\n    at AuthController.forgotPassword (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:141:37)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736110165745_zmi8zz0kk","timestamp":"2025-01-05T20:49:25.783Z","url":"/api/v1/auth/forgot-password"}
{"level":"error","message":"crypto.randomBytes is not a function","stack":"TypeError: crypto.randomBytes is not a function\n    at userSchema.methods.getResetPasswordToken (C:\\Users\\ricca\\Desktop\\BSc\\src\\models\\User.js:91:35)\n    at AuthController.forgotPassword (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:141:37)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-05T20:49:25.784Z"}
{"error":{"code":"AUTH_001","message":"Password corrente non valida","metadata":{},"status":401},"level":"error","message":"Errore nell'aggiornamento della password","timestamp":"2025-01-05T20:49:35.551Z"}
{"body":{"currentPassword":"passwordsbagliata","newPassword":"nuovapassword"},"error":{"code":"AUTH_001","message":"Password corrente non valida"},"level":"error","message":"Errore richiesta","method":"PUT","query":{},"requestId":"req_1736110175428_8vvt9lrvk","timestamp":"2025-01-05T20:49:35.552Z","url":"/api/v1/auth/update-password"}
{"level":"error","message":"Password corrente non valida","timestamp":"2025-01-05T20:49:35.553Z"}
{"level":"error","message":"jwt malformed","name":"JsonWebTokenError","timestamp":"2025-01-05T20:49:41.597Z"}
{"body":{},"error":{"message":"Non autorizzato ad accedere a questa risorsa"},"level":"error","message":"Errore richiesta","method":"GET","query":{},"requestId":"req_1736110181595_z3ryqts5t","timestamp":"2025-01-05T20:49:41.598Z","url":"/api/v1/auth/me"}
{"level":"error","message":"Non autorizzato ad accedere a questa risorsa","timestamp":"2025-01-05T20:49:41.598Z"}
{"error":{},"level":"error","message":"Errore durante il login","timestamp":"2025-01-05T20:56:51.832Z"}
{"body":{"email":"admin@test.com","password":"[REDACTED]"},"error":{"message":"createError is not defined","stack":"ReferenceError: createError is not defined\n    at UserRepository.verifyCredentials (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\UserRepository.js:115:13)\n    at async AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:101:26)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736110611715_cbsbz2nka","timestamp":"2025-01-05T20:56:51.834Z","url":"/api/v1/auth/login"}
{"level":"error","message":"createError is not defined","stack":"ReferenceError: createError is not defined\n    at UserRepository.verifyCredentials (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\UserRepository.js:115:13)\n    at async AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:101:26)","timestamp":"2025-01-05T20:56:51.835Z"}
{"error":{},"level":"error","message":"Errore durante il login","timestamp":"2025-01-05T20:58:10.864Z"}
{"body":{"email":"admin@test.com","password":"[REDACTED]"},"error":{"message":"createError is not defined","stack":"ReferenceError: createError is not defined\n    at UserRepository.verifyCredentials (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\UserRepository.js:115:13)\n    at async AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:101:26)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736110690732_15543nlhf","timestamp":"2025-01-05T20:58:10.866Z","url":"/api/v1/auth/login"}
{"level":"error","message":"createError is not defined","stack":"ReferenceError: createError is not defined\n    at UserRepository.verifyCredentials (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\UserRepository.js:115:13)\n    at async AuthController.login (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\authController.js:101:26)","timestamp":"2025-01-05T20:58:10.869Z"}
{"error":{"_message":"User validation failed","errors":{"role":{"kind":"required","message":"Path `role` is required.","name":"ValidatorError","path":"role","properties":{"message":"Path `role` is required.","path":"role","type":"required"}}},"message":"User validation failed: role: Path `role` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di User","timestamp":"2025-01-05T21:30:32.259Z"}
{"error":{"code":"DB_001","message":"Errore nella creazione di User","metadata":{"originalError":"User validation failed: role: Path `role` is required."},"status":500},"level":"error","message":"Errore durante la registrazione","timestamp":"2025-01-05T21:30:32.260Z"}

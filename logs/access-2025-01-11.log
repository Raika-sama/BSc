{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-10T23:11:28.748Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-10T23:11:28.766Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-10T23:11:28.769Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-10T23:11:28.772Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-10T23:11:28.775Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-10T23:11:28.782Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-10T23:11:28.853Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-10T23:11:28.900Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-10T23:11:29.697Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-10T23:11:29.717Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-10T23:11:29.718Z"}
{"body":{"email":"admin@test.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550689947_jipptyfed","timestamp":"2025-01-10T23:11:29.948Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-10T23:11:29.956Z"}
{"duration":"209ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736550689947_jipptyfed","responseSize":"472 Bytes","statusCode":200,"timestamp":"2025-01-10T23:11:30.156Z","url":"/api/v1/auth/login"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736550690179_4dwfrt4p0","timestamp":"2025-01-10T23:11:30.179Z","url":"/api/v1/auth/verify"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-01-10T23:11:30.187Z"}
{"hasSchool":false,"level":"info","message":"Autenticazione completata con successo:","role":"admin","timestamp":"2025-01-10T23:11:30.238Z","userId":"6781a9203f033e6bb1440eb6"}
{"level":"info","message":"Verifica token in corso per utente:","timestamp":"2025-01-10T23:11:30.240Z","userId":"6781a9203f033e6bb1440eb6"}
{"duration":"63ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736550690179_4dwfrt4p0","responseSize":"158 Bytes","statusCode":200,"timestamp":"2025-01-10T23:11:30.242Z","url":"/api/v1/auth/verify"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550690264_j378453ic","timestamp":"2025-01-10T23:11:30.264Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"Autenticazione completata con successo:","role":"admin","timestamp":"2025-01-10T23:11:30.306Z","userId":"6781a9203f033e6bb1440eb6"}
{"hasSchool":false,"level":"info","message":"Autenticazione completata con successo:","role":"admin","timestamp":"2025-01-10T23:11:30.342Z","userId":"6781a9203f033e6bb1440eb6"}
{"createdBy":"6781a9203f033e6bb1440eb6","level":"info","message":"Scuola creata con successo","schoolId":"6781a9223f033e6bb1440ecd","schoolName":"Integration Test School","timestamp":"2025-01-10T23:11:30.398Z"}
{"duration":"137ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736550690264_j378453ic","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-10T23:11:30.401Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550690420_awb7tiw29","timestamp":"2025-01-10T23:11:30.420Z","url":"/api/v1/schools/6781a9223f033e6bb1440ecd/setup"}
{"hasSchool":false,"level":"info","message":"Autenticazione completata con successo:","role":"admin","timestamp":"2025-01-10T23:11:30.461Z","userId":"6781a9203f033e6bb1440eb6"}
{"hasSchool":false,"level":"info","message":"Autenticazione completata con successo:","role":"admin","timestamp":"2025-01-10T23:11:30.496Z","userId":"6781a9203f033e6bb1440eb6"}
{"duration":"509ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736550690420_awb7tiw29","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-10T23:11:30.929Z","url":"/api/v1/schools/6781a9223f033e6bb1440ecd/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736550690943_je1wojm9d","timestamp":"2025-01-10T23:11:30.943Z","url":"/api/v1/classes/school/6781a9223f033e6bb1440ecd/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"Autenticazione completata con successo:","role":"admin","timestamp":"2025-01-10T23:11:30.989Z","userId":"6781a9203f033e6bb1440eb6"}
{"hasSchool":false,"level":"info","message":"Autenticazione completata con successo:","role":"admin","timestamp":"2025-01-10T23:11:31.026Z","userId":"6781a9203f033e6bb1440eb6"}
{"duration":"124ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736550690943_je1wojm9d","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-10T23:11:31.067Z","url":"/api/v1/classes/school/6781a9223f033e6bb1440ecd/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781a9233f033e6bb1440f3d","sections":[{"maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550691317_af1hyfdhi","timestamp":"2025-01-10T23:11:31.317Z","url":"/api/v1/classes/transition"}
{"error":"Utente non trovato","level":"error","message":"Errore di autenticazione:","timestamp":"2025-01-10T23:11:31.353Z"}
{"duration":"40ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736550691317_af1hyfdhi","responseSize":"79 Bytes","statusCode":401,"timestamp":"2025-01-10T23:11:31.357Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550691508_ugvoe2yl3","timestamp":"2025-01-10T23:11:31.508Z","url":"/api/v1/schools"}
{"error":"Utente non trovato","level":"error","message":"Errore di autenticazione:","timestamp":"2025-01-10T23:11:31.545Z"}
{"duration":"41ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736550691508_ugvoe2yl3","responseSize":"79 Bytes","statusCode":401,"timestamp":"2025-01-10T23:11:31.549Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550691713_pj5lgg5g2","timestamp":"2025-01-10T23:11:31.713Z","url":"/api/v1/schools/6781a9233f033e6bb1440f55/setup"}
{"error":"Utente non trovato","level":"error","message":"Errore di autenticazione:","timestamp":"2025-01-10T23:11:31.752Z"}
{"duration":"43ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736550691713_pj5lgg5g2","responseSize":"79 Bytes","statusCode":401,"timestamp":"2025-01-10T23:11:31.756Z","url":"/api/v1/schools/6781a9233f033e6bb1440f55/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-10T23:11:31.953Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-10T23:14:31.398Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-10T23:14:31.406Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-10T23:14:31.408Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-10T23:14:31.411Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-10T23:14:31.413Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-10T23:14:31.415Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-10T23:14:31.466Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-10T23:14:31.488Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-10T23:14:32.073Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-10T23:14:32.089Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-10T23:14:32.090Z"}
{"body":{"email":"admin@test.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550872300_4oi21e6wg","timestamp":"2025-01-10T23:14:32.300Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-10T23:14:32.306Z"}
{"duration":"205ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736550872300_4oi21e6wg","responseSize":"472 Bytes","statusCode":200,"timestamp":"2025-01-10T23:14:32.505Z","url":"/api/v1/auth/login"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736550872527_fwitp4x64","timestamp":"2025-01-10T23:14:32.527Z","url":"/api/v1/auth/verify"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-01-10T23:14:32.534Z"}
{"errorMessage":"getTokenFromRequest is not defined","errorName":"ReferenceError","level":"error","message":"Protect middleware error","timestamp":"2025-01-10T23:14:32.545Z"}
{"error":{},"level":"error","message":"Unhandled Auth Route Error","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-01-10T23:14:32.551Z"}
{"duration":"29ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"GET","requestId":"req_1736550872527_fwitp4x64","responseSize":"91 Bytes","statusCode":500,"timestamp":"2025-01-10T23:14:32.556Z","url":"/api/v1/auth/verify"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-10T23:14:33.118Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-10T23:14:51.796Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-10T23:14:51.803Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-10T23:14:51.805Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-10T23:14:51.808Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-10T23:14:51.810Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-10T23:14:51.812Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-10T23:14:51.854Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-10T23:14:51.876Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-10T23:14:52.426Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-10T23:14:52.440Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-10T23:14:52.441Z"}
{"body":{"email":"admin@test.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550892642_8g394xcwu","timestamp":"2025-01-10T23:14:52.643Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-10T23:14:52.649Z"}
{"duration":"185ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736550892642_8g394xcwu","responseSize":"472 Bytes","statusCode":200,"timestamp":"2025-01-10T23:14:52.827Z","url":"/api/v1/auth/login"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736550892852_vzckdins8","timestamp":"2025-01-10T23:14:52.852Z","url":"/api/v1/auth/verify"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-01-10T23:14:52.860Z"}
{"hasSchool":false,"level":"info","message":"Autenticazione completata con successo:","role":"admin","timestamp":"2025-01-10T23:14:52.892Z","userId":"6781a9ebbf77a21ba0cb272a"}
{"level":"info","message":"Verifica token in corso per utente:","timestamp":"2025-01-10T23:14:52.895Z","userId":"6781a9ebbf77a21ba0cb272a"}
{"duration":"46ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736550892852_vzckdins8","responseSize":"158 Bytes","statusCode":200,"timestamp":"2025-01-10T23:14:52.898Z","url":"/api/v1/auth/verify"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550892925_05jrhgdbx","timestamp":"2025-01-10T23:14:52.925Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"Autenticazione completata con successo:","role":"admin","timestamp":"2025-01-10T23:14:52.953Z","userId":"6781a9ebbf77a21ba0cb272a"}
{"hasSchool":false,"level":"info","message":"Autenticazione completata con successo:","role":"admin","timestamp":"2025-01-10T23:14:52.978Z","userId":"6781a9ebbf77a21ba0cb272a"}
{"createdBy":"6781a9ebbf77a21ba0cb272a","level":"info","message":"Scuola creata con successo","schoolId":"6781a9ecbf77a21ba0cb2740","schoolName":"Integration Test School","timestamp":"2025-01-10T23:14:53.017Z"}
{"duration":"95ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736550892925_05jrhgdbx","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-10T23:14:53.020Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550893036_53nclkls0","timestamp":"2025-01-10T23:14:53.036Z","url":"/api/v1/schools/6781a9ecbf77a21ba0cb2740/setup"}
{"hasSchool":false,"level":"info","message":"Autenticazione completata con successo:","role":"admin","timestamp":"2025-01-10T23:14:53.066Z","userId":"6781a9ebbf77a21ba0cb272a"}
{"hasSchool":false,"level":"info","message":"Autenticazione completata con successo:","role":"admin","timestamp":"2025-01-10T23:14:53.094Z","userId":"6781a9ebbf77a21ba0cb272a"}
{"duration":"489ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736550893036_53nclkls0","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-10T23:14:53.525Z","url":"/api/v1/schools/6781a9ecbf77a21ba0cb2740/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736550893538_wkr3iu8fp","timestamp":"2025-01-10T23:14:53.538Z","url":"/api/v1/classes/school/6781a9ecbf77a21ba0cb2740/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"Autenticazione completata con successo:","role":"admin","timestamp":"2025-01-10T23:14:53.569Z","userId":"6781a9ebbf77a21ba0cb272a"}
{"hasSchool":false,"level":"info","message":"Autenticazione completata con successo:","role":"admin","timestamp":"2025-01-10T23:14:53.595Z","userId":"6781a9ebbf77a21ba0cb272a"}
{"duration":"95ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736550893538_wkr3iu8fp","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-10T23:14:53.633Z","url":"/api/v1/classes/school/6781a9ecbf77a21ba0cb2740/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781a9edbf77a21ba0cb27b1","sections":[{"maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550893871_v7i2ofgfj","timestamp":"2025-01-10T23:14:53.871Z","url":"/api/v1/classes/transition"}
{"error":"Utente non trovato","level":"error","message":"Errore di autenticazione:","timestamp":"2025-01-10T23:14:53.899Z"}
{"duration":"31ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736550893871_v7i2ofgfj","responseSize":"79 Bytes","statusCode":401,"timestamp":"2025-01-10T23:14:53.902Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550894056_dy4yb0syb","timestamp":"2025-01-10T23:14:54.057Z","url":"/api/v1/schools"}
{"error":"Utente non trovato","level":"error","message":"Errore di autenticazione:","timestamp":"2025-01-10T23:14:54.087Z"}
{"duration":"35ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736550894056_dy4yb0syb","responseSize":"79 Bytes","statusCode":401,"timestamp":"2025-01-10T23:14:54.092Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550894251_k6g7vtjkz","timestamp":"2025-01-10T23:14:54.251Z","url":"/api/v1/schools/6781a9eebf77a21ba0cb27c9/setup"}
{"error":"Utente non trovato","level":"error","message":"Errore di autenticazione:","timestamp":"2025-01-10T23:14:54.281Z"}
{"duration":"34ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736550894251_k6g7vtjkz","responseSize":"79 Bytes","statusCode":401,"timestamp":"2025-01-10T23:14:54.285Z","url":"/api/v1/schools/6781a9eebf77a21ba0cb27c9/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-10T23:14:54.455Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-10T23:16:35.505Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-10T23:16:35.514Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-10T23:16:35.516Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-10T23:16:35.523Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-10T23:16:35.526Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-10T23:16:35.527Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-10T23:16:35.562Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-10T23:16:35.585Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-10T23:16:36.198Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-10T23:16:36.219Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-10T23:16:36.221Z"}
{"body":{"email":"admin@test.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550996428_mb2i7u83b","timestamp":"2025-01-10T23:16:36.429Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-10T23:16:36.435Z"}
{"duration":"190ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736550996428_mb2i7u83b","responseSize":"472 Bytes","statusCode":200,"timestamp":"2025-01-10T23:16:36.618Z","url":"/api/v1/auth/login"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736550996641_vr632pcui","timestamp":"2025-01-10T23:16:36.641Z","url":"/api/v1/auth/verify"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-01-10T23:16:36.649Z"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-10T23:16:36.676Z","tokenExpiresIn":"1439.9887333333331 minutes","userId":"6781aa53ee949238d923aaa5"}
{"level":"info","message":"Verifica token in corso per utente:","timestamp":"2025-01-10T23:16:36.679Z","userId":"6781aa53ee949238d923aaa5"}
{"duration":"41ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736550996641_vr632pcui","responseSize":"158 Bytes","statusCode":200,"timestamp":"2025-01-10T23:16:36.682Z","url":"/api/v1/auth/verify"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550996707_fjgie26pi","timestamp":"2025-01-10T23:16:36.707Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-10T23:16:36.735Z","tokenExpiresIn":"1439.98775 minutes","userId":"6781aa53ee949238d923aaa5"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-10T23:16:36.763Z","tokenExpiresIn":"1439.9872833333332 minutes","userId":"6781aa53ee949238d923aaa5"}
{"createdBy":"6781aa53ee949238d923aaa5","level":"info","message":"Scuola creata con successo","schoolId":"6781aa54ee949238d923aabb","schoolName":"Integration Test School","timestamp":"2025-01-10T23:16:36.803Z"}
{"duration":"99ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736550996707_fjgie26pi","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-10T23:16:36.806Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550996825_c0eifciln","timestamp":"2025-01-10T23:16:36.825Z","url":"/api/v1/schools/6781aa54ee949238d923aabb/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-10T23:16:36.853Z","tokenExpiresIn":"1439.9857833333333 minutes","userId":"6781aa53ee949238d923aaa5"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-10T23:16:36.878Z","tokenExpiresIn":"1439.9853666666668 minutes","userId":"6781aa53ee949238d923aaa5"}
{"duration":"458ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736550996825_c0eifciln","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-10T23:16:37.283Z","url":"/api/v1/schools/6781aa54ee949238d923aabb/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736550997297_aooce3mon","timestamp":"2025-01-10T23:16:37.297Z","url":"/api/v1/classes/school/6781aa54ee949238d923aabb/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-10T23:16:37.328Z","tokenExpiresIn":"1439.9778666666668 minutes","userId":"6781aa53ee949238d923aaa5"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-10T23:16:37.353Z","tokenExpiresIn":"1439.9774499999999 minutes","userId":"6781aa53ee949238d923aaa5"}
{"duration":"94ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736550997297_aooce3mon","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-10T23:16:37.391Z","url":"/api/v1/classes/school/6781aa54ee949238d923aabb/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781aa55ee949238d923ab2c","sections":[{"maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550997631_g475fwbpt","timestamp":"2025-01-10T23:16:37.631Z","url":"/api/v1/classes/transition"}
{"level":"warn","message":"❌ User not found in database","timestamp":"2025-01-10T23:16:37.658Z","userId":"6781aa53ee949238d923aaa5"}
{"errorMessage":"Utente non trovato","level":"error","message":"🔥 Authentication Error","timestamp":"2025-01-10T23:16:37.660Z"}
{"duration":"32ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736550997631_g475fwbpt","responseSize":"79 Bytes","statusCode":401,"timestamp":"2025-01-10T23:16:37.663Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550997817_4ku77w3ft","timestamp":"2025-01-10T23:16:37.817Z","url":"/api/v1/schools"}
{"level":"warn","message":"❌ User not found in database","timestamp":"2025-01-10T23:16:37.847Z","userId":"6781aa53ee949238d923aaa5"}
{"errorMessage":"Utente non trovato","level":"error","message":"🔥 Authentication Error","timestamp":"2025-01-10T23:16:37.849Z"}
{"duration":"36ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736550997817_4ku77w3ft","responseSize":"79 Bytes","statusCode":401,"timestamp":"2025-01-10T23:16:37.853Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736550998019_kj13u4mht","timestamp":"2025-01-10T23:16:38.019Z","url":"/api/v1/schools/6781aa55ee949238d923ab44/setup"}
{"level":"warn","message":"❌ User not found in database","timestamp":"2025-01-10T23:16:38.046Z","userId":"6781aa53ee949238d923aaa5"}
{"errorMessage":"Utente non trovato","level":"error","message":"🔥 Authentication Error","timestamp":"2025-01-10T23:16:38.048Z"}
{"duration":"32ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736550998019_kj13u4mht","responseSize":"79 Bytes","statusCode":401,"timestamp":"2025-01-10T23:16:38.051Z","url":"/api/v1/schools/6781aa55ee949238d923ab44/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-10T23:16:38.235Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-10T23:49:29.536Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-10T23:49:29.551Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-10T23:49:29.555Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-10T23:49:29.557Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-10T23:49:29.559Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-10T23:49:29.562Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-10T23:49:29.627Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-10T23:49:29.655Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-10T23:49:30.275Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-10T23:49:30.310Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-10T23:49:30.319Z"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-10T23:49:31.218Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-10T23:55:43.085Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-10T23:55:43.099Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-10T23:55:43.101Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-10T23:55:43.103Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-10T23:55:43.105Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-10T23:55:43.107Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-10T23:55:43.146Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-10T23:55:43.165Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-10T23:55:43.623Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-10T23:55:43.642Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-10T23:55:43.644Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736553344064_w2doq7cw4","timestamp":"2025-01-10T23:55:44.065Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-10T23:55:44.072Z"}
{"email":"admin.sama@brainscanner.com","level":"warn","message":"Tentativo di login con password errata","timestamp":"2025-01-10T23:55:44.199Z"}
{"error":{"code":"AUTH_001","message":"Credenziali non valide","metadata":{},"status":401},"level":"error","message":"Errore durante il login","timestamp":"2025-01-10T23:55:44.201Z"}
{"duration":"155ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736553344064_w2doq7cw4","responseSize":"71 Bytes","statusCode":401,"timestamp":"2025-01-10T23:55:44.219Z","url":"/api/v1/auth/login"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-10T23:55:44.894Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-10T23:58:29.183Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-10T23:58:29.198Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-10T23:58:29.200Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-10T23:58:29.202Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-10T23:58:29.204Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-10T23:58:29.206Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-10T23:58:29.243Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-10T23:58:29.265Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-10T23:58:29.746Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-10T23:58:29.766Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-10T23:58:29.767Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736553510056_cahoe96cq","timestamp":"2025-01-10T23:58:30.056Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-10T23:58:30.062Z"}
{"email":"admin.sama@brainscanner.com","level":"warn","message":"Tentativo di login con password errata","timestamp":"2025-01-10T23:58:30.195Z"}
{"error":{"code":"AUTH_001","message":"Credenziali non valide","metadata":{},"status":401},"level":"error","message":"Errore durante il login","timestamp":"2025-01-10T23:58:30.197Z"}
{"duration":"147ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736553510056_cahoe96cq","responseSize":"71 Bytes","statusCode":401,"timestamp":"2025-01-10T23:58:30.204Z","url":"/api/v1/auth/login"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-10T23:58:30.776Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:01:35.371Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:01:35.382Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:01:35.388Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:01:35.390Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:01:35.392Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:01:35.394Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:01:35.430Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:01:35.458Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-11T00:01:35.965Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:01:35.983Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:01:35.985Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736553696230_mxxgu1k4s","timestamp":"2025-01-11T00:01:36.230Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:01:36.236Z"}
{"email":"admin.sama@brainscanner.com","level":"warn","message":"Tentativo di login con password errata","timestamp":"2025-01-11T00:01:36.366Z"}
{"error":{"code":"AUTH_001","message":"Credenziali non valide","metadata":{},"status":401},"level":"error","message":"Errore durante il login","timestamp":"2025-01-11T00:01:36.368Z"}
{"duration":"145ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736553696230_mxxgu1k4s","responseSize":"71 Bytes","statusCode":401,"timestamp":"2025-01-11T00:01:36.375Z","url":"/api/v1/auth/login"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T00:01:36.921Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:02:48.156Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:02:48.171Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:02:48.173Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:02:48.175Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:02:48.177Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:02:48.179Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:02:48.215Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:02:48.236Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-11T00:02:48.697Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:02:48.713Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:02:48.715Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736553768967_785qq76x4","timestamp":"2025-01-11T00:02:48.968Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:02:48.973Z"}
{"email":"admin.sama@brainscanner.com","level":"warn","message":"Tentativo di login con password errata","timestamp":"2025-01-11T00:02:49.098Z"}
{"error":{"code":"AUTH_001","message":"Credenziali non valide","metadata":{},"status":401},"level":"error","message":"Errore durante il login","timestamp":"2025-01-11T00:02:49.099Z"}
{"duration":"139ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736553768967_785qq76x4","responseSize":"71 Bytes","statusCode":401,"timestamp":"2025-01-11T00:02:49.106Z","url":"/api/v1/auth/login"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T00:02:49.663Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:06:24.319Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:06:24.339Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:06:24.342Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:06:24.345Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:06:24.347Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:06:24.350Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:06:24.391Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:06:24.416Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-11T00:06:24.888Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:06:24.912Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:06:24.914Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736553985116_00jwj1m6v","timestamp":"2025-01-11T00:06:25.116Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:06:25.131Z"}
{"email":"admin.sama@brainscanner.com","level":"warn","message":"Tentativo di login con password errata","timestamp":"2025-01-11T00:06:25.257Z"}
{"error":{"code":"AUTH_001","message":"Credenziali non valide","metadata":{},"status":401},"level":"error","message":"Errore durante il login","timestamp":"2025-01-11T00:06:25.259Z"}
{"duration":"149ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736553985116_00jwj1m6v","responseSize":"71 Bytes","statusCode":401,"timestamp":"2025-01-11T00:06:25.265Z","url":"/api/v1/auth/login"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T00:06:25.875Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:09:06.472Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:09:06.491Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:09:06.494Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:09:06.496Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:09:06.498Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:09:06.500Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:09:06.562Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:09:06.594Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-11T00:09:07.072Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:09:07.105Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:09:07.107Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554147481_6fhm2tbz6","timestamp":"2025-01-11T00:09:07.482Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:09:07.490Z"}
{"email":"admin.sama@brainscanner.com","level":"warn","message":"Tentativo di login con password errata","timestamp":"2025-01-11T00:09:07.639Z"}
{"error":{"code":"AUTH_001","message":"Credenziali non valide","metadata":{},"status":401},"level":"error","message":"Errore durante il login","timestamp":"2025-01-11T00:09:07.641Z"}
{"duration":"168ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736554147481_6fhm2tbz6","responseSize":"71 Bytes","statusCode":401,"timestamp":"2025-01-11T00:09:07.649Z","url":"/api/v1/auth/login"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T00:09:08.191Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:11:07.329Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:11:07.340Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:11:07.342Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:11:07.344Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:11:07.346Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:11:07.353Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:11:07.389Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:11:07.410Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-11T00:11:07.913Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:11:07.929Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:11:07.930Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554268211_kf4c2zfl0","timestamp":"2025-01-11T00:11:08.211Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:11:08.217Z"}
{"duration":"226ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736554268211_kf4c2zfl0","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T00:11:08.438Z","url":"/api/v1/auth/login"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736554268459_03i89muab","timestamp":"2025-01-11T00:11:08.459Z","url":"/api/v1/auth/verify"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-01-11T00:11:08.466Z"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:11:08.499Z","tokenExpiresIn":"1439.9916833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"level":"info","message":"Verifica token in corso per utente:","timestamp":"2025-01-11T00:11:08.504Z","userId":"6781b04838bdacd26c739bc9"}
{"duration":"49ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736554268459_03i89muab","responseSize":"158 Bytes","statusCode":200,"timestamp":"2025-01-11T00:11:08.509Z","url":"/api/v1/auth/verify"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T00:11:09.139Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:15:31.393Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:15:31.405Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:15:31.407Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:15:31.410Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:15:31.412Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:15:31.415Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:15:31.451Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:15:31.472Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-11T00:15:31.937Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:15:31.958Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:15:31.964Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554532161_1oplr5ev6","timestamp":"2025-01-11T00:15:32.161Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:15:32.167Z"}
{"duration":"208ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736554532161_1oplr5ev6","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T00:15:32.369Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554532395_9ffyerxb1","timestamp":"2025-01-11T00:15:32.395Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:15:32.424Z","tokenExpiresIn":"1439.9929333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:15:32.448Z","tokenExpiresIn":"1439.9925333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781b8247dad404493661b0b","schoolName":"Integration Test School","timestamp":"2025-01-11T00:15:32.504Z"}
{"duration":"113ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736554532395_9ffyerxb1","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T00:15:32.508Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554532524_ul0nawn1w","timestamp":"2025-01-11T00:15:32.524Z","url":"/api/v1/schools/6781b8247dad404493661b0b/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:15:32.554Z","tokenExpiresIn":"1439.9907666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:15:32.592Z","tokenExpiresIn":"1439.9901333333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"521ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736554532524_ul0nawn1w","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T00:15:33.045Z","url":"/api/v1/schools/6781b8247dad404493661b0b/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736554533060_ukw423vp2","timestamp":"2025-01-11T00:15:33.060Z","url":"/api/v1/classes/school/6781b8247dad404493661b0b/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:15:33.090Z","tokenExpiresIn":"1439.9818333333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:15:33.117Z","tokenExpiresIn":"1439.9813833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"109ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736554533060_ukw423vp2","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T00:15:33.169Z","url":"/api/v1/classes/school/6781b8247dad404493661b0b/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781b8257dad404493661b7d","sections":[{"maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554533413_rxj8383b3","timestamp":"2025-01-11T00:15:33.413Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:15:33.442Z","tokenExpiresIn":"1439.9759666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:15:33.469Z","tokenExpiresIn":"1439.9755166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781b8257dad404493661b96","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:15:33.772Z","isActive":true,"mainTeacher":null,"schoolId":"6781b8257dad404493661b7d","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:15:33.772Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781b8257dad404493661b96"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T00:15:33.799Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781b8257dad404493661b7d'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781b8257dad404493661b97","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:15:33.773Z","isActive":true,"mainTeacher":null,"schoolId":"6781b8257dad404493661b7d","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:15:33.773Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781b8257dad404493661b7d'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T00:15:33.802Z"}
{"duration":"392ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736554533413_rxj8383b3","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T00:15:33.805Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554533975_3lf9c88r4","timestamp":"2025-01-11T00:15:33.975Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:15:34.009Z","tokenExpiresIn":"1439.9665166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:15:34.036Z","tokenExpiresIn":"1439.9660666666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T00:15:34.044Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T00:15:34.047Z"}
{"duration":"75ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736554533975_3lf9c88r4","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T00:15:34.051Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554534239_ye53r6yz9","timestamp":"2025-01-11T00:15:34.239Z","url":"/api/v1/schools/6781b8267dad404493661baf/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:15:34.270Z","tokenExpiresIn":"1439.9621666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:15:34.306Z","tokenExpiresIn":"1439.9615666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"71ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736554534239_ye53r6yz9","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T00:15:34.310Z","url":"/api/v1/schools/6781b8267dad404493661baf/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T00:15:34.476Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:19:20.948Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:19:20.959Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:19:20.961Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:19:20.963Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:19:20.964Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:19:20.966Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:19:21.005Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:19:21.025Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-11T00:19:21.473Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:19:21.499Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:19:21.500Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554761693_1cjw6017m","timestamp":"2025-01-11T00:19:21.694Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:19:21.700Z"}
{"duration":"192ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736554761693_1cjw6017m","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T00:19:21.885Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554761915_zapfk11a1","timestamp":"2025-01-11T00:19:21.915Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:19:22.142Z","tokenExpiresIn":"1439.9809666666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:19:22.167Z","tokenExpiresIn":"1439.98055 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781b90af92e709cd8563959","schoolName":"Integration Test School","timestamp":"2025-01-11T00:19:22.207Z"}
{"duration":"295ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736554761915_zapfk11a1","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T00:19:22.210Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554762226_ptwn4i78i","timestamp":"2025-01-11T00:19:22.226Z","url":"/api/v1/schools/6781b90af92e709cd8563959/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:19:22.255Z","tokenExpiresIn":"1439.9790833333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:19:22.281Z","tokenExpiresIn":"1439.97865 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"452ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736554762226_ptwn4i78i","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T00:19:22.678Z","url":"/api/v1/schools/6781b90af92e709cd8563959/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736554762694_l1y5fm8h7","timestamp":"2025-01-11T00:19:22.695Z","url":"/api/v1/classes/school/6781b90af92e709cd8563959/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:19:22.725Z","tokenExpiresIn":"1439.9712499999998 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:19:22.747Z","tokenExpiresIn":"1439.9708833333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"91ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736554762694_l1y5fm8h7","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T00:19:22.785Z","url":"/api/v1/classes/school/6781b90af92e709cd8563959/year/2024%2F2025"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554763200_6zqkrdsre","timestamp":"2025-01-11T00:19:23.200Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:19:23.228Z","tokenExpiresIn":"1439.9628666666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:19:23.252Z","tokenExpiresIn":"1439.9624666666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T00:19:23.260Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T00:19:23.263Z"}
{"duration":"66ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736554763200_6zqkrdsre","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T00:19:23.266Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554763433_a1vfdy89f","timestamp":"2025-01-11T00:19:23.433Z","url":"/api/v1/schools/6781b90bf92e709cd85639de/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:19:23.461Z","tokenExpiresIn":"1439.9589833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:19:23.484Z","tokenExpiresIn":"1439.9586000000002 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"53ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736554763433_a1vfdy89f","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T00:19:23.487Z","url":"/api/v1/schools/6781b90bf92e709cd85639de/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T00:19:23.648Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:20:52.333Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:20:52.344Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:20:52.346Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:20:52.348Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:20:52.350Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:20:52.352Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:20:52.392Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:20:52.412Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-11T00:20:52.896Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:20:52.916Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:20:52.918Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554853122_q4x0gxdsm","timestamp":"2025-01-11T00:20:53.122Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:20:53.129Z"}
{"duration":"200ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736554853122_q4x0gxdsm","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T00:20:53.322Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554853347_hqo50w6ne","timestamp":"2025-01-11T00:20:53.347Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:20:53.377Z","tokenExpiresIn":"1439.9937166666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:20:53.403Z","tokenExpiresIn":"1439.9932833333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781b9656738e71bec88a4c9","schoolName":"Integration Test School","timestamp":"2025-01-11T00:20:53.441Z"}
{"duration":"97ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736554853347_hqo50w6ne","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T00:20:53.444Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554853459_4i3fiqlcm","timestamp":"2025-01-11T00:20:53.459Z","url":"/api/v1/schools/6781b9656738e71bec88a4c9/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:20:53.489Z","tokenExpiresIn":"1439.9918499999999 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:20:53.515Z","tokenExpiresIn":"1439.9914166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"471ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736554853459_4i3fiqlcm","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T00:20:53.930Z","url":"/api/v1/schools/6781b9656738e71bec88a4c9/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736554853949_pyhvgrx2x","timestamp":"2025-01-11T00:20:53.949Z","url":"/api/v1/classes/school/6781b9656738e71bec88a4c9/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:20:53.986Z","tokenExpiresIn":"1439.9835666666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:20:54.020Z","tokenExpiresIn":"1439.983 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"125ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736554853949_pyhvgrx2x","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T00:20:54.074Z","url":"/api/v1/classes/school/6781b9656738e71bec88a4c9/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781b9666738e71bec88a53b","sections":[{"maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554854366_zl5u0fabj","timestamp":"2025-01-11T00:20:54.366Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:20:54.396Z","tokenExpiresIn":"1439.9767333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:20:54.420Z","tokenExpiresIn":"1439.9763333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781b9666738e71bec88a555","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:20:54.706Z","isActive":true,"mainTeacher":null,"schoolId":"6781b9666738e71bec88a53b","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:20:54.706Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781b9666738e71bec88a555"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T00:20:54.732Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781b9666738e71bec88a53b'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781b9666738e71bec88a556","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:20:54.706Z","isActive":true,"mainTeacher":null,"schoolId":"6781b9666738e71bec88a53b","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:20:54.706Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781b9666738e71bec88a53b'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T00:20:54.736Z"}
{"duration":"372ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736554854366_zl5u0fabj","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T00:20:54.738Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554854892_9iudnz9zk","timestamp":"2025-01-11T00:20:54.892Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:20:54.923Z","tokenExpiresIn":"1439.96795 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:20:54.951Z","tokenExpiresIn":"1439.9674833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T00:20:54.960Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T00:20:54.965Z"}
{"duration":"76ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736554854892_9iudnz9zk","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T00:20:54.968Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554855138_5eisosbci","timestamp":"2025-01-11T00:20:55.138Z","url":"/api/v1/schools/6781b9676738e71bec88a56e/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:20:55.164Z","tokenExpiresIn":"1439.9639333333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:20:55.187Z","tokenExpiresIn":"1439.96355 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"53ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736554855138_5eisosbci","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T00:20:55.191Z","url":"/api/v1/schools/6781b9676738e71bec88a56e/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T00:20:55.347Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:23:12.445Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:23:12.455Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:23:12.458Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:23:12.460Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:23:12.462Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:23:12.464Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:23:12.502Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:23:12.521Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-11T00:23:12.995Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:23:13.020Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:23:13.021Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554993220_epj9gxhsz","timestamp":"2025-01-11T00:23:13.221Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:23:13.227Z"}
{"duration":"193ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736554993220_epj9gxhsz","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T00:23:13.414Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554993449_f95f24z2i","timestamp":"2025-01-11T00:23:13.449Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:13.479Z","tokenExpiresIn":"1439.9920166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:13.503Z","tokenExpiresIn":"1439.9916166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781b9f159f5dfed02c44435","schoolName":"Integration Test School","timestamp":"2025-01-11T00:23:13.547Z"}
{"duration":"101ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736554993449_f95f24z2i","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T00:23:13.550Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554993565_53iwaemrc","timestamp":"2025-01-11T00:23:13.565Z","url":"/api/v1/schools/6781b9f159f5dfed02c44435/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:13.591Z","tokenExpiresIn":"1439.99015 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:13.619Z","tokenExpiresIn":"1439.9896833333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"451ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736554993565_53iwaemrc","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T00:23:14.016Z","url":"/api/v1/schools/6781b9f159f5dfed02c44435/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736554994028_h2guny13q","timestamp":"2025-01-11T00:23:14.028Z","url":"/api/v1/classes/school/6781b9f159f5dfed02c44435/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:14.063Z","tokenExpiresIn":"1439.9822833333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:14.089Z","tokenExpiresIn":"1439.98185 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"99ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736554994028_h2guny13q","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T00:23:14.127Z","url":"/api/v1/classes/school/6781b9f159f5dfed02c44435/year/2024%2F2025"}
{"body":{"academicYear":{"endDate":"2026-06-30","startDate":"2025-09-01","status":"planned"},"fromYear":"2024/2025","schoolId":"6781b9f259f5dfed02c444a8","sections":[{"maxStudents":25,"name":"A","status":"planned"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554994407_lnpbqcbro","timestamp":"2025-01-11T00:23:14.407Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:14.445Z","tokenExpiresIn":"1439.9759166666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:14.468Z","tokenExpiresIn":"1439.9755333333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781b9f259f5dfed02c444cd","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:23:14.764Z","isActive":true,"mainTeacher":null,"schoolId":"6781b9f259f5dfed02c444a8","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:23:14.764Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781b9f259f5dfed02c444cd"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T00:23:14.789Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781b9f259f5dfed02c444a8'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781b9f259f5dfed02c444ce","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:23:14.765Z","isActive":true,"mainTeacher":null,"schoolId":"6781b9f259f5dfed02c444a8","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:23:14.765Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781b9f259f5dfed02c444a8'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T00:23:14.793Z"}
{"duration":"388ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736554994407_lnpbqcbro","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T00:23:14.795Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554994995_xnw1nzi2l","timestamp":"2025-01-11T00:23:14.995Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:15.031Z","tokenExpiresIn":"1439.96615 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:15.057Z","tokenExpiresIn":"1439.9657166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T00:23:15.063Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T00:23:15.065Z"}
{"duration":"74ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736554994995_xnw1nzi2l","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T00:23:15.069Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736554995234_w3qj3sx5o","timestamp":"2025-01-11T00:23:15.234Z","url":"/api/v1/schools/6781b9f359f5dfed02c444ec/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:15.262Z","tokenExpiresIn":"1439.9623 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:15.287Z","tokenExpiresIn":"1439.9618833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"56ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736554995234_w3qj3sx5o","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T00:23:15.290Z","url":"/api/v1/schools/6781b9f359f5dfed02c444ec/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T00:23:15.447Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:23:43.837Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:23:43.848Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:23:43.850Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:23:43.852Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:23:43.854Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:23:43.856Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:23:43.895Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:23:43.915Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-11T00:23:44.375Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:23:44.401Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:23:44.402Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555024624_kvvgx5hjw","timestamp":"2025-01-11T00:23:44.625Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:23:44.632Z"}
{"duration":"189ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736555024624_kvvgx5hjw","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T00:23:44.814Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555024847_rm6vgv01t","timestamp":"2025-01-11T00:23:44.847Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:44.880Z","tokenExpiresIn":"1439.9853333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:44.913Z","tokenExpiresIn":"1439.9847833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781ba1089dc3ed0b9771e9b","schoolName":"Integration Test School","timestamp":"2025-01-11T00:23:44.964Z"}
{"duration":"120ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736555024847_rm6vgv01t","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T00:23:44.967Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555024984_y384lioga","timestamp":"2025-01-11T00:23:44.984Z","url":"/api/v1/schools/6781ba1089dc3ed0b9771e9b/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:45.011Z","tokenExpiresIn":"1439.98315 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:45.037Z","tokenExpiresIn":"1439.9827166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"456ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736555024984_y384lioga","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T00:23:45.440Z","url":"/api/v1/schools/6781ba1089dc3ed0b9771e9b/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736555025454_2tiyi6r0l","timestamp":"2025-01-11T00:23:45.454Z","url":"/api/v1/classes/school/6781ba1089dc3ed0b9771e9b/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:45.487Z","tokenExpiresIn":"1439.9752166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:45.514Z","tokenExpiresIn":"1439.9747666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"99ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736555025454_2tiyi6r0l","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T00:23:45.553Z","url":"/api/v1/classes/school/6781ba1089dc3ed0b9771e9b/year/2024%2F2025"}
{"body":{"academicYear":{"endDate":"2026-06-30","startDate":"2025-09-01","status":"planned"},"fromYear":"2024/2025","schoolId":"6781ba1189dc3ed0b9771f0c","sections":[{"maxStudents":25,"name":"A","status":"planned"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555025832_q05umw5vn","timestamp":"2025-01-11T00:23:45.832Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:45.861Z","tokenExpiresIn":"1439.9689833333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:45.885Z","tokenExpiresIn":"1439.9685833333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781ba1289dc3ed0b9771f31","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:23:46.170Z","isActive":true,"mainTeacher":null,"schoolId":"6781ba1189dc3ed0b9771f0c","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:23:46.170Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781ba1289dc3ed0b9771f31"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T00:23:46.194Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781ba1189dc3ed0b9771f0c'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781ba1289dc3ed0b9771f32","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:23:46.170Z","isActive":true,"mainTeacher":null,"schoolId":"6781ba1189dc3ed0b9771f0c","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:23:46.170Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781ba1189dc3ed0b9771f0c'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T00:23:46.198Z"}
{"duration":"369ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736555025832_q05umw5vn","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T00:23:46.201Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555026378_mvmirdfr0","timestamp":"2025-01-11T00:23:46.378Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:46.410Z","tokenExpiresIn":"1439.9598333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:46.435Z","tokenExpiresIn":"1439.9594166666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T00:23:46.444Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T00:23:46.448Z"}
{"duration":"73ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736555026378_mvmirdfr0","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T00:23:46.451Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555026632_eftrel259","timestamp":"2025-01-11T00:23:46.632Z","url":"/api/v1/schools/6781ba1289dc3ed0b9771f50/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:46.663Z","tokenExpiresIn":"1439.9556166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:23:46.689Z","tokenExpiresIn":"1439.9551833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"60ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736555026632_eftrel259","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T00:23:46.692Z","url":"/api/v1/schools/6781ba1289dc3ed0b9771f50/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T00:23:46.845Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:28:14.792Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:28:14.802Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:28:14.804Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:28:14.806Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:28:14.807Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:28:14.809Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:28:14.847Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:28:14.867Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-11T00:28:15.318Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:28:15.345Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:28:15.346Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555295539_ec3zghj4z","timestamp":"2025-01-11T00:28:15.540Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:28:15.546Z"}
{"duration":"189ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736555295539_ec3zghj4z","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T00:28:15.728Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555295766_ljz32ow5u","timestamp":"2025-01-11T00:28:15.766Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:28:15.936Z","tokenExpiresIn":"1439.9844 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:28:15.965Z","tokenExpiresIn":"1439.9839166666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781bb1f0d22314031f1131e","schoolName":"Integration Test School","timestamp":"2025-01-11T00:28:16.004Z"}
{"duration":"243ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736555295766_ljz32ow5u","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T00:28:16.009Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555296023_u3ekoddfe","timestamp":"2025-01-11T00:28:16.023Z","url":"/api/v1/schools/6781bb1f0d22314031f1131e/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:28:16.052Z","tokenExpiresIn":"1439.9824666666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:28:16.081Z","tokenExpiresIn":"1439.9819833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"460ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736555296023_u3ekoddfe","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T00:28:16.483Z","url":"/api/v1/schools/6781bb1f0d22314031f1131e/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736555296498_b57spk2uu","timestamp":"2025-01-11T00:28:16.498Z","url":"/api/v1/classes/school/6781bb1f0d22314031f1131e/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:28:16.529Z","tokenExpiresIn":"1439.9745166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:28:16.556Z","tokenExpiresIn":"1439.9740666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"97ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736555296498_b57spk2uu","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T00:28:16.595Z","url":"/api/v1/classes/school/6781bb1f0d22314031f1131e/year/2024%2F2025"}
{"body":{"academicYear":{"endDate":"2026-06-30","startDate":"2025-09-01","status":"planned"},"fromYear":"2024/2025","schoolId":"6781bb200d22314031f1138d","sections":[{"maxStudents":25,"name":"A","status":"planned"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555296879_tqsxtud7w","timestamp":"2025-01-11T00:28:16.879Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:28:16.909Z","tokenExpiresIn":"1439.9681833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:28:16.934Z","tokenExpiresIn":"1439.9677666666669 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781bb210d22314031f113b2","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:28:17.257Z","isActive":true,"mainTeacher":null,"schoolId":"6781bb200d22314031f1138d","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:28:17.257Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781bb210d22314031f113b2"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T00:28:17.285Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781bb200d22314031f1138d'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781bb210d22314031f113b3","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:28:17.257Z","isActive":true,"mainTeacher":null,"schoolId":"6781bb200d22314031f1138d","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:28:17.257Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781bb200d22314031f1138d'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T00:28:17.288Z"}
{"duration":"412ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736555296879_tqsxtud7w","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T00:28:17.291Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555297483_3axx3jggc","timestamp":"2025-01-11T00:28:17.483Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:28:17.511Z","tokenExpiresIn":"1439.95815 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:28:17.534Z","tokenExpiresIn":"1439.9577666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T00:28:17.541Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T00:28:17.544Z"}
{"duration":"64ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736555297483_3axx3jggc","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T00:28:17.547Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555297716_e8nxkucw2","timestamp":"2025-01-11T00:28:17.716Z","url":"/api/v1/schools/6781bb210d22314031f113d1/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:28:17.743Z","tokenExpiresIn":"1439.9542833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:28:17.770Z","tokenExpiresIn":"1439.9538333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"57ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736555297716_e8nxkucw2","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T00:28:17.773Z","url":"/api/v1/schools/6781bb210d22314031f113d1/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T00:28:17.944Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:32:44.708Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:32:44.720Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:32:44.723Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:32:44.725Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:32:44.726Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:32:44.728Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:32:44.769Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:32:44.791Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-11T00:32:45.249Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:32:45.275Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:32:45.276Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555565478_oo6xpugk0","timestamp":"2025-01-11T00:32:45.478Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:32:45.485Z"}
{"duration":"209ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736555565478_oo6xpugk0","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T00:32:45.688Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555565718_5h7b4w9ro","timestamp":"2025-01-11T00:32:45.718Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:32:45.751Z","tokenExpiresIn":"1439.9874833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:32:45.776Z","tokenExpiresIn":"1439.9870833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781bc2d2affbe1714ed4146","schoolName":"Integration Test School","timestamp":"2025-01-11T00:32:45.816Z"}
{"duration":"102ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736555565718_5h7b4w9ro","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T00:32:45.820Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555565834_7kegq2zto","timestamp":"2025-01-11T00:32:45.835Z","url":"/api/v1/schools/6781bc2d2affbe1714ed4146/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:32:45.864Z","tokenExpiresIn":"1439.9856 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:32:45.888Z","tokenExpiresIn":"1439.9851999999998 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"503ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736555565834_7kegq2zto","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T00:32:46.337Z","url":"/api/v1/schools/6781bc2d2affbe1714ed4146/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736555566351_falnnpoe7","timestamp":"2025-01-11T00:32:46.351Z","url":"/api/v1/classes/school/6781bc2d2affbe1714ed4146/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:32:46.382Z","tokenExpiresIn":"1439.9769666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:32:46.407Z","tokenExpiresIn":"1439.9765499999999 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"92ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736555566351_falnnpoe7","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T00:32:46.443Z","url":"/api/v1/classes/school/6781bc2d2affbe1714ed4146/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781bc2e2affbe1714ed41b9","sections":[{"maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555566717_ymo8qtbnb","timestamp":"2025-01-11T00:32:46.717Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:32:46.744Z","tokenExpiresIn":"1439.9709333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:32:46.769Z","tokenExpiresIn":"1439.9705166666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781bc2f2affbe1714ed41d3","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:32:47.050Z","isActive":true,"mainTeacher":null,"schoolId":"6781bc2e2affbe1714ed41b9","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:32:47.050Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781bc2f2affbe1714ed41d3"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T00:32:47.075Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781bc2e2affbe1714ed41b9'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781bc2f2affbe1714ed41d4","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:32:47.050Z","isActive":true,"mainTeacher":null,"schoolId":"6781bc2e2affbe1714ed41b9","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:32:47.050Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781bc2e2affbe1714ed41b9'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T00:32:47.079Z"}
{"duration":"365ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736555566717_ymo8qtbnb","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T00:32:47.082Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555567240_b6uo8brgu","timestamp":"2025-01-11T00:32:47.240Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:32:47.272Z","tokenExpiresIn":"1439.9621333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:32:47.297Z","tokenExpiresIn":"1439.9617166666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T00:32:47.304Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T00:32:47.306Z"}
{"duration":"69ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736555567240_b6uo8brgu","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T00:32:47.309Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555567484_lsks3um8w","timestamp":"2025-01-11T00:32:47.484Z","url":"/api/v1/schools/6781bc2f2affbe1714ed41ec/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:32:47.517Z","tokenExpiresIn":"1439.95805 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:32:47.542Z","tokenExpiresIn":"1439.9576333333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"62ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736555567484_lsks3um8w","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T00:32:47.546Z","url":"/api/v1/schools/6781bc2f2affbe1714ed41ec/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T00:32:47.698Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:34:45.525Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:34:45.535Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:34:45.538Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:34:45.541Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:34:45.543Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:34:45.545Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:34:45.584Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:34:45.610Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-11T00:34:46.070Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:34:46.097Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:34:46.098Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555686303_5owz0lltx","timestamp":"2025-01-11T00:34:46.304Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:34:46.312Z"}
{"duration":"203ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736555686303_5owz0lltx","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T00:34:46.506Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555686536_tz8i0i546","timestamp":"2025-01-11T00:34:46.537Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:34:46.568Z","tokenExpiresIn":"1439.9905333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:34:46.591Z","tokenExpiresIn":"1439.99015 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781bca61bc1c2a964ac9bcc","schoolName":"Integration Test School","timestamp":"2025-01-11T00:34:46.635Z"}
{"duration":"107ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736555686536_tz8i0i546","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T00:34:46.643Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555686665_gvoeyq8oz","timestamp":"2025-01-11T00:34:46.665Z","url":"/api/v1/schools/6781bca61bc1c2a964ac9bcc/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:34:46.698Z","tokenExpiresIn":"1439.9883666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:34:46.734Z","tokenExpiresIn":"1439.9877666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"485ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736555686665_gvoeyq8oz","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T00:34:47.150Z","url":"/api/v1/schools/6781bca61bc1c2a964ac9bcc/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736555687163_b0iy1a8gi","timestamp":"2025-01-11T00:34:47.163Z","url":"/api/v1/classes/school/6781bca61bc1c2a964ac9bcc/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:34:47.195Z","tokenExpiresIn":"1439.9800833333331 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:34:47.220Z","tokenExpiresIn":"1439.9796666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"94ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736555687163_b0iy1a8gi","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T00:34:47.257Z","url":"/api/v1/classes/school/6781bca61bc1c2a964ac9bcc/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781bca71bc1c2a964ac9c3e","sections":[{"maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555687530_lvg0n4l2s","timestamp":"2025-01-11T00:34:47.530Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:34:47.559Z","tokenExpiresIn":"1439.9740166666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:34:47.584Z","tokenExpiresIn":"1439.9736 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781bca71bc1c2a964ac9c58","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:34:47.875Z","isActive":true,"mainTeacher":null,"schoolId":"6781bca71bc1c2a964ac9c3e","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:34:47.875Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781bca71bc1c2a964ac9c58"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T00:34:47.900Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781bca71bc1c2a964ac9c3e'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781bca71bc1c2a964ac9c59","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:34:47.875Z","isActive":true,"mainTeacher":null,"schoolId":"6781bca71bc1c2a964ac9c3e","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:34:47.875Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781bca71bc1c2a964ac9c3e'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T00:34:47.904Z"}
{"duration":"377ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736555687530_lvg0n4l2s","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T00:34:47.907Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555688053_8qkm9sn1r","timestamp":"2025-01-11T00:34:48.053Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:34:48.079Z","tokenExpiresIn":"1439.96535 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:34:48.103Z","tokenExpiresIn":"1439.96495 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T00:34:48.110Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T00:34:48.113Z"}
{"duration":"64ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736555688053_8qkm9sn1r","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T00:34:48.117Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555688273_5c5i7dwk7","timestamp":"2025-01-11T00:34:48.273Z","url":"/api/v1/schools/6781bca81bc1c2a964ac9c71/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:34:48.303Z","tokenExpiresIn":"1439.9616166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:34:48.326Z","tokenExpiresIn":"1439.9612333333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"57ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736555688273_5c5i7dwk7","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T00:34:48.330Z","url":"/api/v1/schools/6781bca81bc1c2a964ac9c71/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T00:34:48.481Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:35:51.398Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:35:51.408Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:35:51.410Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:35:51.413Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:35:51.417Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:35:51.421Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:35:51.460Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:35:51.482Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-11T00:35:51.988Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:35:52.013Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:35:52.015Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555752207_r5lidruay","timestamp":"2025-01-11T00:35:52.207Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:35:52.215Z"}
{"duration":"201ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736555752207_r5lidruay","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T00:35:52.408Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555752446_a07l2dsps","timestamp":"2025-01-11T00:35:52.446Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:35:52.478Z","tokenExpiresIn":"1439.9920333333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:35:52.508Z","tokenExpiresIn":"1439.9915333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781bce839a17fbe89282eee","schoolName":"Integration Test School","timestamp":"2025-01-11T00:35:52.549Z"}
{"duration":"107ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736555752446_a07l2dsps","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T00:35:52.553Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555752572_0j3nfbrbo","timestamp":"2025-01-11T00:35:52.572Z","url":"/api/v1/schools/6781bce839a17fbe89282eee/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:35:52.602Z","tokenExpiresIn":"1439.9899666666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:35:52.627Z","tokenExpiresIn":"1439.98955 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"483ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736555752572_0j3nfbrbo","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T00:35:53.055Z","url":"/api/v1/schools/6781bce839a17fbe89282eee/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736555753073_ieyvvakd9","timestamp":"2025-01-11T00:35:53.073Z","url":"/api/v1/classes/school/6781bce839a17fbe89282eee/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:35:53.113Z","tokenExpiresIn":"1439.98145 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:35:53.154Z","tokenExpiresIn":"1439.9807666666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"131ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736555753073_ieyvvakd9","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T00:35:53.204Z","url":"/api/v1/classes/school/6781bce839a17fbe89282eee/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781bce939a17fbe89282f60","sections":[{"maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555753497_67wm9sufv","timestamp":"2025-01-11T00:35:53.498Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:35:53.525Z","tokenExpiresIn":"1439.9745833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:35:53.549Z","tokenExpiresIn":"1439.9741833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781bce939a17fbe89282f7a","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:35:53.873Z","isActive":true,"mainTeacher":null,"schoolId":"6781bce939a17fbe89282f60","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:35:53.873Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781bce939a17fbe89282f7a"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T00:35:53.901Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781bce939a17fbe89282f60'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781bce939a17fbe89282f7b","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:35:53.873Z","isActive":true,"mainTeacher":null,"schoolId":"6781bce939a17fbe89282f60","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:35:53.873Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781bce939a17fbe89282f60'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T00:35:53.904Z"}
{"duration":"410ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736555753497_67wm9sufv","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T00:35:53.907Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555754099_y1mgef9ew","timestamp":"2025-01-11T00:35:54.099Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:35:54.133Z","tokenExpiresIn":"1439.96445 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:35:54.164Z","tokenExpiresIn":"1439.96395 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T00:35:54.172Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T00:35:54.175Z"}
{"duration":"79ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736555754099_y1mgef9ew","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T00:35:54.179Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555754370_jsu7u353z","timestamp":"2025-01-11T00:35:54.370Z","url":"/api/v1/schools/6781bcea39a17fbe89282f93/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:35:54.400Z","tokenExpiresIn":"1439.96 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:35:54.424Z","tokenExpiresIn":"1439.9596 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"58ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736555754370_jsu7u353z","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T00:35:54.428Z","url":"/api/v1/schools/6781bcea39a17fbe89282f93/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T00:35:54.667Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:37:05.941Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:37:05.951Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:37:05.954Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:37:05.956Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:37:05.958Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:37:05.961Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:37:05.999Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:37:06.023Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-11T00:37:06.494Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:37:06.523Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:37:06.525Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555826712_37dtoejkq","timestamp":"2025-01-11T00:37:06.712Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:37:06.719Z"}
{"duration":"357ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736555826712_37dtoejkq","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T00:37:07.069Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555827092_vswzfxrep","timestamp":"2025-01-11T00:37:07.093Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:37:07.123Z","tokenExpiresIn":"1439.99795 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:37:07.148Z","tokenExpiresIn":"1439.9975333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781bd33a1e29b22a49aa16c","schoolName":"Integration Test School","timestamp":"2025-01-11T00:37:07.192Z"}
{"duration":"103ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736555827092_vswzfxrep","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T00:37:07.195Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555827212_wt38976xi","timestamp":"2025-01-11T00:37:07.212Z","url":"/api/v1/schools/6781bd33a1e29b22a49aa16c/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:37:07.241Z","tokenExpiresIn":"1439.9959833333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:37:07.267Z","tokenExpiresIn":"1439.9955499999999 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"473ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736555827212_wt38976xi","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T00:37:07.685Z","url":"/api/v1/schools/6781bd33a1e29b22a49aa16c/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736555827698_ia9h2e6mx","timestamp":"2025-01-11T00:37:07.698Z","url":"/api/v1/classes/school/6781bd33a1e29b22a49aa16c/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:37:07.731Z","tokenExpiresIn":"1439.9878166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:37:07.759Z","tokenExpiresIn":"1439.9873499999999 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"99ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736555827698_ia9h2e6mx","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T00:37:07.798Z","url":"/api/v1/classes/school/6781bd33a1e29b22a49aa16c/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781bd33a1e29b22a49aa1da","sections":[{"maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555828074_sooz3bc6m","timestamp":"2025-01-11T00:37:08.074Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:37:08.104Z","tokenExpiresIn":"1439.9815999999998 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:37:08.127Z","tokenExpiresIn":"1439.9812166666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781bd34a1e29b22a49aa1f4","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:37:08.424Z","isActive":true,"mainTeacher":null,"schoolId":"6781bd33a1e29b22a49aa1da","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:37:08.424Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781bd34a1e29b22a49aa1f4"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T00:37:08.452Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781bd33a1e29b22a49aa1da'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781bd34a1e29b22a49aa1f5","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:37:08.425Z","isActive":true,"mainTeacher":null,"schoolId":"6781bd33a1e29b22a49aa1da","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:37:08.425Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781bd33a1e29b22a49aa1da'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T00:37:08.455Z"}
{"duration":"384ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736555828074_sooz3bc6m","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T00:37:08.458Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555828617_j83un3ykr","timestamp":"2025-01-11T00:37:08.617Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:37:08.647Z","tokenExpiresIn":"1439.97255 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:37:08.673Z","tokenExpiresIn":"1439.9721166666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T00:37:08.682Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T00:37:08.685Z"}
{"duration":"70ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736555828617_j83un3ykr","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T00:37:08.688Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736555828875_546wg2pir","timestamp":"2025-01-11T00:37:08.875Z","url":"/api/v1/schools/6781bd34a1e29b22a49aa20d/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:37:08.908Z","tokenExpiresIn":"1439.9682 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:37:08.936Z","tokenExpiresIn":"1439.9677333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"65ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736555828875_546wg2pir","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T00:37:08.940Z","url":"/api/v1/schools/6781bd34a1e29b22a49aa20d/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T00:37:09.105Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:44:26.842Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:44:26.853Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:44:26.855Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:44:26.857Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:44:26.859Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:44:26.861Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:44:26.897Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:44:26.917Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-11T00:44:27.371Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:44:27.397Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:44:27.399Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736556267603_dyqd905vy","timestamp":"2025-01-11T00:44:27.604Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:44:27.610Z"}
{"duration":"201ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736556267603_dyqd905vy","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T00:44:27.804Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736556267833_979jkkd78","timestamp":"2025-01-11T00:44:27.833Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:44:27.866Z","tokenExpiresIn":"1439.9855666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:44:27.901Z","tokenExpiresIn":"1439.9849833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781beeb905e9cd755e000fd","schoolName":"Integration Test School","timestamp":"2025-01-11T00:44:27.948Z"}
{"duration":"123ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736556267833_979jkkd78","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T00:44:27.956Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736556267974_opi4itypr","timestamp":"2025-01-11T00:44:27.974Z","url":"/api/v1/schools/6781beeb905e9cd755e000fd/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:44:28.011Z","tokenExpiresIn":"1439.98315 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:44:28.055Z","tokenExpiresIn":"1439.9824166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"498ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736556267974_opi4itypr","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T00:44:28.472Z","url":"/api/v1/schools/6781beeb905e9cd755e000fd/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736556268484_mgu3bkoyf","timestamp":"2025-01-11T00:44:28.485Z","url":"/api/v1/classes/school/6781beeb905e9cd755e000fd/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:44:28.515Z","tokenExpiresIn":"1439.97475 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:44:28.540Z","tokenExpiresIn":"1439.9743333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"92ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736556268484_mgu3bkoyf","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T00:44:28.577Z","url":"/api/v1/classes/school/6781beeb905e9cd755e000fd/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781beec905e9cd755e0016f","sections":[{"maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736556268873_tv4rxseot","timestamp":"2025-01-11T00:44:28.873Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:44:28.901Z","tokenExpiresIn":"1439.9683166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:44:28.927Z","tokenExpiresIn":"1439.9678833333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781beed905e9cd755e00189","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:44:29.218Z","isActive":true,"mainTeacher":null,"schoolId":"6781beec905e9cd755e0016f","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:44:29.218Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781beed905e9cd755e00189"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T00:44:29.243Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781beec905e9cd755e0016f'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781beed905e9cd755e0018a","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:44:29.218Z","isActive":true,"mainTeacher":null,"schoolId":"6781beec905e9cd755e0016f","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:44:29.218Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781beec905e9cd755e0016f'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T00:44:29.246Z"}
{"duration":"376ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736556268873_tv4rxseot","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T00:44:29.249Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736556269392_z6boyolyj","timestamp":"2025-01-11T00:44:29.392Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:44:29.420Z","tokenExpiresIn":"1439.9596666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:44:29.443Z","tokenExpiresIn":"1439.9592833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T00:44:29.450Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T00:44:29.454Z"}
{"duration":"66ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736556269392_z6boyolyj","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T00:44:29.458Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736556269620_rjv6lyl5n","timestamp":"2025-01-11T00:44:29.620Z","url":"/api/v1/schools/6781beed905e9cd755e001a2/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:44:29.650Z","tokenExpiresIn":"1439.9558333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:44:29.675Z","tokenExpiresIn":"1439.9554333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"58ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736556269620_rjv6lyl5n","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T00:44:29.678Z","url":"/api/v1/schools/6781beed905e9cd755e001a2/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T00:44:29.846Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:49:57.518Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:49:57.528Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:49:57.530Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:49:57.532Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:49:57.534Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:49:57.536Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:49:57.941Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:49:57.964Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-11T00:49:58.448Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:49:58.472Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:49:58.473Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736556598835_1sgk6xnpp","timestamp":"2025-01-11T00:49:58.835Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:49:58.841Z"}
{"duration":"275ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736556598835_1sgk6xnpp","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T00:49:59.111Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736556599132_3h1gyzv1w","timestamp":"2025-01-11T00:49:59.132Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:49:59.163Z","tokenExpiresIn":"1439.9972833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:49:59.187Z","tokenExpiresIn":"1439.9968833333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781c03779d5990365ef4297","schoolName":"Integration Test School","timestamp":"2025-01-11T00:49:59.226Z"}
{"duration":"97ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736556599132_3h1gyzv1w","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T00:49:59.229Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736556599246_wao0aieqn","timestamp":"2025-01-11T00:49:59.246Z","url":"/api/v1/schools/6781c03779d5990365ef4297/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:49:59.275Z","tokenExpiresIn":"1439.9954166666669 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:49:59.301Z","tokenExpiresIn":"1439.9949833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"434ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736556599246_wao0aieqn","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T00:49:59.680Z","url":"/api/v1/schools/6781c03779d5990365ef4297/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736556599695_i3navf0wk","timestamp":"2025-01-11T00:49:59.695Z","url":"/api/v1/classes/school/6781c03779d5990365ef4297/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:49:59.725Z","tokenExpiresIn":"1439.9879166666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:49:59.749Z","tokenExpiresIn":"1439.9875166666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"89ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736556599695_i3navf0wk","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T00:49:59.784Z","url":"/api/v1/classes/school/6781c03779d5990365ef4297/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781c03779d5990365ef4308","sections":[{"maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736556600063_lcwk4sc0s","timestamp":"2025-01-11T00:50:00.063Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:50:00.090Z","tokenExpiresIn":"1439.9818333333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:50:00.115Z","tokenExpiresIn":"1439.9814166666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781c03879d5990365ef4322","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:50:00.403Z","isActive":true,"mainTeacher":null,"schoolId":"6781c03779d5990365ef4308","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:50:00.403Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781c03879d5990365ef4322"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T00:50:00.430Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c03779d5990365ef4308'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781c03879d5990365ef4323","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:50:00.403Z","isActive":true,"mainTeacher":null,"schoolId":"6781c03779d5990365ef4308","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:50:00.403Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c03779d5990365ef4308'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T00:50:00.435Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c03779d5990365ef4308'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T00:50:00.437Z"}
{"duration":"377ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736556600063_lcwk4sc0s","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T00:50:00.440Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736556600609_inqhzragb","timestamp":"2025-01-11T00:50:00.609Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:50:00.639Z","tokenExpiresIn":"1439.9726833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:50:00.667Z","tokenExpiresIn":"1439.9722166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T00:50:00.675Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T00:50:00.677Z"}
{"duration":"71ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736556600609_inqhzragb","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T00:50:00.680Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736556600847_ii18wtjbk","timestamp":"2025-01-11T00:50:00.847Z","url":"/api/v1/schools/6781c03879d5990365ef433b/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:50:00.876Z","tokenExpiresIn":"1439.9687333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:50:00.900Z","tokenExpiresIn":"1439.9683333333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"57ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736556600847_ii18wtjbk","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T00:50:00.904Z","url":"/api/v1/schools/6781c03879d5990365ef433b/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T00:50:01.071Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:57:45.186Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:57:45.196Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:57:45.198Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:57:45.200Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:57:45.202Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:57:45.204Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:57:45.429Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:57:45.448Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-11T00:57:46.171Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:57:46.192Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:57:46.194Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557066994_cd77k83w8","timestamp":"2025-01-11T00:57:46.994Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:57:47.000Z"}
{"duration":"364ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736557066994_cd77k83w8","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T00:57:47.358Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557067386_gufzq5afy","timestamp":"2025-01-11T00:57:47.386Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:57:47.535Z","tokenExpiresIn":"1439.9910833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:57:47.561Z","tokenExpiresIn":"1439.99065 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781c20b9106cfddce793fe3","schoolName":"Integration Test School","timestamp":"2025-01-11T00:57:47.597Z"}
{"duration":"215ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736557067386_gufzq5afy","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T00:57:47.601Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557067617_l0mq4puzj","timestamp":"2025-01-11T00:57:47.617Z","url":"/api/v1/schools/6781c20b9106cfddce793fe3/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:57:47.758Z","tokenExpiresIn":"1439.9873666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:57:47.783Z","tokenExpiresIn":"1439.98695 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"1017ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736557067617_l0mq4puzj","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T00:57:48.634Z","url":"/api/v1/schools/6781c20b9106cfddce793fe3/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736557068646_88mgfyrcd","timestamp":"2025-01-11T00:57:48.646Z","url":"/api/v1/classes/school/6781c20b9106cfddce793fe3/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:57:48.785Z","tokenExpiresIn":"1439.9702499999999 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:57:48.821Z","tokenExpiresIn":"1439.96965 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"330ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736557068646_88mgfyrcd","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T00:57:48.976Z","url":"/api/v1/classes/school/6781c20b9106cfddce793fe3/year/2024%2F2025"}
{"body":{"academicYearData":{"endDate":"2026-06-30T00:00:00.000Z","startDate":"2025-09-01T00:00:00.000Z"},"fromYear":"2024/2025","schoolId":"6781c20d9106cfddce794050","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557069493_i7zeh0ntf","timestamp":"2025-01-11T00:57:49.493Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:57:49.523Z","tokenExpiresIn":"1439.95795 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:57:49.548Z","tokenExpiresIn":"1439.9575333333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781c20d9106cfddce79407f","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:57:49.841Z","isActive":true,"mainTeacher":null,"schoolId":"6781c20d9106cfddce794050","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:57:49.841Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781c20d9106cfddce79407f"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T00:57:49.866Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c20d9106cfddce794050'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781c20d9106cfddce794080","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:57:49.842Z","isActive":true,"mainTeacher":null,"schoolId":"6781c20d9106cfddce794050","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T00:57:49.842Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c20d9106cfddce794050'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T00:57:49.870Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c20d9106cfddce794050'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T00:57:49.871Z"}
{"duration":"383ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557069493_i7zeh0ntf","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T00:57:49.876Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557070034_r1t3zg9yu","timestamp":"2025-01-11T00:57:50.034Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:57:50.065Z","tokenExpiresIn":"1439.9489166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:57:50.092Z","tokenExpiresIn":"1439.9484666666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T00:57:50.099Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T00:57:50.102Z"}
{"duration":"71ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557070034_r1t3zg9yu","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T00:57:50.105Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557070283_mmmxw90po","timestamp":"2025-01-11T00:57:50.283Z","url":"/api/v1/schools/6781c20e9106cfddce7940a4/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:57:50.313Z","tokenExpiresIn":"1439.9447833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:57:50.339Z","tokenExpiresIn":"1439.94435 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"59ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557070283_mmmxw90po","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T00:57:50.342Z","url":"/api/v1/schools/6781c20e9106cfddce7940a4/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T00:57:50.510Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T00:59:57.289Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T00:59:57.295Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T00:59:57.297Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T00:59:57.299Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T00:59:57.301Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T00:59:57.303Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T00:59:57.339Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T00:59:57.359Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-11T00:59:57.847Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T00:59:57.870Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T00:59:57.871Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557198071_7is0hg24i","timestamp":"2025-01-11T00:59:58.071Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T00:59:58.078Z"}
{"duration":"206ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736557198071_7is0hg24i","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T00:59:58.277Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557198319_ap6se6iaa","timestamp":"2025-01-11T00:59:58.319Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:59:58.352Z","tokenExpiresIn":"1439.9941333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:59:58.375Z","tokenExpiresIn":"1439.99375 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781c28e8bac66f891bacad5","schoolName":"Integration Test School","timestamp":"2025-01-11T00:59:58.420Z"}
{"duration":"105ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736557198319_ap6se6iaa","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T00:59:58.424Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557198441_uov2qjuzg","timestamp":"2025-01-11T00:59:58.441Z","url":"/api/v1/schools/6781c28e8bac66f891bacad5/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:59:58.473Z","tokenExpiresIn":"1439.9921166666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:59:58.503Z","tokenExpiresIn":"1439.9916166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"level":"error","message":"mainTeacher richiesto per ogni sezione","metadata":{},"timestamp":"2025-01-11T00:59:58.678Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"mainTeacher richiesto per ogni sezione"},"status":500,"timestamp":"2025-01-11T00:59:58.682Z"}
{"duration":"244ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557198441_uov2qjuzg","responseSize":"102 Bytes","statusCode":500,"timestamp":"2025-01-11T00:59:58.685Z","url":"/api/v1/schools/6781c28e8bac66f891bacad5/setup"}
{"body":{"academicYearData":{"endDate":"2026-06-30T00:00:00.000Z","startDate":"2025-09-01T00:00:00.000Z"},"fromYear":"2024/2025","schoolId":"6781c28e8bac66f891bacaf5","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557198981_e0jr12xe6","timestamp":"2025-01-11T00:59:58.981Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:59:59.015Z","tokenExpiresIn":"1439.9830833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:59:59.041Z","tokenExpiresIn":"1439.9826500000001 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781c28f8bac66f891bacb24","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:59:59.474Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c28e8bac66f891bacaf5","section":"A","status":"active","students":[],"teachers":[],"updatedAt":"2025-01-11T00:59:59.474Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781c28f8bac66f891bacb24"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T00:59:59.505Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c28e8bac66f891bacaf5'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781c28f8bac66f891bacb25","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T00:59:59.475Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c28e8bac66f891bacaf5","section":"A","status":"active","students":[],"teachers":[],"updatedAt":"2025-01-11T00:59:59.475Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c28e8bac66f891bacaf5'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T00:59:59.509Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c28e8bac66f891bacaf5'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T00:59:59.510Z"}
{"duration":"533ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557198981_e0jr12xe6","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T00:59:59.514Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557199669_bq983lh79","timestamp":"2025-01-11T00:59:59.669Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:59:59.699Z","tokenExpiresIn":"1439.9716833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:59:59.725Z","tokenExpiresIn":"1439.9712499999998 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T00:59:59.735Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T00:59:59.738Z"}
{"duration":"77ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557199669_bq983lh79","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T00:59:59.746Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557199919_h58elfu6k","timestamp":"2025-01-11T00:59:59.919Z","url":"/api/v1/schools/6781c28f8bac66f891bacb49/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:59:59.949Z","tokenExpiresIn":"1439.9675166666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T00:59:59.977Z","tokenExpiresIn":"1439.96705 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"62ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557199919_h58elfu6k","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T00:59:59.981Z","url":"/api/v1/schools/6781c28f8bac66f891bacb49/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:00:00.170Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:00:32.401Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:00:32.412Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:00:32.414Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:00:32.417Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:00:32.418Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:00:32.421Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:00:32.456Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:00:32.478Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-11T01:00:32.940Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:00:32.969Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:00:32.971Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557233175_zs1qxymlv","timestamp":"2025-01-11T01:00:33.176Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:00:33.182Z"}
{"duration":"202ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736557233175_zs1qxymlv","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:00:33.378Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557233408_d0ykihya9","timestamp":"2025-01-11T01:00:33.409Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:00:33.440Z","tokenExpiresIn":"1439.9926666666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:00:33.465Z","tokenExpiresIn":"1439.99225 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781c2b19a3c03d308b98ac5","schoolName":"Integration Test School","timestamp":"2025-01-11T01:00:33.508Z"}
{"duration":"103ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736557233408_d0ykihya9","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:00:33.511Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557233531_5adue9jj3","timestamp":"2025-01-11T01:00:33.531Z","url":"/api/v1/schools/6781c2b19a3c03d308b98ac5/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:00:33.559Z","tokenExpiresIn":"1439.9906833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:00:33.583Z","tokenExpiresIn":"1439.9902833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"level":"error","message":"mainTeacher richiesto per ogni sezione","metadata":{},"timestamp":"2025-01-11T01:00:33.750Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"mainTeacher richiesto per ogni sezione"},"status":500,"timestamp":"2025-01-11T01:00:33.756Z"}
{"duration":"229ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557233531_5adue9jj3","responseSize":"102 Bytes","statusCode":500,"timestamp":"2025-01-11T01:00:33.760Z","url":"/api/v1/schools/6781c2b19a3c03d308b98ac5/setup"}
{"body":{"academicYearData":{"endDate":"2026-06-30T00:00:00.000Z","startDate":"2025-09-01T00:00:00.000Z"},"fromYear":"2024/2025","schoolId":"6781c2b19a3c03d308b98ae6","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557234045_mlcelc66o","timestamp":"2025-01-11T01:00:34.045Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:00:34.072Z","tokenExpiresIn":"1439.9821333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:00:34.098Z","tokenExpiresIn":"1439.9817 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781c2b29a3c03d308b98b15","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:00:34.403Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c2b19a3c03d308b98ae6","section":"A","status":"active","students":[],"teachers":[],"updatedAt":"2025-01-11T01:00:34.403Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781c2b29a3c03d308b98b15"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T01:00:34.438Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c2b19a3c03d308b98ae6'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781c2b29a3c03d308b98b16","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:00:34.403Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c2b19a3c03d308b98ae6","section":"A","status":"active","students":[],"teachers":[],"updatedAt":"2025-01-11T01:00:34.403Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c2b19a3c03d308b98ae6'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:00:34.441Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c2b19a3c03d308b98ae6'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:00:34.443Z"}
{"duration":"401ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557234045_mlcelc66o","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T01:00:34.446Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557234602_hr7vnpeco","timestamp":"2025-01-11T01:00:34.602Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:00:34.629Z","tokenExpiresIn":"1439.9728499999999 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:00:34.652Z","tokenExpiresIn":"1439.9724666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:00:34.659Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:00:34.661Z"}
{"duration":"62ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557234602_hr7vnpeco","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:00:34.664Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557235025_rltdxg9qs","timestamp":"2025-01-11T01:00:35.025Z","url":"/api/v1/schools/6781c2b29a3c03d308b98b3a/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:00:35.223Z","tokenExpiresIn":"1439.96295 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:00:35.260Z","tokenExpiresIn":"1439.9623333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"240ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557235025_rltdxg9qs","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:00:35.265Z","url":"/api/v1/schools/6781c2b29a3c03d308b98b3a/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:00:35.616Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:01:48.364Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:01:48.375Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:01:48.379Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:01:48.383Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:01:48.384Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:01:48.386Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:01:48.423Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:01:48.445Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-11T01:01:48.898Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:01:48.923Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:01:48.924Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557309145_xxxjoiff8","timestamp":"2025-01-11T01:01:49.145Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:01:49.151Z"}
{"duration":"192ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736557309145_xxxjoiff8","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:01:49.338Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557309372_v9uc4kfby","timestamp":"2025-01-11T01:01:49.373Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:01:49.544Z","tokenExpiresIn":"1439.9909499999999 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:01:49.567Z","tokenExpiresIn":"1439.99055 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781c2fdcf5555d4016fefed","schoolName":"Integration Test School","timestamp":"2025-01-11T01:01:49.607Z"}
{"duration":"239ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736557309372_v9uc4kfby","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:01:49.611Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557309626_9lsucndqf","timestamp":"2025-01-11T01:01:49.626Z","url":"/api/v1/schools/6781c2fdcf5555d4016fefed/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:01:49.656Z","tokenExpiresIn":"1439.9890666666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:01:49.683Z","tokenExpiresIn":"1439.9886166666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"level":"error","message":"mainTeacher richiesto per ogni sezione","metadata":{},"timestamp":"2025-01-11T01:01:49.826Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"mainTeacher richiesto per ogni sezione"},"status":500,"timestamp":"2025-01-11T01:01:49.829Z"}
{"duration":"207ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557309626_9lsucndqf","responseSize":"102 Bytes","statusCode":500,"timestamp":"2025-01-11T01:01:49.833Z","url":"/api/v1/schools/6781c2fdcf5555d4016fefed/setup"}
{"body":{"academicYearData":{"endDate":"2026-06-30T00:00:00.000Z","startDate":"2025-09-01T00:00:00.000Z"},"fromYear":"2024/2025","schoolId":"6781c2fdcf5555d4016ff00a","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557310095_mpfdzyzyr","timestamp":"2025-01-11T01:01:50.095Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:01:50.123Z","tokenExpiresIn":"1439.9812833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:01:50.148Z","tokenExpiresIn":"1439.9808666666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781c2fecf5555d4016ff039","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:01:50.451Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c2fdcf5555d4016ff00a","section":"A","status":"active","students":[],"teachers":[],"updatedAt":"2025-01-11T01:01:50.451Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781c2fecf5555d4016ff039"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T01:01:50.484Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c2fdcf5555d4016ff00a'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781c2fecf5555d4016ff03a","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:01:50.451Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c2fdcf5555d4016ff00a","section":"A","status":"active","students":[],"teachers":[],"updatedAt":"2025-01-11T01:01:50.451Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c2fdcf5555d4016ff00a'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:01:50.487Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c2fdcf5555d4016ff00a'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:01:50.489Z"}
{"duration":"397ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557310095_mpfdzyzyr","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T01:01:50.493Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557310645_oweobdsc4","timestamp":"2025-01-11T01:01:50.645Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:01:50.672Z","tokenExpiresIn":"1439.9721333333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:01:50.698Z","tokenExpiresIn":"1439.9716999999998 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:01:50.705Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:01:50.708Z"}
{"duration":"66ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557310645_oweobdsc4","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:01:50.711Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557310878_w2v03apqn","timestamp":"2025-01-11T01:01:50.878Z","url":"/api/v1/schools/6781c2fecf5555d4016ff05e/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:01:50.910Z","tokenExpiresIn":"1439.9681666666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:01:50.936Z","tokenExpiresIn":"1439.9677333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"61ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557310878_w2v03apqn","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:01:50.939Z","url":"/api/v1/schools/6781c2fecf5555d4016ff05e/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:01:51.110Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:05:43.619Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:05:43.633Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:05:43.635Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:05:43.637Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:05:43.639Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:05:43.642Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:05:43.678Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:05:43.699Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-11T01:05:44.168Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:05:44.194Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:05:44.196Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557544404_xj4iw7at6","timestamp":"2025-01-11T01:05:44.405Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:05:44.411Z"}
{"duration":"186ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736557544404_xj4iw7at6","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:05:44.590Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557544625_hz9oas5na","timestamp":"2025-01-11T01:05:44.625Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:05:44.658Z","tokenExpiresIn":"1439.9890333333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:05:44.685Z","tokenExpiresIn":"1439.9885833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781c3e8242a035cec4621a6","schoolName":"Integration Test School","timestamp":"2025-01-11T01:05:44.726Z"}
{"duration":"105ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736557544625_hz9oas5na","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:05:44.730Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557544746_b8k6j4ms8","timestamp":"2025-01-11T01:05:44.746Z","url":"/api/v1/schools/6781c3e8242a035cec4621a6/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:05:44.777Z","tokenExpiresIn":"1439.98705 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:05:44.808Z","tokenExpiresIn":"1439.9865333333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"level":"error","message":"mainTeacher richiesto per ogni sezione","metadata":{},"timestamp":"2025-01-11T01:05:44.963Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"mainTeacher richiesto per ogni sezione"},"status":500,"timestamp":"2025-01-11T01:05:44.966Z"}
{"duration":"224ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557544746_b8k6j4ms8","responseSize":"102 Bytes","statusCode":500,"timestamp":"2025-01-11T01:05:44.970Z","url":"/api/v1/schools/6781c3e8242a035cec4621a6/setup"}
{"body":{"academicYearData":{"endDate":"2026-06-30T00:00:00.000Z","startDate":"2025-09-01T00:00:00.000Z"},"fromYear":"2024/2025","schoolId":"6781c3e9242a035cec4621c7","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557545222_4jtqgqs8b","timestamp":"2025-01-11T01:05:45.222Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:05:45.250Z","tokenExpiresIn":"1439.9791666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:05:45.274Z","tokenExpiresIn":"1439.9787666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781c3e9242a035cec4621f6","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:05:45.714Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c3e9242a035cec4621c7","section":"A","status":"active","students":[],"teachers":[],"updatedAt":"2025-01-11T01:05:45.714Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781c3e9242a035cec4621f6"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T01:05:45.749Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c3e9242a035cec4621c7'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781c3e9242a035cec4621f7","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:05:45.714Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c3e9242a035cec4621c7","section":"A","status":"active","students":[],"teachers":[],"updatedAt":"2025-01-11T01:05:45.714Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c3e9242a035cec4621c7'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:05:45.753Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c3e9242a035cec4621c7'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:05:45.755Z"}
{"duration":"537ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557545222_4jtqgqs8b","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T01:05:45.760Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557545920_uixoqn02z","timestamp":"2025-01-11T01:05:45.920Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:05:45.949Z","tokenExpiresIn":"1439.9675166666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:05:45.977Z","tokenExpiresIn":"1439.96705 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:05:45.984Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:05:45.987Z"}
{"duration":"70ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557545920_uixoqn02z","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:05:45.990Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557546168_db0r7pahx","timestamp":"2025-01-11T01:05:46.168Z","url":"/api/v1/schools/6781c3ea242a035cec46221b/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:05:46.197Z","tokenExpiresIn":"1439.9633833333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:05:46.222Z","tokenExpiresIn":"1439.9629666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"57ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557546168_db0r7pahx","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:05:46.225Z","url":"/api/v1/schools/6781c3ea242a035cec46221b/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:05:46.384Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:09:28.729Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:09:28.739Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:09:28.741Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:09:28.743Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:09:28.745Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:09:28.747Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:09:28.790Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:09:28.810Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-11T01:09:29.286Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:09:29.313Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:09:29.314Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557769507_73w4c57pn","timestamp":"2025-01-11T01:09:29.507Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:09:29.514Z"}
{"duration":"189ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736557769507_73w4c57pn","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:09:29.696Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557769725_kqdo8lcwq","timestamp":"2025-01-11T01:09:29.726Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:09:29.755Z","tokenExpiresIn":"1439.9874166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:09:29.780Z","tokenExpiresIn":"1439.987 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781c4c9efc39c24528a5430","schoolName":"Integration Test School","timestamp":"2025-01-11T01:09:29.822Z"}
{"duration":"99ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736557769725_kqdo8lcwq","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:09:29.825Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557769839_3h9tgjjbn","timestamp":"2025-01-11T01:09:29.839Z","url":"/api/v1/schools/6781c4c9efc39c24528a5430/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:09:29.865Z","tokenExpiresIn":"1439.9855833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:09:29.889Z","tokenExpiresIn":"1439.9851833333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"level":"error","message":"mainTeacher richiesto per ogni sezione","metadata":{},"timestamp":"2025-01-11T01:09:30.037Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"mainTeacher richiesto per ogni sezione"},"status":500,"timestamp":"2025-01-11T01:09:30.040Z"}
{"duration":"205ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557769839_3h9tgjjbn","responseSize":"102 Bytes","statusCode":500,"timestamp":"2025-01-11T01:09:30.044Z","url":"/api/v1/schools/6781c4c9efc39c24528a5430/setup"}
{"body":{"academicYearData":{"endDate":"2026-06-30T00:00:00.000Z","startDate":"2025-09-01T00:00:00.000Z"},"fromYear":"2024/2025","schoolId":"6781c4caefc39c24528a5450","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557770296_zb82auaaw","timestamp":"2025-01-11T01:09:30.296Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:09:30.324Z","tokenExpiresIn":"1439.9779333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:09:30.348Z","tokenExpiresIn":"1439.9775333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781c4caefc39c24528a547f","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:09:30.811Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c4caefc39c24528a5450","section":"A","status":"active","students":[],"teachers":[],"updatedAt":"2025-01-11T01:09:30.811Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781c4caefc39c24528a547f"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T01:09:30.853Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c4caefc39c24528a5450'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781c4caefc39c24528a5480","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:09:30.812Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c4caefc39c24528a5450","section":"A","status":"active","students":[],"teachers":[],"updatedAt":"2025-01-11T01:09:30.812Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c4caefc39c24528a5450'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:09:30.856Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c4caefc39c24528a5450'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:09:30.858Z"}
{"duration":"565ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557770296_zb82auaaw","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T01:09:30.861Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557771003_b2miarkg7","timestamp":"2025-01-11T01:09:31.003Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:09:31.031Z","tokenExpiresIn":"1439.96615 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:09:31.055Z","tokenExpiresIn":"1439.96575 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:09:31.064Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:09:31.067Z"}
{"duration":"69ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557771003_b2miarkg7","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:09:31.072Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557771241_gzw0agk43","timestamp":"2025-01-11T01:09:31.241Z","url":"/api/v1/schools/6781c4cbefc39c24528a54a4/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:09:31.269Z","tokenExpiresIn":"1439.9621833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:09:31.295Z","tokenExpiresIn":"1439.96175 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"58ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557771241_gzw0agk43","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:09:31.299Z","url":"/api/v1/schools/6781c4cbefc39c24528a54a4/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:09:31.455Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:13:09.095Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:13:09.102Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:13:09.104Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:13:09.107Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:13:09.109Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:13:09.112Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:13:09.155Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:13:09.176Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-11T01:13:09.642Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:13:09.665Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:13:09.666Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557989852_sma6oqcp8","timestamp":"2025-01-11T01:13:09.853Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:13:09.859Z"}
{"duration":"192ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736557989852_sma6oqcp8","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:13:10.044Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557990071_7ljxnl1ef","timestamp":"2025-01-11T01:13:10.071Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:13:10.106Z","tokenExpiresIn":"1439.9982333333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:13:10.144Z","tokenExpiresIn":"1439.9976 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781c5a6650bf09d6105949e","schoolName":"Integration Test School","timestamp":"2025-01-11T01:13:10.192Z"}
{"duration":"124ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736557990071_7ljxnl1ef","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:13:10.195Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557990211_5owlolu0j","timestamp":"2025-01-11T01:13:10.211Z","url":"/api/v1/schools/6781c5a6650bf09d6105949e/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:13:10.239Z","tokenExpiresIn":"1439.9960166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:13:10.269Z","tokenExpiresIn":"1439.9955166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"516ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736557990211_5owlolu0j","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T01:13:10.727Z","url":"/api/v1/schools/6781c5a6650bf09d6105949e/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736557990743_o299othh3","timestamp":"2025-01-11T01:13:10.743Z","url":"/api/v1/classes/school/6781c5a6650bf09d6105949e/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:13:10.772Z","tokenExpiresIn":"1439.9871333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:13:10.796Z","tokenExpiresIn":"1439.9867333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"88ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736557990743_o299othh3","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T01:13:10.831Z","url":"/api/v1/classes/school/6781c5a6650bf09d6105949e/year/2024%2F2025"}
{"body":{"academicYearData":{"endDate":"2026-06-30T00:00:00.000Z","startDate":"2025-09-01T00:00:00.000Z"},"fromYear":"2024/2025","schoolId":"6781c5a6650bf09d61059511","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557991076_zkiqkouk7","timestamp":"2025-01-11T01:13:11.076Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:13:11.104Z","tokenExpiresIn":"1439.9815999999998 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:13:11.128Z","tokenExpiresIn":"1439.9812 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781c5a7650bf09d6105953d","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:13:11.389Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c5a6650bf09d61059511","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T01:13:11.389Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781c5a7650bf09d6105953d"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T01:13:11.431Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c5a6650bf09d61059511'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781c5a7650bf09d6105953e","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:13:11.389Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c5a6650bf09d61059511","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T01:13:11.389Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c5a6650bf09d61059511'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:13:11.435Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c5a6650bf09d61059511'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:13:11.437Z"}
{"duration":"364ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557991076_zkiqkouk7","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T01:13:11.440Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557991587_74bcqm3wi","timestamp":"2025-01-11T01:13:11.587Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:13:11.615Z","tokenExpiresIn":"1439.9730833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:13:11.638Z","tokenExpiresIn":"1439.9726999999998 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:13:11.645Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:13:11.648Z"}
{"duration":"63ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557991587_74bcqm3wi","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:13:11.650Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736557991826_5f9qm6lut","timestamp":"2025-01-11T01:13:11.826Z","url":"/api/v1/schools/6781c5a7650bf09d61059562/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:13:11.854Z","tokenExpiresIn":"1439.9690999999998 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:13:11.887Z","tokenExpiresIn":"1439.96855 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"64ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736557991826_5f9qm6lut","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:13:11.890Z","url":"/api/v1/schools/6781c5a7650bf09d61059562/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:13:12.056Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:21:05.872Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:21:05.877Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:21:05.879Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:21:05.881Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:21:05.883Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:21:05.885Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:21:05.921Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:21:05.941Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-11T01:21:06.389Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:21:06.414Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:21:06.415Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558466607_3gsq1dlrd","timestamp":"2025-01-11T01:21:06.608Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:21:06.614Z"}
{"duration":"199ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736558466607_3gsq1dlrd","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:21:06.807Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558466837_m2iwm30h9","timestamp":"2025-01-11T01:21:06.837Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:21:06.866Z","tokenExpiresIn":"1439.9855666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:21:06.893Z","tokenExpiresIn":"1439.9851166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781c78230f52cd318ae9995","schoolName":"Integration Test School","timestamp":"2025-01-11T01:21:06.936Z"}
{"duration":"102ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736558466837_m2iwm30h9","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:21:06.939Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558466954_5wkq2adnc","timestamp":"2025-01-11T01:21:06.954Z","url":"/api/v1/schools/6781c78230f52cd318ae9995/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:21:06.985Z","tokenExpiresIn":"1439.9835833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:21:07.010Z","tokenExpiresIn":"1439.9831666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"480ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736558466954_5wkq2adnc","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T01:21:07.434Z","url":"/api/v1/schools/6781c78230f52cd318ae9995/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736558467449_2oy02z81v","timestamp":"2025-01-11T01:21:07.449Z","url":"/api/v1/classes/school/6781c78230f52cd318ae9995/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:21:07.481Z","tokenExpiresIn":"1439.9753166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:21:07.505Z","tokenExpiresIn":"1439.9749166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"91ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736558467449_2oy02z81v","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T01:21:07.540Z","url":"/api/v1/classes/school/6781c78230f52cd318ae9995/year/2024%2F2025"}
{"body":{"academicYearData":{"endDate":"2026-06-30T00:00:00.000Z","startDate":"2025-09-01T00:00:00.000Z"},"fromYear":"2024/2025","schoolId":"6781c78330f52cd318ae9a07","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558467799_qibve4dhx","timestamp":"2025-01-11T01:21:07.799Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:21:07.825Z","tokenExpiresIn":"1439.9695833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:21:07.849Z","tokenExpiresIn":"1439.9691833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":0,"insertedIds":{},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T01:21:08.127Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c78330f52cd318ae9a07'), year: 1, section: \"A\", academicYear: \"2025/2026\" }","index":0,"op":{"__v":0,"_id":"6781c78430f52cd318ae9a3b","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:21:08.084Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c78330f52cd318ae9a07","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T01:21:08.084Z","year":1}},"index":0}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c78330f52cd318ae9a07'), year: 1, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:21:08.131Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c78330f52cd318ae9a07'), year: 1, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:21:08.133Z"}
{"duration":"337ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736558467799_qibve4dhx","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T01:21:08.137Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558468289_da02okc93","timestamp":"2025-01-11T01:21:08.289Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:21:08.317Z","tokenExpiresIn":"1439.9614 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:21:08.340Z","tokenExpiresIn":"1439.961 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:21:08.346Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:21:08.348Z"}
{"duration":"62ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736558468289_da02okc93","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:21:08.351Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558468518_kr1n3vw6z","timestamp":"2025-01-11T01:21:08.518Z","url":"/api/v1/schools/6781c78430f52cd318ae9a60/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:21:08.550Z","tokenExpiresIn":"1439.9575 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:21:08.577Z","tokenExpiresIn":"1439.95705 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"62ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736558468518_kr1n3vw6z","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:21:08.581Z","url":"/api/v1/schools/6781c78430f52cd318ae9a60/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:21:08.744Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:22:08.837Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:22:08.844Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:22:08.845Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:22:08.847Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:22:08.849Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:22:08.852Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:22:08.890Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:22:08.920Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-11T01:22:09.375Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:22:09.401Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:22:09.402Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558529605_bl0ve21r4","timestamp":"2025-01-11T01:22:09.606Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:22:09.613Z"}
{"duration":"201ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736558529605_bl0ve21r4","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:22:09.807Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558529841_e4dhtlwxj","timestamp":"2025-01-11T01:22:09.841Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:22:09.870Z","tokenExpiresIn":"1439.9855 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:22:09.896Z","tokenExpiresIn":"1439.9850666666669 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781c7c11b42be76d1a31756","schoolName":"Integration Test School","timestamp":"2025-01-11T01:22:09.939Z"}
{"duration":"102ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736558529841_e4dhtlwxj","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:22:09.943Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558529960_4c78yerxb","timestamp":"2025-01-11T01:22:09.960Z","url":"/api/v1/schools/6781c7c11b42be76d1a31756/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:22:09.987Z","tokenExpiresIn":"1439.9835500000002 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:22:10.014Z","tokenExpiresIn":"1439.9831000000001 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"473ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736558529960_4c78yerxb","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T01:22:10.433Z","url":"/api/v1/schools/6781c7c11b42be76d1a31756/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736558530448_crfj8ld4f","timestamp":"2025-01-11T01:22:10.448Z","url":"/api/v1/classes/school/6781c7c11b42be76d1a31756/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:22:10.480Z","tokenExpiresIn":"1439.9753333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:22:10.506Z","tokenExpiresIn":"1439.9749000000002 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"97ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736558530448_crfj8ld4f","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T01:22:10.545Z","url":"/api/v1/classes/school/6781c7c11b42be76d1a31756/year/2024%2F2025"}
{"body":{"academicYearData":{"endDate":"2026-06-30T00:00:00.000Z","startDate":"2025-09-01T00:00:00.000Z"},"fromYear":"2024/2025","schoolId":"6781c7c21b42be76d1a317c7","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558530802_za5zh2rrh","timestamp":"2025-01-11T01:22:10.802Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:22:10.833Z","tokenExpiresIn":"1439.96945 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:22:10.858Z","tokenExpiresIn":"1439.9690333333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781c7c31b42be76d1a317f4","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:22:11.097Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c7c21b42be76d1a317c7","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T01:22:11.097Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781c7c31b42be76d1a317f4"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T01:22:11.141Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c7c21b42be76d1a317c7'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781c7c31b42be76d1a317f5","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:22:11.098Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c7c21b42be76d1a317c7","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T01:22:11.098Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c7c21b42be76d1a317c7'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:22:11.146Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c7c21b42be76d1a317c7'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:22:11.147Z"}
{"duration":"348ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736558530802_za5zh2rrh","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T01:22:11.150Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558531297_ybd2mlq72","timestamp":"2025-01-11T01:22:11.297Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:22:11.326Z","tokenExpiresIn":"1439.9612333333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:22:11.351Z","tokenExpiresIn":"1439.9608166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:22:11.359Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:22:11.361Z"}
{"duration":"67ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736558531297_ybd2mlq72","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:22:11.364Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558531526_2tlwkpwoi","timestamp":"2025-01-11T01:22:11.526Z","url":"/api/v1/schools/6781c7c31b42be76d1a31819/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:22:11.559Z","tokenExpiresIn":"1439.9573500000001 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:22:11.583Z","tokenExpiresIn":"1439.9569666666669 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"60ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736558531526_2tlwkpwoi","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:22:11.586Z","url":"/api/v1/schools/6781c7c31b42be76d1a31819/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:22:11.763Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:23:30.334Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:23:30.345Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:23:30.348Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:23:30.351Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:23:30.353Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:23:30.355Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:23:30.753Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:23:30.773Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-11T01:23:31.255Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:23:31.274Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:23:31.275Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558611473_emumctp9y","timestamp":"2025-01-11T01:23:31.473Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:23:31.481Z"}
{"duration":"191ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736558611473_emumctp9y","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:23:31.664Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558611691_ysihb6hri","timestamp":"2025-01-11T01:23:31.691Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:23:31.719Z","tokenExpiresIn":"1439.9880166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:23:31.755Z","tokenExpiresIn":"1439.9874166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781c813fa68f6a5ecfeeb15","schoolName":"Integration Test School","timestamp":"2025-01-11T01:23:31.798Z"}
{"duration":"111ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736558611691_ysihb6hri","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:23:31.802Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558611819_iakvhk9oi","timestamp":"2025-01-11T01:23:31.819Z","url":"/api/v1/schools/6781c813fa68f6a5ecfeeb15/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:23:31.850Z","tokenExpiresIn":"1439.9858333333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:23:31.875Z","tokenExpiresIn":"1439.9854166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"531ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736558611819_iakvhk9oi","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T01:23:32.350Z","url":"/api/v1/schools/6781c813fa68f6a5ecfeeb15/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736558612371_4llxs0q2z","timestamp":"2025-01-11T01:23:32.371Z","url":"/api/v1/classes/school/6781c813fa68f6a5ecfeeb15/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:23:32.407Z","tokenExpiresIn":"1439.9765499999999 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:23:32.437Z","tokenExpiresIn":"1439.97605 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"107ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736558612371_4llxs0q2z","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T01:23:32.478Z","url":"/api/v1/classes/school/6781c813fa68f6a5ecfeeb15/year/2024%2F2025"}
{"body":{"academicYearData":{"endDate":"2026-06-30T00:00:00.000Z","startDate":"2025-09-01T00:00:00.000Z"},"fromYear":"2024/2025","schoolId":"6781c814fa68f6a5ecfeeb87","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558612729_blxj4rl05","timestamp":"2025-01-11T01:23:32.729Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:23:32.758Z","tokenExpiresIn":"1439.9707 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:23:32.783Z","tokenExpiresIn":"1439.9702833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781c814fa68f6a5ecfeebb4","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:23:33.010Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c814fa68f6a5ecfeeb87","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T01:23:33.010Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781c814fa68f6a5ecfeebb4"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T01:23:33.053Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c814fa68f6a5ecfeeb87'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781c814fa68f6a5ecfeebb5","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:23:33.010Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c814fa68f6a5ecfeeb87","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T01:23:33.010Z","year":2}},"index":1}]}
{"error":"Errore nella creazione classi iniziali","level":"error","message":"Error in year transition:","timestamp":"2025-01-11T01:23:33.056Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c814fa68f6a5ecfeeb87'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:23:33.058Z"}
{"duration":"332ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736558612729_blxj4rl05","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T01:23:33.061Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558613225_6ojg2x255","timestamp":"2025-01-11T01:23:33.225Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:23:33.257Z","tokenExpiresIn":"1439.9623833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:23:33.284Z","tokenExpiresIn":"1439.9619333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:23:33.293Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:23:33.295Z"}
{"duration":"73ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736558613225_6ojg2x255","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:23:33.298Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558613471_wtbz994hh","timestamp":"2025-01-11T01:23:33.471Z","url":"/api/v1/schools/6781c815fa68f6a5ecfeebd9/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:23:33.498Z","tokenExpiresIn":"1439.9583666666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:23:33.524Z","tokenExpiresIn":"1439.9579333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"58ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736558613471_wtbz994hh","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:23:33.529Z","url":"/api/v1/schools/6781c815fa68f6a5ecfeebd9/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:23:33.709Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:26:55.285Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:26:55.292Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:26:55.294Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:26:55.296Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:26:55.298Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:26:55.300Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:26:55.471Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:26:55.494Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-11T01:26:55.958Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:26:55.981Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:26:55.982Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558816228_629zfug2u","timestamp":"2025-01-11T01:26:56.229Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:26:56.236Z"}
{"duration":"243ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736558816228_629zfug2u","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:26:56.472Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558816504_7815xd8a0","timestamp":"2025-01-11T01:26:56.504Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:26:56.537Z","tokenExpiresIn":"1439.99105 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:26:56.569Z","tokenExpiresIn":"1439.9905166666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781c8e0178e05069e3ee9b8","schoolName":"Integration Test School","timestamp":"2025-01-11T01:26:56.610Z"}
{"duration":"110ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736558816504_7815xd8a0","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:26:56.614Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558816632_07h9jwhhx","timestamp":"2025-01-11T01:26:56.632Z","url":"/api/v1/schools/6781c8e0178e05069e3ee9b8/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:26:56.662Z","tokenExpiresIn":"1439.9889666666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:26:56.688Z","tokenExpiresIn":"1439.9885333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"501ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736558816632_07h9jwhhx","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T01:26:57.133Z","url":"/api/v1/schools/6781c8e0178e05069e3ee9b8/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736558817147_orulmwcg8","timestamp":"2025-01-11T01:26:57.148Z","url":"/api/v1/classes/school/6781c8e0178e05069e3ee9b8/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:26:57.179Z","tokenExpiresIn":"1439.98035 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:26:57.202Z","tokenExpiresIn":"1439.9799666666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"95ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736558817147_orulmwcg8","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T01:26:57.242Z","url":"/api/v1/classes/school/6781c8e0178e05069e3ee9b8/year/2024%2F2025"}
{"body":{"academicYearData":{"endDate":"2026-06-30T00:00:00.000Z","startDate":"2025-09-01T00:00:00.000Z"},"fromYear":"2024/2025","schoolId":"6781c8e1178e05069e3eea2a","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558817487_5ki839zay","timestamp":"2025-01-11T01:26:57.487Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:26:57.515Z","tokenExpiresIn":"1439.97475 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:26:57.547Z","tokenExpiresIn":"1439.9742166666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781c8e1178e05069e3eea57","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:26:57.775Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c8e1178e05069e3eea2a","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T01:26:57.775Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781c8e1178e05069e3eea57"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T01:26:57.824Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c8e1178e05069e3eea2a'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781c8e1178e05069e3eea58","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:26:57.776Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c8e1178e05069e3eea2a","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T01:26:57.776Z","year":2}},"index":1}]}
{"body":{"academicYearData":{"endDate":"2026-06-30T00:00:00.000Z","startDate":"2025-09-01T00:00:00.000Z"},"fromYear":"2024/2025","schoolId":"6781c8e1178e05069e3eea2a","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"code":"DB_001","error":"Errore nella creazione classi iniziali","level":"error","message":"Error in handleYearTransition:","timestamp":"2025-01-11T01:26:57.828Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c8e1178e05069e3eea2a'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:26:57.830Z"}
{"duration":"346ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736558817487_5ki839zay","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T01:26:57.833Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558818002_9rhna65bl","timestamp":"2025-01-11T01:26:58.002Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:26:58.030Z","tokenExpiresIn":"1439.9661666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:26:58.054Z","tokenExpiresIn":"1439.9657666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:26:58.060Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:26:58.063Z"}
{"duration":"64ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736558818002_9rhna65bl","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:26:58.066Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558818245_q2ipuf94s","timestamp":"2025-01-11T01:26:58.245Z","url":"/api/v1/schools/6781c8e2178e05069e3eea7c/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:26:58.276Z","tokenExpiresIn":"1439.9620666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:26:58.302Z","tokenExpiresIn":"1439.9616333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"61ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736558818245_q2ipuf94s","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:26:58.306Z","url":"/api/v1/schools/6781c8e2178e05069e3eea7c/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:26:58.470Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:28:23.066Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:28:23.072Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:28:23.074Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:28:23.076Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:28:23.078Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:28:23.080Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:28:23.117Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:28:23.137Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-11T01:28:23.640Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:28:23.664Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:28:23.665Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558903859_j3j33g1cp","timestamp":"2025-01-11T01:28:23.860Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:28:23.867Z"}
{"duration":"210ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736558903859_j3j33g1cp","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:28:24.069Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558904101_5blyfkz39","timestamp":"2025-01-11T01:28:24.101Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:28:24.130Z","tokenExpiresIn":"1439.9978333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:28:24.154Z","tokenExpiresIn":"1439.9974333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781c938440551abca63997d","schoolName":"Integration Test School","timestamp":"2025-01-11T01:28:24.198Z"}
{"duration":"106ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736558904101_5blyfkz39","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:28:24.207Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558904227_fjy4g9623","timestamp":"2025-01-11T01:28:24.227Z","url":"/api/v1/schools/6781c938440551abca63997d/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:28:24.259Z","tokenExpiresIn":"1439.9956833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:28:24.291Z","tokenExpiresIn":"1439.99515 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"570ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736558904227_fjy4g9623","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T01:28:24.797Z","url":"/api/v1/schools/6781c938440551abca63997d/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736558904813_1cr8666aw","timestamp":"2025-01-11T01:28:24.813Z","url":"/api/v1/classes/school/6781c938440551abca63997d/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:28:24.853Z","tokenExpiresIn":"1439.9857833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:28:24.885Z","tokenExpiresIn":"1439.9852500000002 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"108ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736558904813_1cr8666aw","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T01:28:24.921Z","url":"/api/v1/classes/school/6781c938440551abca63997d/year/2024%2F2025"}
{"body":{"academicYearData":{"endDate":"2026-06-30T00:00:00.000Z","startDate":"2025-09-01T00:00:00.000Z"},"fromYear":"2024/2025","schoolId":"6781c939440551abca6399ee","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558905170_grtv25d5h","timestamp":"2025-01-11T01:28:25.170Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:28:25.198Z","tokenExpiresIn":"1439.9800333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:28:25.223Z","tokenExpiresIn":"1439.9796166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781c939440551abca639a1b","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:28:25.465Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c939440551abca6399ee","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T01:28:25.465Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781c939440551abca639a1b"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T01:28:25.509Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c939440551abca6399ee'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781c939440551abca639a1c","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:28:25.465Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c939440551abca6399ee","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T01:28:25.465Z","year":2}},"index":1}]}
{"body":{"academicYearData":{"endDate":"2026-06-30T00:00:00.000Z","startDate":"2025-09-01T00:00:00.000Z"},"fromYear":"2024/2025","schoolId":"6781c939440551abca6399ee","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"code":"DB_001","error":"Errore nella creazione classi iniziali","level":"error","message":"Error in handleYearTransition:","timestamp":"2025-01-11T01:28:25.513Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c939440551abca6399ee'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:28:25.514Z"}
{"duration":"347ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736558905170_grtv25d5h","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T01:28:25.517Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558905665_ooyjxxp0n","timestamp":"2025-01-11T01:28:25.665Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:28:25.696Z","tokenExpiresIn":"1439.9717333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:28:25.719Z","tokenExpiresIn":"1439.97135 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:28:25.725Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:28:25.728Z"}
{"duration":"66ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736558905665_ooyjxxp0n","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:28:25.731Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736558905891_l1u1uqqt0","timestamp":"2025-01-11T01:28:25.891Z","url":"/api/v1/schools/6781c939440551abca639a40/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:28:25.931Z","tokenExpiresIn":"1439.9678166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:28:25.956Z","tokenExpiresIn":"1439.9674 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"68ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736558905891_l1u1uqqt0","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:28:25.959Z","url":"/api/v1/schools/6781c939440551abca639a40/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:28:26.124Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:30:33.283Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:30:33.289Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:30:33.291Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:30:33.293Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:30:33.294Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:30:33.296Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:30:33.462Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:30:33.498Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-11T01:30:34.040Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:30:34.064Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:30:34.065Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559034287_lbheukbm1","timestamp":"2025-01-11T01:30:34.288Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:30:34.301Z"}
{"duration":"235ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736559034287_lbheukbm1","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:30:34.523Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559034565_fbj2m38ic","timestamp":"2025-01-11T01:30:34.565Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:30:34.747Z","tokenExpiresIn":"1439.98755 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:30:34.772Z","tokenExpiresIn":"1439.9871333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781c9ba227b9d765ed936c0","schoolName":"Integration Test School","timestamp":"2025-01-11T01:30:34.814Z"}
{"duration":"253ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736559034565_fbj2m38ic","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:30:34.818Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559034833_3d7jyl3dx","timestamp":"2025-01-11T01:30:34.834Z","url":"/api/v1/schools/6781c9ba227b9d765ed936c0/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:30:34.863Z","tokenExpiresIn":"1439.9856166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:30:34.888Z","tokenExpiresIn":"1439.9851999999998 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"468ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736559034833_3d7jyl3dx","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T01:30:35.302Z","url":"/api/v1/schools/6781c9ba227b9d765ed936c0/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736559035315_hamwb2rrt","timestamp":"2025-01-11T01:30:35.315Z","url":"/api/v1/classes/school/6781c9ba227b9d765ed936c0/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:30:35.348Z","tokenExpiresIn":"1439.9775333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:30:35.374Z","tokenExpiresIn":"1439.9771 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"98ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736559035315_hamwb2rrt","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T01:30:35.413Z","url":"/api/v1/classes/school/6781c9ba227b9d765ed936c0/year/2024%2F2025"}
{"body":{"academicYearData":{"endDate":"2026-06-30T00:00:00.000Z","startDate":"2025-09-01T00:00:00.000Z"},"fromYear":"2024/2025","schoolId":"6781c9bb227b9d765ed9372c","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559035664_ayc7kklov","timestamp":"2025-01-11T01:30:35.664Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:30:35.694Z","tokenExpiresIn":"1439.9717666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:30:35.720Z","tokenExpiresIn":"1439.9713333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781c9bb227b9d765ed93759","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:30:35.960Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c9bb227b9d765ed9372c","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T01:30:35.960Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781c9bb227b9d765ed93759"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T01:30:36.007Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c9bb227b9d765ed9372c'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781c9bb227b9d765ed9375a","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:30:35.961Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781c9bb227b9d765ed9372c","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T01:30:35.961Z","year":2}},"index":1}]}
{"body":{"academicYearData":{"endDate":"2026-06-30T00:00:00.000Z","startDate":"2025-09-01T00:00:00.000Z"},"fromYear":"2024/2025","schoolId":"6781c9bb227b9d765ed9372c","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"code":"DB_001","error":"Errore nella creazione classi iniziali","level":"error","message":"Error in handleYearTransition:","timestamp":"2025-01-11T01:30:36.011Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781c9bb227b9d765ed9372c'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:30:36.013Z"}
{"duration":"352ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736559035664_ayc7kklov","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T01:30:36.016Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559036176_inl9v9oib","timestamp":"2025-01-11T01:30:36.176Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:30:36.207Z","tokenExpiresIn":"1439.9632166666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:30:36.232Z","tokenExpiresIn":"1439.9628 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:30:36.239Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:30:36.242Z"}
{"duration":"69ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736559036176_inl9v9oib","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:30:36.245Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559036423_31fy45c9x","timestamp":"2025-01-11T01:30:36.423Z","url":"/api/v1/schools/6781c9bc227b9d765ed9377e/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:30:36.452Z","tokenExpiresIn":"1439.9591333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:30:36.479Z","tokenExpiresIn":"1439.9586833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"59ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736559036423_31fy45c9x","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:30:36.482Z","url":"/api/v1/schools/6781c9bc227b9d765ed9377e/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:30:36.667Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:40:30.133Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:40:30.139Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:40:30.142Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:40:30.144Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:40:30.147Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:40:30.149Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:40:30.383Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:40:30.408Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-11T01:40:30.868Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:40:30.891Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:40:30.893Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559631085_4s6sxkxg9","timestamp":"2025-01-11T01:40:31.085Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:40:31.092Z"}
{"duration":"196ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736559631085_4s6sxkxg9","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:40:31.281Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559631312_ztqbj5jqn","timestamp":"2025-01-11T01:40:31.313Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:40:31.343Z","tokenExpiresIn":"1439.9942833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:40:31.369Z","tokenExpiresIn":"1439.9938499999998 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781cc0f1ae02de4c3a6ee52","schoolName":"Integration Test School","timestamp":"2025-01-11T01:40:31.411Z"}
{"duration":"106ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736559631312_ztqbj5jqn","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:40:31.418Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559631438_nqpm1oil3","timestamp":"2025-01-11T01:40:31.438Z","url":"/api/v1/schools/6781cc0f1ae02de4c3a6ee52/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:40:31.466Z","tokenExpiresIn":"1439.9922333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:40:31.493Z","tokenExpiresIn":"1439.9917833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"533ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736559631438_nqpm1oil3","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T01:40:31.971Z","url":"/api/v1/schools/6781cc0f1ae02de4c3a6ee52/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736559631985_fikt2pi7t","timestamp":"2025-01-11T01:40:31.985Z","url":"/api/v1/classes/school/6781cc0f1ae02de4c3a6ee52/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:40:32.020Z","tokenExpiresIn":"1439.983 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:40:32.045Z","tokenExpiresIn":"1439.9825833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"100ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736559631985_fikt2pi7t","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T01:40:32.085Z","url":"/api/v1/classes/school/6781cc0f1ae02de4c3a6ee52/year/2024%2F2025"}
{"body":{"academicYearData":{"endDate":"2026-06-30T00:00:00.000Z","startDate":"2025-09-01T00:00:00.000Z"},"fromYear":"2024/2025","schoolId":"6781cc101ae02de4c3a6eec3","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559632360_3qhv5nitw","timestamp":"2025-01-11T01:40:32.360Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:40:32.390Z","tokenExpiresIn":"1439.9768333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:40:32.414Z","tokenExpiresIn":"1439.9764499999999 minutes","userId":"6781b04838bdacd26c739bc9"}
{"level":"error","message":"class error:","timestamp":"2025-01-11T01:40:32.437Z"}
{"duration":"80ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736559632360_3qhv5nitw","responseSize":"93 Bytes","statusCode":500,"timestamp":"2025-01-11T01:40:32.441Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559632602_r6ds7kvst","timestamp":"2025-01-11T01:40:32.602Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:40:32.634Z","tokenExpiresIn":"1439.9727666666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:40:32.658Z","tokenExpiresIn":"1439.9723666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:40:32.664Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:40:32.667Z"}
{"duration":"67ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736559632602_r6ds7kvst","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:40:32.669Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559632835_9a5zjy4n0","timestamp":"2025-01-11T01:40:32.835Z","url":"/api/v1/schools/6781cc101ae02de4c3a6eedf/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:40:32.861Z","tokenExpiresIn":"1439.9689833333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:40:32.887Z","tokenExpiresIn":"1439.96855 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"55ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736559632835_9a5zjy4n0","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:40:32.890Z","url":"/api/v1/schools/6781cc101ae02de4c3a6eedf/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:40:33.045Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:42:02.003Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:42:02.013Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:42:02.015Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:42:02.017Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:42:02.019Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:42:02.021Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:42:02.066Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:42:02.087Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-11T01:42:02.590Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:42:02.614Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:42:02.616Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559722967_f7koukbbq","timestamp":"2025-01-11T01:42:02.967Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:42:02.974Z"}
{"duration":"187ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736559722967_f7koukbbq","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:42:03.154Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559723181_3anaq6o3z","timestamp":"2025-01-11T01:42:03.181Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:42:03.209Z","tokenExpiresIn":"1439.9965166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:42:03.238Z","tokenExpiresIn":"1439.9960333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781cc6b5fabc54aa307fe3b","schoolName":"Integration Test School","timestamp":"2025-01-11T01:42:03.291Z"}
{"duration":"118ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736559723181_3anaq6o3z","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:42:03.299Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559723323_pefm0ktcd","timestamp":"2025-01-11T01:42:03.323Z","url":"/api/v1/schools/6781cc6b5fabc54aa307fe3b/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:42:03.361Z","tokenExpiresIn":"1439.9939833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:42:03.393Z","tokenExpiresIn":"1439.9934500000002 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"536ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736559723323_pefm0ktcd","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T01:42:03.859Z","url":"/api/v1/schools/6781cc6b5fabc54aa307fe3b/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736559723874_ueopd1aqh","timestamp":"2025-01-11T01:42:03.874Z","url":"/api/v1/classes/school/6781cc6b5fabc54aa307fe3b/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:42:03.905Z","tokenExpiresIn":"1439.9849166666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:42:03.932Z","tokenExpiresIn":"1439.9844666666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"97ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736559723874_ueopd1aqh","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T01:42:03.971Z","url":"/api/v1/classes/school/6781cc6b5fabc54aa307fe3b/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781cc6c5fabc54aa307feaa","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559724246_ekzf8z6ue","timestamp":"2025-01-11T01:42:04.246Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:42:04.277Z","tokenExpiresIn":"1439.9787166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:42:04.302Z","tokenExpiresIn":"1439.9783 minutes","userId":"6781b04838bdacd26c739bc9"}
{"level":"error","message":"class error:","timestamp":"2025-01-11T01:42:04.323Z"}
{"duration":"83ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736559724246_ekzf8z6ue","responseSize":"93 Bytes","statusCode":500,"timestamp":"2025-01-11T01:42:04.329Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559724500_gs0frw7i8","timestamp":"2025-01-11T01:42:04.500Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:42:04.526Z","tokenExpiresIn":"1439.9745666666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:42:04.551Z","tokenExpiresIn":"1439.9741499999998 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:42:04.557Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:42:04.560Z"}
{"duration":"63ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736559724500_gs0frw7i8","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:42:04.563Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559724729_f0wiadc2y","timestamp":"2025-01-11T01:42:04.729Z","url":"/api/v1/schools/6781cc6c5fabc54aa307fec8/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:42:04.757Z","tokenExpiresIn":"1439.9707166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:42:04.781Z","tokenExpiresIn":"1439.9703166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"54ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736559724729_f0wiadc2y","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:42:04.783Z","url":"/api/v1/schools/6781cc6c5fabc54aa307fec8/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:42:04.935Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:43:56.791Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:43:56.804Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:43:56.806Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:43:56.809Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:43:56.811Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:43:56.814Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:43:57.214Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:43:57.234Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-11T01:43:57.713Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:43:57.738Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:43:57.739Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559837953_z0diw47ih","timestamp":"2025-01-11T01:43:57.953Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:43:57.961Z"}
{"duration":"208ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736559837953_z0diw47ih","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:43:58.162Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559838194_dmea8jrqr","timestamp":"2025-01-11T01:43:58.194Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:43:58.223Z","tokenExpiresIn":"1439.9962833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:43:58.249Z","tokenExpiresIn":"1439.99585 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781ccdea4f84b235395ae57","schoolName":"Integration Test School","timestamp":"2025-01-11T01:43:58.290Z"}
{"duration":"100ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736559838194_dmea8jrqr","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:43:58.294Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559838309_bkkuhepmt","timestamp":"2025-01-11T01:43:58.309Z","url":"/api/v1/schools/6781ccdea4f84b235395ae57/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:43:58.337Z","tokenExpiresIn":"1439.9943833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:43:58.362Z","tokenExpiresIn":"1439.9939666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"641ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736559838309_bkkuhepmt","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T01:43:58.950Z","url":"/api/v1/schools/6781ccdea4f84b235395ae57/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736559838975_fagd65kyb","timestamp":"2025-01-11T01:43:58.975Z","url":"/api/v1/classes/school/6781ccdea4f84b235395ae57/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:43:59.009Z","tokenExpiresIn":"1439.9831833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:43:59.034Z","tokenExpiresIn":"1439.9827666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"97ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736559838975_fagd65kyb","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T01:43:59.072Z","url":"/api/v1/classes/school/6781ccdea4f84b235395ae57/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781ccdfa4f84b235395aecb","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559839350_a88u3su04","timestamp":"2025-01-11T01:43:59.350Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:43:59.379Z","tokenExpiresIn":"1439.9770166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:43:59.406Z","tokenExpiresIn":"1439.9765666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"level":"error","message":"class error:","timestamp":"2025-01-11T01:43:59.429Z"}
{"duration":"83ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736559839350_a88u3su04","responseSize":"93 Bytes","statusCode":500,"timestamp":"2025-01-11T01:43:59.434Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559839616_bghkluxx7","timestamp":"2025-01-11T01:43:59.616Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:43:59.646Z","tokenExpiresIn":"1439.9725666666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:43:59.670Z","tokenExpiresIn":"1439.9721666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:43:59.676Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:43:59.678Z"}
{"duration":"65ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736559839616_bghkluxx7","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:43:59.681Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559839850_ax7fbjqjf","timestamp":"2025-01-11T01:43:59.850Z","url":"/api/v1/schools/6781ccdfa4f84b235395aee9/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:43:59.879Z","tokenExpiresIn":"1439.9686833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:43:59.908Z","tokenExpiresIn":"1439.9682 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"61ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736559839850_ax7fbjqjf","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:43:59.911Z","url":"/api/v1/schools/6781ccdfa4f84b235395aee9/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:44:00.061Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:45:25.140Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:45:25.154Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:45:25.158Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:45:25.162Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:45:25.165Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:45:25.169Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:45:25.611Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:45:25.630Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-11T01:45:26.118Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:45:26.138Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:45:26.139Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559926340_aj600mezh","timestamp":"2025-01-11T01:45:26.341Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:45:26.347Z"}
{"duration":"198ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736559926340_aj600mezh","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:45:26.538Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559926568_hhzg46mkn","timestamp":"2025-01-11T01:45:26.568Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:45:26.598Z","tokenExpiresIn":"1439.9900333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:45:26.626Z","tokenExpiresIn":"1439.9895666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781cd361d5e292b0d092699","schoolName":"Integration Test School","timestamp":"2025-01-11T01:45:26.664Z"}
{"duration":"101ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736559926568_hhzg46mkn","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:45:26.670Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559926693_xc1mif3gq","timestamp":"2025-01-11T01:45:26.694Z","url":"/api/v1/schools/6781cd361d5e292b0d092699/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:45:26.724Z","tokenExpiresIn":"1439.9879333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:45:26.751Z","tokenExpiresIn":"1439.9874833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"559ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736559926693_xc1mif3gq","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T01:45:27.252Z","url":"/api/v1/schools/6781cd361d5e292b0d092699/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736559927280_b092glbfg","timestamp":"2025-01-11T01:45:27.280Z","url":"/api/v1/classes/school/6781cd361d5e292b0d092699/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:45:27.318Z","tokenExpiresIn":"1439.9780333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:45:27.353Z","tokenExpiresIn":"1439.9774499999999 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"129ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736559927280_b092glbfg","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T01:45:27.409Z","url":"/api/v1/classes/school/6781cd361d5e292b0d092699/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781cd371d5e292b0d09270b","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559927762_o1ttijw29","timestamp":"2025-01-11T01:45:27.762Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:45:27.793Z","tokenExpiresIn":"1439.9701166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:45:27.821Z","tokenExpiresIn":"1439.96965 minutes","userId":"6781b04838bdacd26c739bc9"}
{"code":11000,"insertedDocs":[{"__v":0,"_id":"6781cd381d5e292b0d092724","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:45:28.134Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781cd371d5e292b0d09270b","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T01:45:28.134Z","year":1}],"level":"error","message":"Error in createInitialClasses:","result":{"deletedCount":0,"insertedCount":1,"insertedIds":{"0":"6781cd381d5e292b0d092724"},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"timestamp":"2025-01-11T01:45:28.180Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781cd371d5e292b0d09270b'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","index":1,"op":{"__v":0,"_id":"6781cd381d5e292b0d092725","academicYear":"2025/2026","capacity":25,"createdAt":"2025-01-11T01:45:28.134Z","isActive":true,"mainTeacher":"6781b04838bdacd26c739bc9","schoolId":"6781cd371d5e292b0d09270b","section":"A","status":"planned","students":[],"teachers":[],"updatedAt":"2025-01-11T01:45:28.134Z","year":2}},"index":1}]}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781cd371d5e292b0d09270b'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:45:28.190Z"}
{"duration":"431ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736559927762_o1ttijw29","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T01:45:28.193Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559928394_9wu1apog2","timestamp":"2025-01-11T01:45:28.394Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:45:28.425Z","tokenExpiresIn":"1439.9595833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:45:28.450Z","tokenExpiresIn":"1439.9591666666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:45:28.457Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:45:28.459Z"}
{"duration":"69ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736559928394_9wu1apog2","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:45:28.463Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736559928626_dytb8tuw3","timestamp":"2025-01-11T01:45:28.626Z","url":"/api/v1/schools/6781cd381d5e292b0d09273f/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:45:28.654Z","tokenExpiresIn":"1439.9557666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:45:28.680Z","tokenExpiresIn":"1439.9553333333336 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"57ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736559928626_dytb8tuw3","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:45:28.683Z","url":"/api/v1/schools/6781cd381d5e292b0d09273f/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:45:28.846Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:47:48.125Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:47:48.132Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:47:48.134Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:47:48.136Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:47:48.138Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:47:48.140Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:47:48.176Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:47:48.197Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-11T01:47:48.699Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:47:48.721Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:47:48.722Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560068929_14ctvyu61","timestamp":"2025-01-11T01:47:48.929Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:47:48.935Z"}
{"duration":"342ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560068929_14ctvyu61","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:47:49.271Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560069291_5v2s6i8d9","timestamp":"2025-01-11T01:47:49.291Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:47:49.321Z","tokenExpiresIn":"1439.99465 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:47:49.347Z","tokenExpiresIn":"1439.9942166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781cdc5342aa8b11019525b","schoolName":"Integration Test School","timestamp":"2025-01-11T01:47:49.389Z"}
{"duration":"101ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560069291_5v2s6i8d9","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:47:49.392Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560069407_5kw11xvo9","timestamp":"2025-01-11T01:47:49.407Z","url":"/api/v1/schools/6781cdc5342aa8b11019525b/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:47:49.436Z","tokenExpiresIn":"1439.9927333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:47:49.462Z","tokenExpiresIn":"1439.9923000000001 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"463ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560069407_5kw11xvo9","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T01:47:49.870Z","url":"/api/v1/schools/6781cdc5342aa8b11019525b/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736560069883_gmzsz0rvc","timestamp":"2025-01-11T01:47:49.883Z","url":"/api/v1/classes/school/6781cdc5342aa8b11019525b/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:47:49.914Z","tokenExpiresIn":"1439.9847666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:47:49.940Z","tokenExpiresIn":"1439.9843333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"96ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736560069883_gmzsz0rvc","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T01:47:49.979Z","url":"/api/v1/classes/school/6781cdc5342aa8b11019525b/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781cdc6342aa8b1101952d0","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560070254_j1oe0ts3n","timestamp":"2025-01-11T01:47:50.254Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:47:50.285Z","tokenExpiresIn":"1439.9785833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:47:50.312Z","tokenExpiresIn":"1439.9781333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781cdc6342aa8b1101952d0'), year: 2, section: \"A\", academicYear: \"2025/2026\" }","level":"error","message":"Error in createInitialClasses:","stack":"MongoServerError: E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781cdc6342aa8b1101952d0'), year: 2, section: \"A\", academicYear: \"2025/2026\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-11T01:47:50.622Z"}
{"code":"DB_001","level":"error","message":"Errore nella creazione classi iniziali","metadata":{"originalError":"E11000 duplicate key error collection: brainscanner_test.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('6781cdc6342aa8b1101952d0'), year: 2, section: \"A\", academicYear: \"2025/2026\" }"},"status":500,"timestamp":"2025-01-11T01:47:50.653Z"}
{"duration":"405ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736560070254_j1oe0ts3n","responseSize":"95 Bytes","statusCode":500,"timestamp":"2025-01-11T01:47:50.659Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560070840_9cghcp5c1","timestamp":"2025-01-11T01:47:50.840Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:47:50.866Z","tokenExpiresIn":"1439.9689 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:47:50.892Z","tokenExpiresIn":"1439.9684666666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:47:50.898Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:47:50.902Z"}
{"duration":"67ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736560070840_9cghcp5c1","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:47:50.907Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560071086_08n7eu3gw","timestamp":"2025-01-11T01:47:51.086Z","url":"/api/v1/schools/6781cdc7342aa8b110195306/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:47:51.114Z","tokenExpiresIn":"1439.9647666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:47:51.141Z","tokenExpiresIn":"1439.9643166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"58ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736560071086_08n7eu3gw","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:47:51.144Z","url":"/api/v1/schools/6781cdc7342aa8b110195306/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:47:51.322Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:49:37.308Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:49:37.313Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:49:37.315Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:49:37.317Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:49:37.319Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:49:37.321Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:49:37.468Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:49:37.486Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-11T01:49:37.962Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:49:37.981Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:49:37.982Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560178184_ruqcsoeao","timestamp":"2025-01-11T01:49:38.185Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:49:38.191Z"}
{"duration":"213ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560178184_ruqcsoeao","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:49:38.397Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560178426_egmhcl0ro","timestamp":"2025-01-11T01:49:38.426Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:49:38.460Z","tokenExpiresIn":"1439.9923333333331 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:49:38.490Z","tokenExpiresIn":"1439.9918333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781ce32eec5198b24105441","schoolName":"Integration Test School","timestamp":"2025-01-11T01:49:38.531Z"}
{"duration":"108ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560178426_egmhcl0ro","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:49:38.534Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560178550_fv4adt5e5","timestamp":"2025-01-11T01:49:38.550Z","url":"/api/v1/schools/6781ce32eec5198b24105441/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:49:38.579Z","tokenExpiresIn":"1439.99035 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:49:38.603Z","tokenExpiresIn":"1439.98995 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"568ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560178550_fv4adt5e5","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T01:49:39.118Z","url":"/api/v1/schools/6781ce32eec5198b24105441/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736560179131_tm90v3kl2","timestamp":"2025-01-11T01:49:39.132Z","url":"/api/v1/classes/school/6781ce32eec5198b24105441/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:49:39.160Z","tokenExpiresIn":"1439.9806666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:49:39.183Z","tokenExpiresIn":"1439.9802833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"87ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736560179131_tm90v3kl2","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T01:49:39.218Z","url":"/api/v1/classes/school/6781ce32eec5198b24105441/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781ce33eec5198b241054ba","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560179491_o6cj1yhn6","timestamp":"2025-01-11T01:49:39.491Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:49:39.518Z","tokenExpiresIn":"1439.9747 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:49:39.548Z","tokenExpiresIn":"1439.9742 minutes","userId":"6781b04838bdacd26c739bc9"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:51:44.387Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:51:44.397Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:51:44.400Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:51:44.402Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:51:44.404Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:51:44.405Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:51:44.447Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:51:44.467Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-11T01:51:45.754Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:51:45.777Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:51:45.783Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560305977_3yhnjo4yp","timestamp":"2025-01-11T01:51:45.978Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:51:45.983Z"}
{"duration":"186ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560305977_3yhnjo4yp","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:51:46.163Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560306187_k3j2583sl","timestamp":"2025-01-11T01:51:46.187Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:51:46.215Z","tokenExpiresIn":"1439.9964166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:51:46.241Z","tokenExpiresIn":"1439.9959833333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781ceb23d7b36fcfa278634","schoolName":"Integration Test School","timestamp":"2025-01-11T01:51:46.279Z"}
{"duration":"95ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560306187_k3j2583sl","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:51:46.282Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560306296_nwubyn8e4","timestamp":"2025-01-11T01:51:46.296Z","url":"/api/v1/schools/6781ceb23d7b36fcfa278634/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:51:46.328Z","tokenExpiresIn":"1439.9945333333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:51:46.353Z","tokenExpiresIn":"1439.9941166666665 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"512ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560306296_nwubyn8e4","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T01:51:46.808Z","url":"/api/v1/schools/6781ceb23d7b36fcfa278634/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736560306823_mtt68fb27","timestamp":"2025-01-11T01:51:46.823Z","url":"/api/v1/classes/school/6781ceb23d7b36fcfa278634/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:51:46.854Z","tokenExpiresIn":"1439.9857666666664 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:51:46.878Z","tokenExpiresIn":"1439.9853666666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"93ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736560306823_mtt68fb27","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T01:51:46.916Z","url":"/api/v1/classes/school/6781ceb23d7b36fcfa278634/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781ceb33d7b36fcfa2786ae","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560307191_6f038vrof","timestamp":"2025-01-11T01:51:47.191Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:51:47.219Z","tokenExpiresIn":"1439.9796833333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:51:47.245Z","tokenExpiresIn":"1439.97925 minutes","userId":"6781b04838bdacd26c739bc9"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:52:04.294Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:52:04.305Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:52:04.307Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:52:04.309Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:52:04.311Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:52:04.313Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:52:04.360Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:52:04.383Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-11T01:52:04.832Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:52:04.860Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:52:04.862Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560325064_n06cluuuv","timestamp":"2025-01-11T01:52:05.064Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:52:05.071Z"}
{"duration":"200ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560325064_n06cluuuv","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:52:05.264Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560325295_f6rke9gjw","timestamp":"2025-01-11T01:52:05.295Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:52:05.328Z","tokenExpiresIn":"1439.9945333333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:52:05.356Z","tokenExpiresIn":"1439.9940666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781cec5b10e2e8e94123b84","schoolName":"Integration Test School","timestamp":"2025-01-11T01:52:05.395Z"}
{"duration":"103ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560325295_f6rke9gjw","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:52:05.398Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560325418_5t5pww93o","timestamp":"2025-01-11T01:52:05.418Z","url":"/api/v1/schools/6781cec5b10e2e8e94123b84/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:52:05.454Z","tokenExpiresIn":"1439.9924333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:52:05.488Z","tokenExpiresIn":"1439.9918666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"631ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560325418_5t5pww93o","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T01:52:06.049Z","url":"/api/v1/schools/6781cec5b10e2e8e94123b84/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736560326070_aazc4heum","timestamp":"2025-01-11T01:52:06.070Z","url":"/api/v1/classes/school/6781cec5b10e2e8e94123b84/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:52:06.108Z","tokenExpiresIn":"1439.9815333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:52:06.146Z","tokenExpiresIn":"1439.9809 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"132ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736560326070_aazc4heum","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T01:52:06.202Z","url":"/api/v1/classes/school/6781cec5b10e2e8e94123b84/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781cec6b10e2e8e94123bfb","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560326523_ye6k6j2rv","timestamp":"2025-01-11T01:52:06.523Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:52:06.550Z","tokenExpiresIn":"1439.9741666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:52:06.575Z","tokenExpiresIn":"1439.97375 minutes","userId":"6781b04838bdacd26c739bc9"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560336670_bq6ngb0c4","timestamp":"2025-01-11T01:52:16.670Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:52:16.699Z","tokenExpiresIn":"1439.8050166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:52:16.723Z","tokenExpiresIn":"1439.8046166666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:52:16.729Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:52:16.732Z"}
{"duration":"65ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736560336670_bq6ngb0c4","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:52:16.735Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560336894_95zzos1yv","timestamp":"2025-01-11T01:52:16.894Z","url":"/api/v1/schools/6781ced0b10e2e8e94123c19/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:52:16.921Z","tokenExpiresIn":"1439.8013166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:52:16.945Z","tokenExpiresIn":"1439.8009166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"54ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736560336894_95zzos1yv","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:52:16.948Z","url":"/api/v1/schools/6781ced0b10e2e8e94123c19/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:52:17.124Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:54:04.262Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:54:04.272Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:54:04.275Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:54:04.277Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:54:04.280Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:54:04.282Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:54:04.687Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:54:04.705Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-11T01:54:05.215Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:54:05.234Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:54:05.239Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560445441_1vfjf3hjc","timestamp":"2025-01-11T01:54:05.442Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:54:05.449Z"}
{"duration":"211ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560445441_1vfjf3hjc","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:54:05.652Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560445678_nwri6079e","timestamp":"2025-01-11T01:54:05.679Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:54:05.709Z","tokenExpiresIn":"1439.9881833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:54:05.734Z","tokenExpiresIn":"1439.9877666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781cf3df7e4891250763b23","schoolName":"Integration Test School","timestamp":"2025-01-11T01:54:05.777Z"}
{"duration":"102ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560445678_nwri6079e","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:54:05.780Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560445795_j7h2l1wmf","timestamp":"2025-01-11T01:54:05.795Z","url":"/api/v1/schools/6781cf3df7e4891250763b23/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:54:05.822Z","tokenExpiresIn":"1439.9863 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:54:05.848Z","tokenExpiresIn":"1439.9858666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"484ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560445795_j7h2l1wmf","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T01:54:06.279Z","url":"/api/v1/schools/6781cf3df7e4891250763b23/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736560446291_epolw4wl1","timestamp":"2025-01-11T01:54:06.292Z","url":"/api/v1/classes/school/6781cf3df7e4891250763b23/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:54:06.322Z","tokenExpiresIn":"1439.9779666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:54:06.348Z","tokenExpiresIn":"1439.9775333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"94ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736560446291_epolw4wl1","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T01:54:06.386Z","url":"/api/v1/classes/school/6781cf3df7e4891250763b23/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781cf3ef7e4891250763b9d","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560446662_7a9hqgbur","timestamp":"2025-01-11T01:54:06.662Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:54:06.690Z","tokenExpiresIn":"1439.9718333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:54:06.713Z","tokenExpiresIn":"1439.97145 minutes","userId":"6781b04838bdacd26c739bc9"}
{"level":"error","message":"Cannot read properties of undefined (reading 'find')","stack":"TypeError: Cannot read properties of undefined (reading 'find')\n    at ClassController.find [as handleYearTransition] (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\classController.js:257:54)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-11T01:54:06.786Z"}
{"level":"error","message":"class error:","timestamp":"2025-01-11T01:54:06.790Z"}
{"duration":"131ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736560446662_7a9hqgbur","responseSize":"124 Bytes","statusCode":500,"timestamp":"2025-01-11T01:54:06.793Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560446973_dyd3fokba","timestamp":"2025-01-11T01:54:06.973Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:54:07.000Z","tokenExpiresIn":"1439.9666666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:54:07.026Z","tokenExpiresIn":"1439.9662333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:54:07.032Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:54:07.035Z"}
{"duration":"65ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736560446973_dyd3fokba","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:54:07.038Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560447224_3waxm8mus","timestamp":"2025-01-11T01:54:07.224Z","url":"/api/v1/schools/6781cf3ff7e4891250763bbc/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:54:07.256Z","tokenExpiresIn":"1439.9624000000001 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:54:07.281Z","tokenExpiresIn":"1439.9619833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"60ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736560447224_3waxm8mus","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:54:07.284Z","url":"/api/v1/schools/6781cf3ff7e4891250763bbc/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:54:07.435Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T01:55:21.514Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T01:55:21.525Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T01:55:21.527Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T01:55:21.529Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T01:55:21.531Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T01:55:21.533Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T01:55:21.956Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T01:55:21.976Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-11T01:55:22.434Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T01:55:22.453Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T01:55:22.454Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560522654_40s505p05","timestamp":"2025-01-11T01:55:22.654Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T01:55:22.660Z"}
{"duration":"191ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560522654_40s505p05","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T01:55:22.846Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560522876_5scvf1lns","timestamp":"2025-01-11T01:55:22.876Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:55:22.907Z","tokenExpiresIn":"1439.9848833333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:55:22.933Z","tokenExpiresIn":"1439.98445 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"6781cf8a8b327ab8bc72e0f4","schoolName":"Integration Test School","timestamp":"2025-01-11T01:55:22.972Z"}
{"duration":"99ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560522876_5scvf1lns","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T01:55:22.975Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560522993_ml9dvs1ga","timestamp":"2025-01-11T01:55:22.994Z","url":"/api/v1/schools/6781cf8a8b327ab8bc72e0f4/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:55:23.021Z","tokenExpiresIn":"1439.9829833333336 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:55:23.049Z","tokenExpiresIn":"1439.9825166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"491ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560522993_ml9dvs1ga","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T01:55:23.484Z","url":"/api/v1/schools/6781cf8a8b327ab8bc72e0f4/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736560523498_qxi9z36fx","timestamp":"2025-01-11T01:55:23.498Z","url":"/api/v1/classes/school/6781cf8a8b327ab8bc72e0f4/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:55:23.530Z","tokenExpiresIn":"1439.9745 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:55:23.555Z","tokenExpiresIn":"1439.9740833333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"97ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736560523498_qxi9z36fx","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T01:55:23.595Z","url":"/api/v1/classes/school/6781cf8a8b327ab8bc72e0f4/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"6781cf8b8b327ab8bc72e16d","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560523884_wgmneq6z6","timestamp":"2025-01-11T01:55:23.884Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:55:23.912Z","tokenExpiresIn":"1439.9681333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:55:23.936Z","tokenExpiresIn":"1439.9677333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"227ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736560523884_wgmneq6z6","responseSize":"1.04 KB","statusCode":200,"timestamp":"2025-01-11T01:55:24.111Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560524277_9f4cq2p70","timestamp":"2025-01-11T01:55:24.277Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:55:24.307Z","tokenExpiresIn":"1439.96155 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:55:24.332Z","tokenExpiresIn":"1439.9611333333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T01:55:24.338Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T01:55:24.342Z"}
{"duration":"68ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736560524277_9f4cq2p70","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T01:55:24.345Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736560524514_r7lk6qbdk","timestamp":"2025-01-11T01:55:24.514Z","url":"/api/v1/schools/6781cf8c8b327ab8bc72e19a/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:55:24.541Z","tokenExpiresIn":"1439.95765 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T01:55:24.566Z","tokenExpiresIn":"1439.9572333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"56ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736560524514_r7lk6qbdk","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T01:55:24.570Z","url":"/api/v1/schools/6781cf8c8b327ab8bc72e19a/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T01:55:24.765Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T08:56:17.509Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T08:56:17.525Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T08:56:17.529Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T08:56:17.531Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T08:56:17.533Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T08:56:17.536Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T08:56:17.597Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T08:56:17.638Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-11T08:56:18.245Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T08:56:18.282Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T08:56:18.283Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736585778522_x2xt5g8m1","timestamp":"2025-01-11T08:56:18.522Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T08:56:18.531Z"}
{"duration":"225ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736585778522_x2xt5g8m1","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T08:56:18.748Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736585778786_74tmokyup","timestamp":"2025-01-11T08:56:18.786Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T08:56:18.950Z","tokenExpiresIn":"1439.9841666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T08:56:18.976Z","tokenExpiresIn":"1439.9837333333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"678232329c823dd0d0bb6a45","schoolName":"Integration Test School","timestamp":"2025-01-11T08:56:19.033Z"}
{"duration":"251ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736585778786_74tmokyup","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T08:56:19.037Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736585779052_kbciaeo79","timestamp":"2025-01-11T08:56:19.052Z","url":"/api/v1/schools/678232329c823dd0d0bb6a45/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T08:56:19.080Z","tokenExpiresIn":"1439.982 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T08:56:19.106Z","tokenExpiresIn":"1439.9815666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"544ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736585779052_kbciaeo79","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T08:56:19.597Z","url":"/api/v1/schools/678232329c823dd0d0bb6a45/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736585779613_6nja1ii47","timestamp":"2025-01-11T08:56:19.613Z","url":"/api/v1/classes/school/678232329c823dd0d0bb6a45/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T08:56:19.647Z","tokenExpiresIn":"1439.97255 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T08:56:19.670Z","tokenExpiresIn":"1439.9721666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"107ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736585779613_6nja1ii47","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T08:56:19.720Z","url":"/api/v1/classes/school/678232329c823dd0d0bb6a45/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"678232339c823dd0d0bb6ab7","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736585780004_aq06gvbpa","timestamp":"2025-01-11T08:56:20.004Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T08:56:20.030Z","tokenExpiresIn":"1439.9661666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T08:56:20.057Z","tokenExpiresIn":"1439.9657166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"246ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736585780004_aq06gvbpa","responseSize":"1.04 KB","statusCode":200,"timestamp":"2025-01-11T08:56:20.250Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736585780430_5t4t5k5rm","timestamp":"2025-01-11T08:56:20.430Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T08:56:20.462Z","tokenExpiresIn":"1439.9589666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T08:56:20.490Z","tokenExpiresIn":"1439.9585 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T08:56:20.496Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T08:56:20.498Z"}
{"duration":"72ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736585780430_5t4t5k5rm","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T08:56:20.502Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736585780673_fmb6cpui9","timestamp":"2025-01-11T08:56:20.673Z","url":"/api/v1/schools/678232349c823dd0d0bb6ae4/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T08:56:20.702Z","tokenExpiresIn":"1439.9549666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T08:56:20.727Z","tokenExpiresIn":"1439.95455 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"57ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736585780673_fmb6cpui9","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T08:56:20.730Z","url":"/api/v1/schools/678232349c823dd0d0bb6ae4/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T08:56:20.902Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T09:06:42.568Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T09:06:42.582Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T09:06:42.585Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T09:06:42.587Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T09:06:42.590Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T09:06:42.592Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T09:06:42.633Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T09:06:42.653Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-11T09:06:43.142Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T09:06:43.167Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T09:06:43.168Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736586403369_a7c3l6iuz","timestamp":"2025-01-11T09:06:43.369Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T09:06:43.378Z"}
{"duration":"211ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736586403369_a7c3l6iuz","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T09:06:43.580Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736586403606_5tbw324ia","timestamp":"2025-01-11T09:06:43.607Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:06:43.636Z","tokenExpiresIn":"1439.9894 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:06:43.662Z","tokenExpiresIn":"1439.9889666666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"678234a36d97bc83ace0fd03","schoolName":"Integration Test School","timestamp":"2025-01-11T09:06:43.706Z"}
{"duration":"103ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736586403606_5tbw324ia","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T09:06:43.709Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736586403724_dk2r8itqj","timestamp":"2025-01-11T09:06:43.724Z","url":"/api/v1/schools/678234a36d97bc83ace0fd03/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:06:43.757Z","tokenExpiresIn":"1439.9873833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:06:43.787Z","tokenExpiresIn":"1439.9868833333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"575ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736586403724_dk2r8itqj","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T09:06:44.299Z","url":"/api/v1/schools/678234a36d97bc83ace0fd03/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736586404313_1jk2fr272","timestamp":"2025-01-11T09:06:44.313Z","url":"/api/v1/classes/school/678234a36d97bc83ace0fd03/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:06:44.344Z","tokenExpiresIn":"1439.9776 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:06:44.367Z","tokenExpiresIn":"1439.9772166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"91ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736586404313_1jk2fr272","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T09:06:44.404Z","url":"/api/v1/classes/school/678234a36d97bc83ace0fd03/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"678234a46d97bc83ace0fd7c","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736586404687_h9fz8n4ps","timestamp":"2025-01-11T09:06:44.687Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:06:44.718Z","tokenExpiresIn":"1439.9713666666669 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:06:44.744Z","tokenExpiresIn":"1439.9709333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"242ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736586404687_h9fz8n4ps","responseSize":"1.04 KB","statusCode":200,"timestamp":"2025-01-11T09:06:44.930Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736586405097_a3es1ucq7","timestamp":"2025-01-11T09:06:45.097Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:06:45.125Z","tokenExpiresIn":"1439.9645833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:06:45.148Z","tokenExpiresIn":"1439.9642 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T09:06:45.155Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T09:06:45.158Z"}
{"duration":"64ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736586405097_a3es1ucq7","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T09:06:45.161Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736586405331_2lxz5o1or","timestamp":"2025-01-11T09:06:45.331Z","url":"/api/v1/schools/678234a56d97bc83ace0fda9/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:06:45.362Z","tokenExpiresIn":"1439.9606333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:06:45.386Z","tokenExpiresIn":"1439.9602333333335 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"58ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736586405331_2lxz5o1or","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T09:06:45.390Z","url":"/api/v1/schools/678234a56d97bc83ace0fda9/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T09:06:45.575Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T09:08:15.014Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T09:08:15.020Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T09:08:15.021Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T09:08:15.023Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T09:08:15.025Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T09:08:15.027Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T09:08:15.071Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T09:08:15.103Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-11T09:08:15.444Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T09:08:15.464Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T09:08:15.465Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736586495660_g4utsluzm","timestamp":"2025-01-11T09:08:15.660Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T09:08:15.667Z"}
{"duration":"195ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736586495660_g4utsluzm","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T09:08:15.855Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736586495890_ol9rpkwib","timestamp":"2025-01-11T09:08:15.890Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:08:15.922Z","tokenExpiresIn":"1439.9846333333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:08:15.951Z","tokenExpiresIn":"1439.98415 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"678234ffcfdefa6c9eb7bbf8","schoolName":"Integration Test School","timestamp":"2025-01-11T09:08:15.996Z"}
{"duration":"109ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736586495890_ol9rpkwib","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T09:08:15.999Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736586496016_l19iz10xw","timestamp":"2025-01-11T09:08:16.016Z","url":"/api/v1/schools/678234ffcfdefa6c9eb7bbf8/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:08:16.043Z","tokenExpiresIn":"1439.9826166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:08:16.070Z","tokenExpiresIn":"1439.9821666666664 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"487ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736586496016_l19iz10xw","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T09:08:16.503Z","url":"/api/v1/schools/678234ffcfdefa6c9eb7bbf8/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736586496516_kfyt9hgss","timestamp":"2025-01-11T09:08:16.516Z","url":"/api/v1/classes/school/678234ffcfdefa6c9eb7bbf8/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:08:16.545Z","tokenExpiresIn":"1439.97425 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:08:16.569Z","tokenExpiresIn":"1439.9738666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"94ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736586496516_kfyt9hgss","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T09:08:16.610Z","url":"/api/v1/classes/school/678234ffcfdefa6c9eb7bbf8/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"67823500cfdefa6c9eb7bc6e","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736586496874_g1v8v6u1x","timestamp":"2025-01-11T09:08:16.875Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:08:16.903Z","tokenExpiresIn":"1439.9682833333331 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:08:16.928Z","tokenExpiresIn":"1439.9678666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"233ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736586496874_g1v8v6u1x","responseSize":"1.04 KB","statusCode":200,"timestamp":"2025-01-11T09:08:17.108Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736586497274_bit7a4135","timestamp":"2025-01-11T09:08:17.274Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:08:17.303Z","tokenExpiresIn":"1439.9616166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:08:17.327Z","tokenExpiresIn":"1439.9612166666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T09:08:17.335Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T09:08:17.338Z"}
{"duration":"67ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736586497274_bit7a4135","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T09:08:17.341Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736586497512_k7zv2f1br","timestamp":"2025-01-11T09:08:17.512Z","url":"/api/v1/schools/67823501cfdefa6c9eb7bc9b/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:08:17.544Z","tokenExpiresIn":"1439.9576000000002 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:08:17.570Z","tokenExpiresIn":"1439.9571666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"61ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736586497512_k7zv2f1br","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T09:08:17.573Z","url":"/api/v1/schools/67823501cfdefa6c9eb7bc9b/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T09:08:17.742Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"school","timestamp":"2025-01-11T09:10:12.986Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"user","timestamp":"2025-01-11T09:10:12.989Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"class","timestamp":"2025-01-11T09:10:12.991Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"student","timestamp":"2025-01-11T09:10:12.997Z"}
{"level":"warn","message":"Warning: ModelName mancante nel repository","repository":"test","timestamp":"2025-01-11T09:10:13.000Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-11T09:10:13.002Z"}
{"controllers":["auth","school","user","class","student","test"],"level":"info","message":"Controllers caricati con successo","timestamp":"2025-01-11T09:10:13.045Z"}
{"level":"info","message":"Routes caricate:","protected":["/classes","/schools","/users","/students","/tests"],"public":["/auth"],"timestamp":"2025-01-11T09:10:13.068Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-11T09:10:13.377Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-11T09:10:13.393Z"}
{"level":"info","message":"Ambiente: test","timestamp":"2025-01-11T09:10:13.394Z"}
{"body":{"email":"admin.sama@brainscanner.com","password":"[REDACTED]"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736586613588_3a11ekqcg","timestamp":"2025-01-11T09:10:13.588Z","url":"/api/v1/auth/login"}
{"ip":"::ffff:127.0.0.1","level":"info","message":"Auth Route Called","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-01-11T09:10:13.595Z"}
{"duration":"181ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736586613588_3a11ekqcg","responseSize":"485 Bytes","statusCode":200,"timestamp":"2025-01-11T09:10:13.769Z","url":"/api/v1/auth/login"}
{"body":{"address":"Test Address","name":"Integration Test School","province":"Test Province","region":"Test Region","schoolType":"middle_school"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736586613795_z0zin2hrv","timestamp":"2025-01-11T09:10:13.795Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:10:13.828Z","tokenExpiresIn":"1439.9862 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:10:13.858Z","tokenExpiresIn":"1439.9857000000002 minutes","userId":"6781b04838bdacd26c739bc9"}
{"createdBy":"6781b04838bdacd26c739bc9","level":"info","message":"Scuola creata con successo","schoolId":"67823575391887e066f4feb1","schoolName":"Integration Test School","timestamp":"2025-01-11T09:10:13.896Z"}
{"duration":"104ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736586613795_z0zin2hrv","responseSize":"439 Bytes","statusCode":201,"timestamp":"2025-01-11T09:10:13.899Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025","endDate":"2025-06-30","sections":[{"maxStudents":25,"name":"A"},{"maxStudents":25,"name":"B"}],"startDate":"2024-09-01"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736586613921_41c1mntnj","timestamp":"2025-01-11T09:10:13.921Z","url":"/api/v1/schools/67823575391887e066f4feb1/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:10:13.950Z","tokenExpiresIn":"1439.9841666666666 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:10:13.974Z","tokenExpiresIn":"1439.9837666666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"497ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736586613921_41c1mntnj","responseSize":"885 Bytes","statusCode":200,"timestamp":"2025-01-11T09:10:14.418Z","url":"/api/v1/schools/67823575391887e066f4feb1/setup"}
{"body":{},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1736586614437_0q8nkx24m","timestamp":"2025-01-11T09:10:14.437Z","url":"/api/v1/classes/school/67823575391887e066f4feb1/year/2024%2F2025"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:10:14.472Z","tokenExpiresIn":"1439.9754666666668 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:10:14.498Z","tokenExpiresIn":"1439.9750333333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"101ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1736586614437_0q8nkx24m","responseSize":"1.83 KB","statusCode":200,"timestamp":"2025-01-11T09:10:14.538Z","url":"/api/v1/classes/school/67823575391887e066f4feb1/year/2024%2F2025"}
{"body":{"fromYear":"2024/2025","schoolId":"67823576391887e066f4ff29","sections":[{"mainTeacherId":"6781b04838bdacd26c739bc9","maxStudents":25,"name":"A"}],"toYear":"2025/2026"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736586614825_415wcnel4","timestamp":"2025-01-11T09:10:14.825Z","url":"/api/v1/classes/transition"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:10:14.852Z","tokenExpiresIn":"1439.9691333333333 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:10:14.876Z","tokenExpiresIn":"1439.9687333333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"236ms","ip":"::ffff:127.0.0.1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1736586614825_415wcnel4","responseSize":"1.04 KB","statusCode":200,"timestamp":"2025-01-11T09:10:15.061Z","url":"/api/v1/classes/transition"}
{"body":{"name":"Test School"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736586615222_zjrogbwbc","timestamp":"2025-01-11T09:10:15.222Z","url":"/api/v1/schools"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:10:15.251Z","tokenExpiresIn":"1439.9624833333332 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:10:15.281Z","tokenExpiresIn":"1439.9619833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-01-11T09:10:15.288Z"}
{"error":{"_message":"School validation failed","errors":{"address":{"kind":"required","message":"Path `address` is required.","name":"ValidatorError","path":"address","properties":{"message":"Path `address` is required.","path":"address","type":"required"}},"province":{"kind":"required","message":"Path `province` is required.","name":"ValidatorError","path":"province","properties":{"message":"Path `province` is required.","path":"province","type":"required"}},"region":{"kind":"required","message":"Path `region` is required.","name":"ValidatorError","path":"region","properties":{"message":"Path `region` is required.","path":"region","type":"required"}},"schoolType":{"kind":"required","message":"Path `schoolType` is required.","name":"ValidatorError","path":"schoolType","properties":{"message":"Path `schoolType` is required.","path":"schoolType","type":"required"}}},"message":"School validation failed: address: Path `address` is required., province: Path `province` is required., region: Path `region` is required., schoolType: Path `schoolType` is required.","name":"ValidationError"},"level":"error","message":"Errore nella creazione della scuola","timestamp":"2025-01-11T09:10:15.291Z"}
{"duration":"73ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736586615222_zjrogbwbc","responseSize":"83 Bytes","statusCode":400,"timestamp":"2025-01-11T09:10:15.295Z","url":"/api/v1/schools"}
{"body":{"academicYear":"2024/2025"},"ip":"::ffff:127.0.0.1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1736586615466_yo09v6e5v","timestamp":"2025-01-11T09:10:15.466Z","url":"/api/v1/schools/67823577391887e066f4ff56/setup"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:10:15.497Z","tokenExpiresIn":"1439.9583833333334 minutes","userId":"6781b04838bdacd26c739bc9"}
{"hasSchool":false,"level":"info","message":"✨ Authentication successful","role":"admin","timestamp":"2025-01-11T09:10:15.525Z","tokenExpiresIn":"1439.9579166666667 minutes","userId":"6781b04838bdacd26c739bc9"}
{"duration":"63ms","ip":"::ffff:127.0.0.1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736586615466_yo09v6e5v","responseSize":"85 Bytes","statusCode":400,"timestamp":"2025-01-11T09:10:15.529Z","url":"/api/v1/schools/67823577391887e066f4ff56/setup"}
{"level":"warn","message":"Mongoose connection disconnected","timestamp":"2025-01-11T09:10:15.690Z"}

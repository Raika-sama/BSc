{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/verify","timestamp":"2025-03-04T08:33:42.242Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-03-04T08:33:42.243Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/logout","timestamp":"2025-03-04T08:33:42.253Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-04T08:33:42.253Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/verify","timestamp":"2025-03-04T17:01:22.049Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-03-04T17:01:22.051Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/logout","timestamp":"2025-03-04T17:01:22.075Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-04T17:01:22.076Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/","timestamp":"2025-03-04T18:07:31.806Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{"limit":"25","page":"1","search":"","sort":"-createdAt"},"requestId":"req_1741111651800_rr3eta5dt","timestamp":"2025-03-04T18:07:31.810Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt"}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-04T18:07:31.812Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/","timestamp":"2025-03-04T18:51:03.038Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1741114262826_peclspzu9","timestamp":"2025-03-04T18:51:03.151Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType="}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-04T18:51:03.153Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/","timestamp":"2025-03-04T18:51:04.946Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{"limit":"25","page":"1","search":"","sort":"-createdAt"},"requestId":"req_1741114264940_q9hgefb8l","timestamp":"2025-03-04T18:51:04.949Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt"}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-04T18:51:04.950Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/verify","timestamp":"2025-03-04T18:51:18.553Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-03-04T18:51:18.555Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/logout","timestamp":"2025-03-04T18:51:18.585Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-04T18:51:18.586Z"}
{"error":"Impossibile archiviare l'unico anno accademico disponibile","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"679fdad474255ebc8afab683","timestamp":"2025-03-04T19:10:00.363Z","yearId":"679fdad474255ebc8afab684"}
{"error":"Impossibile archiviare l'unico anno accademico disponibile","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"679fdad474255ebc8afab683","timestamp":"2025-03-04T19:10:00.364Z","yearId":"679fdad474255ebc8afab684"}
{"error":"Errori di validazione","level":"error","message":"Student route error:","method":"POST","path":"/batch-assign","timestamp":"2025-03-04T19:44:04.520Z","userId":"677bfe44f6789c907c9f3766"}
{"code":"AUTH_005","level":"error","message":"Solo i docenti possono accedere a questa risorsa","metadata":{},"status":403,"timestamp":"2025-03-04T19:44:07.957Z"}
{"error":"Solo i docenti possono accedere a questa risorsa","level":"error","message":"Student route error:","method":"GET","path":"/my-students","timestamp":"2025-03-04T19:44:07.958Z","userId":"677bfe44f6789c907c9f3766"}
{"body":{},"error":{"message":"Cannot read properties of undefined (reading 'code')","stack":"TypeError: Cannot read properties of undefined (reading 'code')\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\studentRoutes.js:181:72\n    at Layer.handle_error (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:71:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:326:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:141:14)\n    at StudentController.getMyStudents (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\studentController.js:313:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\studentRoutes.js:28:25\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)"},"level":"error","message":"Errore richiesta","method":"GET","query":{},"requestId":"req_1741117447805_qdnqeoy1c","timestamp":"2025-03-04T19:44:07.966Z","url":"/api/v1/students/my-students"}
{"level":"error","message":"Cannot read properties of undefined (reading 'code')","stack":"TypeError: Cannot read properties of undefined (reading 'code')\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\studentRoutes.js:181:72\n    at Layer.handle_error (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:71:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:326:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:141:14)\n    at StudentController.getMyStudents (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\studentController.js:313:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\studentRoutes.js:28:25\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-03-04T19:44:07.968Z"}
{"error":"Parametro di ricerca richiesto","level":"error","message":"Student route error:","method":"GET","path":"/search","timestamp":"2025-03-04T19:44:17.205Z","userId":"677bfe44f6789c907c9f3766"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/67c236a42373b42426264bf6/classes","timestamp":"2025-03-04T20:09:18.103Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{"academicYear":"2024/2025"},"requestId":"req_1741118958098_b53kpk9l1","timestamp":"2025-03-04T20:09:18.105Z","url":"/api/v1/schools/67c236a42373b42426264bf6/classes?academicYear=2024/2025"}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-04T20:09:18.106Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/67c236a42373b42426264bf6/classes","timestamp":"2025-03-04T20:09:20.058Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{"academicYear":"2024/2025"},"requestId":"req_1741118960052_2k7xdb3n1","timestamp":"2025-03-04T20:09:20.060Z","url":"/api/v1/schools/67c236a42373b42426264bf6/classes?academicYear=2024/2025"}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-04T20:09:20.061Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/verify","timestamp":"2025-03-04T20:09:25.191Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-03-04T20:09:25.192Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/logout","timestamp":"2025-03-04T20:09:25.201Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-04T20:09:25.203Z"}
{"cascade":true,"error":{},"level":"error","message":"Error in delete student:","studentId":"679c7494bdb941a2c47766c8","timestamp":"2025-03-04T20:52:21.515Z"}
{"level":"error","message":"Error deleting student:","timestamp":"2025-03-04T20:52:21.517Z"}
{"error":"Class constructor ObjectId cannot be invoked without 'new'","level":"error","message":"Student route error:","method":"DELETE","path":"/679c7494bdb941a2c47766c8","stack":"TypeError: Class constructor ObjectId cannot be invoked without 'new'\n    at StudentRepository.delete (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\StudentRepository.js:968:74)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async StudentController.delete (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\studentController.js:475:13)","timestamp":"2025-03-04T20:52:21.517Z","userId":"677bfe44f6789c907c9f3766"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/67c5e8191af6a34321b52006/history","timestamp":"2025-03-04T21:09:56.252Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{},"requestId":"req_1741122596237_109mtizu1","timestamp":"2025-03-04T21:09:56.253Z","url":"/api/v1/users/67c5e8191af6a34321b52006/history"}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-04T21:09:56.258Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/verify","timestamp":"2025-03-04T21:13:11.589Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-03-04T21:13:11.604Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/logout","timestamp":"2025-03-04T21:13:11.624Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-04T21:13:11.625Z"}
{"error":{"message":"Token non più valido","metadata":{}},"level":"error","message":"Logout error","timestamp":"2025-03-04T21:26:51.673Z"}
{"error":{"message":"Token non più valido","metadata":{}},"level":"error","message":"Logout failed","timestamp":"2025-03-04T21:26:51.674Z"}
{"error":{},"level":"error","message":"Auth Route Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-04T21:26:51.675Z"}
{"error":{},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-04T21:26:51.676Z","userId":"677bfe44f6789c907c9f3766"}
{"error":{"message":"Token non più valido","metadata":{}},"level":"error","message":"Logout error","timestamp":"2025-03-04T21:41:42.244Z"}
{"error":{"message":"Token non più valido","metadata":{}},"level":"error","message":"Logout failed","timestamp":"2025-03-04T21:41:42.245Z"}
{"error":{},"level":"error","message":"Auth Route Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-04T21:41:42.245Z"}
{"error":{},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-04T21:41:42.247Z","userId":"677bfe44f6789c907c9f3766"}
{"error":"fn is not a function","level":"error","message":"School Route Error:","method":"GET","path":"/679fdad474255ebc8afab683/transition-preview","role":"admin","stack":"TypeError: fn is not a function\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\yearTransitionRoutes.js:24:21\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:204:13\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)","timestamp":"2025-03-04T22:07:39.129Z","userId":"677bfe44f6789c907c9f3766"}
{"error":"options is not defined","level":"error","message":"Errore nell'attivazione dell'anno accademico","schoolId":"679fdad474255ebc8afab683","stack":"ReferenceError: options is not defined\n    at SchoolRepository.activateAcademicYear (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:1612:21)\n    at SchoolController.activateAcademicYear (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:1212:53)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-04T22:09:01.563Z","yearId":"67c755b1c5692f3176937273"}
{"error":"this.classRepository.find(...).session is not a function","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67c763375b0426e1cb851fea","timestamp":"2025-03-04T22:09:39.346Z","yearId":"67c763375b0426e1cb851feb"}
{"error":"this.classRepository.find(...).session is not a function","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67c763375b0426e1cb851fea","stack":"TypeError: this.classRepository.find(...).session is not a function\n    at SchoolRepository.archiveAcademicYear (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:1742:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async SchoolController.archiveAcademicYear (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:1267:31)","timestamp":"2025-03-04T22:09:39.348Z","yearId":"67c763375b0426e1cb851feb"}

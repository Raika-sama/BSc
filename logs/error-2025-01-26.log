{"errorMessage":"jwt expired","errorType":"TokenExpiredError","level":"error","message":"üî• Authentication Error","stack":"TokenExpiredError: jwt expired\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jsonwebtoken\\verify.js:190:21\n    at getSecret (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jsonwebtoken\\verify.js:97:14)\n    at module.exports [as verify] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jsonwebtoken\\verify.js:101:10)\n    at protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:52:29)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)","timestamp":"2025-01-26T13:14:43.131Z","tokenInfo":{"expiredAt":"2025-01-25T22:00:36.000Z","now":"2025-01-26T13:14:43.130Z"}}
{"error":{"message":"Email gi√† registrata","metadata":{}},"level":"error","message":"Error in create student:","studentData":{"classId":"6794b5f6b31aa0c17d37f381","dateOfBirth":"2014-05-12T00:00:00.000Z","email":"test.media2@mail2.it","firstName":"testmedia2","fiscalCode":null,"gender":"F","isActive":true,"lastName":"mediatest2","mainTeacher":"677bfe44f6789c907c9f3766","needsClassAssignment":false,"parentEmail":null,"schoolId":"6794b5f6b31aa0c17d37f371","specialNeeds":false,"status":"active","teachers":[]},"timestamp":"2025-01-26T14:02:56.260Z"}
{"level":"error","message":"Email gi√† registrata","metadata":{},"timestamp":"2025-01-26T14:02:56.261Z"}
{"error":"Email gi√† registrata","level":"error","message":"Student route error:","method":"POST","path":"/","timestamp":"2025-01-26T14:02:56.263Z","userId":"677bfe44f6789c907c9f3766"}
{"error":"Errori di validazione","level":"error","message":"Student route error:","method":"POST","path":"/batch-assign","timestamp":"2025-01-26T14:18:44.299Z","userId":"677bfe44f6789c907c9f3766"}
{"error":"Cannot read properties of undefined (reading 'repository')","level":"error","message":"Student route error:","method":"POST","path":"/with-class","stack":"TypeError: Cannot read properties of undefined (reading 'repository')\n    at createStudentWithClass (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\studentController.js:101:36)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at validateCreate (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\studentValidation.js:109:13)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)","timestamp":"2025-01-26T14:46:44.383Z","userId":"677bfe44f6789c907c9f3766"}
{"error":"Class is not defined","level":"error","message":"Errore nel recupero delle sezioni:","stack":"ReferenceError: Class is not defined\n    at SchoolController.getSections (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:503:37)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-26T15:32:16.234Z"}
{"error":"Class is not defined","level":"error","message":"Errore nel recupero delle sezioni:","stack":"ReferenceError: Class is not defined\n    at SchoolController.getSections (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:503:37)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-26T15:35:02.560Z"}
{"error":"ID scuola non valido","level":"error","message":"Error in SchoolRepository.findById:","timestamp":"2025-01-26T18:23:11.324Z","type":"undefined"}
{"error":"ID scuola non valido","level":"error","message":"Errore nel recupero della scuola:","timestamp":"2025-01-26T18:23:11.324Z"}
{"error":"ID scuola non valido","level":"error","message":"Error in SchoolRepository.findById:","timestamp":"2025-01-26T18:23:11.385Z","type":"undefined"}
{"error":"ID scuola non valido","level":"error","message":"Errore nel recupero della scuola:","timestamp":"2025-01-26T18:23:11.386Z"}
{"error":"ID scuola non valido","level":"error","message":"Error in SchoolRepository.findById:","timestamp":"2025-01-26T18:23:12.829Z","type":"undefined"}
{"error":"ID scuola non valido","level":"error","message":"Errore nel recupero della scuola:","timestamp":"2025-01-26T18:23:12.830Z"}
{"error":"ID scuola non valido","level":"error","message":"Error in SchoolRepository.findById:","timestamp":"2025-01-26T18:23:12.888Z","type":"undefined"}
{"error":"ID scuola non valido","level":"error","message":"Errore nel recupero della scuola:","timestamp":"2025-01-26T18:23:12.888Z"}
{"error":"ID scuola non valido","level":"error","message":"Error in SchoolRepository.findById:","timestamp":"2025-01-26T18:23:40.398Z","type":"undefined"}
{"error":"ID scuola non valido","level":"error","message":"Errore nel recupero della scuola:","timestamp":"2025-01-26T18:23:40.398Z"}
{"error":"ID scuola non valido","level":"error","message":"Error in SchoolRepository.findById:","timestamp":"2025-01-26T18:23:59.725Z","type":"undefined"}
{"error":"ID scuola non valido","level":"error","message":"Errore nel recupero della scuola:","timestamp":"2025-01-26T18:23:59.726Z"}
{"error":"ID scuola non valido","level":"error","message":"Error in SchoolRepository.findById:","timestamp":"2025-01-26T18:23:59.789Z","type":"undefined"}
{"error":"ID scuola non valido","level":"error","message":"Errore nel recupero della scuola:","timestamp":"2025-01-26T18:23:59.789Z"}
{"error":"ID scuola non valido","level":"error","message":"Error in SchoolRepository.findById:","timestamp":"2025-01-26T18:28:16.461Z","type":"undefined"}
{"error":"ID scuola non valido","level":"error","message":"Errore nel recupero della scuola:","timestamp":"2025-01-26T18:28:16.461Z"}
{"error":"ID scuola non valido","level":"error","message":"Error in SchoolRepository.findById:","timestamp":"2025-01-26T18:28:29.153Z","type":"undefined"}
{"error":"ID scuola non valido","level":"error","message":"Errore nel recupero della scuola:","timestamp":"2025-01-26T18:28:29.153Z"}
{"error":"ID scuola non valido","level":"error","message":"Error in SchoolRepository.findById:","timestamp":"2025-01-26T18:28:29.208Z","type":"undefined"}
{"error":"ID scuola non valido","level":"error","message":"Errore nel recupero della scuola:","timestamp":"2025-01-26T18:28:29.209Z"}
{"error":"ID scuola non valido","level":"error","message":"Error in SchoolRepository.findById:","timestamp":"2025-01-26T18:28:33.424Z","type":"undefined"}
{"error":"ID scuola non valido","level":"error","message":"Errore nel recupero della scuola:","timestamp":"2025-01-26T18:28:33.425Z"}
{"error":"ID scuola non valido","level":"error","message":"Error in SchoolRepository.findById:","timestamp":"2025-01-26T18:28:37.130Z","type":"undefined"}
{"error":"ID scuola non valido","level":"error","message":"Errore nel recupero della scuola:","timestamp":"2025-01-26T18:28:37.131Z"}
{"error":"ID scuola non valido","level":"error","message":"Error in SchoolRepository.findById:","timestamp":"2025-01-26T18:30:51.225Z","type":"undefined"}
{"error":"ID scuola non valido","level":"error","message":"Errore nel recupero della scuola:","timestamp":"2025-01-26T18:30:51.226Z"}
{"error":"ID scuola non valido","level":"error","message":"Error in SchoolRepository.findById:","timestamp":"2025-01-26T18:30:51.300Z","type":"undefined"}
{"error":"ID scuola non valido","level":"error","message":"Errore nel recupero della scuola:","timestamp":"2025-01-26T18:30:51.301Z"}
{"error":"ID scuola non valido","level":"error","message":"Error in SchoolRepository.findById:","timestamp":"2025-01-26T18:31:19.116Z","type":"undefined"}
{"error":"ID scuola non valido","level":"error","message":"Errore nel recupero della scuola:","timestamp":"2025-01-26T18:31:19.116Z"}
{"error":"ID scuola non valido","level":"error","message":"Error in SchoolRepository.findById:","timestamp":"2025-01-26T18:31:19.168Z","type":"undefined"}
{"error":"ID scuola non valido","level":"error","message":"Errore nel recupero della scuola:","timestamp":"2025-01-26T18:31:19.168Z"}
{"error":"Cannot read properties of undefined (reading 'deactivateClassesBySection')","level":"error","message":"Error in deactivateSection:","schoolId":"6794b5f6b31aa0c17d37f371","sectionName":"A","timestamp":"2025-01-26T18:56:23.184Z"}
{"error":"Cannot read properties of undefined (reading 'deactivateClassesBySection')","level":"error","message":"Errore nella disattivazione della sezione:","stack":"TypeError: Cannot read properties of undefined (reading 'deactivateClassesBySection')\n    at SchoolRepository.deactivateSection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:459:40)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async SchoolController.deactivateSection (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:395:31)","timestamp":"2025-01-26T18:56:23.185Z"}
{"error":{"kind":"ObjectId","message":"Cast to ObjectId failed for value \"school2\" (type string) at path \"schoolId\" for model \"Student\"","name":"CastError","path":"schoolId","reason":{},"stringValue":"\"school2\"","value":"school2","valueType":"string"},"filters":{"schoolId":"school2"},"level":"error","message":"Error in findWithDetails:","options":{"sort":{"firstName":1,"lastName":1}},"timestamp":"2025-01-26T20:35:09.880Z"}
{"code":"DB_001","level":"error","message":"Errore nel recupero degli studenti","metadata":{"originalError":"Cast to ObjectId failed for value \"school2\" (type string) at path \"schoolId\" for model \"Student\""},"status":500,"timestamp":"2025-01-26T20:35:09.882Z"}
{"error":"Errore nel recupero degli studenti","level":"error","message":"Student route error:","method":"GET","path":"/","timestamp":"2025-01-26T20:35:09.889Z","userId":"677bfe44f6789c907c9f3766"}
{"body":{},"error":{"message":"Cannot read properties of undefined (reading 'code')","stack":"TypeError: Cannot read properties of undefined (reading 'code')\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\studentRoutes.js:144:60\n    at Layer.handle_error (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:71:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:326:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:141:14)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:145:7)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:145:7)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:145:7)"},"level":"error","message":"Errore richiesta","method":"GET","query":{"limit":"10","page":"1","schoolId":"school2"},"requestId":"req_1737923709815_kb9icxc3x","timestamp":"2025-01-26T20:35:09.892Z","url":"/api/v1/students?page=1&limit=10&schoolId=school2"}
{"level":"error","message":"Cannot read properties of undefined (reading 'code')","stack":"TypeError: Cannot read properties of undefined (reading 'code')\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\studentRoutes.js:144:60\n    at Layer.handle_error (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:71:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:326:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:141:14)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:145:7)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:145:7)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:145:7)","timestamp":"2025-01-26T20:35:09.894Z"}

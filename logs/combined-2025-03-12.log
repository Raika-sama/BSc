{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-12T10:37:18.098Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-12T10:37:18.103Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-12T10:37:18.144Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-12T10:37:19.635Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-12T10:37:19.636Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-12T10:37:19.637Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-12T10:37:20.195Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-12T10:37:20.206Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-12T10:37:20.207Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-12T10:39:25.423Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-12T10:39:25.429Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-12T10:39:25.472Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-12T10:39:26.530Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-12T10:39:26.531Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-12T10:39:26.533Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-12T10:39:26.904Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-12T10:39:26.909Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-12T10:39:26.909Z"}
{"error":{"code":"AUTH_002","message":"Token scaduto","metadata":{},"status":401},"ip":"::1","level":"error","message":"Authentication failed","path":"/verify","timestamp":"2025-03-12T10:43:26.456Z"}
{"error":{"code":"AUTH_002","message":"Token scaduto","metadata":{},"status":401},"ip":"::1","level":"error","message":"Auth Error:","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-03-12T10:43:26.458Z"}
{"duration":"53ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"GET","requestId":"req_1741776206419_kbsnoacuf","responseSize":"72 Bytes","statusCode":401,"timestamp":"2025-03-12T10:43:26.478Z","url":"/api/v1/auth/verify","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":{"code":"AUTH_002","message":"Token scaduto","metadata":{},"status":401},"ip":"::1","level":"error","message":"Authentication failed","path":"/refresh-token","timestamp":"2025-03-12T10:43:26.597Z"}
{"error":{"code":"AUTH_002","message":"Token scaduto","metadata":{},"status":401},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/refresh-token","timestamp":"2025-03-12T10:43:26.598Z"}
{"duration":"8ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1741776206591_q92jte3y5","responseSize":"72 Bytes","statusCode":401,"timestamp":"2025-03-12T10:43:26.600Z","url":"/api/v1/auth/refresh-token","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"Login successful","metadata":{"ipAddress":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"},"timestamp":"2025-03-12T10:43:30.307Z","userId":"677bfe44f6789c907c9f3766"}
{"action":"login","level":"info","message":"User audit record created","timestamp":"2025-03-12T10:43:30.366Z","userId":"677bfe44f6789c907c9f3766"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-12T16:57:02.084Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-12T16:57:02.090Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-12T16:57:02.133Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-12T16:57:03.216Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-12T16:57:03.218Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-12T16:57:03.219Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-12T16:57:03.555Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-12T16:57:03.561Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-12T16:57:03.562Z"}
{"academicYear":"2024/2025","level":"info","message":"Inizializzazione classi per la scuola","schoolId":"67d1bcfb1db797603442b667","sectionsCount":1,"timestamp":"2025-03-12T16:57:31.770Z"}
{"classesCreated":3,"level":"info","message":"Classi iniziali create con successo","schoolId":"67d1bcfb1db797603442b667","timestamp":"2025-03-12T16:57:31.937Z"}
{"deletedClassesCount":3,"level":"info","message":"School deleted successfully with all references cleaned:","schoolId":"67d1bcfb1db797603442b667","teacherReferencesUpdated":1,"timestamp":"2025-03-12T16:57:35.694Z","updatedStudentsCount":0}
{"academicYear":"2024/2025","level":"info","message":"Inizializzazione classi per la scuola","schoolId":"67d1bd131db797603442b715","sectionsCount":1,"timestamp":"2025-03-12T16:57:55.614Z"}
{"classesCreated":3,"level":"info","message":"Classi iniziali create con successo","schoolId":"67d1bd131db797603442b715","timestamp":"2025-03-12T16:57:55.753Z"}
{"deletedClassesCount":3,"level":"info","message":"School deleted successfully with all references cleaned:","schoolId":"67d1bd131db797603442b715","teacherReferencesUpdated":1,"timestamp":"2025-03-12T16:58:39.138Z","updatedStudentsCount":0}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-12T17:15:12.646Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-12T17:15:12.649Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-12T17:15:12.681Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-12T17:15:13.412Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-12T17:15:13.413Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-12T17:15:13.414Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-12T17:15:13.768Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-12T17:15:13.773Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-12T17:15:13.773Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-12T17:29:08.161Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-12T17:29:08.165Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-12T17:29:08.200Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-12T17:29:09.011Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-12T17:29:09.012Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-12T17:29:09.014Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-12T17:29:09.363Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-12T17:29:09.370Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-12T17:29:09.370Z"}
{"assignedSchoolIdsCount":1,"level":"info","message":"User assignedSchoolIds updated successfully:","schoolId":"67d1c486b1a4d16124e74d08","timestamp":"2025-03-12T17:29:42.842Z","userId":"677bfe44f6789c907c9f3766"}
{"academicYear":"2024/2025","level":"info","message":"Inizializzazione classi per la scuola","schoolId":"67d1c486b1a4d16124e74d08","sectionsCount":1,"timestamp":"2025-03-12T17:29:43.028Z"}
{"classesCreated":3,"level":"info","message":"Classi iniziali create con successo","schoolId":"67d1c486b1a4d16124e74d08","timestamp":"2025-03-12T17:29:43.174Z"}
{"deletedClassesCount":3,"level":"info","message":"School deleted successfully with all references cleaned:","schoolId":"67d1c486b1a4d16124e74d08","teacherReferencesUpdated":1,"timestamp":"2025-03-12T17:30:13.699Z","updatedStudentsCount":0}
{"assignedSchoolIdsCount":1,"level":"info","message":"User assignedSchoolIds updated successfully:","schoolId":"67d1c5adb1a4d16124e74f3c","timestamp":"2025-03-12T17:34:37.398Z","userId":"677bfe44f6789c907c9f3766"}
{"academicYear":"2024/2025","level":"info","message":"Inizializzazione classi per la scuola","schoolId":"67d1c5adb1a4d16124e74f3c","sectionsCount":2,"timestamp":"2025-03-12T17:34:37.546Z"}
{"classesCreated":6,"level":"info","message":"Classi iniziali create con successo","schoolId":"67d1c5adb1a4d16124e74f3c","timestamp":"2025-03-12T17:34:37.843Z"}
{"classesDeactivated":6,"level":"info","message":"Scuola disattivata con successo","schoolId":"67d1c5adb1a4d16124e74f3c","timestamp":"2025-03-12T17:34:44.423Z"}
{"classesDeactivated":6,"level":"info","message":"Scuola disattivata con successo","schoolId":"67d1c5adb1a4d16124e74f3c","timestamp":"2025-03-12T17:34:44.424Z"}
{"classesReactivated":0,"level":"info","message":"Scuola riattivata con successo","schoolId":"67d1c5adb1a4d16124e74f3c","timestamp":"2025-03-12T17:34:58.057Z"}
{"classesReactivated":0,"level":"info","message":"Scuola riattivata con successo","schoolId":"67d1c5adb1a4d16124e74f3c","timestamp":"2025-03-12T17:34:58.058Z"}
{"deletedClassesCount":6,"level":"info","message":"School deleted successfully with all references cleaned:","schoolId":"67d1c5adb1a4d16124e74f3c","teacherReferencesUpdated":1,"timestamp":"2025-03-12T17:37:47.779Z","updatedStudentsCount":0}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-12T17:39:47.198Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-12T17:39:47.202Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-12T17:39:47.235Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-12T17:39:48.089Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-12T17:39:48.090Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-12T17:39:48.093Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-12T17:39:48.436Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-12T17:39:48.441Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-12T17:39:48.442Z"}
{"level":"info","message":"Anno accademico attivato con successo","schoolId":"679fdad474255ebc8afab683","timestamp":"2025-03-12T18:15:35.283Z","yearId":"67c755b1c5692f3176937273"}
{"level":"info","message":"Anno accademico attivato con successo","schoolId":"679fdad474255ebc8afab683","timestamp":"2025-03-12T18:15:35.286Z","userId":"677bfe44f6789c907c9f3766","yearId":"67c755b1c5692f3176937273"}
{"error":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","level":"error","message":"Error deleting school:","schoolId":"679fdad474255ebc8afab683","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:16:04.481Z"}
{"context":{"schoolId":"679fdad474255ebc8afab683"},"errorMessage":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","errorName":"ValidationError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:16:04.485Z"}
{"duration":"345ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"DELETE","requestId":"req_1741803364145_swx46ef9m","responseSize":"116 Bytes","statusCode":500,"timestamp":"2025-03-12T18:16:04.490Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","level":"error","message":"Error deleting school:","schoolId":"679fdad474255ebc8afab683","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:16:19.408Z"}
{"context":{"schoolId":"679fdad474255ebc8afab683"},"errorMessage":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","errorName":"ValidationError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:16:19.410Z"}
{"duration":"304ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"DELETE","requestId":"req_1741803379108_ilbjcvr53","responseSize":"116 Bytes","statusCode":500,"timestamp":"2025-03-12T18:16:19.412Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","level":"error","message":"Error deleting school:","schoolId":"679fdad474255ebc8afab683","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:17:08.263Z"}
{"context":{"schoolId":"679fdad474255ebc8afab683"},"errorMessage":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","errorName":"ValidationError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:17:08.265Z"}
{"duration":"280ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"DELETE","requestId":"req_1741803427986_2t6102ejw","responseSize":"116 Bytes","statusCode":500,"timestamp":"2025-03-12T18:17:08.266Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","level":"error","message":"Error deleting school:","schoolId":"679fdad474255ebc8afab683","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:19:29.205Z"}
{"context":{"schoolId":"679fdad474255ebc8afab683"},"errorMessage":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","errorName":"ValidationError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:19:29.207Z"}
{"duration":"261ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"DELETE","requestId":"req_1741803568949_py08cplru","responseSize":"116 Bytes","statusCode":500,"timestamp":"2025-03-12T18:19:29.210Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","level":"error","message":"Error deleting school:","schoolId":"679fdad474255ebc8afab683","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:19:57.424Z"}
{"context":{"schoolId":"679fdad474255ebc8afab683"},"errorMessage":"Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida","errorName":"ValidationError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"ValidationError: Student validation failed: classChangeHistory.0.fromSection: null non è una sezione valida\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-12T18:19:57.425Z"}
{"duration":"272ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"DELETE","requestId":"req_1741803597155_zn02v4f4g","responseSize":"116 Bytes","statusCode":500,"timestamp":"2025-03-12T18:19:57.427Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"140ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1741803776509_2e8xhbhey","responseSize":"96 Bytes","statusCode":500,"timestamp":"2025-03-12T18:22:56.649Z","url":"/api/v1/schools","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-12T18:25:27.784Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-12T18:25:27.788Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-12T18:25:27.842Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-12T18:25:28.789Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-12T18:25:28.790Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-12T18:25:28.792Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-12T18:25:29.156Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-12T18:25:29.165Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-12T18:25:29.165Z"}
{"assignedSchoolIdsCount":1,"level":"info","message":"User assignedSchoolIds updated successfully:","schoolId":"67d1d1ae72006303031db73f","timestamp":"2025-03-12T18:25:50.232Z","userId":"677bfe44f6789c907c9f3766"}
{"academicYear":"2024/2025","level":"info","message":"Inizializzazione classi per la scuola","schoolId":"67d1d1ae72006303031db73f","sectionsCount":1,"timestamp":"2025-03-12T18:25:50.425Z"}
{"classesCreated":3,"level":"info","message":"Classi iniziali create con successo","schoolId":"67d1d1ae72006303031db73f","timestamp":"2025-03-12T18:25:50.578Z"}
{"academicYear":"2025/2026","count":3,"level":"info","message":"Created classes for new academic year:","sectionsUsed":["A"],"timestamp":"2025-03-12T18:30:21.012Z"}
{"level":"info","message":"Anno accademico creato con successo","schoolId":"67d1d1ae72006303031db73f","timestamp":"2025-03-12T18:30:21.051Z","year":"2025/2026"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-12T19:00:22.440Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-12T19:00:22.443Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-12T19:00:22.480Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-12T19:00:23.428Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-12T19:00:23.432Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-12T19:00:23.435Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-12T19:00:23.825Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-12T19:00:23.834Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-12T19:00:23.835Z"}
{"error":{},"level":"error","message":"Errore nel recupero della scuola","schoolId":"679fdad474255ebc8afab683","timestamp":"2025-03-12T19:03:48.827Z"}
{"duration":"205ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"GET","requestId":"req_1741806228624_uwmlfre4t","responseSize":"118 Bytes","statusCode":500,"timestamp":"2025-03-12T19:03:48.829Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-12T19:04:15.266Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-12T19:04:15.272Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-12T19:04:15.316Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-12T19:04:16.317Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-12T19:04:16.318Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-12T19:04:16.320Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-12T19:04:16.668Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-12T19:04:16.671Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-12T19:04:16.672Z"}
{"error":{},"level":"error","message":"Errore nel recupero della scuola","schoolId":"679fdad474255ebc8afab683","timestamp":"2025-03-12T19:04:23.705Z"}
{"duration":"253ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"GET","requestId":"req_1741806263458_oukc3fv3d","responseSize":"118 Bytes","statusCode":500,"timestamp":"2025-03-12T19:04:23.711Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-12T19:09:20.756Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-12T19:09:20.762Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-12T19:09:20.826Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-12T19:09:22.074Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-12T19:09:22.075Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-12T19:09:22.077Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-12T19:09:22.482Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-12T19:09:22.491Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-12T19:09:22.492Z"}
{"level":"info","message":"Generazione credenziali per studente","studentId":"67d1dc3cf6b1bd007cd5a301","timestamp":"2025-03-12T19:10:52.341Z"}
{"level":"info","message":"Creazione nuovo record di autenticazione","studentId":"67d1dc3cf6b1bd007cd5a301","timestamp":"2025-03-12T19:10:52.378Z"}
{"error":"E11000 duplicate key error collection: brainScannerDB.studentAuth index: username_1 dup key: { username: \"pippo@test.it\" }","level":"error","message":"Errore durante la generazione delle credenziali","stack":"MongoServerError: E11000 duplicate key error collection: brainScannerDB.studentAuth index: username_1 dup key: { username: \"pippo@test.it\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\lib\\operations\\insert.js:50:33\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\lib\\operations\\command.js:84:64\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","studentId":"67d1dc3cf6b1bd007cd5a301","timestamp":"2025-03-12T19:10:52.628Z"}
{"error":{"code":11000,"index":0,"keyPattern":{"username":1},"keyValue":{"username":"pippo@test.it"}},"level":"error","message":"Errore nella generazione automatica delle credenziali","studentId":"67d1dc3cf6b1bd007cd5a301","timestamp":"2025-03-12T19:10:52.631Z"}
{"class":"67c236a42373b42426264c19","hasCredentials":false,"level":"info","message":"Student created with class successfully:","school":"67c236a42373b42426264bf6","studentId":"67d1dc3cf6b1bd007cd5a301","timestamp":"2025-03-12T19:10:52.634Z"}
{"level":"info","message":"Utente aggiunto con successo alla scuola","role":"teacher","schoolId":"67c236a42373b42426264bf6","timestamp":"2025-03-12T19:12:22.945Z","userId":"67c0c560285a82c16495c615"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-12T19:36:11.202Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-12T19:36:11.208Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-12T19:36:11.271Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-12T19:36:12.454Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-12T19:36:12.455Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-12T19:36:12.458Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-12T19:36:12.869Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-12T19:36:12.877Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-12T19:36:12.878Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-12T19:42:17.589Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-12T19:42:17.593Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-12T19:42:17.632Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-12T19:42:18.529Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-12T19:42:18.530Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-12T19:42:18.532Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-12T19:42:18.908Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-12T19:42:18.913Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-12T19:42:18.914Z"}
{"error":{},"level":"error","message":"Errore nel recupero della scuola","schoolId":"679fdad474255ebc8afab683","timestamp":"2025-03-12T19:51:48.986Z"}
{"duration":"232ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"GET","requestId":"req_1741809108758_039nuptxj","responseSize":"118 Bytes","statusCode":500,"timestamp":"2025-03-12T19:51:48.990Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"context":{"studentId":"67d1dc3cf6b1bd007cd5a301","updateData":{"fiscalCode":null,"mainTeacher":null,"parentEmail":null,"session":{"_events":{},"_eventsCount":1,"client":{"_events":{},"_eventsCount":1,"_maxListeners":0,"mongoLogger":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"s":{"activeSessions":{},"bsonOptions":{"bsonRegExp":false,"enableUtf8Validation":true,"fieldsAsRaw":{},"ignoreUndefined":false,"promoteBuffers":false,"promoteLongs":true,"promoteValues":true,"raw":false,"serializeFunctions":false,"useBigInt64":false},"hasBeenClosed":false,"isMongoClient":true,"namespace":{"db":"admin"},"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"readPreference":{"mode":"primary"},"sessionPool":{"client":"[Circular]","sessions":{"count":6,"head":{"next":{"next":{"next":{"next":{"next":{"next":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39246747,"txnNumber":14}},"prev":"[Circular]","value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39246747,"txnNumber":18}},"prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39246747,"txnNumber":18}},"value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39246747,"txnNumber":14}},"value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"value":null}}},"url":"mongodb+srv://RaikaSama:H9Fm51BisUke4rPK@cluster0.4nf56.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0","writeConcern":{"w":"majority"}},"topology":{"_events":{"topologyDescriptionChanged":[null,null]},"_eventsCount":26,"client":"[Circular]","s":{"clusterTime":{"clusterTime":{"$timestamp":"7481015078880280622"},"signature":{"hash":"o3ZjqkcIr4pgQ3CTzn1qiIVbpxs=","keyId":{"high":1731944570,"low":59,"unsigned":false}}},"connectionTimers":{},"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"description":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":30,"maxElectionId":"7fffffff00000000000003fd","maxSetVersion":378,"servers":{},"setName":"atlas-ewe2jc-shard-0","stale":false,"type":"ReplicaSetWithPrimary"},"heartbeatFrequencyMS":10000,"id":0,"minHeartbeatFrequencyMS":500,"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"seedlist":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"serverSelectionTimeoutMS":5000,"servers":{},"srvPoller":{"_events":{},"_eventsCount":0,"generation":0,"haMode":false,"heartbeatFrequencyMS":10000,"rescanSrvIntervalMS":60000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb"},"state":"connected"}}},"clientOptions":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"defaultTransactionOptions":{},"explicit":true,"hasEnded":false,"sessionPool":{"client":{"_events":{},"_eventsCount":1,"_maxListeners":0,"mongoLogger":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"s":{"activeSessions":{},"bsonOptions":{"bsonRegExp":false,"enableUtf8Validation":true,"fieldsAsRaw":{},"ignoreUndefined":false,"promoteBuffers":false,"promoteLongs":true,"promoteValues":true,"raw":false,"serializeFunctions":false,"useBigInt64":false},"hasBeenClosed":false,"isMongoClient":true,"namespace":{"db":"admin"},"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"readPreference":{"mode":"primary"},"sessionPool":"[Circular]","url":"mongodb+srv://RaikaSama:H9Fm51BisUke4rPK@cluster0.4nf56.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0","writeConcern":{"w":"majority"}},"topology":{"_events":{"topologyDescriptionChanged":[null,null]},"_eventsCount":26,"client":"[Circular]","s":{"clusterTime":{"clusterTime":{"$timestamp":"7481015078880280622"},"signature":{"hash":"o3ZjqkcIr4pgQ3CTzn1qiIVbpxs=","keyId":{"high":1731944570,"low":59,"unsigned":false}}},"connectionTimers":{},"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"description":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":30,"maxElectionId":"7fffffff00000000000003fd","maxSetVersion":378,"servers":{},"setName":"atlas-ewe2jc-shard-0","stale":false,"type":"ReplicaSetWithPrimary"},"heartbeatFrequencyMS":10000,"id":0,"minHeartbeatFrequencyMS":500,"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"seedlist":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"serverSelectionTimeoutMS":5000,"servers":{},"srvPoller":{"_events":{},"_eventsCount":0,"generation":0,"haMode":false,"heartbeatFrequencyMS":10000,"rescanSrvIntervalMS":60000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb"},"state":"connected"}}},"sessions":{"count":6,"head":{"next":{"next":{"next":{"next":{"next":{"next":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39246747,"txnNumber":14}},"prev":"[Circular]","value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39246747,"txnNumber":18}},"prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39246747,"txnNumber":18}},"value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39246747,"txnNumber":14}},"value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"value":null}}},"supports":{"causalConsistency":true},"transaction":{"options":{"readPreference":{"mode":"primary"},"writeConcern":{"w":"majority"}},"state":"STARTING_TRANSACTION"}},"teachers":["67c0296a250c5746c3d96444","67c0c560285a82c16495c615"]}},"errorMessage":"a circular reference in the update value, updateValue:\n{\n  teachers: [ '67c0296a250c5746c3d96444', '67c0c560285a82c16495c615' ],\n  mainTeacher: null,\n  fiscalCode: null,\n  parentEmail: null,\n  session: ClientSession {\n    _events: [Object: null prototype],\n    _eventsCount: 1,\n    _maxListeners: undefined,\n    client: [MongoClient],\n    sessionPool: [ServerSessionPool],\n    hasEnded: false,\n    clientOptions: [Object: null prototype],\n    explicit: true,\n    supports: [Object],\n    clusterTime: undefined,\n    operationTime: undefined,\n    owner: undefined,\n    defaultTransactionOptions: {},\n    transaction: [Transaction],\n    [Symbol(shapeMode)]: false,\n    [Symbol(kCapture)]: false,\n    [Symbol(snapshotEnabled)]: false,\n    [Symbol(serverSession)]: [ServerSession],\n    [Symbol(txnNumberIncrement)]: 1\n  }\n}\nupdatePath: ''","errorName":"MongooseError","level":"error","message":"Errore in StudentRepository.update:","stack":"MongooseError: a circular reference in the update value, updateValue:\n{\n  teachers: [ '67c0296a250c5746c3d96444', '67c0c560285a82c16495c615' ],\n  mainTeacher: null,\n  fiscalCode: null,\n  parentEmail: null,\n  session: ClientSession {\n    _events: [Object: null prototype],\n    _eventsCount: 1,\n    _maxListeners: undefined,\n    client: [MongoClient],\n    sessionPool: [ServerSessionPool],\n    hasEnded: false,\n    clientOptions: [Object: null prototype],\n    explicit: true,\n    supports: [Object],\n    clusterTime: undefined,\n    operationTime: undefined,\n    owner: undefined,\n    defaultTransactionOptions: {},\n    transaction: [Transaction],\n    [Symbol(shapeMode)]: false,\n    [Symbol(kCapture)]: false,\n    [Symbol(snapshotEnabled)]: false,\n    [Symbol(serverSession)]: [ServerSession],\n    [Symbol(txnNumberIncrement)]: 1\n  }\n}\nupdatePath: ''\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:85:11)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\modifiedPaths.js:30:3)\n    at updatedPathsByArrayFilter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\updatedPathsByArrayFilter.js:9:24)\n    at castArrayFilters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\castArrayFilters.js:12:32)\n    at _castArrayFilters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2250:5)","timestamp":"2025-03-12T19:59:16.407Z"}
{"level":"error","message":"undefined error:","timestamp":"2025-03-12T19:59:16.451Z"}
{"duration":"239ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"PUT","requestId":"req_1741809556214_oiapl5f1t","responseSize":"354 Bytes","statusCode":500,"timestamp":"2025-03-12T19:59:16.453Z","url":"/api/v1/students/67d1dc3cf6b1bd007cd5a301","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"context":{"studentId":"67d1dc3cf6b1bd007cd5a301","updateData":{"fiscalCode":null,"mainTeacher":null,"parentEmail":null,"session":{"_events":{},"_eventsCount":1,"client":{"_events":{},"_eventsCount":1,"_maxListeners":0,"mongoLogger":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"s":{"activeSessions":{},"bsonOptions":{"bsonRegExp":false,"enableUtf8Validation":true,"fieldsAsRaw":{},"ignoreUndefined":false,"promoteBuffers":false,"promoteLongs":true,"promoteValues":true,"raw":false,"serializeFunctions":false,"useBigInt64":false},"hasBeenClosed":false,"isMongoClient":true,"namespace":{"db":"admin"},"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"readPreference":{"mode":"primary"},"sessionPool":{"client":"[Circular]","sessions":{"count":6,"head":{"next":{"next":{"next":{"next":{"next":{"next":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39432404,"txnNumber":18}},"prev":"[Circular]","value":{"id":{"id":"na5DhY44R8eL/gX/gl+6lQ=="},"isDirty":false,"lastUse":39432402,"txnNumber":18}},"prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"na5DhY44R8eL/gX/gl+6lQ=="},"isDirty":false,"lastUse":39432402,"txnNumber":18}},"value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39432404,"txnNumber":18}},"value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"value":null}}},"url":"mongodb+srv://RaikaSama:H9Fm51BisUke4rPK@cluster0.4nf56.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0","writeConcern":{"w":"majority"}},"topology":{"_events":{"topologyDescriptionChanged":[null,null]},"_eventsCount":26,"client":"[Circular]","s":{"clusterTime":{"clusterTime":{"$timestamp":"7481015830499557456"},"signature":{"hash":"+PyLTzPA4ZIhTrirNa1wctNPqH4=","keyId":{"high":1731944570,"low":59,"unsigned":false}}},"connectionTimers":{},"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"description":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":30,"maxElectionId":"7fffffff00000000000003fd","maxSetVersion":378,"servers":{},"setName":"atlas-ewe2jc-shard-0","stale":false,"type":"ReplicaSetWithPrimary"},"heartbeatFrequencyMS":10000,"id":0,"minHeartbeatFrequencyMS":500,"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"seedlist":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"serverSelectionTimeoutMS":5000,"servers":{},"srvPoller":{"_events":{},"_eventsCount":0,"generation":0,"haMode":false,"heartbeatFrequencyMS":10000,"rescanSrvIntervalMS":60000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb"},"state":"connected"}}},"clientOptions":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"defaultTransactionOptions":{},"explicit":true,"hasEnded":false,"sessionPool":{"client":{"_events":{},"_eventsCount":1,"_maxListeners":0,"mongoLogger":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"s":{"activeSessions":{},"bsonOptions":{"bsonRegExp":false,"enableUtf8Validation":true,"fieldsAsRaw":{},"ignoreUndefined":false,"promoteBuffers":false,"promoteLongs":true,"promoteValues":true,"raw":false,"serializeFunctions":false,"useBigInt64":false},"hasBeenClosed":false,"isMongoClient":true,"namespace":{"db":"admin"},"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"readPreference":{"mode":"primary"},"sessionPool":"[Circular]","url":"mongodb+srv://RaikaSama:H9Fm51BisUke4rPK@cluster0.4nf56.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0","writeConcern":{"w":"majority"}},"topology":{"_events":{"topologyDescriptionChanged":[null,null]},"_eventsCount":26,"client":"[Circular]","s":{"clusterTime":{"clusterTime":{"$timestamp":"7481015830499557456"},"signature":{"hash":"+PyLTzPA4ZIhTrirNa1wctNPqH4=","keyId":{"high":1731944570,"low":59,"unsigned":false}}},"connectionTimers":{},"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"description":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":30,"maxElectionId":"7fffffff00000000000003fd","maxSetVersion":378,"servers":{},"setName":"atlas-ewe2jc-shard-0","stale":false,"type":"ReplicaSetWithPrimary"},"heartbeatFrequencyMS":10000,"id":0,"minHeartbeatFrequencyMS":500,"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"seedlist":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"serverSelectionTimeoutMS":5000,"servers":{},"srvPoller":{"_events":{},"_eventsCount":0,"generation":0,"haMode":false,"heartbeatFrequencyMS":10000,"rescanSrvIntervalMS":60000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb"},"state":"connected"}}},"sessions":{"count":6,"head":{"next":{"next":{"next":{"next":{"next":{"next":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39432404,"txnNumber":18}},"prev":"[Circular]","value":{"id":{"id":"na5DhY44R8eL/gX/gl+6lQ=="},"isDirty":false,"lastUse":39432402,"txnNumber":18}},"prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"na5DhY44R8eL/gX/gl+6lQ=="},"isDirty":false,"lastUse":39432402,"txnNumber":18}},"value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39432404,"txnNumber":18}},"value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"value":null}}},"supports":{"causalConsistency":true},"transaction":{"options":{"readPreference":{"mode":"primary"},"writeConcern":{"w":"majority"}},"state":"STARTING_TRANSACTION"}},"teachers":["67c0296a250c5746c3d96444","67c0c560285a82c16495c615"]}},"errorMessage":"a circular reference in the update value, updateValue:\n{\n  teachers: [ '67c0296a250c5746c3d96444', '67c0c560285a82c16495c615' ],\n  mainTeacher: null,\n  fiscalCode: null,\n  parentEmail: null,\n  session: ClientSession {\n    _events: [Object: null prototype],\n    _eventsCount: 1,\n    _maxListeners: undefined,\n    client: [MongoClient],\n    sessionPool: [ServerSessionPool],\n    hasEnded: false,\n    clientOptions: [Object: null prototype],\n    explicit: true,\n    supports: [Object],\n    clusterTime: undefined,\n    operationTime: undefined,\n    owner: undefined,\n    defaultTransactionOptions: {},\n    transaction: [Transaction],\n    [Symbol(shapeMode)]: false,\n    [Symbol(kCapture)]: false,\n    [Symbol(snapshotEnabled)]: false,\n    [Symbol(serverSession)]: [ServerSession],\n    [Symbol(txnNumberIncrement)]: 1\n  }\n}\nupdatePath: ''","errorName":"MongooseError","level":"error","message":"Errore in StudentRepository.update:","stack":"MongooseError: a circular reference in the update value, updateValue:\n{\n  teachers: [ '67c0296a250c5746c3d96444', '67c0c560285a82c16495c615' ],\n  mainTeacher: null,\n  fiscalCode: null,\n  parentEmail: null,\n  session: ClientSession {\n    _events: [Object: null prototype],\n    _eventsCount: 1,\n    _maxListeners: undefined,\n    client: [MongoClient],\n    sessionPool: [ServerSessionPool],\n    hasEnded: false,\n    clientOptions: [Object: null prototype],\n    explicit: true,\n    supports: [Object],\n    clusterTime: undefined,\n    operationTime: undefined,\n    owner: undefined,\n    defaultTransactionOptions: {},\n    transaction: [Transaction],\n    [Symbol(shapeMode)]: false,\n    [Symbol(kCapture)]: false,\n    [Symbol(snapshotEnabled)]: false,\n    [Symbol(serverSession)]: [ServerSession],\n    [Symbol(txnNumberIncrement)]: 1\n  }\n}\nupdatePath: ''\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:85:11)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\modifiedPaths.js:30:3)\n    at updatedPathsByArrayFilter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\updatedPathsByArrayFilter.js:9:24)\n    at castArrayFilters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\castArrayFilters.js:12:32)\n    at _castArrayFilters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2250:5)","timestamp":"2025-03-12T20:02:11.744Z"}
{"level":"error","message":"undefined error:","timestamp":"2025-03-12T20:02:11.753Z"}
{"duration":"205ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"PUT","requestId":"req_1741809731549_ae7bzjyq7","responseSize":"354 Bytes","statusCode":500,"timestamp":"2025-03-12T20:02:11.754Z","url":"/api/v1/students/67d1dc3cf6b1bd007cd5a301","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"context":{"studentId":"67d1dc3cf6b1bd007cd5a301","updateData":{"fiscalCode":null,"mainTeacher":null,"parentEmail":null,"session":{"_events":{},"_eventsCount":1,"client":{"_events":{},"_eventsCount":1,"_maxListeners":0,"mongoLogger":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"s":{"activeSessions":{},"bsonOptions":{"bsonRegExp":false,"enableUtf8Validation":true,"fieldsAsRaw":{},"ignoreUndefined":false,"promoteBuffers":false,"promoteLongs":true,"promoteValues":true,"raw":false,"serializeFunctions":false,"useBigInt64":false},"hasBeenClosed":false,"isMongoClient":true,"namespace":{"db":"admin"},"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"readPreference":{"mode":"primary"},"sessionPool":{"client":"[Circular]","sessions":{"count":6,"head":{"next":{"next":{"next":{"next":{"next":{"next":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39481754,"txnNumber":25}},"prev":"[Circular]","value":{"id":{"id":"IGomXQOURaaL02YGKVkG8w=="},"isDirty":false,"lastUse":39481754,"txnNumber":13}},"prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"IGomXQOURaaL02YGKVkG8w=="},"isDirty":false,"lastUse":39481754,"txnNumber":13}},"value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39481754,"txnNumber":25}},"value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"value":null}}},"url":"mongodb+srv://RaikaSama:H9Fm51BisUke4rPK@cluster0.4nf56.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0","writeConcern":{"w":"majority"}},"topology":{"_events":{"topologyDescriptionChanged":[null,null]},"_eventsCount":26,"client":"[Circular]","s":{"clusterTime":{"clusterTime":{"$timestamp":"7481016071017725966"},"signature":{"hash":"o7IbSK/f/B5KUoUaXCX86UVUM90=","keyId":{"high":1731944570,"low":59,"unsigned":false}}},"connectionTimers":{},"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"description":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":30,"maxElectionId":"7fffffff00000000000003fd","maxSetVersion":378,"servers":{},"setName":"atlas-ewe2jc-shard-0","stale":false,"type":"ReplicaSetWithPrimary"},"heartbeatFrequencyMS":10000,"id":0,"minHeartbeatFrequencyMS":500,"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"seedlist":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"serverSelectionTimeoutMS":5000,"servers":{},"srvPoller":{"_events":{},"_eventsCount":0,"generation":0,"haMode":false,"heartbeatFrequencyMS":10000,"rescanSrvIntervalMS":60000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb"},"state":"connected"}}},"clientOptions":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"defaultTransactionOptions":{},"explicit":true,"hasEnded":false,"sessionPool":{"client":{"_events":{},"_eventsCount":1,"_maxListeners":0,"mongoLogger":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"s":{"activeSessions":{},"bsonOptions":{"bsonRegExp":false,"enableUtf8Validation":true,"fieldsAsRaw":{},"ignoreUndefined":false,"promoteBuffers":false,"promoteLongs":true,"promoteValues":true,"raw":false,"serializeFunctions":false,"useBigInt64":false},"hasBeenClosed":false,"isMongoClient":true,"namespace":{"db":"admin"},"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"readPreference":{"mode":"primary"},"sessionPool":"[Circular]","url":"mongodb+srv://RaikaSama:H9Fm51BisUke4rPK@cluster0.4nf56.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0","writeConcern":{"w":"majority"}},"topology":{"_events":{"topologyDescriptionChanged":[null,null]},"_eventsCount":26,"client":"[Circular]","s":{"clusterTime":{"clusterTime":{"$timestamp":"7481016071017725966"},"signature":{"hash":"o7IbSK/f/B5KUoUaXCX86UVUM90=","keyId":{"high":1731944570,"low":59,"unsigned":false}}},"connectionTimers":{},"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"description":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":30,"maxElectionId":"7fffffff00000000000003fd","maxSetVersion":378,"servers":{},"setName":"atlas-ewe2jc-shard-0","stale":false,"type":"ReplicaSetWithPrimary"},"heartbeatFrequencyMS":10000,"id":0,"minHeartbeatFrequencyMS":500,"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"seedlist":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"serverSelectionTimeoutMS":5000,"servers":{},"srvPoller":{"_events":{},"_eventsCount":0,"generation":0,"haMode":false,"heartbeatFrequencyMS":10000,"rescanSrvIntervalMS":60000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb"},"state":"connected"}}},"sessions":{"count":6,"head":{"next":{"next":{"next":{"next":{"next":{"next":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39481754,"txnNumber":25}},"prev":"[Circular]","value":{"id":{"id":"IGomXQOURaaL02YGKVkG8w=="},"isDirty":false,"lastUse":39481754,"txnNumber":13}},"prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"IGomXQOURaaL02YGKVkG8w=="},"isDirty":false,"lastUse":39481754,"txnNumber":13}},"value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39481754,"txnNumber":25}},"value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"value":null}}},"supports":{"causalConsistency":true},"transaction":{"options":{"readPreference":{"mode":"primary"},"writeConcern":{"w":"majority"}},"state":"STARTING_TRANSACTION"}},"teachers":["67c0296a250c5746c3d96444","67c0c560285a82c16495c615"]}},"errorMessage":"a circular reference in the update value, updateValue:\n{\n  teachers: [ '67c0296a250c5746c3d96444', '67c0c560285a82c16495c615' ],\n  mainTeacher: null,\n  fiscalCode: null,\n  parentEmail: null,\n  session: ClientSession {\n    _events: [Object: null prototype],\n    _eventsCount: 1,\n    _maxListeners: undefined,\n    client: [MongoClient],\n    sessionPool: [ServerSessionPool],\n    hasEnded: false,\n    clientOptions: [Object: null prototype],\n    explicit: true,\n    supports: [Object],\n    clusterTime: undefined,\n    operationTime: undefined,\n    owner: undefined,\n    defaultTransactionOptions: {},\n    transaction: [Transaction],\n    [Symbol(shapeMode)]: false,\n    [Symbol(kCapture)]: false,\n    [Symbol(snapshotEnabled)]: false,\n    [Symbol(serverSession)]: [ServerSession],\n    [Symbol(txnNumberIncrement)]: 1\n  }\n}\nupdatePath: ''","errorName":"MongooseError","level":"error","message":"Errore in StudentRepository.update:","stack":"MongooseError: a circular reference in the update value, updateValue:\n{\n  teachers: [ '67c0296a250c5746c3d96444', '67c0c560285a82c16495c615' ],\n  mainTeacher: null,\n  fiscalCode: null,\n  parentEmail: null,\n  session: ClientSession {\n    _events: [Object: null prototype],\n    _eventsCount: 1,\n    _maxListeners: undefined,\n    client: [MongoClient],\n    sessionPool: [ServerSessionPool],\n    hasEnded: false,\n    clientOptions: [Object: null prototype],\n    explicit: true,\n    supports: [Object],\n    clusterTime: undefined,\n    operationTime: undefined,\n    owner: undefined,\n    defaultTransactionOptions: {},\n    transaction: [Transaction],\n    [Symbol(shapeMode)]: false,\n    [Symbol(kCapture)]: false,\n    [Symbol(snapshotEnabled)]: false,\n    [Symbol(serverSession)]: [ServerSession],\n    [Symbol(txnNumberIncrement)]: 1\n  }\n}\nupdatePath: ''\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:85:11)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\modifiedPaths.js:30:3)\n    at updatedPathsByArrayFilter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\updatedPathsByArrayFilter.js:9:24)\n    at castArrayFilters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\castArrayFilters.js:12:32)\n    at _castArrayFilters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2250:5)","timestamp":"2025-03-12T20:03:06.980Z"}
{"level":"error","message":"undefined error:","timestamp":"2025-03-12T20:03:06.985Z"}
{"duration":"162ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"PUT","requestId":"req_1741809786824_xhts2ffaf","responseSize":"354 Bytes","statusCode":500,"timestamp":"2025-03-12T20:03:06.986Z","url":"/api/v1/students/67d1dc3cf6b1bd007cd5a301","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"context":{"studentId":"67d1dc3cf6b1bd007cd5a301","updateData":{"session":{"_events":{},"_eventsCount":1,"client":{"_events":{},"_eventsCount":1,"_maxListeners":0,"mongoLogger":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"s":{"activeSessions":{},"bsonOptions":{"bsonRegExp":false,"enableUtf8Validation":true,"fieldsAsRaw":{},"ignoreUndefined":false,"promoteBuffers":false,"promoteLongs":true,"promoteValues":true,"raw":false,"serializeFunctions":false,"useBigInt64":false},"hasBeenClosed":false,"isMongoClient":true,"namespace":{"db":"admin"},"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"readPreference":{"mode":"primary"},"sessionPool":{"client":"[Circular]","sessions":{"count":6,"head":{"next":{"next":{"next":{"next":{"next":{"next":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39702179,"txnNumber":28}},"prev":"[Circular]","value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39702180,"txnNumber":21}},"prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39702180,"txnNumber":21}},"value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39702179,"txnNumber":28}},"value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"value":null}}},"url":"mongodb+srv://RaikaSama:H9Fm51BisUke4rPK@cluster0.4nf56.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0","writeConcern":{"w":"majority"}},"topology":{"_events":{"topologyDescriptionChanged":[null,null]},"_eventsCount":26,"client":"[Circular]","s":{"clusterTime":{"clusterTime":{"$timestamp":"7481016998730661909"},"signature":{"hash":"NlZBu7BM1nUPE7D++d40hBLeN4s=","keyId":{"high":1731944570,"low":59,"unsigned":false}}},"connectionTimers":{},"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"description":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":30,"maxElectionId":"7fffffff00000000000003fd","maxSetVersion":378,"servers":{},"setName":"atlas-ewe2jc-shard-0","stale":false,"type":"ReplicaSetWithPrimary"},"heartbeatFrequencyMS":10000,"id":0,"minHeartbeatFrequencyMS":500,"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"seedlist":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"serverSelectionTimeoutMS":5000,"servers":{},"srvPoller":{"_events":{},"_eventsCount":0,"generation":0,"haMode":false,"heartbeatFrequencyMS":10000,"rescanSrvIntervalMS":60000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb"},"state":"connected"}}},"clientOptions":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"defaultTransactionOptions":{},"explicit":true,"hasEnded":false,"sessionPool":{"client":{"_events":{},"_eventsCount":1,"_maxListeners":0,"mongoLogger":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"s":{"activeSessions":{},"bsonOptions":{"bsonRegExp":false,"enableUtf8Validation":true,"fieldsAsRaw":{},"ignoreUndefined":false,"promoteBuffers":false,"promoteLongs":true,"promoteValues":true,"raw":false,"serializeFunctions":false,"useBigInt64":false},"hasBeenClosed":false,"isMongoClient":true,"namespace":{"db":"admin"},"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"readPreference":{"mode":"primary"},"sessionPool":"[Circular]","url":"mongodb+srv://RaikaSama:H9Fm51BisUke4rPK@cluster0.4nf56.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0","writeConcern":{"w":"majority"}},"topology":{"_events":{"topologyDescriptionChanged":[null,null]},"_eventsCount":26,"client":"[Circular]","s":{"clusterTime":{"clusterTime":{"$timestamp":"7481016998730661909"},"signature":{"hash":"NlZBu7BM1nUPE7D++d40hBLeN4s=","keyId":{"high":1731944570,"low":59,"unsigned":false}}},"connectionTimers":{},"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"description":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":30,"maxElectionId":"7fffffff00000000000003fd","maxSetVersion":378,"servers":{},"setName":"atlas-ewe2jc-shard-0","stale":false,"type":"ReplicaSetWithPrimary"},"heartbeatFrequencyMS":10000,"id":0,"minHeartbeatFrequencyMS":500,"options":{"appName":"Cluster0","compressors":["none"],"connectTimeoutMS":10000,"credentials":{"mechanism":"DEFAULT","mechanismProperties":{},"password":"H9Fm51BisUke4rPK","source":"admin","username":"RaikaSama"},"dbName":"test","directConnection":false,"driverInfo":{"name":"Mongoose","version":"7.8.3"},"enableUtf8Validation":true,"family":4,"forceServerObjectId":false,"heartbeatFrequencyMS":10000,"hosts":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"keepAlive":true,"keepAliveInitialDelay":120000,"loadBalanced":false,"localThresholdMS":15,"maxConnecting":2,"maxIdleTimeMS":0,"maxPoolSize":10,"metadata":{"application":{"name":"Cluster0"},"driver":{"name":"nodejs|Mongoose","version":"5.9.2|7.8.3"},"os":{"architecture":"x64","name":"win32","type":"Windows_NT","version":"10.0.26100"},"platform":"Node.js v22.12.0, LE"},"minHeartbeatFrequencyMS":500,"minPoolSize":0,"mongoLoggerOptions":{"componentSeverities":{"command":"off","connection":"off","default":"off","serverSelection":"off","topology":"off"},"logDestination":{},"maxDocumentLength":1000},"monitorCommands":false,"noDelay":true,"pkFactory":{},"raw":false,"readPreference":{"mode":"primary"},"replicaSet":"atlas-ewe2jc-shard-0","retryReads":true,"retryWrites":true,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb","tls":true,"useNewUrlParser":true,"useUnifiedTopology":true,"userSpecifiedAuthSource":false,"userSpecifiedReplicaSet":false,"waitQueueTimeoutMS":0,"writeConcern":{"w":"majority"},"zlibCompressionLevel":0},"seedlist":[{"host":"cluster0-shard-00-02.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-00.4nf56.mongodb.net","isIPv6":false,"port":27017},{"host":"cluster0-shard-00-01.4nf56.mongodb.net","isIPv6":false,"port":27017}],"serverSelectionTimeoutMS":5000,"servers":{},"srvPoller":{"_events":{},"_eventsCount":0,"generation":0,"haMode":false,"heartbeatFrequencyMS":10000,"rescanSrvIntervalMS":60000,"srvHost":"cluster0.4nf56.mongodb.net","srvMaxHosts":0,"srvServiceName":"mongodb"},"state":"connected"}}},"sessions":{"count":6,"head":{"next":{"next":{"next":{"next":{"next":{"next":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"prev":"[Circular]","value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39702179,"txnNumber":28}},"prev":"[Circular]","value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39702180,"txnNumber":21}},"prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":{"next":"[Circular]","prev":"[Circular]","value":{"id":{"id":"aM955C2kQMG8JVFJVhmPYg=="},"isDirty":false,"lastUse":39702180,"txnNumber":21}},"value":{"id":{"id":"TEDO3ybFQMmp5Ahrnljg5A=="},"isDirty":false,"lastUse":39702179,"txnNumber":28}},"value":{"id":{"id":"5b99ElRNTg6uwVEEEf+doA=="},"isDirty":false,"lastUse":38246780,"txnNumber":0}},"value":{"id":{"id":"KdZgN8AUT6OBUOMS1l9hGQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"U8A+aIpnT7yDvAO3LFWNFQ=="},"isDirty":false,"lastUse":38246761,"txnNumber":0}},"value":{"id":{"id":"UwyDhJ5USfu6Pf9dD6GyDA=="},"isDirty":false,"lastUse":38246731,"txnNumber":0}},"value":null}}},"supports":{"causalConsistency":true},"transaction":{"options":{"readPreference":{"mode":"primary"},"writeConcern":{"w":"majority"}},"state":"STARTING_TRANSACTION"}},"teachers":["67c0296a250c5746c3d96444","67c0c560285a82c16495c615"]}},"errorMessage":"a circular reference in the update value, updateValue:\n{\n  teachers: [ '67c0296a250c5746c3d96444', '67c0c560285a82c16495c615' ],\n  session: ClientSession {\n    _events: [Object: null prototype],\n    _eventsCount: 1,\n    _maxListeners: undefined,\n    client: [MongoClient],\n    sessionPool: [ServerSessionPool],\n    hasEnded: false,\n    clientOptions: [Object: null prototype],\n    explicit: true,\n    supports: [Object],\n    clusterTime: undefined,\n    operationTime: undefined,\n    owner: undefined,\n    defaultTransactionOptions: {},\n    transaction: [Transaction],\n    [Symbol(shapeMode)]: false,\n    [Symbol(kCapture)]: false,\n    [Symbol(snapshotEnabled)]: false,\n    [Symbol(serverSession)]: [ServerSession],\n    [Symbol(txnNumberIncrement)]: 1\n  }\n}\nupdatePath: ''","errorName":"MongooseError","level":"error","message":"Errore in StudentRepository.update:","stack":"MongooseError: a circular reference in the update value, updateValue:\n{\n  teachers: [ '67c0296a250c5746c3d96444', '67c0c560285a82c16495c615' ],\n  session: ClientSession {\n    _events: [Object: null prototype],\n    _eventsCount: 1,\n    _maxListeners: undefined,\n    client: [MongoClient],\n    sessionPool: [ServerSessionPool],\n    hasEnded: false,\n    clientOptions: [Object: null prototype],\n    explicit: true,\n    supports: [Object],\n    clusterTime: undefined,\n    operationTime: undefined,\n    owner: undefined,\n    defaultTransactionOptions: {},\n    transaction: [Transaction],\n    [Symbol(shapeMode)]: false,\n    [Symbol(kCapture)]: false,\n    [Symbol(snapshotEnabled)]: false,\n    [Symbol(serverSession)]: [ServerSession],\n    [Symbol(txnNumberIncrement)]: 1\n  }\n}\nupdatePath: ''\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:85:11)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\common.js:106:7)\n    at modifiedPaths (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\modifiedPaths.js:30:3)\n    at updatedPathsByArrayFilter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\updatedPathsByArrayFilter.js:9:24)\n    at castArrayFilters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\update\\castArrayFilters.js:12:32)\n    at _castArrayFilters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2250:5)","timestamp":"2025-03-12T20:06:43.030Z"}
{"level":"error","message":"undefined error:","timestamp":"2025-03-12T20:06:43.043Z"}
{"duration":"193ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"PUT","requestId":"req_1741810002852_opjhx9h0r","responseSize":"354 Bytes","statusCode":500,"timestamp":"2025-03-12T20:06:43.046Z","url":"/api/v1/students/67d1dc3cf6b1bd007cd5a301","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-12T20:09:54.599Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-12T20:09:54.604Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-12T20:09:54.654Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-12T20:09:55.712Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-12T20:09:55.713Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-12T20:09:55.715Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-12T20:09:56.085Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-12T20:09:56.094Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-12T20:09:56.095Z"}
{"classId":"67c236a42373b42426264c19","level":"info","message":"Studenti rimossi dalla classe","studentCount":1,"timestamp":"2025-03-12T20:47:14.737Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-12T20:52:08.219Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-12T20:52:08.224Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-12T20:52:08.264Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-12T20:52:09.128Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-12T20:52:09.129Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-12T20:52:09.130Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-12T20:52:09.479Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-12T20:52:09.489Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-12T20:52:09.490Z"}
{"className":"4G","level":"info","message":"Batch assignment completed:","modifiedCount":1,"timestamp":"2025-03-12T20:53:24.006Z","user":"677bfe44f6789c907c9f3766"}
{"classId":"67c236a42373b42426264c19","level":"info","message":"Studenti rimossi dalla classe","studentCount":1,"timestamp":"2025-03-12T20:54:44.792Z"}
{"className":"4G","level":"info","message":"Batch assignment completed:","modifiedCount":1,"timestamp":"2025-03-12T20:55:01.393Z","user":"677bfe44f6789c907c9f3766"}
{"classId":"67c236a42373b42426264c19","level":"info","message":"Studenti rimossi dalla classe","studentCount":1,"timestamp":"2025-03-12T20:55:41.863Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-12T20:58:49.330Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-12T20:58:49.334Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-12T20:58:49.367Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-12T20:58:50.090Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-12T20:58:50.091Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-12T20:58:50.092Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-12T20:58:50.367Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-12T20:58:50.371Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-12T20:58:50.372Z"}
{"className":"4G","level":"info","message":"Batch assignment completed:","modifiedCount":1,"timestamp":"2025-03-12T20:59:02.990Z","user":"677bfe44f6789c907c9f3766"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-12T20:59:56.850Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-12T20:59:56.855Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-12T20:59:56.892Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-12T20:59:57.592Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-12T20:59:57.593Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-12T20:59:57.594Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-12T20:59:57.892Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-12T20:59:57.896Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-12T20:59:57.897Z"}
{"classId":"67c236a42373b42426264c19","level":"info","message":"Studenti rimossi dalla classe","studentCount":1,"timestamp":"2025-03-12T21:00:08.662Z"}
{"className":"4G","level":"info","message":"Batch assignment completed:","modifiedCount":1,"timestamp":"2025-03-12T21:00:26.267Z","user":"677bfe44f6789c907c9f3766"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-12T21:04:26.452Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-12T21:04:26.456Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-12T21:04:26.492Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-12T21:04:27.293Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-12T21:04:27.294Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-12T21:04:27.296Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-12T21:04:27.598Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-12T21:04:27.604Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-12T21:04:27.604Z"}
{"classId":"67c236a42373b42426264c19","level":"info","message":"Studenti rimossi dalla classe","studentCount":1,"timestamp":"2025-03-12T21:04:41.044Z"}
{"className":"4G","level":"info","message":"Batch assignment completed:","modifiedCount":1,"timestamp":"2025-03-12T21:04:46.660Z","user":"677bfe44f6789c907c9f3766"}
{"classId":"67c236a42373b42426264c19","level":"info","message":"Studenti rimossi dalla classe","studentCount":1,"timestamp":"2025-03-12T21:05:04.334Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-12T21:05:44.039Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-12T21:05:44.044Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-12T21:05:44.087Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-12T21:05:45.006Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-12T21:05:45.007Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-12T21:05:45.009Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-12T21:05:45.299Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-12T21:05:45.304Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-12T21:05:45.304Z"}
{"className":"1G","level":"info","message":"Batch assignment completed:","modifiedCount":1,"timestamp":"2025-03-12T21:06:13.943Z","user":"677bfe44f6789c907c9f3766"}

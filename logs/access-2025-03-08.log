{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:04:03.368Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:04:03.373Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:04:03.411Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-07T23:04:04.285Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-07T23:04:04.287Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-07T23:04:04.289Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-07T23:04:04.665Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-07T23:04:04.673Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-07T23:04:04.674Z"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741388648376_tbfv0s83d","timestamp":"2025-03-07T23:04:08.376Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-07T23:04:15.933Z","userId":"67cb7b6fbd61fe6549d136c1"}
{"error":{"code":11000,"index":0,"keyPattern":{"email":1},"keyValue":{"email":"test@example.com"}},"level":"error","message":"Error creating user","timestamp":"2025-03-07T23:04:16.156Z"}
{"duration":"11131ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741388648376_tbfv0s83d","responseSize":"23.73 KB","statusCode":200,"timestamp":"2025-03-07T23:04:19.507Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741388659532_x62tt1whv","timestamp":"2025-03-07T23:04:19.532Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"181ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741388659532_x62tt1whv","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:04:19.713Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741388663211_3ce77vg1g","timestamp":"2025-03-07T23:04:23.211Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:04:26.852Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:04:26.859Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:04:26.947Z"}
{"error":"Scuola non trovata","level":"error","message":"Error in SchoolRepository.findById:","schoolId":"67cb7b7d1eff2075e161c9ea","timestamp":"2025-03-07T23:04:29.653Z","type":"object"}
{"error":{"code":11000,"index":0,"keyPattern":{"name":1},"keyValue":{"name":"Test School"}},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-03-07T23:04:30.088Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb7b7e1eff2075e161ca5b","timestamp":"2025-03-07T23:04:31.087Z","userId":"67cb7b7e1eff2075e161ca61"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb7b7f1eff2075e161ca73","timestamp":"2025-03-07T23:04:31.300Z","userId":"67cb7b7f1eff2075e161ca6d"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb7b7f1eff2075e161cab2","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:04:31.937Z","yearData":{"createdBy":"67cb7b7f1eff2075e161caac","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb7b801eff2075e161cac3","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:04:32.144Z","yearData":{"createdBy":"67cb7b7f1eff2075e161cabd","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}}
{"error":"Anno accademico deve essere nel formato YYYY/YYYY","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb7b801eff2075e161cad4","timestamp":"2025-03-07T23:04:32.341Z","yearData":{"createdBy":"67cb7b801eff2075e161cace","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024-2025"}}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb7b801eff2075e161cae4","timestamp":"2025-03-07T23:04:32.545Z","userId":"67cb7b801eff2075e161cae1"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cb7b801eff2075e161caf9","timestamp":"2025-03-07T23:04:32.742Z","userId":"67cb7b801eff2075e161caf3"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cb7b801eff2075e161cb0a","timestamp":"2025-03-07T23:04:32.953Z","userId":"67cb7b801eff2075e161cb04"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb7b811eff2075e161cb1b","sectionName":"A","timestamp":"2025-03-07T23:04:33.155Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb7b811eff2075e161cb2c","sectionName":"Z","timestamp":"2025-03-07T23:04:33.349Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb7b811eff2075e161cb3d","sectionName":"A","timestamp":"2025-03-07T23:04:33.562Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb7b811eff2075e161cb4e","timestamp":"2025-03-07T23:04:33.762Z","userId":"67cb7b811eff2075e161cb4b"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb7b821eff2075e161cb79","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:04:34.192Z","yearData":{"createdBy":"67cb7b811eff2075e161cb73","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb7b821eff2075e161cb8a","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:04:34.391Z","yearId":"67cb7b821eff2075e161cb8b"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:04:34.792Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:04:34.993Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb7b831eff2075e161cbd3","timestamp":"2025-03-07T23:04:35.203Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb7b831eff2075e161cbe4","timestamp":"2025-03-07T23:04:35.399Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb7b831eff2075e161cbf5","timestamp":"2025-03-07T23:04:35.590Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb7b831eff2075e161cc12","timestamp":"2025-03-07T23:04:35.787Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'aggiunta del manager:","schoolId":"67cb7b831eff2075e161cc23","timestamp":"2025-03-07T23:04:35.987Z","userId":"67cb7b831eff2075e161cc20"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb7b841eff2075e161cc34","timestamp":"2025-03-07T23:04:36.184Z"}
{"error":{},"level":"error","message":"Errore nel recupero studenti per sezione:","schoolId":"67cb7b841eff2075e161cc45","sectionName":"A","timestamp":"2025-03-07T23:04:36.373Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb7b841eff2075e161cc55","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:04:36.572Z","yearId":"67cb7b841eff2075e161cc56"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb7b841eff2075e161cc66","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:04:36.761Z","yearData":{"createdBy":"67cb7b841eff2075e161cc60","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb7b841eff2075e161cc77","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:04:36.954Z","yearId":"67cb7b841eff2075e161cc78"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb7b851eff2075e161cc88","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:04:37.143Z","yearId":"67cb7b851eff2075e161cc89"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb7b851eff2075e161cc99","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:04:37.339Z","yearId":"67cb7b851eff2075e161cc9a"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb7b851eff2075e161ccaa","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:04:37.536Z","yearId":"67cb7b851eff2075e161ccab"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-07T23:04:37.735Z"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-07T23:04:37.925Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-07T23:04:38.517Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella sincronizzazione assignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:04:38.519Z"}
{"duration":"15997ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741388663211_3ce77vg1g","responseSize":"64.81 KB","statusCode":200,"timestamp":"2025-03-07T23:04:39.208Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741388679216_h5fh0oyks","timestamp":"2025-03-07T23:04:39.216Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"156ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741388679216_h5fh0oyks","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:04:39.372Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:14:06.811Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:14:06.816Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:14:06.856Z"}
{"level":"info","message":"MongoDB Atlas Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-07T23:14:07.619Z"}
{"level":"info","message":"Connesso al cluster MongoDB Atlas","timestamp":"2025-03-07T23:14:08.024Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-07T23:14:08.025Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-07T23:14:08.027Z"}
{"configId":"67cb7dc0d6db121950b6160f","level":"info","message":"Created default CSI configuration:","timestamp":"2025-03-07T23:14:08.202Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-07T23:14:08.290Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-07T23:14:08.295Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-07T23:14:08.296Z"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741389253962_ocv637dmg","timestamp":"2025-03-07T23:14:13.963Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":"Sessione non trovata","level":"error","message":"Session validation error","timestamp":"2025-03-07T23:14:13.994Z"}
{"error":{"code":"SESSION_002","message":"Sessione non trovata","metadata":{},"status":401},"ip":"::1","level":"error","message":"Authentication failed","path":"/unit/run","timestamp":"2025-03-07T23:14:13.995Z"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"error":{"code":"SESSION_002","message":"Sessione non trovata"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1741389253962_ocv637dmg","timestamp":"2025-03-07T23:14:13.997Z","url":"/api/v1/system-tests/unit/run"}
{"level":"error","message":"Sessione non trovata","timestamp":"2025-03-07T23:14:13.997Z"}
{"duration":"39ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1741389253962_ocv637dmg","responseSize":"108 Bytes","statusCode":401,"timestamp":"2025-03-07T23:14:14.001Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741389254023_7a58m8bsf","timestamp":"2025-03-07T23:14:14.023Z","url":"/api/v1/auth/refresh-token","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":"Sessione non trovata","level":"error","message":"Session validation error","timestamp":"2025-03-07T23:14:14.052Z"}
{"error":{"code":"SESSION_002","message":"Sessione non trovata","metadata":{},"status":401},"ip":"::1","level":"error","message":"Authentication failed","path":"/refresh-token","timestamp":"2025-03-07T23:14:14.052Z"}
{"error":{"code":"SESSION_002","message":"Sessione non trovata","metadata":{},"status":401},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/refresh-token","timestamp":"2025-03-07T23:14:14.054Z"}
{"duration":"33ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1741389254023_7a58m8bsf","responseSize":"82 Bytes","statusCode":401,"timestamp":"2025-03-07T23:14:14.056Z","url":"/api/v1/auth/refresh-token","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"email":"valentina@merazzi.it","password":"[REDACTED]"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741389260068_yu982b4z1","timestamp":"2025-03-07T23:14:20.068Z","url":"/api/v1/auth/login","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"email":"valentina@merazzi.it","error":"Utente non trovato","level":"error","message":"Login error:","timestamp":"2025-03-07T23:14:20.096Z"}
{"error":"Utente non trovato","level":"error","message":"Login error:","timestamp":"2025-03-07T23:14:20.097Z"}
{"error":{"message":"Utente non trovato","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/login","timestamp":"2025-03-07T23:14:20.098Z"}
{"duration":"31ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1741389260068_yu982b4z1","responseSize":"138 Bytes","statusCode":500,"timestamp":"2025-03-07T23:14:20.099Z","url":"/api/v1/auth/login","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:17:41.752Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:17:41.755Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:17:41.786Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-07T23:17:43.346Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-07T23:17:43.348Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-07T23:17:43.350Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-07T23:17:43.687Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-07T23:17:43.690Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-07T23:17:43.691Z"}
{"body":{"email":"riccardonicolilb@gmail.com","password":"[REDACTED]"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741389471603_ovn2nqxkg","timestamp":"2025-03-07T23:17:51.604Z","url":"/api/v1/auth/login","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"Login successful","metadata":{"ipAddress":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"},"timestamp":"2025-03-07T23:17:51.934Z","userId":"677bfe44f6789c907c9f3766"}
{"action":"login","level":"info","message":"User audit record created","timestamp":"2025-03-07T23:17:51.977Z","userId":"677bfe44f6789c907c9f3766"}
{"duration":"379ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741389471603_ovn2nqxkg","responseSize":"3.38 KB","statusCode":200,"timestamp":"2025-03-07T23:17:51.983Z","url":"/api/v1/auth/login","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741389475592_hm7b31msv","timestamp":"2025-03-07T23:17:55.593Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"190ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741389475592_hm7b31msv","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-07T23:17:55.782Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741389477759_c6j74ylfz","timestamp":"2025-03-07T23:17:57.759Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:18:02.836Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:18:02.841Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:18:02.929Z"}
{"error":"Scuola non trovata","level":"error","message":"Error in SchoolRepository.findById:","schoolId":"67cb7eadb5cb0891a2fbb296","timestamp":"2025-03-07T23:18:05.807Z","type":"object"}
{"error":{"code":11000,"index":0,"keyPattern":{"name":1},"keyValue":{"name":"Test School"}},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-03-07T23:18:06.231Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb7eafb5cb0891a2fbb307","timestamp":"2025-03-07T23:18:07.209Z","userId":"67cb7eafb5cb0891a2fbb30d"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb7eafb5cb0891a2fbb31f","timestamp":"2025-03-07T23:18:07.449Z","userId":"67cb7eafb5cb0891a2fbb319"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb7eb0b5cb0891a2fbb35e","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:18:08.311Z","yearData":{"createdBy":"67cb7eafb5cb0891a2fbb358","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb7eb0b5cb0891a2fbb36f","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:18:08.582Z","yearData":{"createdBy":"67cb7eb0b5cb0891a2fbb369","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}}
{"error":"Anno accademico deve essere nel formato YYYY/YYYY","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb7eb0b5cb0891a2fbb380","timestamp":"2025-03-07T23:18:08.805Z","yearData":{"createdBy":"67cb7eb0b5cb0891a2fbb37a","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024-2025"}}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb7eb1b5cb0891a2fbb390","timestamp":"2025-03-07T23:18:09.009Z","userId":"67cb7eb0b5cb0891a2fbb38d"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cb7eb1b5cb0891a2fbb3a5","timestamp":"2025-03-07T23:18:09.205Z","userId":"67cb7eb1b5cb0891a2fbb39f"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cb7eb1b5cb0891a2fbb3b6","timestamp":"2025-03-07T23:18:09.401Z","userId":"67cb7eb1b5cb0891a2fbb3b0"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb7eb1b5cb0891a2fbb3c7","sectionName":"A","timestamp":"2025-03-07T23:18:09.608Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb7eb1b5cb0891a2fbb3d8","sectionName":"Z","timestamp":"2025-03-07T23:18:09.795Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb7eb2b5cb0891a2fbb3e9","sectionName":"A","timestamp":"2025-03-07T23:18:10.039Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb7eb2b5cb0891a2fbb3fa","timestamp":"2025-03-07T23:18:10.288Z","userId":"67cb7eb2b5cb0891a2fbb3f7"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb7eb3b5cb0891a2fbb425","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:18:11.024Z","yearData":{"createdBy":"67cb7eb2b5cb0891a2fbb41f","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb7eb3b5cb0891a2fbb436","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:18:11.283Z","yearId":"67cb7eb3b5cb0891a2fbb437"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:18:11.695Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:18:11.900Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb7eb4b5cb0891a2fbb47f","timestamp":"2025-03-07T23:18:12.134Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb7eb4b5cb0891a2fbb490","timestamp":"2025-03-07T23:18:12.380Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb7eb4b5cb0891a2fbb4a1","timestamp":"2025-03-07T23:18:12.592Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb7eb4b5cb0891a2fbb4be","timestamp":"2025-03-07T23:18:12.784Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'aggiunta del manager:","schoolId":"67cb7eb4b5cb0891a2fbb4cf","timestamp":"2025-03-07T23:18:12.995Z","userId":"67cb7eb4b5cb0891a2fbb4cc"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb7eb5b5cb0891a2fbb4e0","timestamp":"2025-03-07T23:18:13.191Z"}
{"error":{},"level":"error","message":"Errore nel recupero studenti per sezione:","schoolId":"67cb7eb5b5cb0891a2fbb4f1","sectionName":"A","timestamp":"2025-03-07T23:18:13.422Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb7eb5b5cb0891a2fbb501","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:18:13.756Z","yearId":"67cb7eb5b5cb0891a2fbb502"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb7eb5b5cb0891a2fbb512","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:18:13.978Z","yearData":{"createdBy":"67cb7eb5b5cb0891a2fbb50c","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb7eb6b5cb0891a2fbb523","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:18:14.186Z","yearId":"67cb7eb6b5cb0891a2fbb524"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb7eb6b5cb0891a2fbb534","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:18:14.394Z","yearId":"67cb7eb6b5cb0891a2fbb535"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb7eb6b5cb0891a2fbb545","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:18:14.596Z","yearId":"67cb7eb6b5cb0891a2fbb546"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb7eb6b5cb0891a2fbb556","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:18:14.787Z","yearId":"67cb7eb6b5cb0891a2fbb557"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-07T23:18:14.990Z"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-07T23:18:15.182Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-07T23:18:15.748Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella sincronizzazione assignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:18:15.750Z"}
{"duration":"19085ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741389477759_c6j74ylfz","responseSize":"64.81 KB","statusCode":200,"timestamp":"2025-03-07T23:18:16.844Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741389496849_rw29uprkt","timestamp":"2025-03-07T23:18:16.850Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"167ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741389496849_rw29uprkt","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:18:17.016Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:20:45.595Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:20:45.600Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:20:45.658Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-07T23:20:46.637Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-07T23:20:46.638Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-07T23:20:46.640Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-07T23:20:46.962Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-07T23:20:46.966Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-07T23:20:46.967Z"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741389652418_alpytj8k5","timestamp":"2025-03-07T23:20:52.419Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-07T23:21:01.132Z","userId":"67cb7f5d757d97a74b159301"}
{"error":{"code":11000,"index":0,"keyPattern":{"email":1},"keyValue":{"email":"test@example.com"}},"level":"error","message":"Error creating user","timestamp":"2025-03-07T23:21:01.416Z"}
{"duration":"14076ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741389652418_alpytj8k5","responseSize":"23.73 KB","statusCode":200,"timestamp":"2025-03-07T23:21:06.495Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741389666517_14ccwr4y8","timestamp":"2025-03-07T23:21:06.517Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"205ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741389666517_14ccwr4y8","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:21:06.723Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741389671240_z7g60bs8z","timestamp":"2025-03-07T23:21:11.240Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:21:16.945Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:21:16.951Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:21:17.083Z"}
{"error":"Scuola non trovata","level":"error","message":"Error in SchoolRepository.findById:","schoolId":"67cb7f71d0d1ddaa566a958e","timestamp":"2025-03-07T23:21:21.165Z","type":"object"}
{"error":{"code":11000,"index":0,"keyPattern":{"name":1},"keyValue":{"name":"Test School"}},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-03-07T23:21:21.938Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb7f73d0d1ddaa566a95ff","timestamp":"2025-03-07T23:21:23.533Z","userId":"67cb7f73d0d1ddaa566a9605"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb7f73d0d1ddaa566a9617","timestamp":"2025-03-07T23:21:23.964Z","userId":"67cb7f73d0d1ddaa566a9611"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb7f75d0d1ddaa566a9656","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:21:25.097Z","yearData":{"createdBy":"67cb7f74d0d1ddaa566a9650","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb7f75d0d1ddaa566a9667","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:21:25.446Z","yearData":{"createdBy":"67cb7f75d0d1ddaa566a9661","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}}
{"error":"Anno accademico deve essere nel formato YYYY/YYYY","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb7f75d0d1ddaa566a9678","timestamp":"2025-03-07T23:21:25.784Z","yearData":{"createdBy":"67cb7f75d0d1ddaa566a9672","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024-2025"}}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb7f76d0d1ddaa566a9688","timestamp":"2025-03-07T23:21:26.100Z","userId":"67cb7f75d0d1ddaa566a9685"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cb7f76d0d1ddaa566a969d","timestamp":"2025-03-07T23:21:26.416Z","userId":"67cb7f76d0d1ddaa566a9697"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cb7f76d0d1ddaa566a96ae","timestamp":"2025-03-07T23:21:26.748Z","userId":"67cb7f76d0d1ddaa566a96a8"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb7f77d0d1ddaa566a96bf","sectionName":"A","timestamp":"2025-03-07T23:21:27.096Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb7f77d0d1ddaa566a96d0","sectionName":"Z","timestamp":"2025-03-07T23:21:27.458Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb7f77d0d1ddaa566a96e1","sectionName":"A","timestamp":"2025-03-07T23:21:27.843Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb7f78d0d1ddaa566a96f2","timestamp":"2025-03-07T23:21:28.257Z","userId":"67cb7f78d0d1ddaa566a96ef"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb7f79d0d1ddaa566a971d","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:21:29.064Z","yearData":{"createdBy":"67cb7f78d0d1ddaa566a9717","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb7f79d0d1ddaa566a972e","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:21:29.409Z","yearId":"67cb7f79d0d1ddaa566a972f"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:21:30.115Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:21:30.440Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb7f7ad0d1ddaa566a9777","timestamp":"2025-03-07T23:21:30.773Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb7f7bd0d1ddaa566a9788","timestamp":"2025-03-07T23:21:31.106Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb7f7bd0d1ddaa566a9799","timestamp":"2025-03-07T23:21:31.441Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb7f7bd0d1ddaa566a97b6","timestamp":"2025-03-07T23:21:31.810Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'aggiunta del manager:","schoolId":"67cb7f7cd0d1ddaa566a97c7","timestamp":"2025-03-07T23:21:32.151Z","userId":"67cb7f7bd0d1ddaa566a97c4"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb7f7cd0d1ddaa566a97d8","timestamp":"2025-03-07T23:21:32.441Z"}
{"error":{},"level":"error","message":"Errore nel recupero studenti per sezione:","schoolId":"67cb7f7cd0d1ddaa566a97e9","sectionName":"A","timestamp":"2025-03-07T23:21:32.728Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb7f7dd0d1ddaa566a97f9","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:21:33.075Z","yearId":"67cb7f7dd0d1ddaa566a97fa"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb7f7dd0d1ddaa566a980a","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:21:33.392Z","yearData":{"createdBy":"67cb7f7dd0d1ddaa566a9804","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb7f7dd0d1ddaa566a981b","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:21:33.853Z","yearId":"67cb7f7dd0d1ddaa566a981c"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb7f7ed0d1ddaa566a982c","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:21:34.199Z","yearId":"67cb7f7ed0d1ddaa566a982d"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb7f7ed0d1ddaa566a983d","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:21:34.486Z","yearId":"67cb7f7ed0d1ddaa566a983e"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb7f7ed0d1ddaa566a984e","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:21:34.775Z","yearId":"67cb7f7ed0d1ddaa566a984f"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-07T23:21:35.065Z"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-07T23:21:35.346Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-07T23:21:36.241Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella sincronizzazione assignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:21:36.250Z"}
{"duration":"25844ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741389671240_z7g60bs8z","responseSize":"64.81 KB","statusCode":200,"timestamp":"2025-03-07T23:21:37.084Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741389697090_r6cl4n7i1","timestamp":"2025-03-07T23:21:37.090Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"181ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741389697090_r6cl4n7i1","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:21:37.271Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:26:03.112Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:26:03.116Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:26:03.155Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-07T23:26:03.909Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-07T23:26:03.911Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-07T23:26:03.912Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-07T23:26:04.243Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-07T23:26:04.246Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-07T23:26:04.247Z"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741389969177_swqkn1jjf","timestamp":"2025-03-07T23:26:09.177Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:26:13.856Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:26:13.861Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:26:13.960Z"}
{"error":"Scuola non trovata","level":"error","message":"Error in SchoolRepository.findById:","schoolId":"67cb8098fce81ae01936a93d","timestamp":"2025-03-07T23:26:16.853Z","type":"object"}
{"error":{"code":11000,"index":0,"keyPattern":{"name":1},"keyValue":{"name":"Test School"}},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-03-07T23:26:17.291Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb809afce81ae01936a9ae","timestamp":"2025-03-07T23:26:18.248Z","userId":"67cb809afce81ae01936a9b4"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb809afce81ae01936a9c6","timestamp":"2025-03-07T23:26:18.458Z","userId":"67cb809afce81ae01936a9c0"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb809bfce81ae01936aa05","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:26:19.099Z","yearData":{"createdBy":"67cb809afce81ae01936a9ff","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb809bfce81ae01936aa16","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:26:19.301Z","yearData":{"createdBy":"67cb809bfce81ae01936aa10","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}}
{"error":"Anno accademico deve essere nel formato YYYY/YYYY","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb809bfce81ae01936aa27","timestamp":"2025-03-07T23:26:19.503Z","yearData":{"createdBy":"67cb809bfce81ae01936aa21","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024-2025"}}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb809bfce81ae01936aa37","timestamp":"2025-03-07T23:26:19.693Z","userId":"67cb809bfce81ae01936aa34"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cb809bfce81ae01936aa4c","timestamp":"2025-03-07T23:26:19.893Z","userId":"67cb809bfce81ae01936aa46"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cb809cfce81ae01936aa5d","timestamp":"2025-03-07T23:26:20.100Z","userId":"67cb809bfce81ae01936aa57"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb809cfce81ae01936aa6e","sectionName":"A","timestamp":"2025-03-07T23:26:20.303Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb809cfce81ae01936aa7f","sectionName":"Z","timestamp":"2025-03-07T23:26:20.508Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb809cfce81ae01936aa90","sectionName":"A","timestamp":"2025-03-07T23:26:20.731Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb809cfce81ae01936aaa1","timestamp":"2025-03-07T23:26:20.930Z","userId":"67cb809cfce81ae01936aa9e"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb809dfce81ae01936aacc","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:26:21.382Z","yearData":{"createdBy":"67cb809dfce81ae01936aac6","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb809dfce81ae01936aadd","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:26:21.579Z","yearId":"67cb809dfce81ae01936aade"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:26:21.996Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:26:22.192Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb809efce81ae01936ab26","timestamp":"2025-03-07T23:26:22.390Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb809efce81ae01936ab37","timestamp":"2025-03-07T23:26:22.587Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb809efce81ae01936ab48","timestamp":"2025-03-07T23:26:22.779Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb809efce81ae01936ab65","timestamp":"2025-03-07T23:26:22.977Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'aggiunta del manager:","schoolId":"67cb809ffce81ae01936ab76","timestamp":"2025-03-07T23:26:23.170Z","userId":"67cb809ffce81ae01936ab73"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb809ffce81ae01936ab87","timestamp":"2025-03-07T23:26:23.361Z"}
{"error":{},"level":"error","message":"Errore nel recupero studenti per sezione:","schoolId":"67cb809ffce81ae01936ab98","sectionName":"A","timestamp":"2025-03-07T23:26:23.550Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb809ffce81ae01936aba8","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:26:23.744Z","yearId":"67cb809ffce81ae01936aba9"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb809ffce81ae01936abb9","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:26:23.936Z","yearData":{"createdBy":"67cb809ffce81ae01936abb3","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb80a0fce81ae01936abca","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:26:24.129Z","yearId":"67cb80a0fce81ae01936abcb"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb80a0fce81ae01936abdb","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:26:24.328Z","yearId":"67cb80a0fce81ae01936abdc"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb80a0fce81ae01936abec","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:26:24.522Z","yearId":"67cb80a0fce81ae01936abed"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb80a0fce81ae01936abfd","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:26:24.714Z","yearId":"67cb80a0fce81ae01936abfe"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-07T23:26:24.913Z"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-07T23:26:25.109Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-07T23:26:25.697Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella sincronizzazione assignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:26:25.702Z"}
{"duration":"17202ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741389969177_swqkn1jjf","responseSize":"64.81 KB","statusCode":200,"timestamp":"2025-03-07T23:26:26.379Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741389986387_01bv6yxp1","timestamp":"2025-03-07T23:26:26.387Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"182ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741389986387_01bv6yxp1","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:26:26.569Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741389993342_4y5p7emf7","timestamp":"2025-03-07T23:26:33.342Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-07T23:26:39.344Z","userId":"67cb80afeffb30aaaac915e8"}
{"error":{"code":11000,"index":0,"keyPattern":{"email":1},"keyValue":{"email":"test@example.com"}},"level":"error","message":"Error creating user","timestamp":"2025-03-07T23:26:39.547Z"}
{"duration":"9346ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741389993342_4y5p7emf7","responseSize":"18.54 KB","statusCode":200,"timestamp":"2025-03-07T23:26:42.688Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741390002693_uqd6svxes","timestamp":"2025-03-07T23:26:42.693Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"194ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741390002693_uqd6svxes","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:26:42.887Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"20","testType":""},"requestId":"req_1741390015186_av0wba0kw","timestamp":"2025-03-07T23:26:55.187Z","url":"/api/v1/system-tests/history?testType=&limit=20","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"342ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741390015186_av0wba0kw","responseSize":"751.84 KB","statusCode":200,"timestamp":"2025-03-07T23:26:55.528Z","url":"/api/v1/system-tests/history?testType=&limit=20","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741390026188_v8eitvmry","timestamp":"2025-03-07T23:27:06.188Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"157ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741390026188_v8eitvmry","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-07T23:27:06.345Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:33:28.419Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:33:28.424Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:33:28.463Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-07T23:33:30.120Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-07T23:33:30.122Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-07T23:33:30.124Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-07T23:33:30.450Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-07T23:33:30.457Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-07T23:33:30.458Z"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741390415627_ugb8w5ozj","timestamp":"2025-03-07T23:33:35.628Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-07T23:33:42.772Z","userId":"67cb825699588ee725d597d3"}
{"error":{"code":11000,"index":0,"keyPattern":{"email":1},"keyValue":{"email":"test@example.com"}},"level":"error","message":"Error creating user","timestamp":"2025-03-07T23:33:43.009Z"}
{"duration":"10672ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741390415627_ugb8w5ozj","responseSize":"18.54 KB","statusCode":200,"timestamp":"2025-03-07T23:33:46.299Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741390426325_o96ut0swg","timestamp":"2025-03-07T23:33:46.325Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"164ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741390426325_o96ut0swg","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:33:46.489Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741390430345_aq4s2cwt0","timestamp":"2025-03-07T23:33:50.345Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:33:54.039Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:33:54.043Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:33:54.126Z"}
{"error":"Scuola non trovata","level":"error","message":"Error in SchoolRepository.findById:","schoolId":"67cb82648b48747704d5494d","timestamp":"2025-03-07T23:33:56.910Z","type":"object"}
{"error":{"code":11000,"index":0,"keyPattern":{"name":1},"keyValue":{"name":"Test School"}},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-03-07T23:33:57.350Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb82668b48747704d549be","timestamp":"2025-03-07T23:33:58.277Z","userId":"67cb82668b48747704d549c4"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb82668b48747704d549d6","timestamp":"2025-03-07T23:33:58.476Z","userId":"67cb82668b48747704d549d0"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb82678b48747704d54a15","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:33:59.125Z","yearData":{"createdBy":"67cb82668b48747704d54a0f","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb82678b48747704d54a26","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:33:59.332Z","yearData":{"createdBy":"67cb82678b48747704d54a20","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}}
{"error":"Anno accademico deve essere nel formato YYYY/YYYY","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb82678b48747704d54a37","timestamp":"2025-03-07T23:33:59.529Z","yearData":{"createdBy":"67cb82678b48747704d54a31","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024-2025"}}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb82678b48747704d54a47","timestamp":"2025-03-07T23:33:59.738Z","userId":"67cb82678b48747704d54a44"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cb82678b48747704d54a5c","timestamp":"2025-03-07T23:33:59.943Z","userId":"67cb82678b48747704d54a56"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cb82688b48747704d54a6d","timestamp":"2025-03-07T23:34:00.161Z","userId":"67cb82678b48747704d54a67"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb82688b48747704d54a7e","sectionName":"A","timestamp":"2025-03-07T23:34:00.374Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb82688b48747704d54a8f","sectionName":"Z","timestamp":"2025-03-07T23:34:00.572Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb82688b48747704d54aa0","sectionName":"A","timestamp":"2025-03-07T23:34:00.773Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb82688b48747704d54ab1","timestamp":"2025-03-07T23:34:00.979Z","userId":"67cb82688b48747704d54aae"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb82698b48747704d54adc","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:01.402Z","yearData":{"createdBy":"67cb82698b48747704d54ad6","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb82698b48747704d54aed","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:01.610Z","yearId":"67cb82698b48747704d54aee"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:02.031Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:02.233Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb826a8b48747704d54b36","timestamp":"2025-03-07T23:34:02.452Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb826a8b48747704d54b47","timestamp":"2025-03-07T23:34:02.648Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb826a8b48747704d54b58","timestamp":"2025-03-07T23:34:02.846Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb826b8b48747704d54b75","timestamp":"2025-03-07T23:34:03.049Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'aggiunta del manager:","schoolId":"67cb826b8b48747704d54b86","timestamp":"2025-03-07T23:34:03.236Z","userId":"67cb826b8b48747704d54b83"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb826b8b48747704d54b97","timestamp":"2025-03-07T23:34:03.429Z"}
{"error":{},"level":"error","message":"Errore nel recupero studenti per sezione:","schoolId":"67cb826b8b48747704d54ba8","sectionName":"A","timestamp":"2025-03-07T23:34:03.632Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb826b8b48747704d54bb8","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:03.829Z","yearId":"67cb826b8b48747704d54bb9"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb826c8b48747704d54bc9","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:04.020Z","yearData":{"createdBy":"67cb826b8b48747704d54bc3","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb826c8b48747704d54bda","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:04.213Z","yearId":"67cb826c8b48747704d54bdb"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb826c8b48747704d54beb","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:04.414Z","yearId":"67cb826c8b48747704d54bec"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb826c8b48747704d54bfc","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:04.603Z","yearId":"67cb826c8b48747704d54bfd"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb826c8b48747704d54c0d","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:04.804Z","yearId":"67cb826c8b48747704d54c0e"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-07T23:34:05.021Z"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-07T23:34:05.215Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-07T23:34:05.802Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella sincronizzazione assignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:05.805Z"}
{"duration":"16122ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741390430345_aq4s2cwt0","responseSize":"64.81 KB","statusCode":200,"timestamp":"2025-03-07T23:34:06.467Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741390446472_b8uhihfu8","timestamp":"2025-03-07T23:34:06.472Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"160ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741390446472_b8uhihfu8","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:34:06.632Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:34:26.167Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:34:26.172Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:34:26.213Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-07T23:34:26.901Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-07T23:34:26.902Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-07T23:34:26.905Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-07T23:34:27.210Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-07T23:34:27.214Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-07T23:34:27.214Z"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741390468790_lv7i3l8uq","timestamp":"2025-03-07T23:34:28.790Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:34:32.450Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:34:32.454Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:34:32.539Z"}
{"error":"Scuola non trovata","level":"error","message":"Error in SchoolRepository.findById:","schoolId":"67cb828bc602120bf353349e","timestamp":"2025-03-07T23:34:35.262Z","type":"object"}
{"error":{"code":11000,"index":0,"keyPattern":{"name":1},"keyValue":{"name":"Test School"}},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-03-07T23:34:35.721Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb828cc602120bf353350f","timestamp":"2025-03-07T23:34:36.771Z","userId":"67cb828cc602120bf3533515"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb828cc602120bf3533527","timestamp":"2025-03-07T23:34:36.974Z","userId":"67cb828cc602120bf3533521"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb828dc602120bf3533566","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:37.599Z","yearData":{"createdBy":"67cb828dc602120bf3533560","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb828dc602120bf3533577","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:37.807Z","yearData":{"createdBy":"67cb828dc602120bf3533571","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}}
{"error":"Anno accademico deve essere nel formato YYYY/YYYY","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb828ec602120bf3533588","timestamp":"2025-03-07T23:34:38.004Z","yearData":{"createdBy":"67cb828dc602120bf3533582","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024-2025"}}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb828ec602120bf3533598","timestamp":"2025-03-07T23:34:38.204Z","userId":"67cb828ec602120bf3533595"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cb828ec602120bf35335ad","timestamp":"2025-03-07T23:34:38.404Z","userId":"67cb828ec602120bf35335a7"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cb828ec602120bf35335be","timestamp":"2025-03-07T23:34:38.633Z","userId":"67cb828ec602120bf35335b8"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb828ec602120bf35335cf","sectionName":"A","timestamp":"2025-03-07T23:34:38.842Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb828fc602120bf35335e0","sectionName":"Z","timestamp":"2025-03-07T23:34:39.053Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb828fc602120bf35335f1","sectionName":"A","timestamp":"2025-03-07T23:34:39.256Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb828fc602120bf3533602","timestamp":"2025-03-07T23:34:39.470Z","userId":"67cb828fc602120bf35335ff"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb828fc602120bf353362d","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:39.870Z","yearData":{"createdBy":"67cb828fc602120bf3533627","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb8290c602120bf353363e","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:40.069Z","yearId":"67cb8290c602120bf353363f"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:40.486Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:40.684Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb8290c602120bf3533687","timestamp":"2025-03-07T23:34:40.902Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb8291c602120bf3533698","timestamp":"2025-03-07T23:34:41.101Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb8291c602120bf35336a9","timestamp":"2025-03-07T23:34:41.304Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb8291c602120bf35336c6","timestamp":"2025-03-07T23:34:41.512Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'aggiunta del manager:","schoolId":"67cb8291c602120bf35336d7","timestamp":"2025-03-07T23:34:41.715Z","userId":"67cb8291c602120bf35336d4"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb8291c602120bf35336e8","timestamp":"2025-03-07T23:34:41.912Z"}
{"error":{},"level":"error","message":"Errore nel recupero studenti per sezione:","schoolId":"67cb8292c602120bf35336f9","sectionName":"A","timestamp":"2025-03-07T23:34:42.109Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb8292c602120bf3533709","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:42.306Z","yearId":"67cb8292c602120bf353370a"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb8292c602120bf353371a","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:42.510Z","yearData":{"createdBy":"67cb8292c602120bf3533714","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb8292c602120bf353372b","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:42.706Z","yearId":"67cb8292c602120bf353372c"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb8292c602120bf353373c","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:42.902Z","yearId":"67cb8292c602120bf353373d"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb8293c602120bf353374d","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:43.101Z","yearId":"67cb8293c602120bf353374e"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb8293c602120bf353375e","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:43.301Z","yearId":"67cb8293c602120bf353375f"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-07T23:34:43.501Z"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-07T23:34:43.699Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-07T23:34:44.291Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella sincronizzazione assignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:34:44.294Z"}
{"duration":"16152ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741390468790_lv7i3l8uq","responseSize":"64.81 KB","statusCode":200,"timestamp":"2025-03-07T23:34:44.942Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741390484948_te0a2m89q","timestamp":"2025-03-07T23:34:44.948Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"182ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741390484948_te0a2m89q","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:34:45.130Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741390492650_kc52rg77d","timestamp":"2025-03-07T23:34:52.650Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-07T23:34:58.376Z","userId":"67cb82a2f225b7cf434afb09"}
{"error":{"code":11000,"index":0,"keyPattern":{"email":1},"keyValue":{"email":"test@example.com"}},"level":"error","message":"Error creating user","timestamp":"2025-03-07T23:34:58.581Z"}
{"duration":"9049ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741390492650_kc52rg77d","responseSize":"18.54 KB","statusCode":200,"timestamp":"2025-03-07T23:35:01.699Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741390501703_p05bcytbz","timestamp":"2025-03-07T23:35:01.703Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"169ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741390501703_p05bcytbz","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:35:01.872Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"20","testType":""},"requestId":"req_1741390562746_9inrr4ps0","timestamp":"2025-03-07T23:36:02.746Z","url":"/api/v1/system-tests/history?testType=&limit=20","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"361ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741390562746_9inrr4ps0","responseSize":"861.94 KB","statusCode":200,"timestamp":"2025-03-07T23:36:03.107Z","url":"/api/v1/system-tests/history?testType=&limit=20","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741391164265_1i9wj2pma","timestamp":"2025-03-07T23:46:04.265Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"167ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741391164265_1i9wj2pma","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-07T23:46:04.432Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741391165859_yt0gih3op","timestamp":"2025-03-07T23:46:05.859Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:46:11.300Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:46:11.304Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:46:11.393Z"}
{"error":"Scuola non trovata","level":"error","message":"Error in SchoolRepository.findById:","schoolId":"67cb8546a3e29e55d218f65f","timestamp":"2025-03-07T23:46:14.294Z","type":"object"}
{"error":{"code":11000,"index":0,"keyPattern":{"name":1},"keyValue":{"name":"Test School"}},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-03-07T23:46:14.746Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb8547a3e29e55d218f6d0","timestamp":"2025-03-07T23:46:15.681Z","userId":"67cb8547a3e29e55d218f6d6"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb8547a3e29e55d218f6e8","timestamp":"2025-03-07T23:46:15.881Z","userId":"67cb8547a3e29e55d218f6e2"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb8548a3e29e55d218f727","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:46:16.501Z","yearData":{"createdBy":"67cb8548a3e29e55d218f721","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb8548a3e29e55d218f738","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:46:16.703Z","yearData":{"createdBy":"67cb8548a3e29e55d218f732","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}}
{"error":"Anno accademico deve essere nel formato YYYY/YYYY","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb8548a3e29e55d218f749","timestamp":"2025-03-07T23:46:16.893Z","yearData":{"createdBy":"67cb8548a3e29e55d218f743","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024-2025"}}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb8549a3e29e55d218f759","timestamp":"2025-03-07T23:46:17.090Z","userId":"67cb8548a3e29e55d218f756"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cb8549a3e29e55d218f76e","timestamp":"2025-03-07T23:46:17.284Z","userId":"67cb8549a3e29e55d218f768"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cb8549a3e29e55d218f77f","timestamp":"2025-03-07T23:46:17.493Z","userId":"67cb8549a3e29e55d218f779"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb8549a3e29e55d218f790","sectionName":"A","timestamp":"2025-03-07T23:46:17.736Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb8549a3e29e55d218f7a1","sectionName":"Z","timestamp":"2025-03-07T23:46:17.935Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb854aa3e29e55d218f7b2","sectionName":"A","timestamp":"2025-03-07T23:46:18.149Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb854aa3e29e55d218f7c3","timestamp":"2025-03-07T23:46:18.345Z","userId":"67cb854aa3e29e55d218f7c0"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb854aa3e29e55d218f7ee","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:46:18.798Z","yearData":{"createdBy":"67cb854aa3e29e55d218f7e8","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb854aa3e29e55d218f7ff","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:46:18.990Z","yearId":"67cb854aa3e29e55d218f800"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:46:19.381Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:46:19.573Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb854ba3e29e55d218f848","timestamp":"2025-03-07T23:46:19.760Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb854ba3e29e55d218f859","timestamp":"2025-03-07T23:46:19.950Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb854ca3e29e55d218f86a","timestamp":"2025-03-07T23:46:20.144Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb854ca3e29e55d218f887","timestamp":"2025-03-07T23:46:20.338Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'aggiunta del manager:","schoolId":"67cb854ca3e29e55d218f898","timestamp":"2025-03-07T23:46:20.527Z","userId":"67cb854ca3e29e55d218f895"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb854ca3e29e55d218f8a9","timestamp":"2025-03-07T23:46:20.717Z"}
{"error":{},"level":"error","message":"Errore nel recupero studenti per sezione:","schoolId":"67cb854ca3e29e55d218f8ba","sectionName":"A","timestamp":"2025-03-07T23:46:20.905Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb854da3e29e55d218f8ca","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:46:21.094Z","yearId":"67cb854da3e29e55d218f8cb"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb854da3e29e55d218f8db","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:46:21.285Z","yearData":{"createdBy":"67cb854da3e29e55d218f8d5","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb854da3e29e55d218f8ec","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:46:21.472Z","yearId":"67cb854da3e29e55d218f8ed"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb854da3e29e55d218f8fd","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:46:21.659Z","yearId":"67cb854da3e29e55d218f8fe"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb854da3e29e55d218f90e","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:46:21.852Z","yearId":"67cb854da3e29e55d218f90f"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb854ea3e29e55d218f91f","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:46:22.045Z","yearId":"67cb854ea3e29e55d218f920"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-07T23:46:22.251Z"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-07T23:46:22.437Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-07T23:46:23.021Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella sincronizzazione assignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:46:23.024Z"}
{"duration":"17817ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741391165859_yt0gih3op","responseSize":"64.81 KB","statusCode":200,"timestamp":"2025-03-07T23:46:23.676Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741391183696_e7dc7c1sl","timestamp":"2025-03-07T23:46:23.696Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"153ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741391183696_e7dc7c1sl","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:46:23.849Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:51:15.213Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:51:15.218Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:51:15.264Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-07T23:51:16.089Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-07T23:51:16.090Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-07T23:51:16.091Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-07T23:51:16.435Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-07T23:51:16.438Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-07T23:51:16.438Z"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741391479583_ievraw5cy","timestamp":"2025-03-07T23:51:19.583Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-07T23:51:25.394Z","userId":"67cb867d94f259b59d4034f3"}
{"error":{"code":11000,"index":0,"keyPattern":{"email":1},"keyValue":{"email":"test@example.com"}},"level":"error","message":"Error creating user","timestamp":"2025-03-07T23:51:25.608Z"}
{"duration":"9384ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741391479583_ievraw5cy","responseSize":"18.28 KB","statusCode":200,"timestamp":"2025-03-07T23:51:28.968Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741391488973_3mvkoz6ft","timestamp":"2025-03-07T23:51:28.973Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"175ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741391488973_3mvkoz6ft","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:51:29.148Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741391492834_b2inhps5x","timestamp":"2025-03-07T23:51:32.834Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:51:36.531Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:51:36.535Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:51:36.622Z"}
{"error":"Scuola non trovata","level":"error","message":"Error in SchoolRepository.findById:","schoolId":"67cb868b5cfd145b0a47164a","timestamp":"2025-03-07T23:51:39.340Z","type":"object"}
{"error":{"code":11000,"index":0,"keyPattern":{"name":1},"keyValue":{"name":"Test School"}},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-03-07T23:51:39.814Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb868c5cfd145b0a4716bb","timestamp":"2025-03-07T23:51:40.728Z","userId":"67cb868c5cfd145b0a4716c1"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb868c5cfd145b0a4716d3","timestamp":"2025-03-07T23:51:40.926Z","userId":"67cb868c5cfd145b0a4716cd"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb868d5cfd145b0a471712","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:51:41.550Z","yearData":{"createdBy":"67cb868d5cfd145b0a47170c","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb868d5cfd145b0a471723","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:51:41.761Z","yearData":{"createdBy":"67cb868d5cfd145b0a47171d","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}}
{"error":"Anno accademico deve essere nel formato YYYY/YYYY","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb868d5cfd145b0a471734","timestamp":"2025-03-07T23:51:41.964Z","yearData":{"createdBy":"67cb868d5cfd145b0a47172e","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024-2025"}}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb868e5cfd145b0a471744","timestamp":"2025-03-07T23:51:42.170Z","userId":"67cb868e5cfd145b0a471741"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cb868e5cfd145b0a471759","timestamp":"2025-03-07T23:51:42.368Z","userId":"67cb868e5cfd145b0a471753"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cb868e5cfd145b0a47176a","timestamp":"2025-03-07T23:51:42.571Z","userId":"67cb868e5cfd145b0a471764"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb868e5cfd145b0a47177b","sectionName":"A","timestamp":"2025-03-07T23:51:42.777Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb868e5cfd145b0a47178c","sectionName":"Z","timestamp":"2025-03-07T23:51:42.975Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb868f5cfd145b0a47179d","sectionName":"A","timestamp":"2025-03-07T23:51:43.177Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb868f5cfd145b0a4717ae","timestamp":"2025-03-07T23:51:43.381Z","userId":"67cb868f5cfd145b0a4717ab"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb868f5cfd145b0a4717d9","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:51:43.780Z","yearData":{"createdBy":"67cb868f5cfd145b0a4717d3","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb868f5cfd145b0a4717ea","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:51:43.977Z","yearId":"67cb868f5cfd145b0a4717eb"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:51:44.384Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:51:44.586Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb86905cfd145b0a471833","timestamp":"2025-03-07T23:51:44.783Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb86905cfd145b0a471844","timestamp":"2025-03-07T23:51:44.984Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb86915cfd145b0a471855","timestamp":"2025-03-07T23:51:45.183Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb86915cfd145b0a471872","timestamp":"2025-03-07T23:51:45.379Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'aggiunta del manager:","schoolId":"67cb86915cfd145b0a471883","timestamp":"2025-03-07T23:51:45.579Z","userId":"67cb86915cfd145b0a471880"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb86915cfd145b0a471894","timestamp":"2025-03-07T23:51:45.776Z"}
{"error":{},"level":"error","message":"Errore nel recupero studenti per sezione:","schoolId":"67cb86915cfd145b0a4718a5","sectionName":"A","timestamp":"2025-03-07T23:51:45.972Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb86925cfd145b0a4718b5","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:51:46.174Z","yearId":"67cb86925cfd145b0a4718b6"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb86925cfd145b0a4718c6","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:51:46.366Z","yearData":{"createdBy":"67cb86925cfd145b0a4718c0","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb86925cfd145b0a4718d7","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:51:46.562Z","yearId":"67cb86925cfd145b0a4718d8"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb86925cfd145b0a4718e8","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:51:46.756Z","yearId":"67cb86925cfd145b0a4718e9"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb86925cfd145b0a4718f9","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:51:46.947Z","yearId":"67cb86925cfd145b0a4718fa"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb86935cfd145b0a47190a","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:51:47.145Z","yearId":"67cb86935cfd145b0a47190b"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-07T23:51:47.353Z"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-07T23:51:47.555Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-07T23:51:48.126Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella sincronizzazione assignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:51:48.129Z"}
{"duration":"15946ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741391492834_b2inhps5x","responseSize":"85.14 KB","statusCode":200,"timestamp":"2025-03-07T23:51:48.780Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741391508786_m3kr2otef","timestamp":"2025-03-07T23:51:48.786Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"172ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741391508786_m3kr2otef","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:51:48.958Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:55:16.395Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:55:16.400Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:55:16.443Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-07T23:55:17.215Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-07T23:55:17.216Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-07T23:55:17.218Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-07T23:55:17.521Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-07T23:55:17.527Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-07T23:55:17.528Z"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741391719541_fdtvvr6w7","timestamp":"2025-03-07T23:55:19.541Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-07T23:55:25.703Z","userId":"67cb876df127c327409ec1c6"}
{"error":{"code":11000,"index":0,"keyPattern":{"email":1},"keyValue":{"email":"test@example.com"}},"level":"error","message":"Error creating user","timestamp":"2025-03-07T23:55:25.920Z"}
{"duration":"9574ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741391719541_fdtvvr6w7","responseSize":"18.28 KB","statusCode":200,"timestamp":"2025-03-07T23:55:29.115Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741391729135_9c8tqoa56","timestamp":"2025-03-07T23:55:29.136Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"205ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741391729135_9c8tqoa56","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:55:29.340Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"20","testType":""},"requestId":"req_1741391748460_q5xkrkyla","timestamp":"2025-03-07T23:55:48.460Z","url":"/api/v1/system-tests/history?testType=&limit=20","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"432ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741391748460_q5xkrkyla","responseSize":"962.93 KB","statusCode":200,"timestamp":"2025-03-07T23:55:48.892Z","url":"/api/v1/system-tests/history?testType=&limit=20","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741391768761_u317c3utl","timestamp":"2025-03-07T23:56:08.761Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"169ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741391768761_u317c3utl","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-07T23:56:08.930Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741391772010_b7i0u0csk","timestamp":"2025-03-07T23:56:12.010Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-07T23:56:17.728Z","userId":"67cb87a1de97745479bfbcac"}
{"error":{"code":11000,"index":0,"keyPattern":{"email":1},"keyValue":{"email":"test@example.com"}},"level":"error","message":"Error creating user","timestamp":"2025-03-07T23:56:17.938Z"}
{"duration":"9002ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741391772010_b7i0u0csk","responseSize":"18.28 KB","statusCode":200,"timestamp":"2025-03-07T23:56:21.012Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741391781017_p3n3wrvj3","timestamp":"2025-03-07T23:56:21.017Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"154ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741391781017_p3n3wrvj3","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:56:21.171Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:56:55.525Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:56:55.531Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:56:55.578Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-07T23:56:56.417Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-07T23:56:56.418Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-07T23:56:56.420Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-07T23:56:56.751Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-07T23:56:56.755Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-07T23:56:56.755Z"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741391823342_15i5mnn3t","timestamp":"2025-03-07T23:57:03.343Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-07T23:57:09.141Z","userId":"67cb87d592e6604e0d1abb6e"}
{"error":{"code":11000,"index":0,"keyPattern":{"email":1},"keyValue":{"email":"test@example.com"}},"level":"error","message":"Error creating user","timestamp":"2025-03-07T23:57:09.354Z"}
{"duration":"9139ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741391823342_15i5mnn3t","responseSize":"23.72 KB","statusCode":200,"timestamp":"2025-03-07T23:57:12.483Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741391832488_0fu4vh70n","timestamp":"2025-03-07T23:57:12.488Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"178ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741391832488_0fu4vh70n","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:57:12.666Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741391865412_0bkhpv0lq","timestamp":"2025-03-07T23:57:45.412Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-07T23:57:49.064Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-07T23:57:49.068Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-07T23:57:49.157Z"}
{"error":"Scuola non trovata","level":"error","message":"Error in SchoolRepository.findById:","schoolId":"67cb87ff82b348c5e37c3007","timestamp":"2025-03-07T23:57:51.789Z","type":"object"}
{"error":{"code":11000,"index":0,"keyPattern":{"name":1},"keyValue":{"name":"Test School"}},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-03-07T23:57:52.192Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb880082b348c5e37c3078","timestamp":"2025-03-07T23:57:53.065Z","userId":"67cb880082b348c5e37c307e"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb880182b348c5e37c3090","timestamp":"2025-03-07T23:57:53.260Z","userId":"67cb880182b348c5e37c308a"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb880182b348c5e37c30cf","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:57:53.883Z","yearData":{"createdBy":"67cb880182b348c5e37c30c9","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb880282b348c5e37c30e0","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:57:54.090Z","yearData":{"createdBy":"67cb880182b348c5e37c30da","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}}
{"error":"Anno accademico deve essere nel formato YYYY/YYYY","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb880282b348c5e37c30f1","timestamp":"2025-03-07T23:57:54.287Z","yearData":{"createdBy":"67cb880282b348c5e37c30eb","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024-2025"}}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb880282b348c5e37c3101","timestamp":"2025-03-07T23:57:54.486Z","userId":"67cb880282b348c5e37c30fe"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cb880282b348c5e37c3116","timestamp":"2025-03-07T23:57:54.694Z","userId":"67cb880282b348c5e37c3110"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cb880282b348c5e37c3127","timestamp":"2025-03-07T23:57:54.892Z","userId":"67cb880282b348c5e37c3121"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb880382b348c5e37c3138","sectionName":"A","timestamp":"2025-03-07T23:57:55.091Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb880382b348c5e37c3149","sectionName":"Z","timestamp":"2025-03-07T23:57:55.292Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cb880382b348c5e37c315a","sectionName":"A","timestamp":"2025-03-07T23:57:55.484Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cb880382b348c5e37c316b","timestamp":"2025-03-07T23:57:55.683Z","userId":"67cb880382b348c5e37c3168"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb880482b348c5e37c3196","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:57:56.088Z","yearData":{"createdBy":"67cb880382b348c5e37c3190","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb880482b348c5e37c31a7","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:57:56.282Z","yearId":"67cb880482b348c5e37c31a8"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:57:56.673Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:57:56.867Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb880582b348c5e37c31f0","timestamp":"2025-03-07T23:57:57.084Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb880582b348c5e37c3201","timestamp":"2025-03-07T23:57:57.278Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb880582b348c5e37c3212","timestamp":"2025-03-07T23:57:57.471Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb880582b348c5e37c322f","timestamp":"2025-03-07T23:57:57.663Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'aggiunta del manager:","schoolId":"67cb880582b348c5e37c3240","timestamp":"2025-03-07T23:57:57.851Z","userId":"67cb880582b348c5e37c323d"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cb880682b348c5e37c3251","timestamp":"2025-03-07T23:57:58.040Z"}
{"error":{},"level":"error","message":"Errore nel recupero studenti per sezione:","schoolId":"67cb880682b348c5e37c3262","sectionName":"A","timestamp":"2025-03-07T23:57:58.238Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb880682b348c5e37c3272","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:57:58.436Z","yearId":"67cb880682b348c5e37c3273"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cb880682b348c5e37c3283","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:57:58.632Z","yearData":{"createdBy":"67cb880682b348c5e37c327d","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cb880682b348c5e37c3294","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:57:58.820Z","yearId":"67cb880682b348c5e37c3295"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb880782b348c5e37c32a5","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:57:59.012Z","yearId":"67cb880782b348c5e37c32a6"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb880782b348c5e37c32b6","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:57:59.204Z","yearId":"67cb880782b348c5e37c32b7"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cb880782b348c5e37c32c7","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:57:59.397Z","yearId":"67cb880782b348c5e37c32c8"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-07T23:57:59.600Z"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-07T23:57:59.791Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-07T23:58:00.366Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella sincronizzazione assignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-07T23:58:00.369Z"}
{"duration":"15494ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741391865412_0bkhpv0lq","responseSize":"64.81 KB","statusCode":200,"timestamp":"2025-03-07T23:58:00.906Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741391880912_v6llwqaff","timestamp":"2025-03-07T23:58:00.912Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"156ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741391880912_v6llwqaff","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:58:01.068Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741391894103_3wjekzsmm","timestamp":"2025-03-07T23:58:14.103Z","url":"/api/v1/system-tests/integration","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"105ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741391894103_3wjekzsmm","responseSize":"43 Bytes","statusCode":200,"timestamp":"2025-03-07T23:58:14.208Z","url":"/api/v1/system-tests/integration","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741391934819_nwj4y7z7b","timestamp":"2025-03-07T23:58:54.819Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"152ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741391934819_nwj4y7z7b","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-07T23:58:54.971Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741391940435_svn8dmqwc","timestamp":"2025-03-07T23:59:00.435Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-07T23:59:06.092Z","userId":"67cb88495d6223e7425cd731"}
{"error":{"code":11000,"index":0,"keyPattern":{"email":1},"keyValue":{"email":"test@example.com"}},"level":"error","message":"Error creating user","timestamp":"2025-03-07T23:59:06.297Z"}
{"duration":"8838ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741391940435_svn8dmqwc","responseSize":"23.72 KB","statusCode":200,"timestamp":"2025-03-07T23:59:09.273Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741391949277_4lof8a5w0","timestamp":"2025-03-07T23:59:09.277Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"151ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741391949277_4lof8a5w0","responseSize":"65.88 KB","statusCode":200,"timestamp":"2025-03-07T23:59:09.428Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\ClassRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741391974664_4c1la8dkz","timestamp":"2025-03-07T23:59:34.664Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"3220ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741391974664_4c1la8dkz","responseSize":"2.7 KB","statusCode":200,"timestamp":"2025-03-07T23:59:37.885Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741391977890_b6mg0jnnd","timestamp":"2025-03-07T23:59:37.890Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"209ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741391977890_b6mg0jnnd","responseSize":"67.99 KB","statusCode":200,"timestamp":"2025-03-07T23:59:38.099Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392033433_trklnebj7","timestamp":"2025-03-08T00:00:33.433Z","url":"/api/v1/tests/csi/config","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"84ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392033433_trklnebj7","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:00:33.517Z","url":"/api/v1/tests/csi/config","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392035065_hywu6rkt5","timestamp":"2025-03-08T00:00:35.065Z","url":"/api/v1/tests/csi/questions","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"145ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392035065_hywu6rkt5","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:00:35.210Z","url":"/api/v1/tests/csi/questions","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"50","page":"1"},"requestId":"req_1741392037352_uwwinlzo6","timestamp":"2025-03-08T00:00:37.352Z","url":"/api/v1/students?page=1&limit=50","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"168ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392037352_uwwinlzo6","responseSize":"1.51 KB","statusCode":200,"timestamp":"2025-03-08T00:00:37.520Z","url":"/api/v1/students?page=1&limit=50","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"25","page":"1","search":"","sort":"-createdAt"},"requestId":"req_1741392205555_tcofguutq","timestamp":"2025-03-08T00:03:25.555Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"165ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392205555_tcofguutq","responseSize":"1.67 KB","statusCode":200,"timestamp":"2025-03-08T00:03:25.720Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392207302_s9uokpssv","timestamp":"2025-03-08T00:03:27.303Z","url":"/api/v1/users/67c5e8191af6a34321b52006","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"128ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392207302_s9uokpssv","responseSize":"900 Bytes","statusCode":200,"timestamp":"2025-03-08T00:03:27.431Z","url":"/api/v1/users/67c5e8191af6a34321b52006","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392210201_x957hq509","timestamp":"2025-03-08T00:03:30.201Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"210ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392210201_x957hq509","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:03:30.411Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392210425_wsvg2qcmi","timestamp":"2025-03-08T00:03:30.425Z","url":"/api/v1/schools/67c763375b0426e1cb851fea","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"213ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392210425_wsvg2qcmi","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:03:30.638Z","url":"/api/v1/schools/67c763375b0426e1cb851fea","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1741392213260_uw5atx3yu","timestamp":"2025-03-08T00:03:33.260Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"138ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392213260_uw5atx3yu","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:03:33.398Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"25","page":"1","search":"","sort":"-createdAt"},"requestId":"req_1741392213764_1o3s3o27c","timestamp":"2025-03-08T00:03:33.764Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"132ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392213764_1o3s3o27c","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:03:33.896Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392214520_lpct6rlx0","timestamp":"2025-03-08T00:03:34.520Z","url":"/api/v1/users/67c0c5d1285a82c16495c6dc","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"132ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392214520_lpct6rlx0","responseSize":"976 Bytes","statusCode":200,"timestamp":"2025-03-08T00:03:34.652Z","url":"/api/v1/users/67c0c5d1285a82c16495c6dc","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392221117_d273gle0u","timestamp":"2025-03-08T00:03:41.118Z","url":"/api/v1/users/67c0c5d1285a82c16495c6dc/history","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"entriesCount":0,"level":"info","message":"User history retrieved","timestamp":"2025-03-08T00:03:41.274Z","userId":"67c0c5d1285a82c16495c6dc"}
{"entriesCount":0,"level":"info","message":"User history retrieved","timestamp":"2025-03-08T00:03:41.275Z","userId":"67c0c5d1285a82c16495c6dc"}
{"duration":"159ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392221117_d273gle0u","responseSize":"83 Bytes","statusCode":200,"timestamp":"2025-03-08T00:03:41.276Z","url":"/api/v1/users/67c0c5d1285a82c16495c6dc/history","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1741392223346_rr71k06oj","timestamp":"2025-03-08T00:03:43.346Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"126ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392223346_rr71k06oj","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:03:43.472Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"25","page":"1","search":"","sort":"-createdAt"},"requestId":"req_1741392224354_4aa9ffvjw","timestamp":"2025-03-08T00:03:44.354Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"120ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392224354_4aa9ffvjw","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:03:44.474Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392226495_wv4uglf1a","timestamp":"2025-03-08T00:03:46.495Z","url":"/api/v1/users/677bfe44f6789c907c9f3766","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"128ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392226495_wv4uglf1a","responseSize":"4.89 KB","statusCode":200,"timestamp":"2025-03-08T00:03:46.624Z","url":"/api/v1/users/677bfe44f6789c907c9f3766","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392227613_03jvdvhjo","timestamp":"2025-03-08T00:03:47.613Z","url":"/api/v1/users/677bfe44f6789c907c9f3766/history","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"entriesCount":11,"level":"info","message":"User history retrieved","timestamp":"2025-03-08T00:03:47.786Z","userId":"677bfe44f6789c907c9f3766"}
{"entriesCount":11,"level":"info","message":"User history retrieved","timestamp":"2025-03-08T00:03:47.786Z","userId":"677bfe44f6789c907c9f3766"}
{"duration":"176ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392227613_03jvdvhjo","responseSize":"4.97 KB","statusCode":200,"timestamp":"2025-03-08T00:03:47.789Z","url":"/api/v1/users/677bfe44f6789c907c9f3766/history","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392229860_et2dwc99x","timestamp":"2025-03-08T00:03:49.860Z","url":"/api/v1/schools/67c454061dbaba04e72dc2ec","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":{"code":"RES_001","message":"School non trovata","metadata":{},"status":404},"level":"error","message":"Errore nel recupero della scuola con utenti","schoolId":"67c454061dbaba04e72dc2ec","timestamp":"2025-03-08T00:03:50.029Z"}
{"error":{"code":"DB_001","message":"Errore nel recupero della scuola con utenti","metadata":{"originalError":"School non trovata"},"status":500},"level":"error","message":"Errore nel recupero della scuola","schoolId":"67c454061dbaba04e72dc2ec","timestamp":"2025-03-08T00:03:50.030Z"}
{"duration":"171ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"GET","requestId":"req_1741392229860_et2dwc99x","responseSize":"100 Bytes","statusCode":500,"timestamp":"2025-03-08T00:03:50.031Z","url":"/api/v1/schools/67c454061dbaba04e72dc2ec","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392230044_19rvzhq2e","timestamp":"2025-03-08T00:03:50.044Z","url":"/api/v1/classes/679fdad474255ebc8afab6a3","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"136ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392230044_19rvzhq2e","responseSize":"725 Bytes","statusCode":200,"timestamp":"2025-03-08T00:03:50.180Z","url":"/api/v1/classes/679fdad474255ebc8afab6a3","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392231824_bnefaf429","timestamp":"2025-03-08T00:03:51.824Z","url":"/api/v1/schools/67c454061dbaba04e72dc2ec","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":{"code":"RES_001","message":"School non trovata","metadata":{},"status":404},"level":"error","message":"Errore nel recupero della scuola con utenti","schoolId":"67c454061dbaba04e72dc2ec","timestamp":"2025-03-08T00:03:51.993Z"}
{"error":{"code":"DB_001","message":"Errore nel recupero della scuola con utenti","metadata":{"originalError":"School non trovata"},"status":500},"level":"error","message":"Errore nel recupero della scuola","schoolId":"67c454061dbaba04e72dc2ec","timestamp":"2025-03-08T00:03:51.994Z"}
{"duration":"171ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"GET","requestId":"req_1741392231824_bnefaf429","responseSize":"100 Bytes","statusCode":500,"timestamp":"2025-03-08T00:03:51.995Z","url":"/api/v1/schools/67c454061dbaba04e72dc2ec","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392232000_2bnnqqw26","timestamp":"2025-03-08T00:03:52.000Z","url":"/api/v1/classes/679fdad474255ebc8afab6a3","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"133ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392232000_2bnnqqw26","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:03:52.133Z","url":"/api/v1/classes/679fdad474255ebc8afab6a3","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392241678_frvuj675q","timestamp":"2025-03-08T00:04:01.678Z","url":"/api/v1/classes","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"168ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392241678_frvuj675q","responseSize":"11.51 KB","statusCode":200,"timestamp":"2025-03-08T00:04:01.846Z","url":"/api/v1/classes","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392244658_nivzodtsh","timestamp":"2025-03-08T00:04:04.658Z","url":"/api/v1/classes/679fdad474255ebc8afab6a3","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"144ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392244658_nivzodtsh","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:04:04.802Z","url":"/api/v1/classes/679fdad474255ebc8afab6a3","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"50","page":"1"},"requestId":"req_1741392254688_pp5h744kg","timestamp":"2025-03-08T00:04:14.688Z","url":"/api/v1/students?page=1&limit=50","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"164ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392254688_pp5h744kg","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:04:14.852Z","url":"/api/v1/students?page=1&limit=50","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392258091_azk6h652q","timestamp":"2025-03-08T00:04:18.091Z","url":"/api/v1/classes","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"160ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392258091_azk6h652q","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:04:18.251Z","url":"/api/v1/classes","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392265932_njanzpftb","timestamp":"2025-03-08T00:04:25.932Z","url":"/api/v1/classes/67c763375b0426e1cb85200a","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"144ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392265932_njanzpftb","responseSize":"487 Bytes","statusCode":200,"timestamp":"2025-03-08T00:04:26.076Z","url":"/api/v1/classes/67c763375b0426e1cb85200a","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392268711_cm49jamzh","timestamp":"2025-03-08T00:04:28.711Z","url":"/api/v1/classes","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"147ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392268711_cm49jamzh","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:04:28.858Z","url":"/api/v1/classes","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"25","page":"1","search":"","sort":"-createdAt"},"requestId":"req_1741392271168_wozygxepj","timestamp":"2025-03-08T00:04:31.168Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"127ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392271168_wozygxepj","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:04:31.296Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392273203_0222591s4","timestamp":"2025-03-08T00:04:33.203Z","url":"/api/v1/users/677bfe44f6789c907c9f3766","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"119ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392273203_0222591s4","responseSize":"4.89 KB","statusCode":200,"timestamp":"2025-03-08T00:04:33.322Z","url":"/api/v1/users/677bfe44f6789c907c9f3766","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392276003_mmqez5jzt","timestamp":"2025-03-08T00:04:36.003Z","url":"/api/v1/schools/67c454061dbaba04e72dc2ec","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":{"code":"RES_001","message":"School non trovata","metadata":{},"status":404},"level":"error","message":"Errore nel recupero della scuola con utenti","schoolId":"67c454061dbaba04e72dc2ec","timestamp":"2025-03-08T00:04:36.173Z"}
{"error":{"code":"DB_001","message":"Errore nel recupero della scuola con utenti","metadata":{"originalError":"School non trovata"},"status":500},"level":"error","message":"Errore nel recupero della scuola","schoolId":"67c454061dbaba04e72dc2ec","timestamp":"2025-03-08T00:04:36.174Z"}
{"duration":"173ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"GET","requestId":"req_1741392276003_mmqez5jzt","responseSize":"100 Bytes","statusCode":500,"timestamp":"2025-03-08T00:04:36.176Z","url":"/api/v1/schools/67c454061dbaba04e72dc2ec","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392276179_u3892u0k4","timestamp":"2025-03-08T00:04:36.179Z","url":"/api/v1/classes/679fdad474255ebc8afab6a3","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"134ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392276179_u3892u0k4","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:04:36.313Z","url":"/api/v1/classes/679fdad474255ebc8afab6a3","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1741392297626_zb6quasv7","timestamp":"2025-03-08T00:04:57.626Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"128ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392297626_zb6quasv7","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:04:57.754Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392319999_ayveh1lo6","timestamp":"2025-03-08T00:05:19.999Z","url":"/api/v1/schools/67c763375b0426e1cb851fea","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"216ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392319999_ayveh1lo6","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:05:20.215Z","url":"/api/v1/schools/67c763375b0426e1cb851fea","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392320217_pazeewsfx","timestamp":"2025-03-08T00:05:20.217Z","url":"/api/v1/schools/67c763375b0426e1cb851fea","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"196ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392320217_pazeewsfx","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:05:20.413Z","url":"/api/v1/schools/67c763375b0426e1cb851fea","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1741392324627_waca1qvlk","timestamp":"2025-03-08T00:05:24.627Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"130ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392324627_waca1qvlk","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:05:24.757Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741392352981_5s879shkv","timestamp":"2025-03-08T00:05:52.981Z","url":"/api/v1/schools/67c763375b0426e1cb851fea/remove-manager","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"Manager rimosso con successo e assignedSchoolIds aggiornato","oldManagerId":"67c5e8191af6a34321b52006","schoolId":"67c763375b0426e1cb851fea","timestamp":"2025-03-08T00:05:53.329Z","wasAlsoUser":true}
{"level":"info","message":"Manager rimosso con successo","oldManagerId":"67c5e8191af6a34321b52006","schoolId":"67c763375b0426e1cb851fea","timestamp":"2025-03-08T00:05:53.330Z","updatedSchool":"67c763375b0426e1cb851fea"}
{"duration":"351ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741392352981_5s879shkv","responseSize":"1.21 KB","statusCode":200,"timestamp":"2025-03-08T00:05:53.332Z","url":"/api/v1/schools/67c763375b0426e1cb851fea/remove-manager","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1741392376815_78e7fc7er","timestamp":"2025-03-08T00:06:16.815Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"141ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392376815_78e7fc7er","responseSize":"4.27 KB","statusCode":200,"timestamp":"2025-03-08T00:06:16.956Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392383374_px12d1ppb","timestamp":"2025-03-08T00:06:23.374Z","url":"/api/v1/classes","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"149ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392383374_px12d1ppb","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:06:23.523Z","url":"/api/v1/classes","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392565204_0revdqn8a","timestamp":"2025-03-08T00:09:25.204Z","url":"/api/v1/classes/67c763375b0426e1cb85200c","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"191ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392565204_0revdqn8a","responseSize":"487 Bytes","statusCode":200,"timestamp":"2025-03-08T00:09:25.395Z","url":"/api/v1/classes/67c763375b0426e1cb85200c","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1741392568308_pzdz3652m","timestamp":"2025-03-08T00:09:28.308Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"134ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392568308_pzdz3652m","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:09:28.442Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392599121_0sepgwfuf","timestamp":"2025-03-08T00:09:59.121Z","url":"/api/v1/classes","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"160ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392599121_0sepgwfuf","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:09:59.281Z","url":"/api/v1/classes","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741392641819_bmq8nlcyr","timestamp":"2025-03-08T00:10:41.819Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"172ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392641819_bmq8nlcyr","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T00:10:41.991Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"20","testType":""},"requestId":"req_1741392643288_m57so74bc","timestamp":"2025-03-08T00:10:43.288Z","url":"/api/v1/system-tests/history?testType=&limit=20","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"360ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741392643288_m57so74bc","responseSize":"812.96 KB","statusCode":200,"timestamp":"2025-03-08T00:10:43.648Z","url":"/api/v1/system-tests/history?testType=&limit=20","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T08:17:22.943Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T08:17:22.948Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T08:17:23.017Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-08T08:17:24.981Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T08:17:24.982Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T08:17:24.984Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T08:17:25.429Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T08:17:25.435Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T08:17:25.436Z"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741421850179_3r04bhx4i","timestamp":"2025-03-08T08:17:30.179Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"263ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741421850179_3r04bhx4i","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T08:17:30.442Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741421852446_uz1t1x7bw","timestamp":"2025-03-08T08:17:32.446Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T08:17:46.240Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T08:17:46.253Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T08:17:46.670Z"}
{"error":"Scuola non trovata","level":"error","message":"Error in SchoolRepository.findById:","schoolId":"67cbfd345edbc9e488fe8a11","timestamp":"2025-03-08T08:17:56.845Z","type":"object"}
{"error":{"code":11000,"index":0,"keyPattern":{"name":1},"keyValue":{"name":"Test School"}},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-03-08T08:17:57.669Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cbfd365edbc9e488fe8a82","timestamp":"2025-03-08T08:17:59.015Z","userId":"67cbfd365edbc9e488fe8a88"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cbfd375edbc9e488fe8a9a","timestamp":"2025-03-08T08:17:59.347Z","userId":"67cbfd375edbc9e488fe8a94"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cbfd385edbc9e488fe8ad9","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:18:00.734Z","yearData":{"createdBy":"67cbfd385edbc9e488fe8ad3","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cbfd395edbc9e488fe8aea","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:18:01.144Z","yearData":{"createdBy":"67cbfd385edbc9e488fe8ae4","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}}
{"error":"Anno accademico deve essere nel formato YYYY/YYYY","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cbfd395edbc9e488fe8afb","timestamp":"2025-03-08T08:18:01.647Z","yearData":{"createdBy":"67cbfd395edbc9e488fe8af5","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024-2025"}}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cbfd3a5edbc9e488fe8b0b","timestamp":"2025-03-08T08:18:02.335Z","userId":"67cbfd395edbc9e488fe8b08"}
{"error":"Scuola non trovata","level":"error","message":"Error in SchoolRepository.findById:","schoolId":"67cbfd3a5edbc9e488fe8b0b","timestamp":"2025-03-08T08:18:02.353Z","type":"object"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cbfd3b5edbc9e488fe8b2c","timestamp":"2025-03-08T08:18:03.069Z","userId":"67cbfd3a5edbc9e488fe8b26"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cbfd3b5edbc9e488fe8b3d","sectionName":"A","timestamp":"2025-03-08T08:18:03.456Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cbfd3b5edbc9e488fe8b4e","sectionName":"Z","timestamp":"2025-03-08T08:18:03.822Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cbfd3c5edbc9e488fe8b5f","sectionName":"A","timestamp":"2025-03-08T08:18:04.185Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cbfd3c5edbc9e488fe8b70","timestamp":"2025-03-08T08:18:04.554Z","userId":"67cbfd3c5edbc9e488fe8b6d"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cbfd3d5edbc9e488fe8b9b","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:18:05.312Z","yearData":{"createdBy":"67cbfd3c5edbc9e488fe8b95","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cbfd3d5edbc9e488fe8bac","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:18:05.668Z","yearId":"67cbfd3d5edbc9e488fe8bad"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:18:06.184Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:18:06.496Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cbfd3e5edbc9e488fe8bf5","timestamp":"2025-03-08T08:18:06.717Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cbfd3e5edbc9e488fe8c06","timestamp":"2025-03-08T08:18:06.927Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cbfd3f5edbc9e488fe8c17","timestamp":"2025-03-08T08:18:07.145Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cbfd3f5edbc9e488fe8c34","timestamp":"2025-03-08T08:18:07.359Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'aggiunta del manager:","schoolId":"67cbfd3f5edbc9e488fe8c45","timestamp":"2025-03-08T08:18:07.556Z","userId":"67cbfd3f5edbc9e488fe8c42"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cbfd3f5edbc9e488fe8c56","timestamp":"2025-03-08T08:18:07.812Z"}
{"error":{},"level":"error","message":"Errore nel recupero studenti per sezione:","schoolId":"67cbfd405edbc9e488fe8c67","sectionName":"A","timestamp":"2025-03-08T08:18:08.077Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cbfd405edbc9e488fe8c77","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:18:08.326Z","yearId":"67cbfd405edbc9e488fe8c78"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cbfd405edbc9e488fe8c88","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:18:08.568Z","yearData":{"createdBy":"67cbfd405edbc9e488fe8c82","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cbfd405edbc9e488fe8c99","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:18:08.803Z","yearId":"67cbfd405edbc9e488fe8c9a"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cbfd415edbc9e488fe8caa","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:18:09.035Z","yearId":"67cbfd415edbc9e488fe8cab"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cbfd415edbc9e488fe8cbb","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:18:09.259Z","yearId":"67cbfd415edbc9e488fe8cbc"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cbfd415edbc9e488fe8ccc","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:18:09.474Z","yearId":"67cbfd415edbc9e488fe8ccd"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-08T08:18:09.684Z"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-08T08:18:09.895Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-08T08:18:10.595Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella sincronizzazione assignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:18:10.598Z"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741421891427_q4z55fp8r","timestamp":"2025-03-08T08:18:11.427Z","url":"/api/v1/auth/verify","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"39032ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741421852446_uz1t1x7bw","responseSize":"64.43 KB","statusCode":200,"timestamp":"2025-03-08T08:18:11.478Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741421891514_qwrbu0e4g","timestamp":"2025-03-08T08:18:11.514Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"109ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741421891427_q4z55fp8r","responseSize":"136 Bytes","statusCode":200,"timestamp":"2025-03-08T08:18:11.536Z","url":"/api/v1/auth/verify","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"216ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741421891514_qwrbu0e4g","responseSize":"67.61 KB","statusCode":200,"timestamp":"2025-03-08T08:18:11.730Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T08:27:30.785Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T08:27:30.789Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T08:27:30.831Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-08T08:27:31.727Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T08:27:31.728Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T08:27:31.730Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T08:27:32.093Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T08:27:32.098Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T08:27:32.098Z"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741422478026_egrl5dgel","timestamp":"2025-03-08T08:27:58.027Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-08T08:28:07.042Z","userId":"67cbff9611d8d2b7c4d150c1"}
{"error":{"code":11000,"index":0,"keyPattern":{"email":1},"keyValue":{"email":"test@example.com"}},"level":"error","message":"Error creating user","timestamp":"2025-03-08T08:28:07.271Z"}
{"duration":"12494ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741422478026_egrl5dgel","responseSize":"18.15 KB","statusCode":200,"timestamp":"2025-03-08T08:28:10.520Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741422490525_7iawjphca","timestamp":"2025-03-08T08:28:10.525Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"165ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741422490525_7iawjphca","responseSize":"67.61 KB","statusCode":200,"timestamp":"2025-03-08T08:28:10.690Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741422494628_rc48trvsr","timestamp":"2025-03-08T08:28:14.628Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T08:28:18.783Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T08:28:18.787Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T08:28:18.866Z"}
{"error":"Scuola non trovata","level":"error","message":"Error in SchoolRepository.findById:","schoolId":"67cbffa5781d48b009d8e94a","timestamp":"2025-03-08T08:28:21.522Z","type":"object"}
{"error":{"code":11000,"index":0,"keyPattern":{"name":1},"keyValue":{"name":"Test School"}},"level":"error","message":"Errore nella creazione di School","timestamp":"2025-03-08T08:28:21.913Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cbffa6781d48b009d8e9bb","timestamp":"2025-03-08T08:28:22.759Z","userId":"67cbffa6781d48b009d8e9c1"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cbffa6781d48b009d8e9d3","timestamp":"2025-03-08T08:28:22.949Z","userId":"67cbffa6781d48b009d8e9cd"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cbffa7781d48b009d8ea12","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:28:23.511Z","yearData":{"createdBy":"67cbffa7781d48b009d8ea0c","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cbffa7781d48b009d8ea23","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:28:23.695Z","yearData":{"createdBy":"67cbffa7781d48b009d8ea1d","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}}
{"error":"Anno accademico deve essere nel formato YYYY/YYYY","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cbffa7781d48b009d8ea34","timestamp":"2025-03-08T08:28:23.879Z","yearData":{"createdBy":"67cbffa7781d48b009d8ea2e","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024-2025"}}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cbffa8781d48b009d8ea44","timestamp":"2025-03-08T08:28:24.050Z","userId":"67cbffa7781d48b009d8ea41"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cbffa8781d48b009d8ea59","timestamp":"2025-03-08T08:28:24.228Z","userId":"67cbffa8781d48b009d8ea53"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione dell'utente dalla scuola:","schoolId":"67cbffa8781d48b009d8ea6a","timestamp":"2025-03-08T08:28:24.414Z","userId":"67cbffa8781d48b009d8ea64"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cbffa8781d48b009d8ea7b","sectionName":"A","timestamp":"2025-03-08T08:28:24.647Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cbffa8781d48b009d8ea8c","sectionName":"Z","timestamp":"2025-03-08T08:28:24.860Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cbffa9781d48b009d8ea9d","sectionName":"A","timestamp":"2025-03-08T08:28:25.048Z"}
{"error":{},"level":"error","message":"Errore nell'aggiunta dell'utente alla scuola","schoolId":"67cbffa9781d48b009d8eaae","timestamp":"2025-03-08T08:28:25.239Z","userId":"67cbffa9781d48b009d8eaab"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cbffa9781d48b009d8ead9","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:28:25.625Z","yearData":{"createdBy":"67cbffa9781d48b009d8ead3","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cbffa9781d48b009d8eaea","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:28:25.804Z","yearId":"67cbffa9781d48b009d8eaeb"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:28:26.206Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:28:26.410Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cbffaa781d48b009d8eb33","timestamp":"2025-03-08T08:28:26.594Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cbffaa781d48b009d8eb44","timestamp":"2025-03-08T08:28:26.829Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cbffab781d48b009d8eb55","timestamp":"2025-03-08T08:28:27.037Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cbffab781d48b009d8eb72","timestamp":"2025-03-08T08:28:27.268Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'aggiunta del manager:","schoolId":"67cbffab781d48b009d8eb83","timestamp":"2025-03-08T08:28:27.470Z","userId":"67cbffab781d48b009d8eb80"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella rimozione del manager:","schoolId":"67cbffab781d48b009d8eb94","timestamp":"2025-03-08T08:28:27.677Z"}
{"error":{},"level":"error","message":"Errore nel recupero studenti per sezione:","schoolId":"67cbffab781d48b009d8eba5","sectionName":"A","timestamp":"2025-03-08T08:28:27.879Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cbffac781d48b009d8ebb5","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:28:28.086Z","yearId":"67cbffac781d48b009d8ebb6"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in setupAcademicYear:","schoolId":"67cbffac781d48b009d8ebc6","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:28:28.276Z","yearData":{"createdBy":"67cbffac781d48b009d8ebc0","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nell'archiviazione dell'anno accademico","schoolId":"67cbffac781d48b009d8ebd7","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:28:28.475Z","yearId":"67cbffac781d48b009d8ebd8"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cbffac781d48b009d8ebe8","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:28:28.677Z","yearId":"67cbffac781d48b009d8ebe9"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cbffac781d48b009d8ebf9","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:28:28.879Z","yearId":"67cbffac781d48b009d8ebfa"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cbffad781d48b009d8ec0a","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:28:29.092Z","yearId":"67cbffad781d48b009d8ec0b"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-08T08:28:29.289Z"}
{"code":20,"codeName":"IllegalOperation","level":"error","message":"Error in deleteWithClasses:","ok":0,"timestamp":"2025-03-08T08:28:29.492Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-08T08:28:30.097Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore nella sincronizzazione assignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:28:30.100Z"}
{"duration":"16101ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741422494628_rc48trvsr","responseSize":"48.04 KB","statusCode":200,"timestamp":"2025-03-08T08:28:30.730Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741422510734_t8h89vkbo","timestamp":"2025-03-08T08:28:30.734Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"153ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741422510734_t8h89vkbo","responseSize":"67.99 KB","statusCode":200,"timestamp":"2025-03-08T08:28:30.887Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"25","page":"1","search":"","sort":"-createdAt"},"requestId":"req_1741422741068_60p9f5tjk","timestamp":"2025-03-08T08:32:21.068Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"171ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741422741068_60p9f5tjk","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T08:32:21.240Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1741422744215_ql8upaeh4","timestamp":"2025-03-08T08:32:24.215Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"187ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741422744215_ql8upaeh4","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T08:32:24.402Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T08:34:06.922Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T08:34:06.927Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T08:34:06.975Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-08T08:34:07.888Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T08:34:07.890Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T08:34:07.891Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T08:34:08.232Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T08:34:08.235Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T08:34:08.236Z"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741422851974_6az2k83jf","timestamp":"2025-03-08T08:34:11.975Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"219ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741422851974_6az2k83jf","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T08:34:12.193Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\ClassRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741422853600_9zwntg058","timestamp":"2025-03-08T08:34:13.601Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T08:34:19.632Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T08:34:19.637Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T08:34:19.754Z"}
{"classId":"67cc010d9eabfc77379ee302","level":"info","message":"Classe creata con successo:","schoolId":"67cc010d9eabfc77379ee2fe","timestamp":"2025-03-08T08:34:21.489Z"}
{"data":{"academicYear":"2023/2024","section":"A","year":1},"level":"error","message":"Dati classe incompleti","timestamp":"2025-03-08T08:34:21.684Z"}
{"data":{"academicYear":"2023/2024","capacity":25,"isActive":true,"mainTeacher":"67cc010d9eabfc77379ee326","schoolId":"67cc010d9eabfc77379ee32c","section":"A","status":"invalid_status","year":-1},"level":"error","message":"Class validation failed: year: Path `year` (-1) is less than minimum allowed value (1)., status: `invalid_status` is not a valid enum value for path `status`.","stack":"ValidationError: Class validation failed: year: Path `year` (-1) is less than minimum allowed value (1)., status: `invalid_status` is not a valid enum value for path `status`.\n    at model.Object.<anonymous>.Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-08T08:34:21.873Z","validationErrors":{"status":{"kind":"enum","message":"`invalid_status` is not a valid enum value for path `status`.","name":"ValidatorError","path":"status","properties":{"enumValues":["active","planned","archived"],"message":"`invalid_status` is not a valid enum value for path `status`.","path":"status","type":"enum","value":"invalid_status"},"value":"invalid_status"},"year":{"kind":"min","message":"Path `year` (-1) is less than minimum allowed value (1).","name":"ValidatorError","path":"year","properties":{"message":"Path `year` (-1) is less than minimum allowed value (1).","min":1,"path":"year","type":"min","value":-1},"value":-1}}}
{"error":{"kind":"ObjectId","message":"Cast to ObjectId failed for value \"invalid-id-format\" (type string) at path \"_id\" for model \"Class\"","name":"CastError","path":"_id","reason":{},"stringValue":"\"invalid-id-format\"","value":"invalid-id-format","valueType":"string"},"level":"error","message":"Errore nel recupero di Class","timestamp":"2025-03-08T08:34:22.368Z"}
{"error":{"_message":"Validation failed","errors":{"capacity":{"kind":"user defined","message":"Parameter \"obj\" to Document() must be an object, got \"School\" (type string)","name":"ValidatorError","path":"capacity","properties":{"fullPath":"capacity","message":"Parameter \"obj\" to Document() must be an object, got \"School\" (type string)","path":"capacity","reason":{},"type":"user defined","value":30},"reason":{},"value":30}},"message":"Validation failed: capacity: Parameter \"obj\" to Document() must be an object, got \"School\" (type string)","name":"ValidationError"},"level":"error","message":"Errore nell'aggiornamento di Class","timestamp":"2025-03-08T08:34:22.523Z"}
{"error":{"_message":"Validation failed","errors":{"capacity":{"kind":"user defined","message":"Parameter \"obj\" to Document() must be an object, got \"School\" (type string)","name":"ValidatorError","path":"capacity","properties":{"fullPath":"capacity","message":"Parameter \"obj\" to Document() must be an object, got \"School\" (type string)","path":"capacity","reason":{},"type":"user defined","value":30},"reason":{},"value":30}},"message":"Validation failed: capacity: Parameter \"obj\" to Document() must be an object, got \"School\" (type string)","name":"ValidationError"},"level":"error","message":"Errore nell'aggiornamento di Class","timestamp":"2025-03-08T08:34:22.678Z"}
{"criteria":{"academicYear":"2023/2024","schoolId":"invalid-id","section":"A","year":1},"error":"ID scuola non valido","level":"error","message":"Errore nella verifica esistenza classe:","timestamp":"2025-03-08T08:34:23.910Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in createInitialClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:34:24.734Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in createInitialClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:34:24.891Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in createInitialClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:34:25.037Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in createInitialClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:34:25.174Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","fromYear":"2023/2024","level":"error","message":"Error in promoteStudents:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:34:25.464Z","toYear":"2024/2025"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","fromYear":"2023/2024","level":"error","message":"Error in promoteStudents:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:34:25.620Z","toYear":"2024/2025"}
{"duration":"12597ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741422853600_9zwntg058","responseSize":"25.06 KB","statusCode":200,"timestamp":"2025-03-08T08:34:26.197Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741422866203_b3s4su4t9","timestamp":"2025-03-08T08:34:26.203Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"184ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741422866203_b3s4su4t9","responseSize":"90.73 KB","statusCode":200,"timestamp":"2025-03-08T08:34:26.388Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T08:38:35.632Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T08:38:35.639Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T08:38:35.704Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-08T08:38:36.869Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T08:38:36.871Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T08:38:36.873Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T08:38:37.241Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T08:38:37.246Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T08:38:37.247Z"}
{"body":{"testFile":"repositories\\ClassRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741423123119_lw0shuey8","timestamp":"2025-03-08T08:38:43.119Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T08:38:50.695Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T08:38:50.705Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T08:38:50.943Z"}
{"classId":"67cc021d6ce4854e1fbc7ffe","level":"info","message":"Classe creata con successo:","schoolId":"67cc021d6ce4854e1fbc7ffa","timestamp":"2025-03-08T08:38:53.578Z"}
{"data":{"academicYear":"2023/2024","section":"A","year":1},"level":"error","message":"Dati classe incompleti","timestamp":"2025-03-08T08:38:53.869Z"}
{"data":{"academicYear":"2023/2024","capacity":25,"isActive":true,"mainTeacher":"67cc021d6ce4854e1fbc8024","schoolId":"67cc021e6ce4854e1fbc802a","section":"A","status":"invalid_status","year":-1},"level":"error","message":"Class validation failed: year: Path `year` (-1) is less than minimum allowed value (1)., status: `invalid_status` is not a valid enum value for path `status`.","stack":"ValidationError: Class validation failed: year: Path `year` (-1) is less than minimum allowed value (1)., status: `invalid_status` is not a valid enum value for path `status`.\n    at model.Object.<anonymous>.Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-08T08:38:54.102Z","validationErrors":{"status":{"kind":"enum","message":"`invalid_status` is not a valid enum value for path `status`.","name":"ValidatorError","path":"status","properties":{"enumValues":["active","planned","archived"],"message":"`invalid_status` is not a valid enum value for path `status`.","path":"status","type":"enum","value":"invalid_status"},"value":"invalid_status"},"year":{"kind":"min","message":"Path `year` (-1) is less than minimum allowed value (1).","name":"ValidatorError","path":"year","properties":{"message":"Path `year` (-1) is less than minimum allowed value (1).","min":1,"path":"year","type":"min","value":-1},"value":-1}}}
{"error":{"kind":"ObjectId","message":"Cast to ObjectId failed for value \"invalid-id-format\" (type string) at path \"_id\" for model \"Class\"","name":"CastError","path":"_id","reason":{},"stringValue":"\"invalid-id-format\"","value":"invalid-id-format","valueType":"string"},"level":"error","message":"Errore nel recupero di Class","timestamp":"2025-03-08T08:38:54.853Z"}
{"error":{"_message":"Validation failed","errors":{"capacity":{"kind":"user defined","message":"Parameter \"obj\" to Document() must be an object, got \"School\" (type string)","name":"ValidatorError","path":"capacity","properties":{"fullPath":"capacity","message":"Parameter \"obj\" to Document() must be an object, got \"School\" (type string)","path":"capacity","reason":{},"type":"user defined","value":30},"reason":{},"value":30}},"message":"Validation failed: capacity: Parameter \"obj\" to Document() must be an object, got \"School\" (type string)","name":"ValidationError"},"level":"error","message":"Errore nell'aggiornamento di Class","timestamp":"2025-03-08T08:38:55.058Z"}
{"error":{"_message":"Validation failed","errors":{"capacity":{"kind":"user defined","message":"Parameter \"obj\" to Document() must be an object, got \"School\" (type string)","name":"ValidatorError","path":"capacity","properties":{"fullPath":"capacity","message":"Parameter \"obj\" to Document() must be an object, got \"School\" (type string)","path":"capacity","reason":{},"type":"user defined","value":30},"reason":{},"value":30}},"message":"Validation failed: capacity: Parameter \"obj\" to Document() must be an object, got \"School\" (type string)","name":"ValidationError"},"level":"error","message":"Errore nell'aggiornamento di Class","timestamp":"2025-03-08T08:38:55.241Z"}
{"criteria":{"academicYear":"2023/2024","schoolId":"invalid-id","section":"A","year":1},"error":"ID scuola non valido","level":"error","message":"Errore nella verifica esistenza classe:","timestamp":"2025-03-08T08:38:56.693Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in createInitialClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:38:57.640Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in createInitialClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:38:57.837Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in createInitialClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:38:57.998Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in createInitialClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:38:58.162Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","fromYear":"2023/2024","level":"error","message":"Error in promoteStudents:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:38:58.483Z","toYear":"2024/2025"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","fromYear":"2023/2024","level":"error","message":"Error in promoteStudents:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T08:38:58.670Z","toYear":"2024/2025"}
{"duration":"16339ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741423123119_lw0shuey8","responseSize":"25.52 KB","statusCode":200,"timestamp":"2025-03-08T08:38:59.458Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741423139466_4b0q90hts","timestamp":"2025-03-08T08:38:59.467Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"186ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741423139466_4b0q90hts","responseSize":"90.75 KB","statusCode":200,"timestamp":"2025-03-08T08:38:59.652Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T08:43:41.289Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T08:43:41.302Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T08:43:41.462Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-08T08:43:43.069Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T08:43:43.071Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T08:43:43.073Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T08:43:43.485Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T08:43:43.495Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T08:43:43.496Z"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741423441410_brghwdibe","timestamp":"2025-03-08T08:44:01.410Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-08T08:44:12.741Z","userId":"67cc035c2f5cd0201473321d"}
{"error":{"code":11000,"index":0,"keyPattern":{"email":1},"keyValue":{"email":"test@example.com"}},"level":"error","message":"Error creating user","timestamp":"2025-03-08T08:44:13.088Z"}
{"duration":"16507ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741423441410_brghwdibe","responseSize":"18.15 KB","statusCode":200,"timestamp":"2025-03-08T08:44:17.917Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741423457925_3gumlp9lp","timestamp":"2025-03-08T08:44:17.925Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"224ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741423457925_3gumlp9lp","responseSize":"90.76 KB","statusCode":200,"timestamp":"2025-03-08T08:44:18.149Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"20","testType":""},"requestId":"req_1741423486800_slhmc1639","timestamp":"2025-03-08T08:44:46.800Z","url":"/api/v1/system-tests/history?testType=&limit=20","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"357ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741423486800_slhmc1639","responseSize":"706.46 KB","statusCode":200,"timestamp":"2025-03-08T08:44:47.158Z","url":"/api/v1/system-tests/history?testType=&limit=20","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741423488368_d4ohn3ksp","timestamp":"2025-03-08T08:44:48.368Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"168ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741423488368_d4ohn3ksp","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T08:44:48.536Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T08:56:22.456Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T08:56:22.463Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T08:56:22.519Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-08T08:56:23.507Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T08:56:23.508Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T08:56:23.510Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T08:56:23.905Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T08:56:23.912Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T08:56:23.913Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T08:56:33.870Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T08:56:33.875Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T08:56:33.926Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-08T08:56:34.738Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T08:56:34.739Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T08:56:34.742Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T08:56:35.055Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T08:56:35.059Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T08:56:35.059Z"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741424201196_rfu201458","timestamp":"2025-03-08T08:56:41.199Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-08T08:56:54.289Z","userId":"67cc06564f4937ec8f8670b8"}
{"error":{"code":11000,"index":0,"keyPattern":{"email":1},"keyValue":{"email":"test@example.com"}},"level":"error","message":"Error creating user","timestamp":"2025-03-08T08:56:54.558Z"}
{"duration":"17317ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741424201196_rfu201458","responseSize":"18.07 KB","statusCode":200,"timestamp":"2025-03-08T08:56:58.515Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741424218524_3nckrul4l","timestamp":"2025-03-08T08:56:58.524Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"201ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741424218524_3nckrul4l","responseSize":"90.75 KB","statusCode":200,"timestamp":"2025-03-08T08:56:58.725Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"20","testType":""},"requestId":"req_1741424235982_lnti4v0oy","timestamp":"2025-03-08T08:57:15.982Z","url":"/api/v1/system-tests/history?testType=&limit=20","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"324ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741424235982_lnti4v0oy","responseSize":"706.06 KB","statusCode":200,"timestamp":"2025-03-08T08:57:16.306Z","url":"/api/v1/system-tests/history?testType=&limit=20","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741424245221_fllvawgub","timestamp":"2025-03-08T08:57:25.221Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"163ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741424245221_fllvawgub","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T08:57:25.384Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T09:01:12.102Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T09:01:12.109Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T09:01:12.172Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-08T09:01:13.191Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T09:01:13.193Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T09:01:13.195Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T09:01:13.520Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T09:01:13.525Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T09:01:13.526Z"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741424476960_x6hu5wv41","timestamp":"2025-03-08T09:01:16.961Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-08T09:01:28.044Z","userId":"67cc0767d120bbe379bccb4e"}
{"error":{"code":11000,"index":0,"keyPattern":{"email":1},"keyValue":{"email":"test@example.com"}},"level":"error","message":"Error creating user","timestamp":"2025-03-08T09:01:28.434Z"}
{"duration":"16469ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741424476960_x6hu5wv41","responseSize":"18.07 KB","statusCode":200,"timestamp":"2025-03-08T09:01:33.429Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741424493459_o4hhw17g1","timestamp":"2025-03-08T09:01:33.459Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"201ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741424493459_o4hhw17g1","responseSize":"90.75 KB","statusCode":200,"timestamp":"2025-03-08T09:01:33.661Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T09:04:43.439Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T09:04:43.447Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T09:04:43.513Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-08T09:04:44.496Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T09:04:44.498Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T09:04:44.500Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T09:04:44.864Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T09:04:44.871Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T09:04:44.872Z"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741424688534_k4ocydfrh","timestamp":"2025-03-08T09:04:48.535Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-08T09:04:59.563Z","userId":"67cc083be9071aa6a6242d82"}
{"error":{"code":11000,"index":0,"keyPattern":{"email":1},"keyValue":{"email":"test@example.com"}},"level":"error","message":"Error creating user","timestamp":"2025-03-08T09:04:59.944Z"}
{"duration":"16048ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741424688534_k4ocydfrh","responseSize":"18.16 KB","statusCode":200,"timestamp":"2025-03-08T09:05:04.583Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741424704612_94oxynk7z","timestamp":"2025-03-08T09:05:04.612Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"220ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741424704612_94oxynk7z","responseSize":"90.75 KB","statusCode":200,"timestamp":"2025-03-08T09:05:04.833Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","service":"school-testing-platform","timestamp":"2025-03-08T16:36:23.659Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","service":"school-testing-platform","timestamp":"2025-03-08T16:36:23.663Z"}
{"level":"info","message":"Model validation successful - all required models registered","service":"school-testing-platform","timestamp":"2025-03-08T16:36:23.708Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","service":"school-testing-platform","timestamp":"2025-03-08T16:36:24.517Z"}
{"level":"info","message":"Database connesso con successo","service":"school-testing-platform","timestamp":"2025-03-08T16:36:24.518Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","service":"school-testing-platform","timestamp":"2025-03-08T16:36:24.520Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"service":"school-testing-platform","timestamp":"2025-03-08T16:36:24.899Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","service":"school-testing-platform","timestamp":"2025-03-08T16:36:24.904Z"}
{"level":"info","message":"Ambiente: development","service":"school-testing-platform","timestamp":"2025-03-08T16:36:24.904Z"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741451946692_920my7gnp","service":"school-testing-platform","timestamp":"2025-03-08T16:39:06.693Z","url":"/api/v1/auth/verify","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"145ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741451946692_920my7gnp","responseSize":"0 Bytes","service":"school-testing-platform","statusCode":304,"timestamp":"2025-03-08T16:39:06.837Z","url":"/api/v1/auth/verify","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741451946950_613ffp0nq","service":"school-testing-platform","timestamp":"2025-03-08T16:39:06.950Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"207ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741451946950_613ffp0nq","responseSize":"0 Bytes","service":"school-testing-platform","statusCode":304,"timestamp":"2025-03-08T16:39:07.157Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"25","page":"1","search":"","sort":"-createdAt"},"requestId":"req_1741451948319_7rbws1l8d","service":"school-testing-platform","timestamp":"2025-03-08T16:39:08.319Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"151ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741451948319_7rbws1l8d","responseSize":"0 Bytes","service":"school-testing-platform","statusCode":304,"timestamp":"2025-03-08T16:39:08.470Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1741451949268_hcloa1brh","service":"school-testing-platform","timestamp":"2025-03-08T16:39:09.268Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"182ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741451949268_hcloa1brh","responseSize":"0 Bytes","service":"school-testing-platform","statusCode":304,"timestamp":"2025-03-08T16:39:09.450Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","service":"school-testing-platform","timestamp":"2025-03-08T16:39:27.846Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","service":"school-testing-platform","timestamp":"2025-03-08T16:39:27.851Z"}
{"level":"info","message":"Model validation successful - all required models registered","service":"school-testing-platform","timestamp":"2025-03-08T16:39:27.894Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","service":"school-testing-platform","timestamp":"2025-03-08T16:39:28.692Z"}
{"level":"info","message":"Database connesso con successo","service":"school-testing-platform","timestamp":"2025-03-08T16:39:28.693Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","service":"school-testing-platform","timestamp":"2025-03-08T16:39:28.695Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"service":"school-testing-platform","timestamp":"2025-03-08T16:39:29.050Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","service":"school-testing-platform","timestamp":"2025-03-08T16:39:29.054Z"}
{"level":"info","message":"Ambiente: development","service":"school-testing-platform","timestamp":"2025-03-08T16:39:29.054Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","service":"school-testing-platform","timestamp":"2025-03-08T16:40:37.795Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","service":"school-testing-platform","timestamp":"2025-03-08T16:40:37.800Z"}
{"level":"info","message":"Model validation successful - all required models registered","service":"school-testing-platform","timestamp":"2025-03-08T16:40:37.837Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","service":"school-testing-platform","timestamp":"2025-03-08T16:40:38.663Z"}
{"level":"info","message":"Database connesso con successo","service":"school-testing-platform","timestamp":"2025-03-08T16:40:38.664Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","service":"school-testing-platform","timestamp":"2025-03-08T16:40:38.666Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"service":"school-testing-platform","timestamp":"2025-03-08T16:40:38.952Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","service":"school-testing-platform","timestamp":"2025-03-08T16:40:38.956Z"}
{"level":"info","message":"Ambiente: development","service":"school-testing-platform","timestamp":"2025-03-08T16:40:38.957Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T16:57:36.349Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T16:57:36.353Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T16:57:36.389Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-08T16:57:37.125Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T16:57:37.126Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T16:57:37.128Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T16:57:37.516Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T16:57:37.519Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T16:57:37.520Z"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741453061445_md4fjezl6","timestamp":"2025-03-08T16:57:41.445Z","url":"/api/v1/auth/verify","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"134ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741453061445_md4fjezl6","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T16:57:41.579Z","url":"/api/v1/auth/verify","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1741453061678_0hsns4tw3","timestamp":"2025-03-08T16:57:41.679Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"174ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741453061678_0hsns4tw3","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T16:57:41.853Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741453064834_roh38sspp","timestamp":"2025-03-08T16:57:44.834Z","url":"/api/v1/auth/logout","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":{"message":"Token non più valido","metadata":{}},"level":"error","message":"Logout error","timestamp":"2025-03-08T16:57:44.896Z"}
{"error":{"message":"Token non più valido","metadata":{}},"level":"error","message":"Logout failed","timestamp":"2025-03-08T16:57:44.897Z"}
{"error":{},"level":"error","message":"Auth Route Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-08T16:57:44.898Z"}
{"error":{},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-08T16:57:44.899Z","userId":"677bfe44f6789c907c9f3766"}
{"duration":"67ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1741453064834_roh38sspp","responseSize":"401 Bytes","statusCode":500,"timestamp":"2025-03-08T16:57:44.903Z","url":"/api/v1/auth/logout","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"email":"riccardonicolilb@gmail.com","password":"[REDACTED]"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741453066161_aete6uq6i","timestamp":"2025-03-08T16:57:46.161Z","url":"/api/v1/auth/login","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"Login successful","metadata":{"ipAddress":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"},"timestamp":"2025-03-08T16:57:46.374Z","userId":"677bfe44f6789c907c9f3766"}
{"action":"login","level":"info","message":"User audit record created","timestamp":"2025-03-08T16:57:46.426Z","userId":"677bfe44f6789c907c9f3766"}
{"duration":"267ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741453066161_aete6uq6i","responseSize":"3.33 KB","statusCode":200,"timestamp":"2025-03-08T16:57:46.428Z","url":"/api/v1/auth/login","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"25","page":"1","search":"","sort":"-createdAt"},"requestId":"req_1741453068255_yif0df4wc","timestamp":"2025-03-08T16:57:48.255Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"143ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741453068255_yif0df4wc","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T16:57:48.398Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T16:59:35.506Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T16:59:35.509Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T16:59:35.543Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-08T16:59:36.261Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T16:59:36.262Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T16:59:36.264Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T16:59:36.555Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T16:59:36.559Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T16:59:36.559Z"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741453181712_tibb3ckqz","timestamp":"2025-03-08T16:59:41.713Z","url":"/api/v1/auth/verify","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"105ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741453181712_tibb3ckqz","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T16:59:41.817Z","url":"/api/v1/auth/verify","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"25","page":"1","search":"","sort":"-createdAt"},"requestId":"req_1741453181911_e7jlkhatf","timestamp":"2025-03-08T16:59:41.911Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"137ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741453181911_e7jlkhatf","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T16:59:42.048Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741453183713_dhhp1gjvz","timestamp":"2025-03-08T16:59:43.713Z","url":"/api/v1/users/67c5e8191af6a34321b52006","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"143ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741453183713_dhhp1gjvz","responseSize":"873 Bytes","statusCode":200,"timestamp":"2025-03-08T16:59:43.856Z","url":"/api/v1/users/67c5e8191af6a34321b52006","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"25","page":"1","search":"","sort":"-createdAt"},"requestId":"req_1741453186002_n3rexln4f","timestamp":"2025-03-08T16:59:46.002Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"148ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741453186002_n3rexln4f","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T16:59:46.150Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741453188402_2osu2tt0v","timestamp":"2025-03-08T16:59:48.402Z","url":"/api/v1/users/67c0c5d1285a82c16495c6dc","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"132ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741453188402_2osu2tt0v","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T16:59:48.534Z","url":"/api/v1/users/67c0c5d1285a82c16495c6dc","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741453192570_w3sfprr5p","timestamp":"2025-03-08T16:59:52.570Z","url":"/api/v1/users/67c0c5d1285a82c16495c6dc","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"126ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741453192570_w3sfprr5p","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T16:59:52.696Z","url":"/api/v1/users/67c0c5d1285a82c16495c6dc","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"status":"inactive"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"PUT","query":{},"requestId":"req_1741453192727_40yx3a0ie","timestamp":"2025-03-08T16:59:52.727Z","url":"/api/v1/users/67c0c5d1285a82c16495c6dc/status","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"Changing user status for 67c0c5d1285a82c16495c6dc","timestamp":"2025-03-08T16:59:52.836Z","updateData":{"status":"inactive"}}
{"level":"info","message":"User status updated successfully for 67c0c5d1285a82c16495c6dc","newStatus":"inactive","timestamp":"2025-03-08T16:59:52.887Z"}
{"level":"info","message":"User status changed","status":"inactive","timestamp":"2025-03-08T16:59:52.887Z","userId":"67c0c5d1285a82c16495c6dc"}
{"duration":"163ms","ip":"::1","level":"http","message":"Risposta inviata","method":"PUT","requestId":"req_1741453192727_40yx3a0ie","responseSize":"1.07 KB","statusCode":200,"timestamp":"2025-03-08T16:59:52.890Z","url":"/api/v1/users/67c0c5d1285a82c16495c6dc/status","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741453192893_10w8bwj9v","timestamp":"2025-03-08T16:59:52.893Z","url":"/api/v1/users/67c0c5d1285a82c16495c6dc","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"121ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741453192893_10w8bwj9v","responseSize":"978 Bytes","statusCode":200,"timestamp":"2025-03-08T16:59:53.014Z","url":"/api/v1/users/67c0c5d1285a82c16495c6dc","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741453195786_ydq90ebx2","timestamp":"2025-03-08T16:59:55.786Z","url":"/api/v1/users/67c0c5d1285a82c16495c6dc","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"119ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741453195786_ydq90ebx2","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T16:59:55.905Z","url":"/api/v1/users/67c0c5d1285a82c16495c6dc","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"deletedAt":null,"isDeleted":false,"status":"active"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"PUT","query":{},"requestId":"req_1741453195916_ghl3yteii","timestamp":"2025-03-08T16:59:55.916Z","url":"/api/v1/users/67c0c5d1285a82c16495c6dc/status","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"Changing user status for 67c0c5d1285a82c16495c6dc","timestamp":"2025-03-08T16:59:56.014Z","updateData":{"deletedAt":null,"isDeleted":false,"status":"active"}}
{"currentEmail":"manager@test.it","isDeleted":true,"level":"info","message":"Reactivating user 67c0c5d1285a82c16495c6dc","timestamp":"2025-03-08T16:59:56.035Z"}
{"level":"info","message":"User status updated successfully for 67c0c5d1285a82c16495c6dc","newStatus":"active","timestamp":"2025-03-08T16:59:56.061Z"}
{"level":"info","message":"User status changed","status":"active","timestamp":"2025-03-08T16:59:56.061Z","userId":"67c0c5d1285a82c16495c6dc"}
{"duration":"149ms","ip":"::1","level":"http","message":"Risposta inviata","method":"PUT","requestId":"req_1741453195916_ghl3yteii","responseSize":"1.05 KB","statusCode":200,"timestamp":"2025-03-08T16:59:56.065Z","url":"/api/v1/users/67c0c5d1285a82c16495c6dc/status","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741453196069_ceeba4z7c","timestamp":"2025-03-08T16:59:56.069Z","url":"/api/v1/users/67c0c5d1285a82c16495c6dc","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"126ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741453196069_ceeba4z7c","responseSize":"955 Bytes","statusCode":200,"timestamp":"2025-03-08T16:59:56.195Z","url":"/api/v1/users/67c0c5d1285a82c16495c6dc","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1741453199928_e37f1z1jr","timestamp":"2025-03-08T16:59:59.928Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"148ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741453199928_e37f1z1jr","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T17:00:00.076Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"25","page":"1","search":"","sort":"-createdAt"},"requestId":"req_1741453573372_h237a9w86","timestamp":"2025-03-08T17:06:13.372Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"170ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741453573372_h237a9w86","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T17:06:13.542Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T17:28:32.815Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T17:28:32.819Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T17:28:32.864Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-08T17:28:33.706Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T17:28:33.707Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T17:28:33.709Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T17:28:34.093Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T17:28:34.096Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T17:28:34.097Z"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1741454924984_3tx3xl5x8","timestamp":"2025-03-08T17:28:44.985Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"236ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741454924984_3tx3xl5x8","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T17:28:45.221Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1741454931564_i3cxyzypq","timestamp":"2025-03-08T17:28:51.565Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"154ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741454931564_i3cxyzypq","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T17:28:51.718Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741454939738_qofrq99ql","timestamp":"2025-03-08T17:28:59.738Z","url":"/api/v1/schools/67c763375b0426e1cb851fea","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"191ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741454939738_qofrq99ql","responseSize":"1.13 KB","statusCode":200,"timestamp":"2025-03-08T17:28:59.929Z","url":"/api/v1/schools/67c763375b0426e1cb851fea","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741454939931_aphtrzy82","timestamp":"2025-03-08T17:28:59.931Z","url":"/api/v1/schools/67c763375b0426e1cb851fea","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"183ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741454939931_aphtrzy82","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T17:29:00.114Z","url":"/api/v1/schools/67c763375b0426e1cb851fea","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741454942459_u4pszq908","timestamp":"2025-03-08T17:29:02.459Z","url":"/api/v1/users/available-managers","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"165ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741454942459_u4pszq908","responseSize":"686 Bytes","statusCode":200,"timestamp":"2025-03-08T17:29:02.624Z","url":"/api/v1/users/available-managers","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"userId":"67c0c5d1285a82c16495c6dc"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741454946636_tv6x3li9p","timestamp":"2025-03-08T17:29:06.636Z","url":"/api/v1/schools/67c763375b0426e1cb851fea/add-manager","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"Manager aggiunto con successo con assignedSchoolIds aggiornato","newManagerId":"67c0c5d1285a82c16495c6dc","schoolId":"67c763375b0426e1cb851fea","timestamp":"2025-03-08T17:29:06.932Z"}
{"level":"info","message":"Manager aggiunto con successo","newManagerId":"67c0c5d1285a82c16495c6dc","schoolId":"67c763375b0426e1cb851fea","timestamp":"2025-03-08T17:29:06.933Z","updatedSchool":"67c763375b0426e1cb851fea"}
{"duration":"300ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741454946636_tv6x3li9p","responseSize":"1.23 KB","statusCode":200,"timestamp":"2025-03-08T17:29:06.936Z","url":"/api/v1/schools/67c763375b0426e1cb851fea/add-manager","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741454953242_v8h81y5gh","timestamp":"2025-03-08T17:29:13.242Z","url":"/api/v1/auth/verify","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"50ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741454953242_v8h81y5gh","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T17:29:13.292Z","url":"/api/v1/auth/verify","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741454953348_6kfo8dzz4","timestamp":"2025-03-08T17:29:13.348Z","url":"/api/v1/schools/67c763375b0426e1cb851fea","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"213ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741454953348_6kfo8dzz4","responseSize":"1.41 KB","statusCode":200,"timestamp":"2025-03-08T17:29:13.561Z","url":"/api/v1/schools/67c763375b0426e1cb851fea","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741454953563_g0hxs99qa","timestamp":"2025-03-08T17:29:13.564Z","url":"/api/v1/schools/67c763375b0426e1cb851fea","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"219ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741454953563_g0hxs99qa","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T17:29:13.782Z","url":"/api/v1/schools/67c763375b0426e1cb851fea","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1741454956434_3yzk9fnm2","timestamp":"2025-03-08T17:29:16.434Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"144ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741454956434_3yzk9fnm2","responseSize":"4.46 KB","statusCode":200,"timestamp":"2025-03-08T17:29:16.579Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T17:49:52.931Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T17:49:52.935Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T17:49:52.969Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-08T17:49:53.698Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T17:49:53.699Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T17:49:53.700Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T17:49:53.985Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T17:49:53.989Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T17:49:53.990Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T17:56:18.438Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T17:56:18.442Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T17:56:18.478Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-08T17:56:19.168Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T17:56:19.170Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T17:56:19.172Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T17:56:19.481Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T17:56:19.485Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T17:56:19.486Z"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741456583372_fzcb5ab4s","timestamp":"2025-03-08T17:56:23.372Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"215ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741456583372_fzcb5ab4s","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T17:56:23.587Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741456584890_04sd1bd6y","timestamp":"2025-03-08T17:56:24.890Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"context":{"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"User\"","errorName":"CastError","level":"error","message":"Errore in UserRepository.findById:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"User\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOne (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2533:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at UserRepository.findById (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\UserRepository.js:42:26)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\UserRepository.test.js:113:17)","timestamp":"2025-03-08T17:56:34.058Z"}
{"level":"info","message":"User created","timestamp":"2025-03-08T17:56:34.408Z","userId":"67cc84d2e2a2e458d2ef6c08"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-08T17:56:34.519Z","expiresAt":"2025-03-09T17:56:34.519Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-08T17:56:34.519Z","token":"17335183-8a30-42b2-afff-5f681520a88e-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T17:56:34.635Z"}
{"context":{"updateData":{"firstName":"Updated"},"userId":"invalidid"},"errorMessage":"ID utente non valido","level":"error","message":"Errore in UserRepository.update:","timestamp":"2025-03-08T17:56:34.870Z"}
{"duration":"12945ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741456584890_04sd1bd6y","responseSize":"10.72 KB","statusCode":200,"timestamp":"2025-03-08T17:56:37.835Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741456597841_b9ff92wi6","timestamp":"2025-03-08T17:56:37.841Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"169ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741456597841_b9ff92wi6","responseSize":"83.31 KB","statusCode":200,"timestamp":"2025-03-08T17:56:38.011Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T17:59:29.050Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T17:59:29.055Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T17:59:29.097Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-08T17:59:29.822Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T17:59:29.823Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T17:59:29.825Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T17:59:30.129Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T17:59:30.132Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T17:59:30.132Z"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741456772236_vpths9fe7","timestamp":"2025-03-08T17:59:32.237Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-08T17:59:38.469Z","userId":"67cc858a542e38902e5c07af"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-08T17:59:38.576Z","expiresAt":"2025-03-09T17:59:38.576Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-08T17:59:38.576Z","token":"64cb7c90-51a6-484d-acc2-62addd85a283-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T17:59:38.690Z"}
{"duration":"9755ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741456772236_vpths9fe7","responseSize":"8.43 KB","statusCode":200,"timestamp":"2025-03-08T17:59:41.991Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741456781998_sor9aj5w2","timestamp":"2025-03-08T17:59:41.998Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"176ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741456781998_sor9aj5w2","responseSize":"81.02 KB","statusCode":200,"timestamp":"2025-03-08T17:59:42.174Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:04:07.617Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:04:07.621Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:04:07.661Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-08T18:04:08.365Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T18:04:08.366Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T18:04:08.368Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T18:04:08.655Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T18:04:08.659Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T18:04:08.660Z"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741457051681_61z9ejj80","timestamp":"2025-03-08T18:04:11.681Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-08T18:04:17.958Z","userId":"67cc86a174608fc3cba6d142"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-08T18:04:18.069Z","expiresAt":"2025-03-09T18:04:18.069Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-08T18:04:18.069Z","token":"dbfd5c5a-8ba8-49fa-94d1-4e44ff2b7d5d-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T18:04:18.180Z"}
{"duration":"9792ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741457051681_61z9ejj80","responseSize":"8.43 KB","statusCode":200,"timestamp":"2025-03-08T18:04:21.473Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741457061492_kxo6jwvt2","timestamp":"2025-03-08T18:04:21.492Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"221ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741457061492_kxo6jwvt2","responseSize":"81.02 KB","statusCode":200,"timestamp":"2025-03-08T18:04:21.713Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:04:54.084Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:04:54.088Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:04:54.128Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-08T18:04:54.823Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T18:04:54.825Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T18:04:54.826Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T18:04:55.114Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T18:04:55.118Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T18:04:55.119Z"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741457098519_3qlvipv62","timestamp":"2025-03-08T18:04:58.519Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-08T18:05:04.721Z","userId":"67cc86d07be759386ddd4421"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-08T18:05:04.822Z","expiresAt":"2025-03-09T18:05:04.822Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-08T18:05:04.822Z","token":"a9f989df-6f22-4760-b166-da4b4ee10ec6-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T18:05:04.930Z"}
{"duration":"9547ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741457098519_3qlvipv62","responseSize":"8.43 KB","statusCode":200,"timestamp":"2025-03-08T18:05:08.066Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741457108071_68i61g5fi","timestamp":"2025-03-08T18:05:08.071Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"169ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741457108071_68i61g5fi","responseSize":"81.02 KB","statusCode":200,"timestamp":"2025-03-08T18:05:08.240Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:08:03.719Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:08:03.724Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:08:03.781Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-08T18:08:04.675Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T18:08:04.676Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T18:08:04.678Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T18:08:05.003Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T18:08:05.009Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T18:08:05.010Z"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741457287046_gauf7vl71","timestamp":"2025-03-08T18:08:07.048Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-08T18:08:14.619Z","userId":"67cc878e41ca6ef830141f81"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-08T18:08:14.743Z","expiresAt":"2025-03-09T18:08:14.743Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-08T18:08:14.743Z","token":"12e122b7-d1c9-4ef2-a305-d1e4ef912eda-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T18:08:14.865Z"}
{"duration":"11146ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741457287046_gauf7vl71","responseSize":"8.43 KB","statusCode":200,"timestamp":"2025-03-08T18:08:18.194Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741457298214_pfh7xno9o","timestamp":"2025-03-08T18:08:18.214Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"188ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741457298214_pfh7xno9o","responseSize":"81.02 KB","statusCode":200,"timestamp":"2025-03-08T18:08:18.402Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:11:24.594Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:11:24.598Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:11:24.636Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-08T18:11:25.348Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T18:11:25.350Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T18:11:25.352Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T18:11:25.651Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T18:11:25.655Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T18:11:25.656Z"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741457512258_birr9bybe","timestamp":"2025-03-08T18:11:52.259Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-08T18:11:58.785Z","userId":"67cc886e5c3788c79313453d"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-08T18:11:58.897Z","expiresAt":"2025-03-09T18:11:58.897Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-08T18:11:58.897Z","token":"0156297a-814a-4e8f-8da3-ec32ff7a5ee3-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T18:11:59.002Z"}
{"duration":"9789ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741457512258_birr9bybe","responseSize":"8.62 KB","statusCode":200,"timestamp":"2025-03-08T18:12:02.047Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741457522051_42ia86epp","timestamp":"2025-03-08T18:12:02.051Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"195ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741457522051_42ia86epp","responseSize":"79.46 KB","statusCode":200,"timestamp":"2025-03-08T18:12:02.246Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741457572649_l6qb9z4fy","timestamp":"2025-03-08T18:12:52.649Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:12:56.725Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:12:56.732Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:12:56.857Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cc88acae64d7f797106ab9","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T18:13:00.565Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cc88adae64d7f797106b03"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:311:17)","timestamp":"2025-03-08T18:13:01.274Z"}
{"context":{"role":"teacher","schoolId":"67cc88adae64d7f797106b0f","userId":"67cc88adae64d7f797106b15"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:171:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:344:35)","timestamp":"2025-03-08T18:13:01.619Z"}
{"context":{"role":"teacher","schoolId":"67cc88adae64d7f797106b27","userId":"67cc88adae64d7f797106b21"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:171:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:369:17)","timestamp":"2025-03-08T18:13:01.835Z"}
{"context":{"createClasses":true,"schoolId":"67cc88aeae64d7f797106b66","yearData":{"createdBy":"67cc88aeae64d7f797106b60","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:02.505Z"}
{"context":{"createClasses":false,"schoolId":"67cc88aeae64d7f797106b77","yearData":{"createdBy":"67cc88aeae64d7f797106b71","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:02.732Z"}
{"context":{"role":"teacher","schoolId":"67cc88afae64d7f797106b98","userId":"67cc88afae64d7f797106b95"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:171:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:489:13)","timestamp":"2025-03-08T18:13:03.150Z"}
{"context":{"schoolId":"67cc88afae64d7f797106b98","userId":"67cc88afae64d7f797106b95"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:03.155Z"}
{"context":{"schoolId":"67cc88afae64d7f797106bae","userId":"67cc88afae64d7f797106ba8"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:03.370Z"}
{"context":{"schoolId":"67cc88afae64d7f797106bbf","userId":"67cc88afae64d7f797106bb9"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:03.586Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc88afae64d7f797106bd0","sectionName":"A","timestamp":"2025-03-08T18:13:03.804Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc88b0ae64d7f797106be1","sectionName":"Z","timestamp":"2025-03-08T18:13:04.019Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc88b0ae64d7f797106bf2","sectionName":"A","timestamp":"2025-03-08T18:13:04.236Z"}
{"context":{"role":"teacher","schoolId":"67cc88b0ae64d7f797106c03","userId":"67cc88b0ae64d7f797106c00"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:171:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:599:13)","timestamp":"2025-03-08T18:13:04.448Z"}
{"context":{"createClasses":false,"schoolId":"67cc88b0ae64d7f797106c31","yearData":{"createdBy":"67cc88b0ae64d7f797106c2b","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:04.901Z"}
{"context":{"schoolId":"67cc88b1ae64d7f797106c42","yearId":"67cc88b1ae64d7f797106c43"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:05.135Z"}
{"context":{"institutionType":"none","schoolId":"67cc88b1ae64d7f797106c69","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:05.598Z"}
{"context":{"institutionType":"scientific","schoolId":"67cc88b1ae64d7f797106c7a","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:05.852Z"}
{"context":{"schoolId":"67cc88b2ae64d7f797106c8b"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:06.060Z"}
{"context":{"schoolId":"67cc88b2ae64d7f797106c9c"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:06.276Z"}
{"context":{"schoolId":"67cc88b2ae64d7f797106c9c"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:06.281Z"}
{"context":{"schoolId":"67cc88b2ae64d7f797106cae"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:06.539Z"}
{"context":{"schoolId":"67cc88b2ae64d7f797106ccb"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:06.750Z"}
{"context":{"schoolId":"67cc88b2ae64d7f797106ccb","userId":"67cc88b2ae64d7f797106cc8"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:06.756Z"}
{"context":{"schoolId":"67cc88b2ae64d7f797106cdd","userId":"67cc88b2ae64d7f797106cda"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:06.961Z"}
{"context":{"schoolId":"67cc88b3ae64d7f797106cee"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:07.165Z"}
{"context":{"schoolId":"67cc88b3ae64d7f797106cee","userId":"67cc88b3ae64d7f797106ceb"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:07.168Z"}
{"context":{"schoolId":"67cc88b3ae64d7f797106d05","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:946:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:914:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-08T18:13:07.376Z"}
{"context":{"schoolId":"67cc88b3ae64d7f797106d15","yearId":"67cc88b3ae64d7f797106d16"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:07.583Z"}
{"context":{"schoolId":"67cc88b3ae64d7f797106d15","yearId":"67cc88b3ae64d7f797106d16"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:07.589Z"}
{"context":{"createClasses":false,"schoolId":"67cc88b3ae64d7f797106d27","yearData":{"createdBy":"67cc88b3ae64d7f797106d21","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:07.797Z"}
{"context":{"schoolId":"67cc88b3ae64d7f797106d38","yearId":"67cc88b3ae64d7f797106d39"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:08.006Z"}
{"context":{"schoolId":"67cc88b3ae64d7f797106d38","yearId":"67cc88b3ae64d7f797106d39"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:08.009Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc88b4ae64d7f797106d4f","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:08.222Z","yearId":"67cc88b4ae64d7f797106d50"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc88b4ae64d7f797106d60","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:08.430Z","yearId":"67cc88b4ae64d7f797106d61"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc88b4ae64d7f797106d71","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:08.646Z","yearId":"67cc88b4ae64d7f797106d72"}
{"context":{"schoolId":"67cc88b4ae64d7f797106d82"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:08.859Z"}
{"context":{"schoolId":"67cc88b5ae64d7f797106d92"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:09.065Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-08T18:13:09.705Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:13:09.711Z"}
{"duration":"17856ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741457572649_l6qb9z4fy","responseSize":"213.13 KB","statusCode":200,"timestamp":"2025-03-08T18:13:10.505Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741457590531_azzy71ss0","timestamp":"2025-03-08T18:13:10.531Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"180ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741457590531_azzy71ss0","responseSize":"102.37 KB","statusCode":200,"timestamp":"2025-03-08T18:13:10.711Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:19:12.991Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:19:12.994Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:19:13.044Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-08T18:19:13.760Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T18:19:13.761Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T18:19:13.763Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T18:19:14.047Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T18:19:14.051Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T18:19:14.052Z"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741457956809_eng5it8ps","timestamp":"2025-03-08T18:19:16.809Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:19:21.573Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:19:21.581Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:19:21.699Z"}
{"context":{"options":{},"schoolId":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.findById:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOne (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2533:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.findById (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:133:28)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:192:17)","timestamp":"2025-03-08T18:19:25.102Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cc8a2d7247af67a57b241e","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T18:19:25.916Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-08T18:19:26.445Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cc8a2e7247af67a57b2468"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-08T18:19:26.700Z"}
{"context":{"role":"teacher","schoolId":"67cc8a2e7247af67a57b2474","userId":"67cc8a2e7247af67a57b247a"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:171:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:355:35)","timestamp":"2025-03-08T18:19:27.098Z"}
{"context":{"role":"teacher","schoolId":"67cc8a2f7247af67a57b248c","userId":"67cc8a2f7247af67a57b2486"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:171:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:380:17)","timestamp":"2025-03-08T18:19:27.367Z"}
{"context":{"createClasses":true,"schoolId":"67cc8a307247af67a57b24cb","yearData":{"createdBy":"67cc8a2f7247af67a57b24c5","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:28.133Z"}
{"context":{"createClasses":false,"schoolId":"67cc8a307247af67a57b24dc","yearData":{"createdBy":"67cc8a307247af67a57b24d6","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:28.381Z"}
{"context":{"role":"teacher","schoolId":"67cc8a307247af67a57b24fd","userId":"67cc8a307247af67a57b24fa"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:171:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:512:13)","timestamp":"2025-03-08T18:19:28.869Z"}
{"context":{"schoolId":"67cc8a307247af67a57b24fd","userId":"67cc8a307247af67a57b24fa"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:28.876Z"}
{"context":{"schoolId":"67cc8a317247af67a57b2513","userId":"67cc8a307247af67a57b250d"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:29.117Z"}
{"context":{"schoolId":"67cc8a317247af67a57b2524","userId":"67cc8a317247af67a57b251e"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:29.363Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8a317247af67a57b2535","sectionName":"A","timestamp":"2025-03-08T18:19:29.611Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8a317247af67a57b2546","sectionName":"Z","timestamp":"2025-03-08T18:19:29.858Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8a327247af67a57b2557","sectionName":"A","timestamp":"2025-03-08T18:19:30.127Z"}
{"context":{"role":"teacher","schoolId":"67cc8a327247af67a57b2568","userId":"67cc8a327247af67a57b2565"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:171:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:633:13)","timestamp":"2025-03-08T18:19:30.437Z"}
{"context":{"createClasses":false,"schoolId":"67cc8a327247af67a57b2596","yearData":{"createdBy":"67cc8a327247af67a57b2590","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:31.011Z"}
{"context":{"schoolId":"67cc8a337247af67a57b25a7","yearId":"67cc8a337247af67a57b25a8"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:31.314Z"}
{"context":{"institutionType":"none","schoolId":"67cc8a337247af67a57b25ce","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:31.899Z"}
{"context":{"institutionType":"scientific","schoolId":"67cc8a347247af67a57b25df","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:32.177Z"}
{"context":{"schoolId":"67cc8a347247af67a57b25f0"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:32.455Z"}
{"context":{"schoolId":"67cc8a347247af67a57b2601"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:32.721Z"}
{"context":{"schoolId":"67cc8a347247af67a57b2601"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:32.725Z"}
{"context":{"schoolId":"67cc8a347247af67a57b2613"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:32.996Z"}
{"context":{"schoolId":"67cc8a357247af67a57b2630"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:33.265Z"}
{"context":{"schoolId":"67cc8a357247af67a57b2630","userId":"67cc8a357247af67a57b262d"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:33.271Z"}
{"context":{"schoolId":"67cc8a357247af67a57b2642","userId":"67cc8a357247af67a57b263f"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:33.536Z"}
{"context":{"schoolId":"67cc8a357247af67a57b2653"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:33.795Z"}
{"context":{"schoolId":"67cc8a357247af67a57b2653","userId":"67cc8a357247af67a57b2650"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:33.799Z"}
{"context":{"schoolId":"67cc8a367247af67a57b266a","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:946:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:948:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-08T18:19:34.059Z"}
{"context":{"schoolId":"67cc8a367247af67a57b267a","yearId":"67cc8a367247af67a57b267b"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:34.322Z"}
{"context":{"schoolId":"67cc8a367247af67a57b267a","yearId":"67cc8a367247af67a57b267b"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:34.326Z"}
{"context":{"createClasses":false,"schoolId":"67cc8a367247af67a57b268c","yearData":{"createdBy":"67cc8a367247af67a57b2686","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:34.586Z"}
{"context":{"schoolId":"67cc8a367247af67a57b269d","yearId":"67cc8a367247af67a57b269e"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:34.842Z"}
{"context":{"schoolId":"67cc8a367247af67a57b269d","yearId":"67cc8a367247af67a57b269e"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:34.845Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8a377247af67a57b26b4","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:35.113Z","yearId":"67cc8a377247af67a57b26b5"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8a377247af67a57b26c5","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:35.368Z","yearId":"67cc8a377247af67a57b26c6"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8a377247af67a57b26d6","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:35.621Z","yearId":"67cc8a377247af67a57b26d7"}
{"context":{"schoolId":"67cc8a377247af67a57b26e7"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:35.894Z"}
{"context":{"schoolId":"67cc8a387247af67a57b26f7"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:36.162Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-08T18:19:36.959Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:19:36.968Z"}
{"duration":"21061ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741457956809_eng5it8ps","responseSize":"206.12 KB","statusCode":200,"timestamp":"2025-03-08T18:19:37.870Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741457977892_85637tc3u","timestamp":"2025-03-08T18:19:37.892Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"200ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741457977892_85637tc3u","responseSize":"102.05 KB","statusCode":200,"timestamp":"2025-03-08T18:19:38.092Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:26:48.108Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:26:48.113Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:26:48.153Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-08T18:26:48.917Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T18:26:48.918Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T18:26:48.920Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T18:26:49.237Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T18:26:49.241Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T18:26:49.242Z"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741458410785_rxj2t0mh3","timestamp":"2025-03-08T18:26:50.785Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-08T18:26:56.999Z","userId":"67cc8bf08aac70c7498ab3e2"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-08T18:26:57.110Z","expiresAt":"2025-03-09T18:26:57.110Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-08T18:26:57.110Z","token":"664f905b-ffaa-4290-b77a-9f7096f7053b-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T18:26:57.223Z"}
{"duration":"9673ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741458410785_rxj2t0mh3","responseSize":"11.64 KB","statusCode":200,"timestamp":"2025-03-08T18:27:00.458Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741458420471_v2npzuypa","timestamp":"2025-03-08T18:27:00.472Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"223ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741458420471_v2npzuypa","responseSize":"102.05 KB","statusCode":200,"timestamp":"2025-03-08T18:27:00.694Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741458423699_ag79d8082","timestamp":"2025-03-08T18:27:03.699Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:27:07.733Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:27:07.737Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:27:07.828Z"}
{"context":{"options":{},"schoolId":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.findById:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOne (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2533:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.findById (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:133:28)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:192:17)","timestamp":"2025-03-08T18:27:10.313Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cc8bfe5b3bd95684a2f38f","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T18:27:10.968Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-08T18:27:11.408Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cc8bff5b3bd95684a2f3d9"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-08T18:27:11.615Z"}
{"context":{"role":"teacher","schoolId":"67cc8bff5b3bd95684a2f3e5","userId":"67cc8bff5b3bd95684a2f3eb"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:171:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:355:35)","timestamp":"2025-03-08T18:27:11.918Z"}
{"context":{"role":"teacher","schoolId":"67cc8c005b3bd95684a2f3fd","userId":"67cc8bff5b3bd95684a2f3f7"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:171:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:380:17)","timestamp":"2025-03-08T18:27:12.120Z"}
{"context":{"createClasses":true,"schoolId":"67cc8c005b3bd95684a2f43c","yearData":{"createdBy":"67cc8c005b3bd95684a2f436","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:12.751Z"}
{"context":{"createClasses":false,"schoolId":"67cc8c005b3bd95684a2f44d","yearData":{"createdBy":"67cc8c005b3bd95684a2f447","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:12.957Z"}
{"context":{"role":"teacher","schoolId":"67cc8c015b3bd95684a2f46e","userId":"67cc8c015b3bd95684a2f46b"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:171:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:512:13)","timestamp":"2025-03-08T18:27:13.365Z"}
{"context":{"schoolId":"67cc8c015b3bd95684a2f46e","userId":"67cc8c015b3bd95684a2f46b"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:13.370Z"}
{"context":{"schoolId":"67cc8c015b3bd95684a2f484","userId":"67cc8c015b3bd95684a2f47e"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:13.573Z"}
{"context":{"schoolId":"67cc8c015b3bd95684a2f495","userId":"67cc8c015b3bd95684a2f48f"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:13.796Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8c015b3bd95684a2f4a6","sectionName":"A","timestamp":"2025-03-08T18:27:14.004Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8c025b3bd95684a2f4b7","sectionName":"Z","timestamp":"2025-03-08T18:27:14.211Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8c025b3bd95684a2f4c8","sectionName":"A","timestamp":"2025-03-08T18:27:14.414Z"}
{"context":{"role":"teacher","schoolId":"67cc8c025b3bd95684a2f4d9","userId":"67cc8c025b3bd95684a2f4d6"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:171:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:633:13)","timestamp":"2025-03-08T18:27:14.618Z"}
{"context":{"createClasses":false,"schoolId":"67cc8c035b3bd95684a2f507","yearData":{"createdBy":"67cc8c025b3bd95684a2f501","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:15.064Z"}
{"context":{"schoolId":"67cc8c035b3bd95684a2f518","yearId":"67cc8c035b3bd95684a2f519"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:15.301Z"}
{"context":{"institutionType":"none","schoolId":"67cc8c035b3bd95684a2f53f","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:15.735Z"}
{"context":{"institutionType":"scientific","schoolId":"67cc8c035b3bd95684a2f550","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:15.946Z"}
{"context":{"schoolId":"67cc8c045b3bd95684a2f561"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:16.146Z"}
{"context":{"schoolId":"67cc8c045b3bd95684a2f572"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:16.348Z"}
{"context":{"schoolId":"67cc8c045b3bd95684a2f572"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:16.350Z"}
{"context":{"schoolId":"67cc8c045b3bd95684a2f584"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:16.554Z"}
{"context":{"schoolId":"67cc8c045b3bd95684a2f5a1"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:16.764Z"}
{"context":{"schoolId":"67cc8c045b3bd95684a2f5a1","userId":"67cc8c045b3bd95684a2f59e"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:16.768Z"}
{"context":{"schoolId":"67cc8c045b3bd95684a2f5b3","userId":"67cc8c045b3bd95684a2f5b0"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:16.992Z"}
{"context":{"schoolId":"67cc8c055b3bd95684a2f5c4"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:17.190Z"}
{"context":{"schoolId":"67cc8c055b3bd95684a2f5c4","userId":"67cc8c055b3bd95684a2f5c1"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:17.193Z"}
{"context":{"schoolId":"67cc8c055b3bd95684a2f5db","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:946:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:948:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-08T18:27:17.396Z"}
{"context":{"schoolId":"67cc8c055b3bd95684a2f5eb","yearId":"67cc8c055b3bd95684a2f5ec"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:17.591Z"}
{"context":{"schoolId":"67cc8c055b3bd95684a2f5eb","yearId":"67cc8c055b3bd95684a2f5ec"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:17.594Z"}
{"context":{"createClasses":false,"schoolId":"67cc8c055b3bd95684a2f5fd","yearData":{"createdBy":"67cc8c055b3bd95684a2f5f7","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:17.795Z"}
{"context":{"schoolId":"67cc8c055b3bd95684a2f60e","yearId":"67cc8c055b3bd95684a2f60f"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:17.995Z"}
{"context":{"schoolId":"67cc8c055b3bd95684a2f60e","yearId":"67cc8c055b3bd95684a2f60f"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:17.998Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8c065b3bd95684a2f625","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:18.202Z","yearId":"67cc8c065b3bd95684a2f626"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8c065b3bd95684a2f636","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:18.406Z","yearId":"67cc8c065b3bd95684a2f637"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8c065b3bd95684a2f647","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:18.608Z","yearId":"67cc8c065b3bd95684a2f648"}
{"context":{"schoolId":"67cc8c065b3bd95684a2f658"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:18.813Z"}
{"context":{"schoolId":"67cc8c075b3bd95684a2f668"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:19.011Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-08T18:27:19.609Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:27:19.614Z"}
{"duration":"16709ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741458423699_ag79d8082","responseSize":"102.93 KB","statusCode":200,"timestamp":"2025-03-08T18:27:20.408Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741458440414_umldjyyhz","timestamp":"2025-03-08T18:27:20.414Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"156ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741458440414_umldjyyhz","responseSize":"102.05 KB","statusCode":200,"timestamp":"2025-03-08T18:27:20.570Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:30:55.084Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:30:55.090Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:30:55.140Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-08T18:30:55.978Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T18:30:55.979Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T18:30:55.981Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T18:30:56.313Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T18:30:56.317Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T18:30:56.318Z"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741458659133_jm57osphm","timestamp":"2025-03-08T18:30:59.133Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:31:04.205Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:31:04.209Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:31:04.311Z"}
{"context":{"options":{},"schoolId":"invalidid"},"errorMessage":"ID scuola non valido (formato non valido)","level":"error","message":"Errore in SchoolRepository.findById:","timestamp":"2025-03-08T18:31:07.119Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cc8ceb3c32fafbb9feb729","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T18:31:07.863Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-08T18:31:08.343Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cc8cec3c32fafbb9feb773"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-08T18:31:08.576Z"}
{"context":{"role":"teacher","schoolId":"67cc8cec3c32fafbb9feb77f","userId":"67cc8cec3c32fafbb9feb785"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:180:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:355:35)","timestamp":"2025-03-08T18:31:08.960Z"}
{"context":{"role":"teacher","schoolId":"67cc8ced3c32fafbb9feb797","userId":"67cc8cec3c32fafbb9feb791"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:180:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:380:17)","timestamp":"2025-03-08T18:31:09.220Z"}
{"context":{"createClasses":true,"schoolId":"67cc8cee3c32fafbb9feb7d6","yearData":{"createdBy":"67cc8ced3c32fafbb9feb7d0","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:10.043Z"}
{"context":{"createClasses":false,"schoolId":"67cc8cee3c32fafbb9feb7e7","yearData":{"createdBy":"67cc8cee3c32fafbb9feb7e1","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:10.360Z"}
{"context":{"role":"teacher","schoolId":"67cc8cee3c32fafbb9feb808","userId":"67cc8cee3c32fafbb9feb805"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:180:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:512:13)","timestamp":"2025-03-08T18:31:10.961Z"}
{"context":{"schoolId":"67cc8cee3c32fafbb9feb808","userId":"67cc8cee3c32fafbb9feb805"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:10.970Z"}
{"context":{"schoolId":"67cc8cef3c32fafbb9feb81e","userId":"67cc8cee3c32fafbb9feb818"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:11.281Z"}
{"context":{"schoolId":"67cc8cef3c32fafbb9feb82f","userId":"67cc8cef3c32fafbb9feb829"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:11.602Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8cef3c32fafbb9feb840","sectionName":"A","timestamp":"2025-03-08T18:31:11.887Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8cf03c32fafbb9feb851","sectionName":"Z","timestamp":"2025-03-08T18:31:12.199Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8cf03c32fafbb9feb862","sectionName":"A","timestamp":"2025-03-08T18:31:12.507Z"}
{"context":{"role":"teacher","schoolId":"67cc8cf03c32fafbb9feb873","userId":"67cc8cf03c32fafbb9feb870"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:180:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:633:13)","timestamp":"2025-03-08T18:31:12.807Z"}
{"context":{"createClasses":false,"schoolId":"67cc8cf13c32fafbb9feb8a1","yearData":{"createdBy":"67cc8cf13c32fafbb9feb89b","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:13.468Z"}
{"context":{"schoolId":"67cc8cf13c32fafbb9feb8b2","yearId":"67cc8cf13c32fafbb9feb8b3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:13.731Z"}
{"context":{"institutionType":"none","schoolId":"67cc8cf23c32fafbb9feb8d9","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:14.286Z"}
{"context":{"institutionType":"scientific","schoolId":"67cc8cf23c32fafbb9feb8ea","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:14.575Z"}
{"context":{"schoolId":"67cc8cf23c32fafbb9feb8fb"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:14.854Z"}
{"context":{"schoolId":"67cc8cf33c32fafbb9feb90c"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:15.151Z"}
{"context":{"schoolId":"67cc8cf33c32fafbb9feb90c"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:15.154Z"}
{"context":{"schoolId":"67cc8cf33c32fafbb9feb91e"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:15.438Z"}
{"context":{"schoolId":"67cc8cf33c32fafbb9feb93b"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:15.666Z"}
{"context":{"schoolId":"67cc8cf33c32fafbb9feb93b","userId":"67cc8cf33c32fafbb9feb938"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:15.668Z"}
{"context":{"schoolId":"67cc8cf33c32fafbb9feb94d","userId":"67cc8cf33c32fafbb9feb94a"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:15.879Z"}
{"context":{"schoolId":"67cc8cf43c32fafbb9feb95e"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:16.088Z"}
{"context":{"schoolId":"67cc8cf43c32fafbb9feb95e","userId":"67cc8cf33c32fafbb9feb95b"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:16.092Z"}
{"context":{"schoolId":"67cc8cf43c32fafbb9feb975","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:955:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:948:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-08T18:31:16.300Z"}
{"context":{"schoolId":"67cc8cf43c32fafbb9feb985","yearId":"67cc8cf43c32fafbb9feb986"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:16.504Z"}
{"context":{"schoolId":"67cc8cf43c32fafbb9feb985","yearId":"67cc8cf43c32fafbb9feb986"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:16.506Z"}
{"context":{"createClasses":false,"schoolId":"67cc8cf43c32fafbb9feb997","yearData":{"createdBy":"67cc8cf43c32fafbb9feb991","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:16.712Z"}
{"context":{"schoolId":"67cc8cf43c32fafbb9feb9a8","yearId":"67cc8cf43c32fafbb9feb9a9"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:16.921Z"}
{"context":{"schoolId":"67cc8cf43c32fafbb9feb9a8","yearId":"67cc8cf43c32fafbb9feb9a9"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:16.923Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8cf53c32fafbb9feb9bf","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:17.139Z","yearId":"67cc8cf53c32fafbb9feb9c0"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8cf53c32fafbb9feb9d0","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:17.347Z","yearId":"67cc8cf53c32fafbb9feb9d1"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8cf53c32fafbb9feb9e1","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:17.552Z","yearId":"67cc8cf53c32fafbb9feb9e2"}
{"context":{"schoolId":"67cc8cf53c32fafbb9feb9f2"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:17.766Z"}
{"context":{"schoolId":"67cc8cf53c32fafbb9feba02"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:17.972Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-08T18:31:18.587Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:31:18.642Z"}
{"duration":"20257ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741458659133_jm57osphm","responseSize":"102.74 KB","statusCode":200,"timestamp":"2025-03-08T18:31:19.390Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741458679400_iwzb6vokh","timestamp":"2025-03-08T18:31:19.400Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"176ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741458679400_iwzb6vokh","responseSize":"102.1 KB","statusCode":200,"timestamp":"2025-03-08T18:31:19.576Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:33:19.853Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:33:19.857Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:33:19.895Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-08T18:33:20.674Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T18:33:20.676Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T18:33:20.678Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T18:33:20.972Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T18:33:20.976Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T18:33:20.977Z"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741458806526_4yk8zhgpl","timestamp":"2025-03-08T18:33:26.527Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:33:30.519Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:33:30.524Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:33:30.614Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cc8d7d8b3e691fce58df6e","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T18:33:33.823Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-08T18:33:34.259Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cc8d7e8b3e691fce58dfb8"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-08T18:33:34.475Z"}
{"context":{"role":"teacher","schoolId":"67cc8d7e8b3e691fce58dfc4","userId":"67cc8d7e8b3e691fce58dfca"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:179:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:355:35)","timestamp":"2025-03-08T18:33:34.785Z"}
{"context":{"role":"teacher","schoolId":"67cc8d7e8b3e691fce58dfdc","userId":"67cc8d7e8b3e691fce58dfd6"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:179:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:380:17)","timestamp":"2025-03-08T18:33:34.993Z"}
{"context":{"createClasses":true,"schoolId":"67cc8d7f8b3e691fce58e01b","yearData":{"createdBy":"67cc8d7f8b3e691fce58e015","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:35.631Z"}
{"context":{"createClasses":false,"schoolId":"67cc8d7f8b3e691fce58e02c","yearData":{"createdBy":"67cc8d7f8b3e691fce58e026","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:35.836Z"}
{"context":{"role":"teacher","schoolId":"67cc8d808b3e691fce58e04d","userId":"67cc8d808b3e691fce58e04a"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:179:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:512:13)","timestamp":"2025-03-08T18:33:36.252Z"}
{"context":{"schoolId":"67cc8d808b3e691fce58e04d","userId":"67cc8d808b3e691fce58e04a"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:36.256Z"}
{"context":{"schoolId":"67cc8d808b3e691fce58e063","userId":"67cc8d808b3e691fce58e05d"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:36.459Z"}
{"context":{"schoolId":"67cc8d808b3e691fce58e074","userId":"67cc8d808b3e691fce58e06e"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:36.673Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8d808b3e691fce58e085","sectionName":"A","timestamp":"2025-03-08T18:33:36.884Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8d818b3e691fce58e096","sectionName":"Z","timestamp":"2025-03-08T18:33:37.084Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8d818b3e691fce58e0a7","sectionName":"A","timestamp":"2025-03-08T18:33:37.287Z"}
{"context":{"role":"teacher","schoolId":"67cc8d818b3e691fce58e0b8","userId":"67cc8d818b3e691fce58e0b5"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:179:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:633:13)","timestamp":"2025-03-08T18:33:37.508Z"}
{"context":{"createClasses":false,"schoolId":"67cc8d818b3e691fce58e0e6","yearData":{"createdBy":"67cc8d818b3e691fce58e0e0","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:37.948Z"}
{"context":{"schoolId":"67cc8d828b3e691fce58e0f7","yearId":"67cc8d828b3e691fce58e0f8"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:38.151Z"}
{"context":{"institutionType":"none","schoolId":"67cc8d828b3e691fce58e11e","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:38.585Z"}
{"context":{"institutionType":"scientific","schoolId":"67cc8d828b3e691fce58e12f","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:38.789Z"}
{"context":{"schoolId":"67cc8d828b3e691fce58e140"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:38.986Z"}
{"context":{"schoolId":"67cc8d838b3e691fce58e151"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:39.190Z"}
{"context":{"schoolId":"67cc8d838b3e691fce58e151"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:39.194Z"}
{"context":{"schoolId":"67cc8d838b3e691fce58e163"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:39.397Z"}
{"context":{"schoolId":"67cc8d838b3e691fce58e180"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:39.600Z"}
{"context":{"schoolId":"67cc8d838b3e691fce58e180","userId":"67cc8d838b3e691fce58e17d"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:39.603Z"}
{"context":{"schoolId":"67cc8d838b3e691fce58e192","userId":"67cc8d838b3e691fce58e18f"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:39.800Z"}
{"context":{"schoolId":"67cc8d838b3e691fce58e1a3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:40.001Z"}
{"context":{"schoolId":"67cc8d838b3e691fce58e1a3","userId":"67cc8d838b3e691fce58e1a0"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:40.004Z"}
{"context":{"schoolId":"67cc8d848b3e691fce58e1ba","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:954:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:948:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-08T18:33:40.201Z"}
{"context":{"schoolId":"67cc8d848b3e691fce58e1ca","yearId":"67cc8d848b3e691fce58e1cb"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:40.401Z"}
{"context":{"schoolId":"67cc8d848b3e691fce58e1ca","yearId":"67cc8d848b3e691fce58e1cb"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:40.404Z"}
{"context":{"createClasses":false,"schoolId":"67cc8d848b3e691fce58e1dc","yearData":{"createdBy":"67cc8d848b3e691fce58e1d6","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:40.605Z"}
{"context":{"schoolId":"67cc8d848b3e691fce58e1ed","yearId":"67cc8d848b3e691fce58e1ee"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:40.809Z"}
{"context":{"schoolId":"67cc8d848b3e691fce58e1ed","yearId":"67cc8d848b3e691fce58e1ee"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:40.813Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8d858b3e691fce58e204","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:41.017Z","yearId":"67cc8d858b3e691fce58e205"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8d858b3e691fce58e215","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:41.217Z","yearId":"67cc8d858b3e691fce58e216"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8d858b3e691fce58e226","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:41.419Z","yearId":"67cc8d858b3e691fce58e227"}
{"context":{"schoolId":"67cc8d858b3e691fce58e237"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:41.633Z"}
{"context":{"schoolId":"67cc8d858b3e691fce58e247"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:41.832Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-08T18:33:42.442Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:33:42.447Z"}
{"duration":"16714ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741458806526_4yk8zhgpl","responseSize":"102.93 KB","statusCode":200,"timestamp":"2025-03-08T18:33:43.241Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741458823246_c0zhautsu","timestamp":"2025-03-08T18:33:43.246Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"186ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741458823246_c0zhautsu","responseSize":"102.05 KB","statusCode":200,"timestamp":"2025-03-08T18:33:43.432Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:36:46.904Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:36:46.911Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:36:46.961Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-08T18:36:47.786Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T18:36:47.787Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T18:36:47.789Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T18:36:48.148Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T18:36:48.155Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T18:36:48.156Z"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741459023468_5sslusycy","timestamp":"2025-03-08T18:37:03.469Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:37:08.892Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:37:08.896Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:37:08.993Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cc8e581acf2fd6db6ef31a","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T18:37:12.404Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-08T18:37:12.860Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cc8e591acf2fd6db6ef364"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-08T18:37:13.074Z"}
{"context":{"role":"teacher","schoolId":"67cc8e591acf2fd6db6ef370","userId":"67cc8e591acf2fd6db6ef376"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:355:35)","timestamp":"2025-03-08T18:37:13.382Z"}
{"context":{"role":"teacher","schoolId":"67cc8e591acf2fd6db6ef388","userId":"67cc8e591acf2fd6db6ef382"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:380:17)","timestamp":"2025-03-08T18:37:13.613Z"}
{"context":{"createClasses":true,"schoolId":"67cc8e5a1acf2fd6db6ef3c7","yearData":{"createdBy":"67cc8e5a1acf2fd6db6ef3c1","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:14.338Z"}
{"context":{"createClasses":false,"schoolId":"67cc8e5a1acf2fd6db6ef3d8","yearData":{"createdBy":"67cc8e5a1acf2fd6db6ef3d2","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:14.546Z"}
{"context":{"role":"teacher","schoolId":"67cc8e5a1acf2fd6db6ef3f9","userId":"67cc8e5a1acf2fd6db6ef3f6"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:512:13)","timestamp":"2025-03-08T18:37:14.956Z"}
{"context":{"schoolId":"67cc8e5a1acf2fd6db6ef3f9","userId":"67cc8e5a1acf2fd6db6ef3f6"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:14.961Z"}
{"context":{"schoolId":"67cc8e5b1acf2fd6db6ef40f","userId":"67cc8e5a1acf2fd6db6ef409"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:15.169Z"}
{"context":{"schoolId":"67cc8e5b1acf2fd6db6ef420","userId":"67cc8e5b1acf2fd6db6ef41a"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:15.435Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8e5b1acf2fd6db6ef431","sectionName":"A","timestamp":"2025-03-08T18:37:15.691Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8e5b1acf2fd6db6ef442","sectionName":"Z","timestamp":"2025-03-08T18:37:15.963Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8e5c1acf2fd6db6ef453","sectionName":"A","timestamp":"2025-03-08T18:37:16.198Z"}
{"context":{"role":"teacher","schoolId":"67cc8e5c1acf2fd6db6ef464","userId":"67cc8e5c1acf2fd6db6ef461"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:633:13)","timestamp":"2025-03-08T18:37:16.402Z"}
{"context":{"createClasses":false,"schoolId":"67cc8e5c1acf2fd6db6ef492","yearData":{"createdBy":"67cc8e5c1acf2fd6db6ef48c","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:16.871Z"}
{"context":{"schoolId":"67cc8e5d1acf2fd6db6ef4a3","yearId":"67cc8e5d1acf2fd6db6ef4a4"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:17.087Z"}
{"context":{"institutionType":"none","schoolId":"67cc8e5d1acf2fd6db6ef4ca","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:17.544Z"}
{"context":{"institutionType":"scientific","schoolId":"67cc8e5d1acf2fd6db6ef4db","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:17.798Z"}
{"context":{"schoolId":"67cc8e5e1acf2fd6db6ef4ec"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:18.077Z"}
{"context":{"schoolId":"67cc8e5e1acf2fd6db6ef4fd"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:18.310Z"}
{"context":{"schoolId":"67cc8e5e1acf2fd6db6ef4fd"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:18.314Z"}
{"context":{"schoolId":"67cc8e5e1acf2fd6db6ef50f"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:18.536Z"}
{"context":{"schoolId":"67cc8e5e1acf2fd6db6ef52c"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:18.762Z"}
{"context":{"schoolId":"67cc8e5e1acf2fd6db6ef52c","userId":"67cc8e5e1acf2fd6db6ef529"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:18.766Z"}
{"context":{"schoolId":"67cc8e5e1acf2fd6db6ef53e","userId":"67cc8e5e1acf2fd6db6ef53b"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:18.967Z"}
{"context":{"schoolId":"67cc8e5f1acf2fd6db6ef54f"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:19.168Z"}
{"context":{"schoolId":"67cc8e5f1acf2fd6db6ef54f","userId":"67cc8e5f1acf2fd6db6ef54c"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:19.171Z"}
{"context":{"schoolId":"67cc8e5f1acf2fd6db6ef566","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:960:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:948:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-08T18:37:19.372Z"}
{"context":{"schoolId":"67cc8e5f1acf2fd6db6ef576","yearId":"67cc8e5f1acf2fd6db6ef577"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:19.572Z"}
{"context":{"schoolId":"67cc8e5f1acf2fd6db6ef576","yearId":"67cc8e5f1acf2fd6db6ef577"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:19.576Z"}
{"context":{"createClasses":false,"schoolId":"67cc8e5f1acf2fd6db6ef588","yearData":{"createdBy":"67cc8e5f1acf2fd6db6ef582","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:19.778Z"}
{"context":{"schoolId":"67cc8e5f1acf2fd6db6ef599","yearId":"67cc8e5f1acf2fd6db6ef59a"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:19.986Z"}
{"context":{"schoolId":"67cc8e5f1acf2fd6db6ef599","yearId":"67cc8e5f1acf2fd6db6ef59a"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:19.989Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8e601acf2fd6db6ef5b0","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:20.199Z","yearId":"67cc8e601acf2fd6db6ef5b1"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8e601acf2fd6db6ef5c1","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:20.397Z","yearId":"67cc8e601acf2fd6db6ef5c2"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8e601acf2fd6db6ef5d2","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:20.604Z","yearId":"67cc8e601acf2fd6db6ef5d3"}
{"context":{"schoolId":"67cc8e601acf2fd6db6ef5e3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:20.805Z"}
{"context":{"schoolId":"67cc8e601acf2fd6db6ef5f3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:21.003Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-08T18:37:21.623Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:37:21.676Z"}
{"duration":"19081ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741459023468_5sslusycy","responseSize":"102.23 KB","statusCode":200,"timestamp":"2025-03-08T18:37:22.549Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741459042554_t4nzir0yq","timestamp":"2025-03-08T18:37:22.554Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"183ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741459042554_t4nzir0yq","responseSize":"102.06 KB","statusCode":200,"timestamp":"2025-03-08T18:37:22.737Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:42:11.868Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:42:11.872Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:42:11.913Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-08T18:42:12.597Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T18:42:12.598Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T18:42:12.600Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T18:42:12.907Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T18:42:12.912Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T18:42:12.912Z"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741459336820_ertpuq08w","timestamp":"2025-03-08T18:42:16.820Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:42:21.297Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:42:21.301Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:42:21.395Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cc8f90204d0cbb2d96930f","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T18:42:24.635Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-08T18:42:25.070Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cc8f91204d0cbb2d969359"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-08T18:42:25.283Z"}
{"context":{"role":"teacher","schoolId":"67cc8f91204d0cbb2d969365","userId":"67cc8f91204d0cbb2d96936b"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:359:35)","timestamp":"2025-03-08T18:42:25.597Z"}
{"context":{"role":"teacher","schoolId":"67cc8f91204d0cbb2d969382","userId":"67cc8f91204d0cbb2d96937f"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:382:13)","timestamp":"2025-03-08T18:42:25.809Z"}
{"context":{"role":"teacher","schoolId":"67cc8f91204d0cbb2d969382","userId":"67cc8f91204d0cbb2d96937f"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:390:17)","timestamp":"2025-03-08T18:42:25.811Z"}
{"context":{"createClasses":true,"schoolId":"67cc8f92204d0cbb2d9693c4","yearData":{"createdBy":"67cc8f92204d0cbb2d9693be","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:26.450Z"}
{"context":{"createClasses":false,"schoolId":"67cc8f92204d0cbb2d9693d5","yearData":{"createdBy":"67cc8f92204d0cbb2d9693cf","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:26.670Z"}
{"context":{"role":"teacher","schoolId":"67cc8f93204d0cbb2d9693f6","userId":"67cc8f92204d0cbb2d9693f3"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:522:13)","timestamp":"2025-03-08T18:42:27.095Z"}
{"context":{"schoolId":"67cc8f93204d0cbb2d9693f6","userId":"67cc8f92204d0cbb2d9693f3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:27.100Z"}
{"context":{"schoolId":"67cc8f93204d0cbb2d96940c","userId":"67cc8f93204d0cbb2d969406"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:27.302Z"}
{"context":{"schoolId":"67cc8f93204d0cbb2d96941d","userId":"67cc8f93204d0cbb2d969417"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:27.516Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8f93204d0cbb2d96942e","sectionName":"A","timestamp":"2025-03-08T18:42:27.730Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8f93204d0cbb2d96943f","sectionName":"Z","timestamp":"2025-03-08T18:42:27.946Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8f94204d0cbb2d969450","sectionName":"A","timestamp":"2025-03-08T18:42:28.158Z"}
{"context":{"role":"teacher","schoolId":"67cc8f94204d0cbb2d969461","userId":"67cc8f94204d0cbb2d96945e"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:643:13)","timestamp":"2025-03-08T18:42:28.360Z"}
{"context":{"createClasses":false,"schoolId":"67cc8f94204d0cbb2d96948f","yearData":{"createdBy":"67cc8f94204d0cbb2d969489","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:28.789Z"}
{"context":{"schoolId":"67cc8f94204d0cbb2d9694a0","yearId":"67cc8f94204d0cbb2d9694a1"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:28.993Z"}
{"context":{"institutionType":"none","schoolId":"67cc8f95204d0cbb2d9694c7","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:29.427Z"}
{"context":{"institutionType":"scientific","schoolId":"67cc8f95204d0cbb2d9694d8","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:29.630Z"}
{"context":{"schoolId":"67cc8f95204d0cbb2d9694e9"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:29.829Z"}
{"context":{"schoolId":"67cc8f96204d0cbb2d9694fa"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:30.046Z"}
{"context":{"schoolId":"67cc8f96204d0cbb2d9694fa"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:30.049Z"}
{"context":{"schoolId":"67cc8f96204d0cbb2d96950c"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:30.265Z"}
{"context":{"schoolId":"67cc8f96204d0cbb2d969529"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:30.481Z"}
{"context":{"schoolId":"67cc8f96204d0cbb2d969529","userId":"67cc8f96204d0cbb2d969526"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:30.483Z"}
{"context":{"schoolId":"67cc8f96204d0cbb2d96953b","userId":"67cc8f96204d0cbb2d969538"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:30.691Z"}
{"context":{"schoolId":"67cc8f96204d0cbb2d96954c"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:30.890Z"}
{"context":{"schoolId":"67cc8f96204d0cbb2d96954c","userId":"67cc8f96204d0cbb2d969549"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:30.892Z"}
{"context":{"schoolId":"67cc8f97204d0cbb2d969563","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:960:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:958:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-08T18:42:31.102Z"}
{"context":{"schoolId":"67cc8f97204d0cbb2d969573","yearId":"67cc8f97204d0cbb2d969574"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:31.311Z"}
{"context":{"schoolId":"67cc8f97204d0cbb2d969573","yearId":"67cc8f97204d0cbb2d969574"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:31.315Z"}
{"context":{"createClasses":false,"schoolId":"67cc8f97204d0cbb2d969585","yearData":{"createdBy":"67cc8f97204d0cbb2d96957f","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:31.515Z"}
{"context":{"schoolId":"67cc8f97204d0cbb2d969596","yearId":"67cc8f97204d0cbb2d969597"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:31.723Z"}
{"context":{"schoolId":"67cc8f97204d0cbb2d969596","yearId":"67cc8f97204d0cbb2d969597"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:31.726Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8f97204d0cbb2d9695ad","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:31.931Z","yearId":"67cc8f97204d0cbb2d9695ae"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8f98204d0cbb2d9695be","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:32.132Z","yearId":"67cc8f98204d0cbb2d9695bf"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8f98204d0cbb2d9695cf","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:32.339Z","yearId":"67cc8f98204d0cbb2d9695d0"}
{"context":{"schoolId":"67cc8f98204d0cbb2d9695e0"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:32.544Z"}
{"context":{"schoolId":"67cc8f98204d0cbb2d9695f0"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:32.740Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-08T18:42:33.413Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:42:33.422Z"}
{"duration":"17503ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741459336820_ertpuq08w","responseSize":"102.07 KB","statusCode":200,"timestamp":"2025-03-08T18:42:34.323Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741459354329_uqphez0uz","timestamp":"2025-03-08T18:42:34.329Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"208ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741459354329_uqphez0uz","responseSize":"102.08 KB","statusCode":200,"timestamp":"2025-03-08T18:42:34.537Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:43:02.948Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:43:02.953Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:43:02.994Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-08T18:43:04.002Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T18:43:04.004Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T18:43:04.006Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T18:43:04.327Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T18:43:04.331Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T18:43:04.331Z"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741459386338_pt5t2dwud","timestamp":"2025-03-08T18:43:06.338Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:43:10.533Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:43:10.537Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:43:10.636Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cc8fc1731e8c3f81975c75","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T18:43:14.035Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-08T18:43:14.597Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cc8fc2731e8c3f81975cbf"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-08T18:43:14.800Z"}
{"context":{"role":"teacher","schoolId":"67cc8fc3731e8c3f81975ccb","userId":"67cc8fc3731e8c3f81975cd1"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:359:35)","timestamp":"2025-03-08T18:43:15.112Z"}
{"context":{"role":"teacher","schoolId":"67cc8fc3731e8c3f81975ce8","userId":"67cc8fc3731e8c3f81975ce5"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:382:13)","timestamp":"2025-03-08T18:43:15.331Z"}
{"context":{"role":"teacher","schoolId":"67cc8fc3731e8c3f81975ce8","userId":"67cc8fc3731e8c3f81975ce5"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:390:17)","timestamp":"2025-03-08T18:43:15.333Z"}
{"context":{"createClasses":true,"schoolId":"67cc8fc3731e8c3f81975d2a","yearData":{"createdBy":"67cc8fc3731e8c3f81975d24","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:15.983Z"}
{"context":{"createClasses":false,"schoolId":"67cc8fc4731e8c3f81975d3b","yearData":{"createdBy":"67cc8fc3731e8c3f81975d35","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:16.206Z"}
{"context":{"role":"teacher","schoolId":"67cc8fc4731e8c3f81975d5c","userId":"67cc8fc4731e8c3f81975d59"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:522:13)","timestamp":"2025-03-08T18:43:16.667Z"}
{"context":{"schoolId":"67cc8fc4731e8c3f81975d5c","userId":"67cc8fc4731e8c3f81975d59"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:16.674Z"}
{"context":{"schoolId":"67cc8fc4731e8c3f81975d72","userId":"67cc8fc4731e8c3f81975d6c"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:16.877Z"}
{"context":{"schoolId":"67cc8fc5731e8c3f81975d83","userId":"67cc8fc4731e8c3f81975d7d"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:17.096Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8fc5731e8c3f81975d94","sectionName":"A","timestamp":"2025-03-08T18:43:17.310Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8fc5731e8c3f81975da5","sectionName":"Z","timestamp":"2025-03-08T18:43:17.526Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc8fc5731e8c3f81975db6","sectionName":"A","timestamp":"2025-03-08T18:43:17.743Z"}
{"context":{"role":"teacher","schoolId":"67cc8fc5731e8c3f81975dc7","userId":"67cc8fc5731e8c3f81975dc4"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:643:13)","timestamp":"2025-03-08T18:43:17.948Z"}
{"context":{"createClasses":false,"schoolId":"67cc8fc6731e8c3f81975df5","yearData":{"createdBy":"67cc8fc6731e8c3f81975def","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:18.392Z"}
{"context":{"schoolId":"67cc8fc6731e8c3f81975e06","yearId":"67cc8fc6731e8c3f81975e07"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:18.596Z"}
{"context":{"institutionType":"none","schoolId":"67cc8fc7731e8c3f81975e2d","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:19.026Z"}
{"context":{"institutionType":"scientific","schoolId":"67cc8fc7731e8c3f81975e3e","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:19.239Z"}
{"context":{"schoolId":"67cc8fc7731e8c3f81975e4f"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:19.440Z"}
{"context":{"schoolId":"67cc8fc7731e8c3f81975e60"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:19.643Z"}
{"context":{"schoolId":"67cc8fc7731e8c3f81975e60"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:19.646Z"}
{"context":{"schoolId":"67cc8fc7731e8c3f81975e72"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:19.854Z"}
{"context":{"schoolId":"67cc8fc8731e8c3f81975e8f"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:20.063Z"}
{"context":{"schoolId":"67cc8fc8731e8c3f81975e8f","userId":"67cc8fc7731e8c3f81975e8c"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:20.068Z"}
{"context":{"schoolId":"67cc8fc8731e8c3f81975ea1","userId":"67cc8fc8731e8c3f81975e9e"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:20.267Z"}
{"context":{"schoolId":"67cc8fc8731e8c3f81975eb2"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:20.474Z"}
{"context":{"schoolId":"67cc8fc8731e8c3f81975eb2","userId":"67cc8fc8731e8c3f81975eaf"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:20.477Z"}
{"context":{"schoolId":"67cc8fc8731e8c3f81975ec9","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:960:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:958:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-08T18:43:20.677Z"}
{"context":{"schoolId":"67cc8fc8731e8c3f81975ed9","yearId":"67cc8fc8731e8c3f81975eda"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:20.878Z"}
{"context":{"schoolId":"67cc8fc8731e8c3f81975ed9","yearId":"67cc8fc8731e8c3f81975eda"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:20.881Z"}
{"context":{"createClasses":false,"schoolId":"67cc8fc9731e8c3f81975eeb","yearData":{"createdBy":"67cc8fc8731e8c3f81975ee5","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:21.084Z"}
{"context":{"schoolId":"67cc8fc9731e8c3f81975efc","yearId":"67cc8fc9731e8c3f81975efd"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:21.290Z"}
{"context":{"schoolId":"67cc8fc9731e8c3f81975efc","yearId":"67cc8fc9731e8c3f81975efd"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:21.292Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8fc9731e8c3f81975f13","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:21.506Z","yearId":"67cc8fc9731e8c3f81975f14"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8fc9731e8c3f81975f24","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:21.705Z","yearId":"67cc8fc9731e8c3f81975f25"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc8fc9731e8c3f81975f35","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:21.911Z","yearId":"67cc8fc9731e8c3f81975f36"}
{"context":{"schoolId":"67cc8fca731e8c3f81975f46"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:22.121Z"}
{"context":{"schoolId":"67cc8fca731e8c3f81975f56"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:22.327Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-08T18:43:22.928Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:43:22.936Z"}
{"duration":"17421ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741459386338_pt5t2dwud","responseSize":"102.07 KB","statusCode":200,"timestamp":"2025-03-08T18:43:23.759Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741459403774_tronnlerb","timestamp":"2025-03-08T18:43:23.774Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"199ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741459403774_tronnlerb","responseSize":"102.08 KB","statusCode":200,"timestamp":"2025-03-08T18:43:23.973Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:51:57.487Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:51:57.492Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:51:57.538Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-08T18:51:58.377Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T18:51:58.378Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T18:51:58.380Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T18:51:58.702Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T18:51:58.706Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T18:51:58.706Z"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741459939474_tfji4cjmm","timestamp":"2025-03-08T18:52:19.475Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T18:52:25.376Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T18:52:25.380Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T18:52:25.457Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cc91ecead58948416355de","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T18:52:28.516Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-08T18:52:28.930Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cc91edead5894841635628"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-08T18:52:29.124Z"}
{"context":{"role":"teacher","schoolId":"67cc91edead5894841635634","userId":"67cc91edead589484163563a"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:355:28)","timestamp":"2025-03-08T18:52:29.389Z"}
{"context":{"role":"teacher","schoolId":"67cc91edead589484163564c","userId":"67cc91edead5894841635649"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:384:13)","timestamp":"2025-03-08T18:52:29.573Z"}
{"context":{"role":"teacher","schoolId":"67cc91edead589484163564c","userId":"67cc91edead5894841635649"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:392:17)","timestamp":"2025-03-08T18:52:29.574Z"}
{"context":{"createClasses":true,"schoolId":"67cc91eeead589484163568e","yearData":{"createdBy":"67cc91edead5894841635688","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:30.155Z"}
{"context":{"createClasses":false,"schoolId":"67cc91eeead589484163569f","yearData":{"createdBy":"67cc91eeead5894841635699","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:30.359Z"}
{"context":{"role":"teacher","schoolId":"67cc91eeead58948416356c0","userId":"67cc91eeead58948416356bd"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:527:13)","timestamp":"2025-03-08T18:52:30.778Z"}
{"context":{"schoolId":"67cc91eeead58948416356c0","userId":"67cc91eeead58948416356bd"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:30.783Z"}
{"context":{"schoolId":"67cc91eeead58948416356d6","userId":"67cc91eeead58948416356d0"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:30.993Z"}
{"context":{"schoolId":"67cc91efead58948416356e7","userId":"67cc91efead58948416356e1"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:31.195Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc91efead58948416356f8","sectionName":"A","timestamp":"2025-03-08T18:52:31.414Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc91efead5894841635709","sectionName":"Z","timestamp":"2025-03-08T18:52:31.626Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc91efead589484163571a","sectionName":"A","timestamp":"2025-03-08T18:52:31.826Z"}
{"context":{"role":"teacher","schoolId":"67cc91f0ead589484163572b","userId":"67cc91efead5894841635728"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:648:13)","timestamp":"2025-03-08T18:52:32.036Z"}
{"context":{"createClasses":false,"schoolId":"67cc91f0ead5894841635759","yearData":{"createdBy":"67cc91f0ead5894841635753","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:32.479Z"}
{"context":{"schoolId":"67cc91f0ead589484163576a","yearId":"67cc91f0ead589484163576b"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:32.677Z"}
{"context":{"institutionType":"none","schoolId":"67cc91f1ead5894841635791","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:33.091Z"}
{"context":{"institutionType":"scientific","schoolId":"67cc91f1ead58948416357a2","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:33.281Z"}
{"context":{"schoolId":"67cc91f1ead58948416357b3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:33.480Z"}
{"context":{"schoolId":"67cc91f1ead58948416357c4"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:33.664Z"}
{"context":{"schoolId":"67cc91f1ead58948416357c4"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:33.667Z"}
{"context":{"schoolId":"67cc91f1ead58948416357d6"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:33.860Z"}
{"context":{"schoolId":"67cc91f2ead58948416357f3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:34.082Z"}
{"context":{"schoolId":"67cc91f2ead58948416357f3","userId":"67cc91f1ead58948416357f0"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:34.085Z"}
{"context":{"schoolId":"67cc91f2ead5894841635805","userId":"67cc91f2ead5894841635802"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:34.294Z"}
{"context":{"schoolId":"67cc91f2ead5894841635816"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:34.518Z"}
{"context":{"schoolId":"67cc91f2ead5894841635816","userId":"67cc91f2ead5894841635813"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:34.523Z"}
{"context":{"schoolId":"67cc91f2ead589484163582d","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:966:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:963:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-08T18:52:34.751Z"}
{"context":{"schoolId":"67cc91f2ead589484163583d","yearId":"67cc91f2ead589484163583e"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:34.986Z"}
{"context":{"schoolId":"67cc91f2ead589484163583d","yearId":"67cc91f2ead589484163583e"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:34.989Z"}
{"context":{"createClasses":false,"schoolId":"67cc91f3ead589484163584f","yearData":{"createdBy":"67cc91f2ead5894841635849","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:35.172Z"}
{"context":{"schoolId":"67cc91f3ead5894841635860","yearId":"67cc91f3ead5894841635861"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:35.357Z"}
{"context":{"schoolId":"67cc91f3ead5894841635860","yearId":"67cc91f3ead5894841635861"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:35.360Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc91f3ead5894841635877","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:35.548Z","yearId":"67cc91f3ead5894841635878"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc91f3ead5894841635888","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:35.733Z","yearId":"67cc91f3ead5894841635889"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc91f3ead5894841635899","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:35.917Z","yearId":"67cc91f3ead589484163589a"}
{"context":{"schoolId":"67cc91f4ead58948416358aa"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:36.106Z"}
{"context":{"schoolId":"67cc91f4ead58948416358ba"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:36.298Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-08T18:52:36.896Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T18:52:36.939Z"}
{"duration":"18189ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741459939474_tfji4cjmm","responseSize":"102.19 KB","statusCode":200,"timestamp":"2025-03-08T18:52:37.663Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741459957676_jx3gd124m","timestamp":"2025-03-08T18:52:37.676Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"169ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741459957676_jx3gd124m","responseSize":"102.1 KB","statusCode":200,"timestamp":"2025-03-08T18:52:37.845Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1741459979142_drkx93na9","timestamp":"2025-03-08T18:52:59.142Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"179ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741459979142_drkx93na9","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T18:52:59.321Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741459984148_1upxawhje","timestamp":"2025-03-08T18:53:04.148Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"613ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741459984148_1upxawhje","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T18:53:04.761Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741459984763_5jtgxtue0","timestamp":"2025-03-08T18:53:04.763Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"543ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741459984763_5jtgxtue0","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T18:53:05.306Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"100"},"requestId":"req_1741459987932_wfg51vwqf","timestamp":"2025-03-08T18:53:07.932Z","url":"/api/v1/users?limit=100","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"130ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741459987932_wfg51vwqf","responseSize":"1.67 KB","statusCode":200,"timestamp":"2025-03-08T18:53:08.062Z","url":"/api/v1/users?limit=100","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741459988069_7iy38pck6","timestamp":"2025-03-08T18:53:08.069Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"202ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741459988069_7iy38pck6","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T18:53:08.271Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"role":"pcto","userId":"67c0c577285a82c16495c63e"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741459995769_tiv9tsm8b","timestamp":"2025-03-08T18:53:15.769Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"error","message":"Ruolo non valido. Valori accettati: teacher, admin","metadata":{},"timestamp":"2025-03-08T18:53:15.934Z"}
{"duration":"166ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1741459995769_tiv9tsm8b","responseSize":"114 Bytes","statusCode":500,"timestamp":"2025-03-08T18:53:15.935Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"100"},"requestId":"req_1741460219531_2dcm5es4n","timestamp":"2025-03-08T18:56:59.531Z","url":"/api/v1/users?limit=100","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"142ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741460219531_2dcm5es4n","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T18:56:59.673Z","url":"/api/v1/users?limit=100","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741460219678_r3pgmbuia","timestamp":"2025-03-08T18:56:59.678Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"212ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741460219678_r3pgmbuia","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T18:56:59.890Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"role":"admin","userId":"67c02995250c5746c3d9647c"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741460222943_cw96bnmds","timestamp":"2025-03-08T18:57:02.943Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"context":{"role":"admin","schoolId":"679fdad474255ebc8afab683","userId":"67c02995250c5746c3d9647c"},"errorMessage":"this.findById(...).session is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.addUser:","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.addUser (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:185:58)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async SchoolController.addUserToSchool (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:757:35)","timestamp":"2025-03-08T18:57:03.109Z"}
{"duration":"168ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741460222943_cw96bnmds","responseSize":"262 Bytes","statusCode":200,"timestamp":"2025-03-08T18:57:03.111Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741460223115_xuziwtqu5","timestamp":"2025-03-08T18:57:03.115Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"200ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741460223115_xuziwtqu5","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T18:57:03.315Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741460227602_5rfap9c6f","timestamp":"2025-03-08T18:57:07.602Z","url":"/api/v1/auth/verify","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"52ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741460227602_5rfap9c6f","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T18:57:07.654Z","url":"/api/v1/auth/verify","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741460227719_cpqc6irkx","timestamp":"2025-03-08T18:57:07.719Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"220ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741460227719_cpqc6irkx","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T18:57:07.939Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741460227941_y55uegq81","timestamp":"2025-03-08T18:57:07.941Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"214ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741460227941_y55uegq81","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T18:57:08.155Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T19:05:57.656Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T19:05:57.662Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T19:05:57.708Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-08T19:05:58.611Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T19:05:58.612Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T19:05:58.614Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T19:05:58.969Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T19:05:58.977Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T19:05:58.978Z"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"100"},"requestId":"req_1741460762427_7t9o1f34j","timestamp":"2025-03-08T19:06:02.428Z","url":"/api/v1/users?limit=100","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"184ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741460762427_7t9o1f34j","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:06:02.611Z","url":"/api/v1/users?limit=100","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741460762642_86m40qd9s","timestamp":"2025-03-08T19:06:02.643Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"230ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741460762642_86m40qd9s","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:06:02.873Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"role":"pcto","userId":"67c0c577285a82c16495c63e"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741460765148_4r12u0z9s","timestamp":"2025-03-08T19:06:05.148Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"error","message":"Ruolo non valido. Valori accettati: teacher, admin","metadata":{},"timestamp":"2025-03-08T19:06:05.343Z"}
{"duration":"197ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1741460765148_4r12u0z9s","responseSize":"114 Bytes","statusCode":500,"timestamp":"2025-03-08T19:06:05.345Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T19:07:29.615Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T19:07:29.622Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T19:07:29.669Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-08T19:07:30.457Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T19:07:30.459Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T19:07:30.460Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T19:07:30.811Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T19:07:30.814Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T19:07:30.815Z"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"100"},"requestId":"req_1741460852816_tkcfd32w3","timestamp":"2025-03-08T19:07:32.817Z","url":"/api/v1/users?limit=100","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"212ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741460852816_tkcfd32w3","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:07:33.028Z","url":"/api/v1/users?limit=100","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741460853036_ntpi2kxwi","timestamp":"2025-03-08T19:07:33.036Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"277ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741460853036_ntpi2kxwi","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:07:33.314Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"role":"pcto","userId":"67c0c577285a82c16495c63e"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741460855132_3fdj0ozn4","timestamp":"2025-03-08T19:07:35.132Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"error","message":"Ruolo non valido. Valori accettati: teacher, admin","metadata":{},"timestamp":"2025-03-08T19:07:35.389Z"}
{"duration":"266ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1741460855132_3fdj0ozn4","responseSize":"114 Bytes","statusCode":500,"timestamp":"2025-03-08T19:07:35.399Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"100"},"requestId":"req_1741460881882_1bpsaisbc","timestamp":"2025-03-08T19:08:01.882Z","url":"/api/v1/users?limit=100","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"177ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741460881882_1bpsaisbc","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:08:02.059Z","url":"/api/v1/users?limit=100","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741460882065_hj6e3g4p5","timestamp":"2025-03-08T19:08:02.065Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"256ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741460882065_hj6e3g4p5","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:08:02.322Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"role":"pcto","userId":"67c0c577285a82c16495c63e"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741460885803_qgeuixqfl","timestamp":"2025-03-08T19:08:05.803Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"error","message":"Ruolo non valido. Valori accettati: teacher, admin","metadata":{},"timestamp":"2025-03-08T19:08:05.974Z"}
{"duration":"172ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1741460885803_qgeuixqfl","responseSize":"114 Bytes","statusCode":500,"timestamp":"2025-03-08T19:08:05.975Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T19:09:03.999Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T19:09:04.004Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T19:09:04.046Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-08T19:09:04.776Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T19:09:04.777Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T19:09:04.779Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T19:09:05.109Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T19:09:05.113Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T19:09:05.114Z"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"100"},"requestId":"req_1741460966686_psvxn6uyp","timestamp":"2025-03-08T19:09:26.687Z","url":"/api/v1/users?limit=100","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"213ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741460966686_psvxn6uyp","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:09:26.900Z","url":"/api/v1/users?limit=100","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741460966905_cwiru7qqk","timestamp":"2025-03-08T19:09:26.906Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"304ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741460966905_cwiru7qqk","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:09:27.209Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"role":"pcto","userId":"67c0c577285a82c16495c63e"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741460969137_mq32h8e08","timestamp":"2025-03-08T19:09:29.137Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"error","message":"Ruolo non valido. Valori accettati: teacher, admin","metadata":{},"timestamp":"2025-03-08T19:09:29.326Z"}
{"duration":"192ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1741460969137_mq32h8e08","responseSize":"114 Bytes","statusCode":500,"timestamp":"2025-03-08T19:09:29.329Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"100"},"requestId":"req_1741461155762_vqrato25g","timestamp":"2025-03-08T19:12:35.762Z","url":"/api/v1/users?limit=100","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"164ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741461155762_vqrato25g","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:12:35.926Z","url":"/api/v1/users?limit=100","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741461155933_6sqitr5v5","timestamp":"2025-03-08T19:12:35.933Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"244ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741461155933_6sqitr5v5","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:12:36.177Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"role":"pcto","userId":"67c0c577285a82c16495c63e"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741461158054_khgitc4xr","timestamp":"2025-03-08T19:12:38.054Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"error","message":"Ruolo non valido. Valori accettati: teacher, admin","metadata":{},"timestamp":"2025-03-08T19:12:38.228Z"}
{"duration":"175ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1741461158054_khgitc4xr","responseSize":"114 Bytes","statusCode":500,"timestamp":"2025-03-08T19:12:38.229Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T19:12:55.412Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T19:12:55.422Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T19:12:55.474Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-08T19:12:56.333Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T19:12:56.334Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T19:12:56.337Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T19:12:56.684Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T19:12:56.691Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T19:12:56.692Z"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741461177935_c4dhndh3c","timestamp":"2025-03-08T19:12:57.936Z","url":"/api/v1/auth/verify","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"105ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741461177935_c4dhndh3c","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:12:58.041Z","url":"/api/v1/auth/verify","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741461178477_cu3ftquch","timestamp":"2025-03-08T19:12:58.477Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"262ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741461178477_cu3ftquch","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:12:58.739Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741461178741_9kulqfz4o","timestamp":"2025-03-08T19:12:58.741Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"240ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741461178741_9kulqfz4o","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:12:58.981Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"100"},"requestId":"req_1741461182459_im7jsag1w","timestamp":"2025-03-08T19:13:02.459Z","url":"/api/v1/users?limit=100","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"149ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741461182459_im7jsag1w","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:13:02.608Z","url":"/api/v1/users?limit=100","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741461182616_17j26o0nu","timestamp":"2025-03-08T19:13:02.616Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"231ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741461182616_17j26o0nu","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:13:02.848Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"role":"pcto","userId":"67c0c577285a82c16495c63e"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741461193428_4waetmmk0","timestamp":"2025-03-08T19:13:13.428Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"role":"teacher","userId":"67c0c560285a82c16495c615"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741461193435_5d8lo7l4n","timestamp":"2025-03-08T19:13:13.435Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"Utente aggiunto con successo alla scuola","role":"pcto","schoolId":"679fdad474255ebc8afab683","timestamp":"2025-03-08T19:13:13.733Z","userId":"67c0c577285a82c16495c63e"}
{"duration":"309ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741461193428_4waetmmk0","responseSize":"2.63 KB","statusCode":200,"timestamp":"2025-03-08T19:13:13.737Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":"Caused by :: Write conflict during plan execution and yielding is disabled. :: Please retry your operation or multi-document transaction.","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"679fdad474255ebc8afab683","timestamp":"2025-03-08T19:13:13.739Z","userId":"67c0c560285a82c16495c615"}
{"$clusterTime":{"clusterTime":{"$timestamp":"7479518871188144260"},"signature":{"hash":"VD+ZmWeSvQMwRlTIsg/ApZSTdv0=","keyId":{"high":1731944570,"low":59,"unsigned":false}}},"code":112,"codeName":"WriteConflict","level":"error","message":"Error adding user to school","ok":0,"operationTime":{"$timestamp":"7479518871188144260"},"timestamp":"2025-03-08T19:13:13.740Z"}
{"duration":"321ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1741461193435_5d8lo7l4n","responseSize":"189 Bytes","statusCode":500,"timestamp":"2025-03-08T19:13:13.756Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741461193761_kmeewl50j","timestamp":"2025-03-08T19:13:13.761Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"245ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741461193761_kmeewl50j","responseSize":"2.11 KB","statusCode":200,"timestamp":"2025-03-08T19:13:14.006Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"100"},"requestId":"req_1741461200220_07opdk4rz","timestamp":"2025-03-08T19:13:20.220Z","url":"/api/v1/users?limit=100","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"131ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741461200220_07opdk4rz","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:13:20.351Z","url":"/api/v1/users?limit=100","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741461200356_g7fsejdci","timestamp":"2025-03-08T19:13:20.356Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"228ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741461200356_g7fsejdci","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:13:20.584Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"role":"teacher","userId":"67c0c560285a82c16495c615"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741461203445_t5r67dbh7","timestamp":"2025-03-08T19:13:23.445Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"Utente aggiunto con successo alla scuola","role":"teacher","schoolId":"679fdad474255ebc8afab683","timestamp":"2025-03-08T19:13:23.722Z","userId":"67c0c560285a82c16495c615"}
{"duration":"278ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741461203445_t5r67dbh7","responseSize":"2.72 KB","statusCode":200,"timestamp":"2025-03-08T19:13:23.724Z","url":"/api/v1/schools/679fdad474255ebc8afab683/users","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741461203728_qwxwxkikd","timestamp":"2025-03-08T19:13:23.728Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"222ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741461203728_qwxwxkikd","responseSize":"2.28 KB","statusCode":200,"timestamp":"2025-03-08T19:13:23.950Z","url":"/api/v1/schools/679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1741461209593_jnklh3rjo","timestamp":"2025-03-08T19:13:29.593Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"140ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741461209593_jnklh3rjo","responseSize":"4.63 KB","statusCode":200,"timestamp":"2025-03-08T19:13:29.733Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"25","page":"1","search":"","sort":"-createdAt"},"requestId":"req_1741461210293_hbdvoki4b","timestamp":"2025-03-08T19:13:30.294Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"140ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741461210293_hbdvoki4b","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:13:30.433Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T19:17:40.315Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T19:17:40.321Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T19:17:40.362Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-08T19:17:41.296Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T19:17:41.298Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T19:17:41.301Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T19:17:41.659Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T19:17:41.664Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T19:17:41.665Z"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741461461781_cmimugycr","timestamp":"2025-03-08T19:17:41.782Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"322ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741461461781_cmimugycr","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:17:42.103Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\UserRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741461464522_c9ff7eelu","timestamp":"2025-03-08T19:17:44.522Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"User created","timestamp":"2025-03-08T19:17:53.654Z","userId":"67cc97e1236629c18b4efa52"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-08T19:17:53.777Z","expiresAt":"2025-03-09T19:17:53.777Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-08T19:17:53.777Z","token":"da2d69ef-c641-4750-b0e4-4a39197d14d3-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T19:17:53.895Z"}
{"duration":"12730ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741461464522_c9ff7eelu","responseSize":"11.64 KB","statusCode":200,"timestamp":"2025-03-08T19:17:57.252Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741461477261_u5ehj6gid","timestamp":"2025-03-08T19:17:57.261Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"220ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741461477261_u5ehj6gid","responseSize":"102.1 KB","statusCode":200,"timestamp":"2025-03-08T19:17:57.481Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741461480858_1bby3c168","timestamp":"2025-03-08T19:18:00.858Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T19:18:05.598Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T19:18:05.603Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T19:18:05.701Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cc97f0f3e461b3bc18add3","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T19:18:08.909Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-08T19:18:09.345Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cc97f1f3e461b3bc18ae1d"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-08T19:18:09.554Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc97f1f3e461b3bc18ae29","timestamp":"2025-03-08T19:18:09.956Z","userId":"67cc97f1f3e461b3bc18ae2f"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc97f2f3e461b3bc18ae3d","timestamp":"2025-03-08T19:18:10.279Z","userId":"67cc97f2f3e461b3bc18ae43"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc97f2f3e461b3bc18ae50","timestamp":"2025-03-08T19:18:10.484Z","userId":"67cc97f2f3e461b3bc18ae4d"}
{"context":{"createClasses":true,"schoolId":"67cc97f3f3e461b3bc18ae89","yearData":{"createdBy":"67cc97f2f3e461b3bc18ae83","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:11.115Z"}
{"context":{"createClasses":false,"schoolId":"67cc97f3f3e461b3bc18ae9a","yearData":{"createdBy":"67cc97f3f3e461b3bc18ae94","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:11.329Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc97f3f3e461b3bc18aebb","timestamp":"2025-03-08T19:18:11.736Z","userId":"67cc97f3f3e461b3bc18aeb8"}
{"context":{"schoolId":"67cc97f3f3e461b3bc18aecc","userId":"67cc97f3f3e461b3bc18aec6"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:11.953Z"}
{"context":{"schoolId":"67cc97f4f3e461b3bc18aedd","userId":"67cc97f3f3e461b3bc18aed7"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:12.167Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc97f4f3e461b3bc18aeee","sectionName":"A","timestamp":"2025-03-08T19:18:12.370Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc97f4f3e461b3bc18aeff","sectionName":"Z","timestamp":"2025-03-08T19:18:12.582Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc97f4f3e461b3bc18af10","sectionName":"A","timestamp":"2025-03-08T19:18:12.785Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc97f4f3e461b3bc18af21","timestamp":"2025-03-08T19:18:12.993Z","userId":"67cc97f4f3e461b3bc18af1e"}
{"context":{"createClasses":false,"schoolId":"67cc97f5f3e461b3bc18af48","yearData":{"createdBy":"67cc97f5f3e461b3bc18af42","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:13.439Z"}
{"context":{"schoolId":"67cc97f5f3e461b3bc18af59","yearId":"67cc97f5f3e461b3bc18af5a"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:13.643Z"}
{"context":{"institutionType":"none","schoolId":"67cc97f6f3e461b3bc18af80","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:14.066Z"}
{"context":{"institutionType":"scientific","schoolId":"67cc97f6f3e461b3bc18af91","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:14.274Z"}
{"context":{"schoolId":"67cc97f6f3e461b3bc18afa2"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:14.479Z"}
{"context":{"schoolId":"67cc97f6f3e461b3bc18afb3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:14.679Z"}
{"context":{"schoolId":"67cc97f6f3e461b3bc18afb3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:14.682Z"}
{"context":{"schoolId":"67cc97f6f3e461b3bc18afc5"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:14.884Z"}
{"context":{"schoolId":"67cc97f7f3e461b3bc18afe2"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:15.091Z"}
{"context":{"schoolId":"67cc97f7f3e461b3bc18afe2","userId":"67cc97f6f3e461b3bc18afdf"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:15.096Z"}
{"context":{"schoolId":"67cc97f7f3e461b3bc18aff4","userId":"67cc97f7f3e461b3bc18aff1"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:15.297Z"}
{"context":{"schoolId":"67cc97f7f3e461b3bc18b005"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:15.496Z"}
{"context":{"schoolId":"67cc97f7f3e461b3bc18b005","userId":"67cc97f7f3e461b3bc18b002"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:15.499Z"}
{"context":{"schoolId":"67cc97f7f3e461b3bc18b01c","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:1027:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:995:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-08T19:18:15.712Z"}
{"context":{"schoolId":"67cc97f7f3e461b3bc18b02c","yearId":"67cc97f7f3e461b3bc18b02d"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:15.914Z"}
{"context":{"schoolId":"67cc97f7f3e461b3bc18b02c","yearId":"67cc97f7f3e461b3bc18b02d"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:15.916Z"}
{"context":{"createClasses":false,"schoolId":"67cc97f8f3e461b3bc18b03e","yearData":{"createdBy":"67cc97f7f3e461b3bc18b038","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:16.117Z"}
{"context":{"schoolId":"67cc97f8f3e461b3bc18b04f","yearId":"67cc97f8f3e461b3bc18b050"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:16.322Z"}
{"context":{"schoolId":"67cc97f8f3e461b3bc18b04f","yearId":"67cc97f8f3e461b3bc18b050"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:16.326Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc97f8f3e461b3bc18b066","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:16.532Z","yearId":"67cc97f8f3e461b3bc18b067"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc97f8f3e461b3bc18b077","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:16.733Z","yearId":"67cc97f8f3e461b3bc18b078"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc97f8f3e461b3bc18b088","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:16.935Z","yearId":"67cc97f8f3e461b3bc18b089"}
{"context":{"schoolId":"67cc97f9f3e461b3bc18b099"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:17.137Z"}
{"context":{"schoolId":"67cc97f9f3e461b3bc18b0a9"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:17.346Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-08T19:18:17.938Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:18:17.944Z"}
{"duration":"17761ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741461480858_1bby3c168","responseSize":"106.69 KB","statusCode":200,"timestamp":"2025-03-08T19:18:18.619Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741461498628_ehs8un8qm","timestamp":"2025-03-08T19:18:18.628Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"235ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741461498628_ehs8un8qm","responseSize":"101.89 KB","statusCode":200,"timestamp":"2025-03-08T19:18:18.863Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T19:20:51.136Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T19:20:51.140Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T19:20:51.184Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-08T19:20:51.913Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T19:20:51.915Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T19:20:51.917Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T19:20:52.237Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T19:20:52.241Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T19:20:52.242Z"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741461654881_ygedysiah","timestamp":"2025-03-08T19:20:54.881Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T19:20:59.240Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T19:20:59.245Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T19:20:59.335Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cc989e845a06112d0bd3d5","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T19:21:02.728Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-08T19:21:03.163Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cc989f845a06112d0bd41f"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-08T19:21:03.374Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc989f845a06112d0bd42b","timestamp":"2025-03-08T19:21:03.678Z","userId":"67cc989f845a06112d0bd431"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc989f845a06112d0bd43f","timestamp":"2025-03-08T19:21:03.996Z","userId":"67cc989f845a06112d0bd445"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc98a0845a06112d0bd452","timestamp":"2025-03-08T19:21:04.199Z","userId":"67cc98a0845a06112d0bd44f"}
{"context":{"createClasses":true,"schoolId":"67cc98a0845a06112d0bd48b","yearData":{"createdBy":"67cc98a0845a06112d0bd485","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:04.832Z"}
{"context":{"createClasses":false,"schoolId":"67cc98a1845a06112d0bd49c","yearData":{"createdBy":"67cc98a0845a06112d0bd496","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:05.051Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc98a1845a06112d0bd4bd","timestamp":"2025-03-08T19:21:05.463Z","userId":"67cc98a1845a06112d0bd4ba"}
{"context":{"schoolId":"67cc98a1845a06112d0bd4ce","userId":"67cc98a1845a06112d0bd4c8"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:05.676Z"}
{"context":{"schoolId":"67cc98a1845a06112d0bd4df","userId":"67cc98a1845a06112d0bd4d9"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:05.888Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc98a2845a06112d0bd4f0","sectionName":"A","timestamp":"2025-03-08T19:21:06.097Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc98a2845a06112d0bd501","sectionName":"Z","timestamp":"2025-03-08T19:21:06.306Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc98a2845a06112d0bd512","sectionName":"A","timestamp":"2025-03-08T19:21:06.513Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc98a2845a06112d0bd523","timestamp":"2025-03-08T19:21:06.724Z","userId":"67cc98a2845a06112d0bd520"}
{"context":{"createClasses":false,"schoolId":"67cc98a3845a06112d0bd54a","yearData":{"createdBy":"67cc98a2845a06112d0bd544","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:07.143Z"}
{"context":{"schoolId":"67cc98a3845a06112d0bd55b","yearId":"67cc98a3845a06112d0bd55c"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:07.354Z"}
{"context":{"schoolId":"67cc98a3845a06112d0bd571","yearId":"67cc98a3845a06112d0bd577"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:07.578Z"}
{"context":{"schoolId":"67cc98a3845a06112d0bd583","yearId":"67cc98a3845a06112d0bd584"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:07.793Z"}
{"context":{"institutionType":"none","schoolId":"67cc98a4845a06112d0bd5aa","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:08.205Z"}
{"context":{"institutionType":"scientific","schoolId":"67cc98a4845a06112d0bd5bb","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:08.408Z"}
{"context":{"schoolId":"67cc98a4845a06112d0bd5cc"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:08.615Z"}
{"context":{"schoolId":"67cc98a4845a06112d0bd5dd"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:08.821Z"}
{"context":{"schoolId":"67cc98a4845a06112d0bd5dd"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:08.823Z"}
{"context":{"schoolId":"67cc98a5845a06112d0bd5ef"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:09.029Z"}
{"context":{"schoolId":"67cc98a5845a06112d0bd60c"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:09.240Z"}
{"context":{"schoolId":"67cc98a5845a06112d0bd60c","userId":"67cc98a5845a06112d0bd609"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:09.243Z"}
{"context":{"schoolId":"67cc98a5845a06112d0bd61e","userId":"67cc98a5845a06112d0bd61b"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:09.445Z"}
{"context":{"schoolId":"67cc98a5845a06112d0bd62f"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:09.655Z"}
{"context":{"schoolId":"67cc98a5845a06112d0bd62f","userId":"67cc98a5845a06112d0bd62c"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:09.658Z"}
{"context":{"schoolId":"67cc98a5845a06112d0bd646","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:1027:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:1030:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-08T19:21:09.862Z"}
{"context":{"schoolId":"67cc98a6845a06112d0bd656","yearId":"67cc98a6845a06112d0bd657"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:10.073Z"}
{"context":{"schoolId":"67cc98a6845a06112d0bd656","yearId":"67cc98a6845a06112d0bd657"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:10.076Z"}
{"context":{"createClasses":false,"schoolId":"67cc98a6845a06112d0bd668","yearData":{"createdBy":"67cc98a6845a06112d0bd662","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:10.292Z"}
{"context":{"schoolId":"67cc98a6845a06112d0bd679","yearId":"67cc98a6845a06112d0bd67a"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:10.503Z"}
{"context":{"schoolId":"67cc98a6845a06112d0bd679","yearId":"67cc98a6845a06112d0bd67a"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:10.506Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc98a6845a06112d0bd690","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:10.721Z","yearId":"67cc98a6845a06112d0bd691"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc98a6845a06112d0bd6a1","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:10.923Z","yearId":"67cc98a6845a06112d0bd6a2"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc98a7845a06112d0bd6b2","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:11.140Z","yearId":"67cc98a7845a06112d0bd6b3"}
{"context":{"schoolId":"67cc98a7845a06112d0bd6c3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:11.348Z"}
{"context":{"schoolId":"67cc98a7845a06112d0bd6d3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:11.553Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-08T19:21:12.179Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:21:12.187Z"}
{"duration":"18195ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741461654881_ygedysiah","responseSize":"108.46 KB","statusCode":200,"timestamp":"2025-03-08T19:21:13.076Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741461673085_ahqkwd7bv","timestamp":"2025-03-08T19:21:13.085Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"218ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741461673085_ahqkwd7bv","responseSize":"101.96 KB","statusCode":200,"timestamp":"2025-03-08T19:21:13.303Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"20","testType":""},"requestId":"req_1741462921640_60947x7or","timestamp":"2025-03-08T19:42:01.640Z","url":"/api/v1/system-tests/history?testType=&limit=20","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"519ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741462921640_60947x7or","responseSize":"1.25 MB","statusCode":200,"timestamp":"2025-03-08T19:42:02.159Z","url":"/api/v1/system-tests/history?testType=&limit=20","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T19:42:30.348Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T19:42:30.353Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T19:42:30.398Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-08T19:42:31.160Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T19:42:31.161Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T19:42:31.163Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T19:42:31.476Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T19:42:31.480Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T19:42:31.480Z"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1741462954099_z0r1yqzqv","timestamp":"2025-03-08T19:42:34.099Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"216ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741462954099_z0r1yqzqv","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:42:34.315Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741462963052_34j67lv23","timestamp":"2025-03-08T19:42:43.052Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"215ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741462963052_34j67lv23","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:42:43.267Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741462966530_gcvr3umxe","timestamp":"2025-03-08T19:42:46.531Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T19:42:50.696Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T19:42:50.699Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T19:42:50.803Z"}
{"context":{"criteria":{"name":"Test School"},"options":{}},"errorMessage":"criterias is not defined","errorName":"ReferenceError","level":"error","message":"Errore in SchoolRepository.findOne:","stack":"ReferenceError: criterias is not defined\n    at SchoolRepository.findOne (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:28:44)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:158:51)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-08T19:42:52.431Z"}
{"context":{"criteria":{"name":"Non-existent School"},"options":{}},"errorMessage":"criterias is not defined","errorName":"ReferenceError","level":"error","message":"Errore in SchoolRepository.findOne:","stack":"ReferenceError: criterias is not defined\n    at SchoolRepository.findOne (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:28:44)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:165:51)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-08T19:42:52.903Z"}
{"context":{"criteria":{"_id":"67cc9dbdf8aad54b66f36b47"},"options":{"populate":"manager"}},"errorMessage":"criterias is not defined","errorName":"ReferenceError","level":"error","message":"Errore in SchoolRepository.findOne:","stack":"ReferenceError: criterias is not defined\n    at SchoolRepository.findOne (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:28:44)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:171:51)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-08T19:42:53.148Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cc9dbef8aad54b66f36bad","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T19:42:54.489Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-08T19:42:54.943Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cc9dbff8aad54b66f36bf7"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-08T19:42:55.152Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc9dbff8aad54b66f36c03","timestamp":"2025-03-08T19:42:55.471Z","userId":"67cc9dbff8aad54b66f36c09"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc9dbff8aad54b66f36c17","timestamp":"2025-03-08T19:42:55.790Z","userId":"67cc9dbff8aad54b66f36c1d"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc9dbff8aad54b66f36c2a","timestamp":"2025-03-08T19:42:56.007Z","userId":"67cc9dbff8aad54b66f36c27"}
{"context":{"createClasses":true,"schoolId":"67cc9dc0f8aad54b66f36c63","yearData":{"createdBy":"67cc9dc0f8aad54b66f36c5d","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:42:56.624Z"}
{"context":{"createClasses":false,"schoolId":"67cc9dc0f8aad54b66f36c74","yearData":{"createdBy":"67cc9dc0f8aad54b66f36c6e","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:42:56.826Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc9dc1f8aad54b66f36c95","timestamp":"2025-03-08T19:42:57.228Z","userId":"67cc9dc1f8aad54b66f36c92"}
{"context":{"schoolId":"67cc9dc1f8aad54b66f36ca6","userId":"67cc9dc1f8aad54b66f36ca0"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:42:57.438Z"}
{"context":{"schoolId":"67cc9dc1f8aad54b66f36cb7","userId":"67cc9dc1f8aad54b66f36cb1"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:42:57.648Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc9dc1f8aad54b66f36cc8","sectionName":"A","timestamp":"2025-03-08T19:42:57.853Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc9dc2f8aad54b66f36cd9","sectionName":"Z","timestamp":"2025-03-08T19:42:58.072Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc9dc2f8aad54b66f36cea","sectionName":"A","timestamp":"2025-03-08T19:42:58.275Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc9dc2f8aad54b66f36cfb","timestamp":"2025-03-08T19:42:58.476Z","userId":"67cc9dc2f8aad54b66f36cf8"}
{"context":{"createClasses":false,"schoolId":"67cc9dc2f8aad54b66f36d22","yearData":{"createdBy":"67cc9dc2f8aad54b66f36d1c","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:42:58.885Z"}
{"context":{"schoolId":"67cc9dc3f8aad54b66f36d33","yearId":"67cc9dc3f8aad54b66f36d34"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:42:59.087Z"}
{"context":{"schoolId":"67cc9dc3f8aad54b66f36d49","yearId":"67cc9dc3f8aad54b66f36d4f"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:42:59.285Z"}
{"context":{"schoolId":"67cc9dc3f8aad54b66f36d5b","yearId":"67cc9dc3f8aad54b66f36d5c"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:42:59.486Z"}
{"context":{"institutionType":"none","schoolId":"67cc9dc3f8aad54b66f36d82","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:42:59.888Z"}
{"context":{"institutionType":"scientific","schoolId":"67cc9dc4f8aad54b66f36d93","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:00.108Z"}
{"context":{"schoolId":"67cc9dc4f8aad54b66f36da4"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:00.331Z"}
{"context":{"schoolId":"67cc9dc4f8aad54b66f36db5"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:00.528Z"}
{"context":{"schoolId":"67cc9dc4f8aad54b66f36db5"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:00.531Z"}
{"context":{"schoolId":"67cc9dc4f8aad54b66f36dc7"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:00.732Z"}
{"context":{"schoolId":"67cc9dc4f8aad54b66f36de4"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:00.946Z"}
{"context":{"schoolId":"67cc9dc4f8aad54b66f36de4","userId":"67cc9dc4f8aad54b66f36de1"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:00.950Z"}
{"context":{"schoolId":"67cc9dc5f8aad54b66f36df6","userId":"67cc9dc5f8aad54b66f36df3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:01.153Z"}
{"context":{"schoolId":"67cc9dc5f8aad54b66f36e07"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:01.351Z"}
{"context":{"schoolId":"67cc9dc5f8aad54b66f36e07","userId":"67cc9dc5f8aad54b66f36e04"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:01.354Z"}
{"context":{"schoolId":"67cc9dc5f8aad54b66f36e1e","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:1027:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:1030:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-08T19:43:01.552Z"}
{"context":{"schoolId":"67cc9dc5f8aad54b66f36e2e","yearId":"67cc9dc5f8aad54b66f36e2f"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:01.754Z"}
{"context":{"schoolId":"67cc9dc5f8aad54b66f36e2e","yearId":"67cc9dc5f8aad54b66f36e2f"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:01.758Z"}
{"context":{"createClasses":false,"schoolId":"67cc9dc5f8aad54b66f36e40","yearData":{"createdBy":"67cc9dc5f8aad54b66f36e3a","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:01.998Z"}
{"context":{"schoolId":"67cc9dc6f8aad54b66f36e51","yearId":"67cc9dc6f8aad54b66f36e52"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:02.198Z"}
{"context":{"schoolId":"67cc9dc6f8aad54b66f36e51","yearId":"67cc9dc6f8aad54b66f36e52"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:02.201Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc9dc6f8aad54b66f36e68","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:02.417Z","yearId":"67cc9dc6f8aad54b66f36e69"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc9dc6f8aad54b66f36e79","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:02.611Z","yearId":"67cc9dc6f8aad54b66f36e7a"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc9dc6f8aad54b66f36e8a","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:02.812Z","yearId":"67cc9dc6f8aad54b66f36e8b"}
{"context":{"schoolId":"67cc9dc7f8aad54b66f36e9b"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:03.012Z"}
{"context":{"schoolId":"67cc9dc7f8aad54b66f36eab"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:03.213Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-08T19:43:03.804Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:03.810Z"}
{"duration":"18086ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741462966530_gcvr3umxe","responseSize":"109.84 KB","statusCode":200,"timestamp":"2025-03-08T19:43:04.617Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741462984626_6ilvzqmse","timestamp":"2025-03-08T19:43:04.626Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"210ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741462984626_6ilvzqmse","responseSize":"102.11 KB","statusCode":200,"timestamp":"2025-03-08T19:43:04.836Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T19:43:29.042Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T19:43:29.049Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T19:43:29.097Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-08T19:43:29.908Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-08T19:43:29.909Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-08T19:43:29.911Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-08T19:43:30.256Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-08T19:43:30.262Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-08T19:43:30.263Z"}
{"body":{"testFile":"repositories\\SchoolRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741463013119_rbomyai66","timestamp":"2025-03-08T19:43:33.120Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T19:43:37.553Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T19:43:37.558Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T19:43:37.658Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cc9dec9da6b2726f528513","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-08T19:43:41.017Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-08T19:43:41.442Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cc9ded9da6b2726f52855d"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-08T19:43:41.648Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc9ded9da6b2726f528569","timestamp":"2025-03-08T19:43:41.951Z","userId":"67cc9ded9da6b2726f52856f"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc9dee9da6b2726f52857d","timestamp":"2025-03-08T19:43:42.281Z","userId":"67cc9dee9da6b2726f528583"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc9dee9da6b2726f528590","timestamp":"2025-03-08T19:43:42.485Z","userId":"67cc9dee9da6b2726f52858d"}
{"context":{"createClasses":true,"schoolId":"67cc9def9da6b2726f5285c9","yearData":{"createdBy":"67cc9dee9da6b2726f5285c3","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:43.111Z"}
{"context":{"createClasses":false,"schoolId":"67cc9def9da6b2726f5285da","yearData":{"createdBy":"67cc9def9da6b2726f5285d4","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:43.320Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc9def9da6b2726f5285fb","timestamp":"2025-03-08T19:43:43.735Z","userId":"67cc9def9da6b2726f5285f8"}
{"context":{"schoolId":"67cc9def9da6b2726f52860c","userId":"67cc9def9da6b2726f528606"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:43.953Z"}
{"context":{"schoolId":"67cc9df09da6b2726f52861d","userId":"67cc9def9da6b2726f528617"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:44.168Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc9df09da6b2726f52862e","sectionName":"A","timestamp":"2025-03-08T19:43:44.376Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc9df09da6b2726f52863f","sectionName":"Z","timestamp":"2025-03-08T19:43:44.584Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cc9df09da6b2726f528650","sectionName":"A","timestamp":"2025-03-08T19:43:44.824Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cc9df19da6b2726f528661","timestamp":"2025-03-08T19:43:45.061Z","userId":"67cc9df09da6b2726f52865e"}
{"context":{"createClasses":false,"schoolId":"67cc9df19da6b2726f528688","yearData":{"createdBy":"67cc9df19da6b2726f528682","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:45.477Z"}
{"context":{"schoolId":"67cc9df19da6b2726f528699","yearId":"67cc9df19da6b2726f52869a"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:45.686Z"}
{"context":{"schoolId":"67cc9df19da6b2726f5286af","yearId":"67cc9df19da6b2726f5286b5"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:45.926Z"}
{"context":{"schoolId":"67cc9df29da6b2726f5286c1","yearId":"67cc9df29da6b2726f5286c2"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:46.152Z"}
{"context":{"institutionType":"none","schoolId":"67cc9df29da6b2726f5286e8","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:46.568Z"}
{"context":{"institutionType":"scientific","schoolId":"67cc9df29da6b2726f5286f9","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:46.776Z"}
{"context":{"schoolId":"67cc9df29da6b2726f52870a"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:46.986Z"}
{"context":{"schoolId":"67cc9df39da6b2726f52871b"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:47.197Z"}
{"context":{"schoolId":"67cc9df39da6b2726f52871b"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:47.199Z"}
{"context":{"schoolId":"67cc9df39da6b2726f52872d"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:47.407Z"}
{"context":{"schoolId":"67cc9df39da6b2726f52874a"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:47.611Z"}
{"context":{"schoolId":"67cc9df39da6b2726f52874a","userId":"67cc9df39da6b2726f528747"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:47.613Z"}
{"context":{"schoolId":"67cc9df39da6b2726f52875c","userId":"67cc9df39da6b2726f528759"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:47.814Z"}
{"context":{"schoolId":"67cc9df49da6b2726f52876d"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:48.025Z"}
{"context":{"schoolId":"67cc9df49da6b2726f52876d","userId":"67cc9df39da6b2726f52876a"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:48.028Z"}
{"context":{"schoolId":"67cc9df49da6b2726f528784","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:1027:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:1030:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-08T19:43:48.229Z"}
{"context":{"schoolId":"67cc9df49da6b2726f528794","yearId":"67cc9df49da6b2726f528795"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:48.444Z"}
{"context":{"schoolId":"67cc9df49da6b2726f528794","yearId":"67cc9df49da6b2726f528795"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:48.447Z"}
{"context":{"createClasses":false,"schoolId":"67cc9df49da6b2726f5287a6","yearData":{"createdBy":"67cc9df49da6b2726f5287a0","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:48.656Z"}
{"context":{"schoolId":"67cc9df49da6b2726f5287b7","yearId":"67cc9df49da6b2726f5287b8"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:48.863Z"}
{"context":{"schoolId":"67cc9df49da6b2726f5287b7","yearId":"67cc9df49da6b2726f5287b8"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:48.866Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc9df59da6b2726f5287ce","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:49.076Z","yearId":"67cc9df59da6b2726f5287cf"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc9df59da6b2726f5287df","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:49.288Z","yearId":"67cc9df59da6b2726f5287e0"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cc9df59da6b2726f5287f0","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:49.492Z","yearId":"67cc9df59da6b2726f5287f1"}
{"context":{"schoolId":"67cc9df59da6b2726f528801"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:49.698Z"}
{"context":{"schoolId":"67cc9df59da6b2726f528811"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:49.898Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-08T19:43:50.516Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:43:50.524Z"}
{"duration":"18230ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741463013119_rbomyai66","responseSize":"108.46 KB","statusCode":200,"timestamp":"2025-03-08T19:43:51.349Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741463031359_45shkayp7","timestamp":"2025-03-08T19:43:51.359Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"224ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741463031359_45shkayp7","responseSize":"101.96 KB","statusCode":200,"timestamp":"2025-03-08T19:43:51.583Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{"testFile":"repositories\\ClassRepository.test.js"},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"POST","query":{},"requestId":"req_1741463059403_jajnwlyqx","timestamp":"2025-03-08T19:44:19.403Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-08T19:44:23.699Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-08T19:44:23.703Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-08T19:44:23.791Z"}
{"classId":"67cc9e19b5909350c3ca3333","level":"info","message":"Classe creata con successo:","schoolId":"67cc9e19b5909350c3ca332f","timestamp":"2025-03-08T19:44:25.202Z"}
{"context":{"data":{"academicYear":"2023/2024","section":"A","year":1}},"errorMessage":"Dati classe incompleti","level":"error","message":"Errore in ClassRepository.create:","timestamp":"2025-03-08T19:44:25.354Z"}
{"context":{"id":"67cc9e19b5909350c3ca3392","options":{}},"errorMessage":"Class non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in ClassRepository.findById:","stack":"DocumentNotFoundError: Class non trovato\n    at ClassRepository.findById (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:53:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\ClassRepository.test.js:163:17)","timestamp":"2025-03-08T19:44:25.798Z"}
{"context":{"id":"invalid-id-format","options":{}},"errorMessage":"Cast to ObjectId failed for value \"invalid-id-format\" (type string) at path \"_id\" for model \"Class\"","errorName":"CastError","level":"error","message":"Errore in ClassRepository.findById:","stack":"CastError: Cast to ObjectId failed for value \"invalid-id-format\" (type string) at path \"_id\" for model \"Class\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOne (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2533:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at ClassRepository.findById (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:49:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\ClassRepository.test.js:169:17)","timestamp":"2025-03-08T19:44:25.924Z"}
{"context":{"data":{"capacity":30,"status":"planned"},"id":"67cc9e1ab5909350c3ca33b2"},"errorMessage":"Validation failed: capacity: Parameter \"obj\" to Document() must be an object, got \"School\" (type string)","errorName":"ValidationError","level":"error","message":"Errore in ClassRepository.update:","stack":"ValidationError: Validation failed: capacity: Parameter \"obj\" to Document() must be an object, got \"School\" (type string)\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-08T19:44:26.058Z"}
{"context":{"data":{"capacity":30},"id":"67cc9e1ab5909350c3ca33ca"},"errorMessage":"Validation failed: capacity: Parameter \"obj\" to Document() must be an object, got \"School\" (type string)","errorName":"ValidationError","level":"error","message":"Errore in ClassRepository.update:","stack":"ValidationError: Validation failed: capacity: Parameter \"obj\" to Document() must be an object, got \"School\" (type string)\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-08T19:44:26.184Z"}
{"context":{"id":"67cc9e1ab5909350c3ca33f1"},"errorMessage":"Class non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in ClassRepository.delete:","stack":"DocumentNotFoundError: Class non trovato\n    at ClassRepository.delete (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:147:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\ClassRepository.test.js:248:17)","timestamp":"2025-03-08T19:44:26.438Z"}
{"context":{"criteria":{"academicYear":"2023/2024","schoolId":"invalid-id","section":"A","year":1}},"errorMessage":"ID scuola non valido","level":"error","message":"Errore in ClassRepository.exists:","timestamp":"2025-03-08T19:44:27.174Z"}
{"context":{"fromYear":"2023/2024","toYear":"2024/2025"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in ClassRepository.promoteStudents:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:44:28.396Z"}
{"context":{"fromYear":"2023/2024","toYear":"2024/2025"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in ClassRepository.promoteStudents:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-08T19:44:28.528Z"}
{"duration":"9738ms","ip":"::1","level":"http","message":"Risposta inviata","method":"POST","requestId":"req_1741463059403_jajnwlyqx","responseSize":"105.72 KB","statusCode":200,"timestamp":"2025-03-08T19:44:29.141Z","url":"/api/v1/system-tests/unit/run","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741463069148_r9j7egz7w","timestamp":"2025-03-08T19:44:29.148Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"169ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741463069148_r9j7egz7w","responseSize":"147.06 KB","statusCode":200,"timestamp":"2025-03-08T19:44:29.318Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"20","testType":""},"requestId":"req_1741463084700_2uj8ckykh","timestamp":"2025-03-08T19:44:44.700Z","url":"/api/v1/system-tests/history?testType=&limit=20","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"587ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741463084700_2uj8ckykh","responseSize":"1.51 MB","statusCode":200,"timestamp":"2025-03-08T19:44:45.287Z","url":"/api/v1/system-tests/history?testType=&limit=20","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741463087432_0xxws1dht","timestamp":"2025-03-08T19:44:47.432Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"171ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741463087432_0xxws1dht","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:44:47.603Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741463121626_j0vftd7pm","timestamp":"2025-03-08T19:45:21.627Z","url":"/api/v1/system-tests/integration","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"105ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741463121626_j0vftd7pm","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:45:21.731Z","url":"/api/v1/system-tests/integration","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741463122602_c236a95z8","timestamp":"2025-03-08T19:45:22.602Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"158ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741463122602_c236a95z8","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:45:22.760Z","url":"/api/v1/system-tests/unit","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"25","page":"1","search":"","sort":"-createdAt"},"requestId":"req_1741463165964_3cg1eux8f","timestamp":"2025-03-08T19:46:05.964Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"166ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741463165964_3cg1eux8f","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:46:06.130Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1741463167684_hmy8z4k4q","timestamp":"2025-03-08T19:46:07.684Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"154ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741463167684_hmy8z4k4q","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:46:07.838Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType=","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{},"requestId":"req_1741463168607_86x7ykhdv","timestamp":"2025-03-08T19:46:08.607Z","url":"/api/v1/classes","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"213ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741463168607_86x7ykhdv","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:46:08.820Z","url":"/api/v1/classes","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"schoolId":"679fdad474255ebc8afab683"},"requestId":"req_1741463169908_n660wjtp0","timestamp":"2025-03-08T19:46:09.908Z","url":"/api/v1/classes?schoolId=679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"body":{},"ip":"::1","level":"http","message":"Richiesta ricevuta","method":"GET","query":{"limit":"50","page":"1"},"requestId":"req_1741463169916_766mq9zer","timestamp":"2025-03-08T19:46:09.916Z","url":"/api/v1/students?page=1&limit=50","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"210ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741463169916_766mq9zer","responseSize":"0 Bytes","statusCode":304,"timestamp":"2025-03-08T19:46:10.126Z","url":"/api/v1/students?page=1&limit=50","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"duration":"232ms","ip":"::1","level":"http","message":"Risposta inviata","method":"GET","requestId":"req_1741463169908_n660wjtp0","responseSize":"11.51 KB","statusCode":200,"timestamp":"2025-03-08T19:46:10.140Z","url":"/api/v1/classes?schoolId=679fdad474255ebc8afab683","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}

{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T15:14:03.369Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T15:14:03.378Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T15:14:03.456Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T15:14:04.711Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T15:14:04.713Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T15:14:04.715Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T15:14:05.639Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T15:14:05.656Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T15:14:05.657Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T15:17:25.809Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T15:17:25.817Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T15:17:25.895Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-10T15:17:27.551Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T15:17:27.553Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T15:17:27.556Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T15:17:28.100Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T15:17:28.110Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T15:17:28.111Z"}
{"classesUpdated":0,"level":"info","message":"Utente rimosso con successo dalla scuola","schoolId":"679fdad474255ebc8afab683","studentsUpdated":0,"timestamp":"2025-03-10T15:18:29.932Z","userId":"67c0c577285a82c16495c63e"}
{"assignedBy":"677bfe44f6789c907c9f3766","classId":"679fdad474255ebc8afab6a4","level":"info","message":"Tests assigned to all students in class:","testsCount":3,"timestamp":"2025-03-10T15:18:51.323Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","classId":"679fdad474255ebc8afab6a4","level":"info","message":"Tests assigned successfully to class:","testsCount":3,"timestamp":"2025-03-10T15:18:51.326Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T15:24:49.985Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T15:24:49.998Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T15:24:50.110Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T15:24:51.596Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T15:24:51.600Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T15:24:51.608Z"}
{"error":"Cannot read properties of undefined (reading 'bind')","level":"error","message":"Errore durante l'avvio del server:","stack":"TypeError: Cannot read properties of undefined (reading 'bind')\n    at createTestRouter (C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\testRoutes.js:197:51)\n    at startServer (C:\\Users\\ricca\\Desktop\\BSc\\src\\app.js:330:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T15:24:51.998Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T15:27:43.100Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T15:27:43.117Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T15:27:43.189Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-10T15:27:44.690Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T15:27:44.694Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T15:27:44.700Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T15:27:45.223Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T15:27:45.232Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T15:27:45.233Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T15:34:12.195Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T15:34:12.210Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T15:34:12.358Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T15:34:14.179Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T15:34:14.181Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T15:34:14.184Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T15:34:14.604Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T15:34:14.612Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T15:34:14.613Z"}
{"level":"info","message":"User created","timestamp":"2025-03-10T15:34:47.173Z","userId":"67cf0696ba1648dd2aa7485f"}
{"hasClasses":false,"hasStudents":false,"level":"info","message":"Found user to delete","role":"teacher","timestamp":"2025-03-10T15:34:52.193Z","userId":"67cf0696ba1648dd2aa7485f"}
{"level":"info","message":"User deleted successfully","timestamp":"2025-03-10T15:34:52.544Z","userId":"67cf0696ba1648dd2aa7485f"}
{"level":"info","message":"User deleted","success":true,"timestamp":"2025-03-10T15:34:52.546Z","userId":"67cf0696ba1648dd2aa7485f"}
{"level":"info","message":"Changing user status for 67cf0696ba1648dd2aa7485f","timestamp":"2025-03-10T15:34:58.210Z","updateData":{"status":"inactive"}}
{"level":"info","message":"User status updated successfully for 67cf0696ba1648dd2aa7485f","newStatus":"inactive","timestamp":"2025-03-10T15:34:58.290Z"}
{"level":"info","message":"User status changed","status":"inactive","timestamp":"2025-03-10T15:34:58.293Z","userId":"67cf0696ba1648dd2aa7485f"}
{"level":"info","message":"User created","timestamp":"2025-03-10T15:43:35.714Z","userId":"67cf08a73764bd8734aaf23c"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-10T15:43:36.186Z","expiresAt":"2025-03-11T15:43:36.186Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-10T15:43:36.186Z","token":"c7f83c69-e493-47ac-85ff-5d5f396464b3-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T15:43:36.630Z"}
{"level":"info","message":"Richiesta login studente","timestamp":"2025-03-10T15:45:38.786Z","username":"piero@matest.it"}
{"level":"info","message":"Tentativo di autenticazione studente","timestamp":"2025-03-10T15:45:38.788Z","username":"piero@matest.it"}
{"level":"info","message":"Primo accesso rilevato","studentId":"67c4908d647e9de1d9422ed8","timestamp":"2025-03-10T15:45:38.813Z","username":"piero@matest.it"}
{"level":"warn","message":"Password temporanea non valida al primo accesso","timestamp":"2025-03-10T15:45:39.083Z","username":"piero@matest.it"}
{"error":"Password temporanea non valida","level":"error","message":"Errore durante l'autenticazione dello studente","timestamp":"2025-03-10T15:45:39.086Z","username":"piero@matest.it"}
{"error":"Password temporanea non valida","level":"error","message":"Errore durante il login dello studente","timestamp":"2025-03-10T15:45:39.088Z"}
{"error":"Password temporanea non valida","level":"error","message":"StudentAuth error:","method":"POST","path":"/login","timestamp":"2025-03-10T15:45:39.092Z"}
{"duration":"318ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1741621538777_p9ogo72he","responseSize":"89 Bytes","statusCode":401,"timestamp":"2025-03-10T15:45:39.095Z","url":"/api/v1/student-auth/login","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"Nessuna password fornita, reindirizzando a generateCredentials","timestamp":"2025-03-10T15:46:02.097Z"}
{"level":"info","message":"Richiesta generazione credenziali studente","studentId":"67c4908d647e9de1d9422ed8","timestamp":"2025-03-10T15:46:02.099Z"}
{"level":"info","message":"Generazione credenziali per studente","studentId":"67c4908d647e9de1d9422ed8","timestamp":"2025-03-10T15:46:02.100Z"}
{"level":"info","message":"Credenziali generate con successo","studentId":"67c4908d647e9de1d9422ed8","timestamp":"2025-03-10T15:46:02.548Z"}
{"level":"info","message":"Richiesta login studente","timestamp":"2025-03-10T15:46:09.645Z","username":"piero@matest.it"}
{"level":"info","message":"Tentativo di autenticazione studente","timestamp":"2025-03-10T15:46:09.646Z","username":"piero@matest.it"}
{"level":"info","message":"Primo accesso rilevato","studentId":"67c4908d647e9de1d9422ed8","timestamp":"2025-03-10T15:46:09.667Z","username":"piero@matest.it"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T16:07:23.674Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T16:07:23.678Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T16:07:23.731Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T16:07:24.686Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T16:07:24.688Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T16:07:24.690Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T16:07:25.083Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T16:07:25.091Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T16:07:25.092Z"}
{"level":"info","message":"Richiesta login studente","timestamp":"2025-03-10T16:09:20.927Z","username":"piero@matest.it"}
{"level":"info","message":"Tentativo di autenticazione studente","timestamp":"2025-03-10T16:09:20.928Z","username":"piero@matest.it"}
{"level":"info","message":"Primo accesso rilevato","studentId":"67c4908d647e9de1d9422ed8","timestamp":"2025-03-10T16:09:20.951Z","username":"piero@matest.it"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T16:09:42.080Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T16:09:42.084Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T16:09:42.257Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-10T16:09:43.413Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T16:09:43.416Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T16:09:43.421Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T16:09:43.823Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T16:09:43.834Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T16:09:43.835Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T16:10:30.394Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T16:10:30.400Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T16:10:30.445Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T16:10:31.217Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T16:10:31.219Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T16:10:31.221Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T16:10:31.533Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T16:10:31.539Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T16:10:31.540Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T16:15:54.864Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T16:15:54.869Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T16:15:54.917Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-10T16:15:55.794Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T16:15:55.795Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T16:15:55.797Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T16:15:56.150Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T16:15:56.155Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T16:15:56.156Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T16:16:33.704Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T16:16:33.710Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T16:16:33.758Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-10T16:16:34.615Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T16:16:34.616Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T16:16:34.618Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T16:16:34.924Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T16:16:34.930Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T16:16:34.931Z"}
{"error":"ID test mancante","level":"error","message":"Test Route Error:","method":"GET","path":"/67cf02dba19e330f246436e7","timestamp":"2025-03-10T16:17:21.969Z","userId":"677bfe44f6789c907c9f3766"}
{"duration":"122ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"GET","requestId":"req_1741623441851_4h47cnyyr","responseSize":"92 Bytes","statusCode":500,"timestamp":"2025-03-10T16:17:21.973Z","url":"/api/v1/tests/67cf02dba19e330f246436e7","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":"ID test mancante","level":"error","message":"Test Route Error:","method":"GET","path":"/67cf02dba19e330f246436e7","timestamp":"2025-03-10T16:17:25.031Z","userId":"677bfe44f6789c907c9f3766"}
{"duration":"116ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"GET","requestId":"req_1741623444920_tl88x2j6x","responseSize":"92 Bytes","statusCode":500,"timestamp":"2025-03-10T16:17:25.036Z","url":"/api/v1/tests/67cf02dba19e330f246436e7","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":"ID test mancante","level":"error","message":"Test Route Error:","method":"GET","path":"/67cca0566731679c15323be1","timestamp":"2025-03-10T16:18:44.041Z","userId":"677bfe44f6789c907c9f3766"}
{"duration":"120ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"GET","requestId":"req_1741623523924_54h80uqo6","responseSize":"92 Bytes","statusCode":500,"timestamp":"2025-03-10T16:18:44.044Z","url":"/api/v1/tests/67cca0566731679c15323be1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T16:19:25.586Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T16:19:25.592Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T16:19:25.639Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T16:19:26.500Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T16:19:26.502Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T16:19:26.503Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T16:19:26.823Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T16:19:26.832Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T16:19:26.833Z"}
{"error":"ID test mancante","level":"error","message":"Test Route Error:","method":"GET","path":"/67cca0566731679c15323be1","timestamp":"2025-03-10T16:19:48.487Z","userId":"677bfe44f6789c907c9f3766"}
{"duration":"116ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"GET","requestId":"req_1741623588374_ovjwyh3yx","responseSize":"92 Bytes","statusCode":500,"timestamp":"2025-03-10T16:19:48.493Z","url":"/api/v1/tests/67cca0566731679c15323be1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":{"message":"Token non più valido","metadata":{}},"level":"error","message":"Logout error","timestamp":"2025-03-10T16:19:53.685Z"}
{"error":{"message":"Token non più valido","metadata":{}},"level":"error","message":"Logout failed","timestamp":"2025-03-10T16:19:53.686Z"}
{"error":{},"level":"error","message":"Auth Route Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-10T16:19:53.687Z"}
{"error":{},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-10T16:19:53.688Z","userId":"677bfe44f6789c907c9f3766"}
{"duration":"62ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1741623593627_up8346bd0","responseSize":"401 Bytes","statusCode":500,"timestamp":"2025-03-10T16:19:53.689Z","url":"/api/v1/auth/logout","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"Login successful","metadata":{"ipAddress":"::1","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"},"timestamp":"2025-03-10T16:19:57.409Z","userId":"677bfe44f6789c907c9f3766"}
{"action":"login","level":"info","message":"User audit record created","timestamp":"2025-03-10T16:19:57.468Z","userId":"677bfe44f6789c907c9f3766"}
{"error":"ID test mancante","level":"error","message":"Test Route Error:","method":"GET","path":"/67cf02dba19e330f246436e6","timestamp":"2025-03-10T16:20:02.479Z","userId":"677bfe44f6789c907c9f3766"}
{"duration":"92ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"GET","requestId":"req_1741623602389_7pu8026t8","responseSize":"92 Bytes","statusCode":500,"timestamp":"2025-03-10T16:20:02.481Z","url":"/api/v1/tests/67cf02dba19e330f246436e6","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"assignedBy":"677bfe44f6789c907c9f3766","csiConfigId":"67a65a423218fb8ab7bbc040","level":"info","message":"Test assigned to student:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf1185f01d141a179f9fff","testType":"CSI","timestamp":"2025-03-10T16:21:25.767Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","level":"info","message":"Test assigned successfully:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf1185f01d141a179f9fff","timestamp":"2025-03-10T16:21:25.768Z"}
{"error":"ID test mancante","level":"error","message":"Test Route Error:","method":"GET","path":"/67cf1185f01d141a179f9fff","timestamp":"2025-03-10T16:25:51.988Z","userId":"677bfe44f6789c907c9f3766"}
{"duration":"152ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"GET","requestId":"req_1741623951841_egpne4z0x","responseSize":"92 Bytes","statusCode":500,"timestamp":"2025-03-10T16:25:51.993Z","url":"/api/v1/tests/67cf1185f01d141a179f9fff","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":"Accesso non consentito a questo test","level":"error","message":"Test Route Error:","method":"POST","path":"/67cf1185f01d141a179f9fff/revoke","timestamp":"2025-03-10T16:25:58.179Z","userId":"677bfe44f6789c907c9f3766"}
{"duration":"198ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1741623957990_kphnkh6rw","responseSize":"108 Bytes","statusCode":500,"timestamp":"2025-03-10T16:25:58.192Z","url":"/api/v1/tests/67cf1185f01d141a179f9fff/revoke","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":"ID test mancante","level":"error","message":"Test Route Error:","method":"GET","path":"/67cf1185f01d141a179f9fff","timestamp":"2025-03-10T16:26:13.348Z","userId":"677bfe44f6789c907c9f3766"}
{"duration":"119ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"GET","requestId":"req_1741623973231_iecmtsyd2","responseSize":"92 Bytes","statusCode":500,"timestamp":"2025-03-10T16:26:13.351Z","url":"/api/v1/tests/67cf1185f01d141a179f9fff","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":"ID test mancante","level":"error","message":"Test Route Error:","method":"GET","path":"/67cf1185f01d141a179f9fff","timestamp":"2025-03-10T16:30:09.934Z","userId":"677bfe44f6789c907c9f3766"}
{"duration":"302ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"GET","requestId":"req_1741624209638_6kpey3x4q","responseSize":"92 Bytes","statusCode":500,"timestamp":"2025-03-10T16:30:09.940Z","url":"/api/v1/tests/67cf1185f01d141a179f9fff","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"error":"ID test mancante","level":"error","message":"Test Route Error:","method":"GET","path":"/67cf1185f01d141a179f9fff","timestamp":"2025-03-10T16:32:32.370Z","userId":"677bfe44f6789c907c9f3766"}
{"duration":"294ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"GET","requestId":"req_1741624352093_qy6ycvl59","responseSize":"92 Bytes","statusCode":500,"timestamp":"2025-03-10T16:32:32.388Z","url":"/api/v1/tests/67cf1185f01d141a179f9fff","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"info","message":"Richiesta login studente","timestamp":"2025-03-10T16:40:07.366Z","username":"piero@matest.it"}
{"level":"info","message":"Tentativo di autenticazione studente","timestamp":"2025-03-10T16:40:07.378Z","username":"piero@matest.it"}
{"level":"info","message":"Primo accesso rilevato","studentId":"67c4908d647e9de1d9422ed8","timestamp":"2025-03-10T16:40:07.407Z","username":"piero@matest.it"}
{"error":"Accesso non consentito a questo test","level":"error","message":"Test Route Error:","method":"POST","path":"/67cf1185f01d141a179f9fff/revoke","timestamp":"2025-03-10T16:44:06.174Z","userId":"677bfe44f6789c907c9f3766"}
{"duration":"158ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1741625046022_30egg6yth","responseSize":"108 Bytes","statusCode":500,"timestamp":"2025-03-10T16:44:06.182Z","url":"/api/v1/tests/67cf1185f01d141a179f9fff/revoke","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36 Edg/134.0.0.0"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T16:53:20.505Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T16:53:20.510Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T16:53:20.558Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T16:53:21.459Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T16:53:21.460Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T16:53:21.462Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T16:53:21.831Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T16:53:21.840Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T16:53:21.841Z"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67cf1185f01d141a179f9fff","timestamp":"2025-03-10T16:54:02.432Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67cf1185f01d141a179f9fff","timestamp":"2025-03-10T16:54:02.434Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67cf1185f01d141a179f9fff","timestamp":"2025-03-10T16:54:19.258Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67cf1185f01d141a179f9fff","timestamp":"2025-03-10T16:54:19.261Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67cf1185f01d141a179f9fff","timestamp":"2025-03-10T16:54:24.956Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67cf1185f01d141a179f9fff","timestamp":"2025-03-10T16:54:24.957Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67cf1185f01d141a179f9fff","timestamp":"2025-03-10T16:54:31.281Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67cf1185f01d141a179f9fff","timestamp":"2025-03-10T16:54:31.282Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67cf02dba19e330f246436e6","timestamp":"2025-03-10T16:54:47.820Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67cf02dba19e330f246436e6","timestamp":"2025-03-10T16:54:47.820Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67cf02dba19e330f246436e6","timestamp":"2025-03-10T16:54:52.230Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67cf02dba19e330f246436e6","timestamp":"2025-03-10T16:54:52.231Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67ce078b0c7e3c19e55ddd49","timestamp":"2025-03-10T16:55:02.217Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67ce078b0c7e3c19e55ddd49","timestamp":"2025-03-10T16:55:02.219Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67ca0cedce4bd1c954512847","timestamp":"2025-03-10T16:55:11.117Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67ca0cedce4bd1c954512847","timestamp":"2025-03-10T16:55:11.118Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T17:03:01.553Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T17:03:01.558Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T17:03:01.602Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T17:03:02.557Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T17:03:02.558Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T17:03:02.560Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T17:03:02.897Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T17:03:02.901Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T17:03:02.902Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","csiConfigId":"67a65a423218fb8ab7bbc040","level":"info","message":"Test assigned to student:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf1b514c51009afa39b9a6","testType":"CSI","timestamp":"2025-03-10T17:03:13.128Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","level":"info","message":"Test assigned successfully:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf1b514c51009afa39b9a6","timestamp":"2025-03-10T17:03:13.129Z"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67cf1b514c51009afa39b9a6","timestamp":"2025-03-10T17:03:33.997Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67cf1b514c51009afa39b9a6","timestamp":"2025-03-10T17:03:33.999Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"assignedBy":"677bfe44f6789c907c9f3766","csiConfigId":"67a65a423218fb8ab7bbc040","level":"info","message":"Test assigned to student:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf1d224c51009afa39ba4c","testType":"CSI","timestamp":"2025-03-10T17:10:58.904Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","level":"info","message":"Test assigned successfully:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf1d224c51009afa39ba4c","timestamp":"2025-03-10T17:10:58.907Z"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67cf1d224c51009afa39ba4c","timestamp":"2025-03-10T17:11:05.756Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67cf1d224c51009afa39ba4c","timestamp":"2025-03-10T17:11:05.757Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T17:16:11.631Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T17:16:11.640Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T17:16:11.727Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-10T17:16:13.881Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T17:16:13.882Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T17:16:13.884Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T17:16:14.246Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T17:16:14.260Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T17:16:14.261Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","csiConfigId":"67a65a423218fb8ab7bbc040","level":"info","message":"Test assigned to student:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf1e91cb59270fe9b17fd2","testType":"CSI","timestamp":"2025-03-10T17:17:05.632Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","level":"info","message":"Test assigned successfully:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf1e91cb59270fe9b17fd2","timestamp":"2025-03-10T17:17:05.633Z"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67cf1e91cb59270fe9b17fd2","timestamp":"2025-03-10T17:17:16.689Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67cf1e91cb59270fe9b17fd2","timestamp":"2025-03-10T17:17:16.690Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T17:22:43.184Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T17:22:43.190Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T17:22:43.244Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T17:22:44.312Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T17:22:44.313Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T17:22:44.316Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T17:22:44.695Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T17:22:44.705Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T17:22:44.707Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","csiConfigId":"67a65a423218fb8ab7bbc040","level":"info","message":"Test assigned to student:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf1ff2abe1a861d17266d9","testType":"CSI","timestamp":"2025-03-10T17:22:58.577Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","level":"info","message":"Test assigned successfully:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf1ff2abe1a861d17266d9","timestamp":"2025-03-10T17:22:58.578Z"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67cf1ff2abe1a861d17266d9","timestamp":"2025-03-10T17:24:12.057Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67cf1ff2abe1a861d17266d9","timestamp":"2025-03-10T17:24:12.058Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"assignedBy":"677bfe44f6789c907c9f3766","csiConfigId":"67a65a423218fb8ab7bbc040","level":"info","message":"Test assigned to student:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf203fabe1a861d1726776","testType":"CSI","timestamp":"2025-03-10T17:24:15.521Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","level":"info","message":"Test assigned successfully:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf203fabe1a861d1726776","timestamp":"2025-03-10T17:24:15.522Z"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67cf203fabe1a861d1726776","timestamp":"2025-03-10T17:24:42.106Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67cf203fabe1a861d1726776","timestamp":"2025-03-10T17:24:42.106Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"assignedBy":"677bfe44f6789c907c9f3766","csiConfigId":"67a65a423218fb8ab7bbc040","level":"info","message":"Test assigned to student:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf2114abe1a861d172685b","testType":"CSI","timestamp":"2025-03-10T17:27:48.074Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","level":"info","message":"Test assigned successfully:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf2114abe1a861d172685b","timestamp":"2025-03-10T17:27:48.075Z"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67cf2114abe1a861d172685b","timestamp":"2025-03-10T17:31:09.525Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67cf2114abe1a861d172685b","timestamp":"2025-03-10T17:31:09.526Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"assignedBy":"677bfe44f6789c907c9f3766","csiConfigId":"67a65a423218fb8ab7bbc040","level":"info","message":"Test assigned to student:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf21e1abe1a861d1726941","testType":"CSI","timestamp":"2025-03-10T17:31:13.629Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","level":"info","message":"Test assigned successfully:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf21e1abe1a861d1726941","timestamp":"2025-03-10T17:31:13.630Z"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67cf21e1abe1a861d1726941","timestamp":"2025-03-10T17:33:17.435Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67cf21e1abe1a861d1726941","timestamp":"2025-03-10T17:33:17.436Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"assignedBy":"677bfe44f6789c907c9f3766","csiConfigId":"67a65a423218fb8ab7bbc040","level":"info","message":"Test assigned to student:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf23efabe1a861d1726a7c","testType":"CSI","timestamp":"2025-03-10T17:39:59.569Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","level":"info","message":"Test assigned successfully:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf23efabe1a861d1726a7c","timestamp":"2025-03-10T17:39:59.570Z"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67cf23efabe1a861d1726a7c","timestamp":"2025-03-10T17:40:05.952Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67cf23efabe1a861d1726a7c","timestamp":"2025-03-10T17:40:05.953Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"assignedBy":"677bfe44f6789c907c9f3766","csiConfigId":"67a65a423218fb8ab7bbc040","level":"info","message":"Test assigned to student:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf2477abe1a861d1726af9","testType":"CSI","timestamp":"2025-03-10T17:42:15.572Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","level":"info","message":"Test assigned successfully:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf2477abe1a861d1726af9","timestamp":"2025-03-10T17:42:15.573Z"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67cf2477abe1a861d1726af9","timestamp":"2025-03-10T17:42:22.599Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67cf2477abe1a861d1726af9","timestamp":"2025-03-10T17:42:22.600Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"assignedBy":"677bfe44f6789c907c9f3766","csiConfigId":"67a65a423218fb8ab7bbc040","level":"info","message":"Test assigned to student:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf2511abe1a861d1726b9f","testType":"CSI","timestamp":"2025-03-10T17:44:49.317Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","level":"info","message":"Test assigned successfully:","studentId":"67b20991d8fdac4600a0def6","testId":"67cf2511abe1a861d1726b9f","timestamp":"2025-03-10T17:44:49.318Z"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67cf2511abe1a861d1726b9f","timestamp":"2025-03-10T17:44:55.022Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67cf2511abe1a861d1726b9f","timestamp":"2025-03-10T17:44:55.023Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"level":"info","message":"Test revoked:","result":"success","testId":"67cf02dba19e330f246436e7","timestamp":"2025-03-10T17:48:59.492Z"}
{"level":"info","message":"Test revoked successfully:","testId":"67cf02dba19e330f246436e7","timestamp":"2025-03-10T17:48:59.493Z","userId":"677bfe44f6789c907c9f3766","userRole":"admin"}
{"assignedBy":"677bfe44f6789c907c9f3766","csiConfigId":"67a65a423218fb8ab7bbc040","level":"info","message":"Test assigned to student:","studentId":"67c5ae0f0d5ddf94c2fd6925","testId":"67cf260fabe1a861d1726d59","testType":"CSI","timestamp":"2025-03-10T17:49:03.170Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","level":"info","message":"Test assigned successfully:","studentId":"67c5ae0f0d5ddf94c2fd6925","testId":"67cf260fabe1a861d1726d59","timestamp":"2025-03-10T17:49:03.171Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","classId":"67ca0a03ce4bd1c954512534","level":"info","message":"Tests assigned successfully to class:","timestamp":"2025-03-10T18:04:42.005Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","classId":"679fdad474255ebc8afab6a5","level":"info","message":"Tests assigned successfully to class:","timestamp":"2025-03-10T18:05:00.402Z"}
{"classId":"679fdad474255ebc8afab6a4","level":"info","message":"Class tests revoked:","modifiedCount":2,"testType":"CSI","timestamp":"2025-03-10T18:05:17.759Z"}
{"classId":"679fdad474255ebc8afab6a4","level":"info","message":"Class tests revoked successfully:","modifiedCount":2,"timestamp":"2025-03-10T18:05:17.760Z","userId":"677bfe44f6789c907c9f3766"}
{"assignedBy":"677bfe44f6789c907c9f3766","classId":"679fdad474255ebc8afab6a4","level":"info","message":"Tests assigned to all students in class:","testsCount":3,"timestamp":"2025-03-10T18:05:21.497Z"}
{"assignedBy":"677bfe44f6789c907c9f3766","classId":"679fdad474255ebc8afab6a4","level":"info","message":"Tests assigned successfully to class:","testsCount":3,"timestamp":"2025-03-10T18:05:21.499Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T20:21:57.771Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T20:21:57.776Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T20:21:57.847Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T20:21:58.936Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T20:21:58.937Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T20:21:58.938Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T20:21:59.299Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T20:21:59.308Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T20:21:59.309Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T20:52:36.158Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T20:52:36.162Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T20:52:36.252Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cf5117c939750b4237c4bf","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T20:52:39.699Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-10T20:52:40.134Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cf5118c939750b4237c509"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-10T20:52:40.346Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5118c939750b4237c515","timestamp":"2025-03-10T20:52:40.650Z","userId":"67cf5118c939750b4237c51b"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5118c939750b4237c529","timestamp":"2025-03-10T20:52:40.966Z","userId":"67cf5118c939750b4237c52f"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5119c939750b4237c53c","timestamp":"2025-03-10T20:52:41.169Z","userId":"67cf5119c939750b4237c539"}
{"context":{"createClasses":true,"schoolId":"67cf5119c939750b4237c575","yearData":{"createdBy":"67cf5119c939750b4237c56f","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:41.770Z"}
{"context":{"createClasses":false,"schoolId":"67cf5119c939750b4237c586","yearData":{"createdBy":"67cf5119c939750b4237c580","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:41.972Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf511ac939750b4237c5a7","timestamp":"2025-03-10T20:52:42.361Z","userId":"67cf511ac939750b4237c5a4"}
{"context":{"schoolId":"67cf511ac939750b4237c5b8","userId":"67cf511ac939750b4237c5b2"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:42.560Z"}
{"context":{"schoolId":"67cf511ac939750b4237c5c9","userId":"67cf511ac939750b4237c5c3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:42.753Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf511ac939750b4237c5da","sectionName":"A","timestamp":"2025-03-10T20:52:42.951Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf511bc939750b4237c5eb","sectionName":"Z","timestamp":"2025-03-10T20:52:43.150Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf511bc939750b4237c5fc","sectionName":"A","timestamp":"2025-03-10T20:52:43.346Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf511bc939750b4237c60d","timestamp":"2025-03-10T20:52:43.537Z","userId":"67cf511bc939750b4237c60a"}
{"context":{"createClasses":false,"schoolId":"67cf511bc939750b4237c634","yearData":{"createdBy":"67cf511bc939750b4237c62e","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:43.975Z"}
{"context":{"schoolId":"67cf511cc939750b4237c645","yearId":"67cf511cc939750b4237c646"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:44.171Z"}
{"context":{"schoolId":"67cf511cc939750b4237c65b","yearId":"67cf511cc939750b4237c661"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:44.374Z"}
{"context":{"schoolId":"67cf511cc939750b4237c66d","yearId":"67cf511cc939750b4237c66e"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:44.571Z"}
{"context":{"institutionType":"none","schoolId":"67cf511cc939750b4237c694","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:44.982Z"}
{"context":{"institutionType":"scientific","schoolId":"67cf511dc939750b4237c6a5","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:45.192Z"}
{"context":{"schoolId":"67cf511dc939750b4237c6b6"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:45.400Z"}
{"context":{"schoolId":"67cf511dc939750b4237c6c7"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:45.613Z"}
{"context":{"schoolId":"67cf511dc939750b4237c6c7"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:45.615Z"}
{"context":{"schoolId":"67cf511dc939750b4237c6d9"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:45.817Z"}
{"context":{"schoolId":"67cf511ec939750b4237c6f6"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:46.027Z"}
{"context":{"schoolId":"67cf511ec939750b4237c6f6","userId":"67cf511dc939750b4237c6f3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:46.030Z"}
{"context":{"schoolId":"67cf511ec939750b4237c708","userId":"67cf511ec939750b4237c705"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:46.225Z"}
{"context":{"schoolId":"67cf511ec939750b4237c719"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:46.419Z"}
{"context":{"schoolId":"67cf511ec939750b4237c719","userId":"67cf511ec939750b4237c716"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:46.424Z"}
{"context":{"schoolId":"67cf511ec939750b4237c730","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:1027:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:1030:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-10T20:52:46.626Z"}
{"context":{"schoolId":"67cf511ec939750b4237c740","yearId":"67cf511ec939750b4237c741"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:46.839Z"}
{"context":{"schoolId":"67cf511ec939750b4237c740","yearId":"67cf511ec939750b4237c741"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:46.844Z"}
{"context":{"createClasses":false,"schoolId":"67cf511fc939750b4237c752","yearData":{"createdBy":"67cf511ec939750b4237c74c","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:47.049Z"}
{"context":{"schoolId":"67cf511fc939750b4237c763","yearId":"67cf511fc939750b4237c764"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:47.244Z"}
{"context":{"schoolId":"67cf511fc939750b4237c763","yearId":"67cf511fc939750b4237c764"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:47.247Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf511fc939750b4237c77a","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:47.447Z","yearId":"67cf511fc939750b4237c77b"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf511fc939750b4237c78b","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:47.651Z","yearId":"67cf511fc939750b4237c78c"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf511fc939750b4237c79c","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:47.856Z","yearId":"67cf511fc939750b4237c79d"}
{"context":{"schoolId":"67cf5120c939750b4237c7ad"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:48.123Z"}
{"context":{"schoolId":"67cf5120c939750b4237c7bd"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:48.370Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-10T20:52:49.061Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:52:49.108Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T20:56:27.014Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T20:56:27.018Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T20:56:27.051Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T20:56:27.957Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T20:56:27.958Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T20:56:27.960Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T20:56:28.324Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T20:56:28.328Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T20:56:28.329Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T20:56:34.646Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T20:56:34.651Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T20:56:34.744Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cf5205cfa4945c46350b99","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T20:56:37.959Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-10T20:56:38.389Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cf5206cfa4945c46350be3"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-10T20:56:38.592Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5206cfa4945c46350bef","timestamp":"2025-03-10T20:56:38.905Z","userId":"67cf5206cfa4945c46350bf5"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5207cfa4945c46350c03","timestamp":"2025-03-10T20:56:39.210Z","userId":"67cf5207cfa4945c46350c09"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5207cfa4945c46350c16","timestamp":"2025-03-10T20:56:39.411Z","userId":"67cf5207cfa4945c46350c13"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5208cfa4945c46350c81","timestamp":"2025-03-10T20:56:40.634Z","userId":"67cf5208cfa4945c46350c7e"}
{"context":{"schoolId":"67cf5208cfa4945c46350c92","userId":"67cf5208cfa4945c46350c8c"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:40.841Z"}
{"context":{"schoolId":"67cf5209cfa4945c46350ca3","userId":"67cf5208cfa4945c46350c9d"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:41.042Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf5209cfa4945c46350cb4","sectionName":"A","timestamp":"2025-03-10T20:56:41.250Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf5209cfa4945c46350cc5","sectionName":"Z","timestamp":"2025-03-10T20:56:41.451Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf5209cfa4945c46350cd6","sectionName":"A","timestamp":"2025-03-10T20:56:41.651Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5209cfa4945c46350ce7","timestamp":"2025-03-10T20:56:41.847Z","userId":"67cf5209cfa4945c46350ce4"}
{"context":{"schoolId":"67cf520acfa4945c46350d1f","yearId":"67cf520acfa4945c46350d20"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:42.456Z"}
{"context":{"schoolId":"67cf520acfa4945c46350d35","yearId":"67cf520acfa4945c46350d3b"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:42.659Z"}
{"context":{"schoolId":"67cf520acfa4945c46350d47","yearId":"67cf520acfa4945c46350d48"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:42.862Z"}
{"context":{"institutionType":"none","schoolId":"67cf520bcfa4945c46350d6e","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:43.268Z"}
{"context":{"institutionType":"scientific","schoolId":"67cf520bcfa4945c46350d7f","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:43.466Z"}
{"context":{"schoolId":"67cf520bcfa4945c46350d90"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:43.664Z"}
{"context":{"schoolId":"67cf520bcfa4945c46350da1"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:43.866Z"}
{"context":{"schoolId":"67cf520bcfa4945c46350da1"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:43.869Z"}
{"context":{"schoolId":"67cf520ccfa4945c46350db3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:44.068Z"}
{"context":{"schoolId":"67cf520ccfa4945c46350dd0"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:44.271Z"}
{"context":{"schoolId":"67cf520ccfa4945c46350dd0","userId":"67cf520ccfa4945c46350dcd"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:44.274Z"}
{"context":{"schoolId":"67cf520ccfa4945c46350de2","userId":"67cf520ccfa4945c46350ddf"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:44.472Z"}
{"context":{"schoolId":"67cf520ccfa4945c46350df3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:44.674Z"}
{"context":{"schoolId":"67cf520ccfa4945c46350df3","userId":"67cf520ccfa4945c46350df0"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:44.681Z"}
{"context":{"schoolId":"67cf520ccfa4945c46350e0a","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:1001:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:1030:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-10T20:56:44.885Z"}
{"context":{"schoolId":"67cf520dcfa4945c46350e1a","yearId":"67cf520dcfa4945c46350e1b"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:45.103Z"}
{"context":{"schoolId":"67cf520dcfa4945c46350e1a","yearId":"67cf520dcfa4945c46350e1b"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:45.105Z"}
{"context":{"schoolId":"67cf520dcfa4945c46350e3d","yearId":"67cf520dcfa4945c46350e3e"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:45.553Z"}
{"context":{"schoolId":"67cf520dcfa4945c46350e3d","yearId":"67cf520dcfa4945c46350e3e"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:45.556Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf520dcfa4945c46350e54","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:45.771Z","yearId":"67cf520dcfa4945c46350e55"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf520dcfa4945c46350e65","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:45.971Z","yearId":"67cf520dcfa4945c46350e66"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf520ecfa4945c46350e76","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:46.150Z","yearId":"67cf520ecfa4945c46350e77"}
{"context":{"schoolId":"67cf520ecfa4945c46350e87"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:46.336Z"}
{"context":{"schoolId":"67cf520ecfa4945c46350e97"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:46.512Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-10T20:56:47.040Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:56:47.045Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T20:57:42.924Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T20:57:42.928Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T20:57:42.975Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T20:57:43.749Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T20:57:43.750Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T20:57:43.752Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T20:57:44.071Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T20:57:44.074Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T20:57:44.075Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T20:57:53.143Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T20:57:53.147Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T20:57:53.242Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cf5254b10388fab5008f3e","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T20:57:57.046Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-10T20:57:57.482Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cf5255b10388fab5008f88"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-10T20:57:57.689Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5255b10388fab5008f94","timestamp":"2025-03-10T20:57:57.994Z","userId":"67cf5255b10388fab5008f9a"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5256b10388fab5008fa8","timestamp":"2025-03-10T20:57:58.323Z","userId":"67cf5256b10388fab5008fae"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5256b10388fab5008fbb","timestamp":"2025-03-10T20:57:58.530Z","userId":"67cf5256b10388fab5008fb8"}
{"context":{"createClasses":true,"schoolId":"67cf5257b10388fab5008ff4","yearData":{"createdBy":"67cf5256b10388fab5008fee","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:57:59.146Z"}
{"context":{"createClasses":false,"schoolId":"67cf5257b10388fab5009005","yearData":{"createdBy":"67cf5257b10388fab5008fff","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:57:59.356Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5257b10388fab5009026","timestamp":"2025-03-10T20:57:59.799Z","userId":"67cf5257b10388fab5009023"}
{"context":{"schoolId":"67cf5258b10388fab5009037","userId":"67cf5257b10388fab5009031"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:00.027Z"}
{"context":{"schoolId":"67cf5258b10388fab5009048","userId":"67cf5258b10388fab5009042"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:00.250Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf5258b10388fab5009059","sectionName":"A","timestamp":"2025-03-10T20:58:00.453Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf5258b10388fab500906a","sectionName":"Z","timestamp":"2025-03-10T20:58:00.656Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf5258b10388fab500907b","sectionName":"A","timestamp":"2025-03-10T20:58:00.869Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5259b10388fab500908c","timestamp":"2025-03-10T20:58:01.078Z","userId":"67cf5258b10388fab5009089"}
{"context":{"createClasses":false,"schoolId":"67cf5259b10388fab50090b3","yearData":{"createdBy":"67cf5259b10388fab50090ad","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:01.537Z"}
{"context":{"schoolId":"67cf5259b10388fab50090c4","yearId":"67cf5259b10388fab50090c5"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:01.741Z"}
{"context":{"schoolId":"67cf5259b10388fab50090da","yearId":"67cf5259b10388fab50090e0"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:01.956Z"}
{"context":{"schoolId":"67cf525ab10388fab50090ec","yearId":"67cf525ab10388fab50090ed"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:02.181Z"}
{"context":{"institutionType":"none","schoolId":"67cf525ab10388fab5009113","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:02.584Z"}
{"context":{"institutionType":"scientific","schoolId":"67cf525ab10388fab5009124","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:02.787Z"}
{"context":{"schoolId":"67cf525ab10388fab5009135"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:02.989Z"}
{"context":{"schoolId":"67cf525bb10388fab5009146"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:03.190Z"}
{"context":{"schoolId":"67cf525bb10388fab5009146"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:03.193Z"}
{"context":{"schoolId":"67cf525bb10388fab5009158"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:03.403Z"}
{"context":{"schoolId":"67cf525bb10388fab5009175"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:03.622Z"}
{"context":{"schoolId":"67cf525bb10388fab5009175","userId":"67cf525bb10388fab5009172"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:03.625Z"}
{"context":{"schoolId":"67cf525bb10388fab5009187","userId":"67cf525bb10388fab5009184"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:03.841Z"}
{"context":{"schoolId":"67cf525cb10388fab5009198"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:04.054Z"}
{"context":{"schoolId":"67cf525cb10388fab5009198","userId":"67cf525bb10388fab5009195"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:04.057Z"}
{"context":{"schoolId":"67cf525cb10388fab50091af","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:1027:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:1030:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-10T20:58:04.263Z"}
{"context":{"schoolId":"67cf525cb10388fab50091bf","yearId":"67cf525cb10388fab50091c0"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:04.464Z"}
{"context":{"schoolId":"67cf525cb10388fab50091bf","yearId":"67cf525cb10388fab50091c0"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:04.468Z"}
{"context":{"createClasses":false,"schoolId":"67cf525cb10388fab50091d1","yearData":{"createdBy":"67cf525cb10388fab50091cb","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:04.674Z"}
{"context":{"schoolId":"67cf525cb10388fab50091e2","yearId":"67cf525cb10388fab50091e3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:04.884Z"}
{"context":{"schoolId":"67cf525cb10388fab50091e2","yearId":"67cf525cb10388fab50091e3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:04.887Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf525db10388fab50091f9","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:05.102Z","yearId":"67cf525db10388fab50091fa"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf525db10388fab500920a","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:05.319Z","yearId":"67cf525db10388fab500920b"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf525db10388fab500921b","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:05.524Z","yearId":"67cf525db10388fab500921c"}
{"context":{"schoolId":"67cf525db10388fab500922c"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:05.736Z"}
{"context":{"schoolId":"67cf525db10388fab500923c"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:05.940Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-10T20:58:06.552Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T20:58:06.605Z"}
{"level":"info","message":"User created","timestamp":"2025-03-10T20:58:54.726Z","userId":"67cf528e9544a91dc836a511"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-10T20:58:54.833Z","expiresAt":"2025-03-11T20:58:54.833Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-10T20:58:54.833Z","token":"46f7aef3-155a-4cc8-92fe-b45b3bd54b62-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T20:58:54.947Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T21:00:46.950Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T21:00:46.957Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T21:00:47.050Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cf5302a6ae375a6103311f","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T21:00:50.319Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-10T21:00:50.782Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cf5302a6ae375a61033169"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-10T21:00:50.998Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5303a6ae375a61033175","timestamp":"2025-03-10T21:00:51.324Z","userId":"67cf5303a6ae375a6103317b"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5303a6ae375a61033189","timestamp":"2025-03-10T21:00:51.645Z","userId":"67cf5303a6ae375a6103318f"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5303a6ae375a6103319c","timestamp":"2025-03-10T21:00:51.853Z","userId":"67cf5303a6ae375a61033199"}
{"context":{"createClasses":true,"schoolId":"67cf5304a6ae375a610331d5","yearData":{"createdBy":"67cf5304a6ae375a610331cf","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:52.479Z"}
{"context":{"createClasses":false,"schoolId":"67cf5304a6ae375a610331e6","yearData":{"createdBy":"67cf5304a6ae375a610331e0","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:52.681Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5305a6ae375a61033207","timestamp":"2025-03-10T21:00:53.069Z","userId":"67cf5304a6ae375a61033204"}
{"context":{"schoolId":"67cf5305a6ae375a61033218","userId":"67cf5305a6ae375a61033212"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:53.272Z"}
{"context":{"schoolId":"67cf5305a6ae375a61033229","userId":"67cf5305a6ae375a61033223"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:53.474Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf5305a6ae375a6103323a","sectionName":"A","timestamp":"2025-03-10T21:00:53.672Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf5305a6ae375a6103324b","sectionName":"Z","timestamp":"2025-03-10T21:00:53.885Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf5306a6ae375a6103325c","sectionName":"A","timestamp":"2025-03-10T21:00:54.091Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5306a6ae375a6103326d","timestamp":"2025-03-10T21:00:54.289Z","userId":"67cf5306a6ae375a6103326a"}
{"context":{"createClasses":false,"schoolId":"67cf5306a6ae375a61033294","yearData":{"createdBy":"67cf5306a6ae375a6103328e","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:54.712Z"}
{"context":{"schoolId":"67cf5306a6ae375a610332a5","yearId":"67cf5306a6ae375a610332a6"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:54.918Z"}
{"context":{"schoolId":"67cf5307a6ae375a610332bb","yearId":"67cf5307a6ae375a610332c1"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:55.114Z"}
{"context":{"schoolId":"67cf5307a6ae375a610332cd","yearId":"67cf5307a6ae375a610332ce"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:55.315Z"}
{"context":{"institutionType":"none","schoolId":"67cf5307a6ae375a610332f4","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:55.725Z"}
{"context":{"institutionType":"scientific","schoolId":"67cf5307a6ae375a61033305","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:55.928Z"}
{"context":{"schoolId":"67cf5308a6ae375a61033316"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:56.125Z"}
{"context":{"schoolId":"67cf5308a6ae375a61033327"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:56.324Z"}
{"context":{"schoolId":"67cf5308a6ae375a61033327"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:56.326Z"}
{"context":{"schoolId":"67cf5308a6ae375a61033339"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:56.537Z"}
{"context":{"schoolId":"67cf5308a6ae375a61033356"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:56.766Z"}
{"context":{"schoolId":"67cf5308a6ae375a61033356","userId":"67cf5308a6ae375a61033353"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:56.769Z"}
{"context":{"schoolId":"67cf5308a6ae375a61033368","userId":"67cf5308a6ae375a61033365"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:56.969Z"}
{"context":{"schoolId":"67cf5309a6ae375a61033379"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:57.176Z"}
{"context":{"schoolId":"67cf5309a6ae375a61033379","userId":"67cf5309a6ae375a61033376"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:57.182Z"}
{"context":{"schoolId":"67cf5309a6ae375a61033390","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:1027:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:1030:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-10T21:00:57.389Z"}
{"context":{"schoolId":"67cf5309a6ae375a610333a0","yearId":"67cf5309a6ae375a610333a1"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:57.605Z"}
{"context":{"schoolId":"67cf5309a6ae375a610333a0","yearId":"67cf5309a6ae375a610333a1"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:57.608Z"}
{"context":{"createClasses":false,"schoolId":"67cf5309a6ae375a610333b2","yearData":{"createdBy":"67cf5309a6ae375a610333ac","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:57.805Z"}
{"context":{"schoolId":"67cf530aa6ae375a610333c3","yearId":"67cf530aa6ae375a610333c4"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:58.009Z"}
{"context":{"schoolId":"67cf530aa6ae375a610333c3","yearId":"67cf530aa6ae375a610333c4"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:58.014Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf530aa6ae375a610333da","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:58.230Z","yearId":"67cf530aa6ae375a610333db"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf530aa6ae375a610333eb","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:58.488Z","yearId":"67cf530aa6ae375a610333ec"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf530aa6ae375a610333fc","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:58.715Z","yearId":"67cf530aa6ae375a610333fd"}
{"context":{"schoolId":"67cf530aa6ae375a6103340d"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:58.918Z"}
{"context":{"schoolId":"67cf530ba6ae375a6103341d"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:59.120Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-10T21:00:59.701Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:00:59.706Z"}
{"level":"info","message":"User created","timestamp":"2025-03-10T21:04:07.388Z","userId":"67cf53c7f1d809481eb68045"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-10T21:04:07.493Z","expiresAt":"2025-03-11T21:04:07.493Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-10T21:04:07.493Z","token":"13fed0b2-a023-477d-ae79-967645b1f8e0-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T21:04:07.595Z"}
{"academicYear":"2024/2025","level":"info","message":"Inizializzazione classi per la scuola","schoolId":"67cf54d23b731e24331cf52a","sectionsCount":1,"timestamp":"2025-03-10T21:08:35.153Z"}
{"classesCreated":3,"level":"info","message":"Classi iniziali create con successo","schoolId":"67cf54d23b731e24331cf52a","timestamp":"2025-03-10T21:08:35.318Z"}
{"level":"info","message":"User created","timestamp":"2025-03-10T21:09:30.346Z","userId":"67cf550a311bb4b71a8fc5ac"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-10T21:09:30.448Z","expiresAt":"2025-03-11T21:09:30.448Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-10T21:09:30.448Z","token":"e343fe5b-c007-422f-b948-d421eda56da5-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T21:09:30.557Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T21:09:49.917Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T21:09:49.923Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T21:09:49.966Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-10T21:09:50.822Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T21:09:50.823Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T21:09:50.825Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T21:09:51.176Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T21:09:51.181Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T21:09:51.182Z"}
{"level":"info","message":"User created","timestamp":"2025-03-10T21:09:58.435Z","userId":"67cf5526369aaea62e6e5fe6"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-10T21:09:58.548Z","expiresAt":"2025-03-11T21:09:58.548Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-10T21:09:58.548Z","token":"f51411d0-7196-418d-ae50-b72077ef2e99-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T21:09:58.663Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T21:10:17.698Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T21:10:17.702Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T21:10:17.789Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cf553c62fa528a798b8f41","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T21:10:20.975Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-10T21:10:21.419Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cf553d62fa528a798b8f8b"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-10T21:10:21.639Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf553d62fa528a798b8f97","timestamp":"2025-03-10T21:10:21.951Z","userId":"67cf553d62fa528a798b8f9d"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf553e62fa528a798b8fab","timestamp":"2025-03-10T21:10:22.268Z","userId":"67cf553e62fa528a798b8fb1"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf553e62fa528a798b8fbe","timestamp":"2025-03-10T21:10:22.470Z","userId":"67cf553e62fa528a798b8fbb"}
{"context":{"createClasses":true,"schoolId":"67cf553f62fa528a798b8ff7","yearData":{"createdBy":"67cf553e62fa528a798b8ff1","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:23.090Z"}
{"context":{"createClasses":false,"schoolId":"67cf553f62fa528a798b9008","yearData":{"createdBy":"67cf553f62fa528a798b9002","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:23.287Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf553f62fa528a798b9029","timestamp":"2025-03-10T21:10:23.675Z","userId":"67cf553f62fa528a798b9026"}
{"context":{"schoolId":"67cf553f62fa528a798b903a","userId":"67cf553f62fa528a798b9034"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:23.875Z"}
{"context":{"schoolId":"67cf554062fa528a798b904b","userId":"67cf553f62fa528a798b9045"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:24.067Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf554062fa528a798b905c","sectionName":"A","timestamp":"2025-03-10T21:10:24.263Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf554062fa528a798b906d","sectionName":"Z","timestamp":"2025-03-10T21:10:24.465Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf554062fa528a798b907e","sectionName":"A","timestamp":"2025-03-10T21:10:24.660Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf554062fa528a798b908f","timestamp":"2025-03-10T21:10:24.851Z","userId":"67cf554062fa528a798b908c"}
{"context":{"createClasses":false,"schoolId":"67cf554162fa528a798b90b6","yearData":{"createdBy":"67cf554162fa528a798b90b0","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:25.244Z"}
{"context":{"schoolId":"67cf554162fa528a798b90c7","yearId":"67cf554162fa528a798b90c8"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:25.443Z"}
{"context":{"schoolId":"67cf554162fa528a798b90dd","yearId":"67cf554162fa528a798b90e3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:25.651Z"}
{"context":{"schoolId":"67cf554162fa528a798b90ef","yearId":"67cf554162fa528a798b90f0"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:25.849Z"}
{"context":{"institutionType":"none","schoolId":"67cf554262fa528a798b9116","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:26.241Z"}
{"context":{"institutionType":"scientific","schoolId":"67cf554262fa528a798b9127","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:26.438Z"}
{"context":{"schoolId":"67cf554262fa528a798b9138"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:26.639Z"}
{"context":{"schoolId":"67cf554262fa528a798b9149"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:26.835Z"}
{"context":{"schoolId":"67cf554262fa528a798b9149"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:26.837Z"}
{"context":{"schoolId":"67cf554362fa528a798b915b"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:27.036Z"}
{"context":{"schoolId":"67cf554362fa528a798b9178"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:27.239Z"}
{"context":{"schoolId":"67cf554362fa528a798b9178","userId":"67cf554362fa528a798b9175"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:27.243Z"}
{"context":{"schoolId":"67cf554362fa528a798b918a","userId":"67cf554362fa528a798b9187"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:27.438Z"}
{"context":{"schoolId":"67cf554362fa528a798b919b"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:27.632Z"}
{"context":{"schoolId":"67cf554362fa528a798b919b","userId":"67cf554362fa528a798b9198"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:27.635Z"}
{"context":{"schoolId":"67cf554362fa528a798b91b2","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:1027:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:1030:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-10T21:10:27.832Z"}
{"context":{"schoolId":"67cf554462fa528a798b91c2","yearId":"67cf554462fa528a798b91c3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:28.024Z"}
{"context":{"schoolId":"67cf554462fa528a798b91c2","yearId":"67cf554462fa528a798b91c3"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:28.028Z"}
{"context":{"createClasses":false,"schoolId":"67cf554462fa528a798b91d4","yearData":{"createdBy":"67cf554462fa528a798b91ce","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:28.221Z"}
{"context":{"schoolId":"67cf554462fa528a798b91e5","yearId":"67cf554462fa528a798b91e6"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:28.413Z"}
{"context":{"schoolId":"67cf554462fa528a798b91e5","yearId":"67cf554462fa528a798b91e6"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:28.416Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf554462fa528a798b91fc","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:28.625Z","yearId":"67cf554462fa528a798b91fd"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf554462fa528a798b920d","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:28.822Z","yearId":"67cf554462fa528a798b920e"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf554562fa528a798b921e","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:29.018Z","yearId":"67cf554562fa528a798b921f"}
{"context":{"schoolId":"67cf554562fa528a798b922f"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:29.215Z"}
{"context":{"schoolId":"67cf554562fa528a798b923f"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:29.415Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-10T21:10:29.999Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:10:30.007Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T21:13:37.929Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T21:13:37.934Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T21:13:37.975Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-10T21:13:38.700Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T21:13:38.701Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T21:13:38.703Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T21:13:39.010Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T21:13:39.016Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T21:13:39.017Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T21:13:47.268Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T21:13:47.274Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T21:13:47.354Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cf560e49c052d3e8b58f4a","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T21:13:50.459Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-10T21:13:50.890Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cf560f49c052d3e8b58f94"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-10T21:13:51.085Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf560f49c052d3e8b58fa0","timestamp":"2025-03-10T21:13:51.384Z","userId":"67cf560f49c052d3e8b58fa6"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf560f49c052d3e8b58fb4","timestamp":"2025-03-10T21:13:51.682Z","userId":"67cf560f49c052d3e8b58fba"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf560f49c052d3e8b58fc7","timestamp":"2025-03-10T21:13:51.888Z","userId":"67cf560f49c052d3e8b58fc4"}
{"context":{"createClasses":true,"schoolId":"67cf561049c052d3e8b59000","yearData":{"createdBy":"67cf561049c052d3e8b58ffa","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:52.480Z"}
{"context":{"createClasses":false,"schoolId":"67cf561049c052d3e8b59011","yearData":{"createdBy":"67cf561049c052d3e8b5900b","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:52.688Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf561149c052d3e8b59032","timestamp":"2025-03-10T21:13:53.081Z","userId":"67cf561049c052d3e8b5902f"}
{"context":{"schoolId":"67cf561149c052d3e8b59043","userId":"67cf561149c052d3e8b5903d"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:53.277Z"}
{"context":{"schoolId":"67cf561149c052d3e8b59054","userId":"67cf561149c052d3e8b5904e"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:53.472Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf561149c052d3e8b59065","sectionName":"A","timestamp":"2025-03-10T21:13:53.673Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf561149c052d3e8b59076","sectionName":"Z","timestamp":"2025-03-10T21:13:53.870Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf561249c052d3e8b59087","sectionName":"A","timestamp":"2025-03-10T21:13:54.066Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf561249c052d3e8b59098","timestamp":"2025-03-10T21:13:54.259Z","userId":"67cf561249c052d3e8b59095"}
{"context":{"createClasses":false,"schoolId":"67cf561249c052d3e8b590bf","yearData":{"createdBy":"67cf561249c052d3e8b590b9","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:54.645Z"}
{"context":{"schoolId":"67cf561249c052d3e8b590d0","yearId":"67cf561249c052d3e8b590d1"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:54.844Z"}
{"context":{"schoolId":"67cf561349c052d3e8b590e6","yearId":"67cf561349c052d3e8b590ec"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:55.052Z"}
{"context":{"schoolId":"67cf561349c052d3e8b590f8","yearId":"67cf561349c052d3e8b590f9"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:55.249Z"}
{"context":{"institutionType":"none","schoolId":"67cf561349c052d3e8b5911f","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:55.644Z"}
{"context":{"institutionType":"scientific","schoolId":"67cf561349c052d3e8b59130","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:55.833Z"}
{"context":{"schoolId":"67cf561449c052d3e8b59141"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:56.031Z"}
{"context":{"schoolId":"67cf561449c052d3e8b59152"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:56.224Z"}
{"context":{"schoolId":"67cf561449c052d3e8b59152"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:56.226Z"}
{"context":{"schoolId":"67cf561449c052d3e8b59164"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:56.425Z"}
{"context":{"schoolId":"67cf561449c052d3e8b59181"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:56.623Z"}
{"context":{"schoolId":"67cf561449c052d3e8b59181","userId":"67cf561449c052d3e8b5917e"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:56.626Z"}
{"context":{"schoolId":"67cf561449c052d3e8b59193","userId":"67cf561449c052d3e8b59190"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:56.823Z"}
{"context":{"schoolId":"67cf561549c052d3e8b591a4"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:57.025Z"}
{"context":{"schoolId":"67cf561549c052d3e8b591a4","userId":"67cf561449c052d3e8b591a1"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:57.028Z"}
{"context":{"schoolId":"67cf561549c052d3e8b591bb","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:1027:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:1030:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-10T21:13:57.223Z"}
{"context":{"schoolId":"67cf561549c052d3e8b591cb","yearId":"67cf561549c052d3e8b591cc"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:57.419Z"}
{"context":{"schoolId":"67cf561549c052d3e8b591cb","yearId":"67cf561549c052d3e8b591cc"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:57.422Z"}
{"context":{"createClasses":false,"schoolId":"67cf561549c052d3e8b591dd","yearData":{"createdBy":"67cf561549c052d3e8b591d7","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:57.631Z"}
{"context":{"schoolId":"67cf561549c052d3e8b591ee","yearId":"67cf561549c052d3e8b591ef"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:57.837Z"}
{"context":{"schoolId":"67cf561549c052d3e8b591ee","yearId":"67cf561549c052d3e8b591ef"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:57.840Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf561649c052d3e8b59205","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:58.042Z","yearId":"67cf561649c052d3e8b59206"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf561649c052d3e8b59216","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:58.246Z","yearId":"67cf561649c052d3e8b59217"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf561649c052d3e8b59227","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:58.450Z","yearId":"67cf561649c052d3e8b59228"}
{"context":{"schoolId":"67cf561649c052d3e8b59238"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:58.650Z"}
{"context":{"schoolId":"67cf561649c052d3e8b59248"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:58.857Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-10T21:13:59.451Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:13:59.455Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T21:20:17.238Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T21:20:17.241Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T21:20:17.277Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-10T21:20:17.997Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T21:20:17.998Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T21:20:18.000Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T21:20:18.290Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T21:20:18.294Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T21:20:18.295Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T21:24:19.647Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T21:24:19.650Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T21:24:19.686Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T21:24:20.470Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T21:24:20.472Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T21:24:20.473Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T21:24:20.795Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T21:24:20.799Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T21:24:20.799Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T21:24:44.190Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T21:24:44.194Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T21:24:44.289Z"}
{"context":{"data":{"address":"Via Venezia 789","defaultMaxStudentsPerClass":22,"institutionType":"scientific","manager":"67cf589f670359d86c384e39","name":"Test School","province":"Venezia","region":"Veneto","schoolType":"high_school"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.schools index: name_1 dup key: { name: \"Test School\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T21:24:47.678Z"}
{"context":{"data":{"name":"Updated Name"},"id":"invalidid"},"errorMessage":"Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"","errorName":"CastError","level":"error","message":"Errore in SchoolRepository.update:","stack":"CastError: Cast to ObjectId failed for value \"invalidid\" (type string) at path \"_id\" for model \"School\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOneAndUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3319:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:115:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:304:17)","timestamp":"2025-03-10T21:24:48.101Z"}
{"context":{"data":{"name":"Updated Name"},"id":"67cf58a0670359d86c384e83"},"errorMessage":"School non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in SchoolRepository.update:","stack":"DocumentNotFoundError: School non trovato\n    at SchoolRepository.update (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:126:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:320:17)","timestamp":"2025-03-10T21:24:48.304Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf58a0670359d86c384e8f","timestamp":"2025-03-10T21:24:48.605Z","userId":"67cf58a0670359d86c384e95"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf58a0670359d86c384ea3","timestamp":"2025-03-10T21:24:48.916Z","userId":"67cf58a0670359d86c384ea9"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf58a1670359d86c384eb6","timestamp":"2025-03-10T21:24:49.114Z","userId":"67cf58a1670359d86c384eb3"}
{"context":{"createClasses":true,"schoolId":"67cf58a1670359d86c384eef","yearData":{"createdBy":"67cf58a1670359d86c384ee9","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:49.767Z"}
{"context":{"createClasses":false,"schoolId":"67cf58a1670359d86c384f00","yearData":{"createdBy":"67cf58a1670359d86c384efa","endDate":"2024-06-15T00:00:00.000Z","startDate":"2023-09-01T00:00:00.000Z","status":"planned","year":"2023/2024"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:49.989Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf58a2670359d86c384f21","timestamp":"2025-03-10T21:24:50.385Z","userId":"67cf58a2670359d86c384f1e"}
{"context":{"schoolId":"67cf58a2670359d86c384f32","userId":"67cf58a2670359d86c384f2c"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:50.587Z"}
{"context":{"schoolId":"67cf58a2670359d86c384f43","userId":"67cf58a2670359d86c384f3d"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeUser:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:50.785Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf58a2670359d86c384f54","sectionName":"A","timestamp":"2025-03-10T21:24:50.986Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf58a3670359d86c384f65","sectionName":"Z","timestamp":"2025-03-10T21:24:51.183Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error in deactivateSection:","schoolId":"67cf58a3670359d86c384f76","sectionName":"A","timestamp":"2025-03-10T21:24:51.386Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf58a3670359d86c384f87","timestamp":"2025-03-10T21:24:51.583Z","userId":"67cf58a3670359d86c384f84"}
{"context":{"createClasses":false,"schoolId":"67cf58a4670359d86c384fae","yearData":{"createdBy":"67cf58a3670359d86c384fa8","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:52.031Z"}
{"context":{"schoolId":"67cf58a4670359d86c384fbf","yearId":"67cf58a4670359d86c384fc0"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:52.231Z"}
{"context":{"schoolId":"67cf58a4670359d86c384fd5","yearId":"67cf58a4670359d86c384fdb"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:52.450Z"}
{"context":{"schoolId":"67cf58a4670359d86c384fe7","yearId":"67cf58a4670359d86c384fe8"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:52.654Z"}
{"context":{"institutionType":"none","schoolId":"67cf58a5670359d86c38500e","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:53.053Z"}
{"context":{"institutionType":"scientific","schoolId":"67cf58a5670359d86c38501f","schoolType":"middle_school"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.changeSchoolType:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:53.248Z"}
{"context":{"schoolId":"67cf58a5670359d86c385030"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:53.445Z"}
{"context":{"schoolId":"67cf58a5670359d86c385041"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:53.645Z"}
{"context":{"schoolId":"67cf58a5670359d86c385041"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:53.648Z"}
{"context":{"schoolId":"67cf58a5670359d86c385053"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:53.850Z"}
{"context":{"schoolId":"67cf58a6670359d86c385070"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:54.047Z"}
{"context":{"schoolId":"67cf58a6670359d86c385070","userId":"67cf58a5670359d86c38506d"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:54.050Z"}
{"context":{"schoolId":"67cf58a6670359d86c385082","userId":"67cf58a6670359d86c38507f"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:54.249Z"}
{"context":{"schoolId":"67cf58a6670359d86c385093"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.removeManagerFromSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:54.447Z"}
{"context":{"schoolId":"67cf58a6670359d86c385093","userId":"67cf58a6670359d86c385090"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.addManagerToSchool:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:54.449Z"}
{"context":{"schoolId":"67cf58a6670359d86c3850aa","sectionName":"A"},"errorMessage":"Class.find(...).select is not a function","errorName":"TypeError","level":"error","message":"Errore in SchoolRepository.getStudentsBySection:","stack":"TypeError: Class.find(...).select is not a function\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:1027:16)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\SchoolRepository.test.js:1030:53)\n    at Promise.then.completed (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-03-10T21:24:54.663Z"}
{"context":{"schoolId":"67cf58a6670359d86c3850ba","yearId":"67cf58a6670359d86c3850bb"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:54.859Z"}
{"context":{"schoolId":"67cf58a6670359d86c3850ba","yearId":"67cf58a6670359d86c3850bb"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:54.863Z"}
{"context":{"createClasses":false,"schoolId":"67cf58a7670359d86c3850cc","yearData":{"createdBy":"67cf58a6670359d86c3850c6","endDate":"2025-06-15T00:00:00.000Z","startDate":"2024-09-01T00:00:00.000Z","status":"planned","year":"2024/2025"}},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.setupAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:55.068Z"}
{"context":{"schoolId":"67cf58a7670359d86c3850dd","yearId":"67cf58a7670359d86c3850de"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.archiveAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:55.276Z"}
{"context":{"schoolId":"67cf58a7670359d86c3850dd","yearId":"67cf58a7670359d86c3850de"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.reactivateAcademicYear:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:55.279Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf58a7670359d86c3850f4","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:55.482Z","yearId":"67cf58a7670359d86c3850f5"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf58a7670359d86c385105","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:55.691Z","yearId":"67cf58a7670359d86c385106"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Error updating academic year:","schoolId":"67cf58a7670359d86c385116","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:55.920Z","yearId":"67cf58a7670359d86c385117"}
{"context":{"schoolId":"67cf58a8670359d86c385127"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:56.147Z"}
{"context":{"schoolId":"67cf58a8670359d86c385137"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.deleteWithClasses:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:56.347Z"}
{"level":"info","message":"Inizio sincronizzazione assignedSchoolIds per utenti esistenti","timestamp":"2025-03-10T21:24:56.981Z"}
{"context":{"totalSchools":2},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in SchoolRepository.syncAssignedSchoolIds:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:24:57.023Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T21:24:58.162Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T21:24:58.163Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T21:24:58.227Z"}
{"classId":"67cf58abfa370ac1da5beef2","level":"info","message":"Classe creata con successo:","schoolId":"67cf58abfa370ac1da5beeed","timestamp":"2025-03-10T21:24:59.553Z"}
{"context":{"data":{"academicYear":"2023/2024","section":"A","year":1}},"errorMessage":"Dati classe incompleti","level":"error","message":"Errore in ClassRepository.create:","timestamp":"2025-03-10T21:24:59.697Z"}
{"context":{"id":"67cf58acfa370ac1da5bef4e","options":{}},"errorMessage":"Class non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in ClassRepository.findById:","stack":"DocumentNotFoundError: Class non trovato\n    at ClassRepository.findById (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:53:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\ClassRepository.test.js:163:17)","timestamp":"2025-03-10T21:25:00.118Z"}
{"context":{"id":"invalid-id-format","options":{}},"errorMessage":"Cast to ObjectId failed for value \"invalid-id-format\" (type string) at path \"_id\" for model \"Class\"","errorName":"CastError","level":"error","message":"Errore in ClassRepository.findById:","stack":"CastError: Cast to ObjectId failed for value \"invalid-id-format\" (type string) at path \"_id\" for model \"Class\"\n    at ObjectId.Object.<anonymous>.ObjectId.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n    at ObjectId.Object.<anonymous>.SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at ObjectId.Object.<anonymous>.SchemaType.castForQuery (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n    at cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\cast.js:389:32)\n    at model.Query.Object.<anonymous>.Query.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4927:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2237:10)\n    at model.Query._findOne (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:2533:8)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at ClassRepository.findById (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:49:25)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\ClassRepository.test.js:169:17)","timestamp":"2025-03-10T21:25:00.255Z"}
{"context":{"data":{"capacity":30,"status":"planned"},"id":"67cf58acfa370ac1da5bef70"},"errorMessage":"Validation failed: capacity: Parameter \"obj\" to Document() must be an object, got \"School\" (type string)","errorName":"ValidationError","level":"error","message":"Errore in ClassRepository.update:","stack":"ValidationError: Validation failed: capacity: Parameter \"obj\" to Document() must be an object, got \"School\" (type string)\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-10T21:25:00.368Z"}
{"context":{"data":{"capacity":30},"id":"67cf58acfa370ac1da5bef88"},"errorMessage":"Validation failed: capacity: Parameter \"obj\" to Document() must be an object, got \"School\" (type string)","errorName":"ValidationError","level":"error","message":"Errore in ClassRepository.update:","stack":"ValidationError: Validation failed: capacity: Parameter \"obj\" to Document() must be an object, got \"School\" (type string)\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-10T21:25:00.480Z"}
{"context":{"id":"67cf58acfa370ac1da5befaf"},"errorMessage":"Class non trovato","errorName":"DocumentNotFoundError","level":"error","message":"Errore in ClassRepository.delete:","stack":"DocumentNotFoundError: Class non trovato\n    at ClassRepository.delete (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\base\\BaseRepository.js:147:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\systemTests\\unit\\repositories\\ClassRepository.test.js:248:17)","timestamp":"2025-03-10T21:25:00.723Z"}
{"context":{"criteria":{"academicYear":"2023/2024","schoolId":"invalid-id","section":"A","year":1}},"errorMessage":"ID scuola non valido","level":"error","message":"Errore in ClassRepository.exists:","timestamp":"2025-03-10T21:25:01.428Z"}
{"context":{"fromYear":"2023/2024","toYear":"2024/2025"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in ClassRepository.promoteStudents:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:25:02.611Z"}
{"context":{"fromYear":"2023/2024","toYear":"2024/2025"},"errorCode":20,"errorMessage":"Transaction numbers are only allowed on a replica set member or mongos","errorName":"MongoServerError","level":"error","message":"Errore in ClassRepository.promoteStudents:","stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.onMessage (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:413:18)\n    at MessageStream.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\connection.ts:243:56)\n    at MessageStream.emit (node:events:524:28)\n    at processIncomingData (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:193:12)\n    at MessageStream._write (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\cmap\\message_stream.ts:74:5)\n    at writeOrBuffer (node:internal/streams/writable:572:12)\n    at _write (node:internal/streams/writable:501:10)\n    at MessageStream.Writable.write (node:internal/streams/writable:510:10)\n    at Socket.ondata (node:internal/streams/readable:1009:22)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Socket.Readable.push (node:internal/streams/readable:392:5)\n    at TCP.onStreamRead (node:internal/stream_base_commons:189:23)","timestamp":"2025-03-10T21:25:02.731Z"}
{"level":"info","message":"User created","timestamp":"2025-03-10T21:25:05.399Z","userId":"67cf58b1c5ccdb1a56c5388a"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-10T21:25:05.501Z","expiresAt":"2025-03-11T21:25:05.501Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-10T21:25:05.501Z","token":"248b4b13-da9e-47d9-851e-45010c9e4e0b-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T21:25:05.601Z"}
{"level":"info","message":"User created","timestamp":"2025-03-10T21:25:21.365Z","userId":"67cf58c133901b4e1f320ffb"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-10T21:25:21.479Z","expiresAt":"2025-03-11T21:25:21.479Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-10T21:25:21.479Z","token":"8443ae6d-8130-4cea-bfa2-9cc0db7998cd-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T21:25:21.592Z"}
{"level":"info","message":"User created","timestamp":"2025-03-10T21:33:32.199Z","userId":"67cf5aaccad3d20c605fff3e"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-10T21:33:32.318Z","expiresAt":"2025-03-11T21:33:32.318Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-10T21:33:32.318Z","token":"1f40d04e-b793-4337-a476-c0b6ab03f655-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T21:33:32.441Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T21:37:31.962Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T21:37:31.966Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T21:37:32.000Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-10T21:37:32.814Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T21:37:32.815Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T21:37:32.816Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T21:37:33.150Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T21:37:33.154Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T21:37:33.155Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T21:38:04.662Z"}
{"connectionState":0,"existingModels":[],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T21:38:04.669Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T21:38:04.760Z"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5bbe37883b559ed1feaa","timestamp":"2025-03-10T21:38:06.835Z","userId":"67cf5bbe37883b559ed1feb0"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5bbf37883b559ed1fec7","timestamp":"2025-03-10T21:38:07.238Z","userId":"67cf5bbf37883b559ed1fecd"}
{"error":"Transaction numbers are only allowed on a replica set member or mongos","level":"error","message":"Errore durante l'aggiunta utente alla scuola","schoolId":"67cf5bbf37883b559ed1fede","timestamp":"2025-03-10T21:38:07.490Z","userId":"67cf5bbf37883b559ed1feda"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T21:42:02.702Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T21:42:02.706Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T21:42:02.744Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T21:42:03.503Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T21:42:03.504Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T21:42:03.506Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T21:42:03.782Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T21:42:03.786Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T21:42:03.786Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T21:43:37.670Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T21:43:37.673Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T21:43:37.709Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-10T21:43:38.472Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T21:43:38.473Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T21:43:38.475Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T21:43:38.758Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T21:43:38.763Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T21:43:38.764Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T21:48:16.978Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T21:48:16.983Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T21:48:17.023Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T21:48:17.826Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T21:48:17.827Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T21:48:17.828Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T21:48:18.158Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T21:48:18.162Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T21:48:18.163Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T21:54:49.293Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T21:54:49.297Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T21:54:49.337Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T21:54:50.182Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T21:54:50.183Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T21:54:50.185Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T21:54:50.527Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T21:54:50.531Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T21:54:50.532Z"}
{"level":"info","message":"User created","timestamp":"2025-03-10T21:57:15.824Z","userId":"67cf603bb56108e7a8391784"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-10T21:57:16.282Z","expiresAt":"2025-03-11T21:57:16.282Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-10T21:57:16.282Z","token":"e0c425d2-a778-4ad7-ad98-96ff6325a5ec-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T21:57:16.399Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T22:01:58.711Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T22:01:58.715Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T22:01:58.754Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T22:02:01.162Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T22:02:01.163Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T22:02:01.165Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T22:02:01.515Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T22:02:01.520Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T22:02:01.520Z"}
{"level":"info","message":"User created","timestamp":"2025-03-10T22:02:41.130Z","userId":"67cf61812c9a949516478033"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-10T22:02:41.599Z","expiresAt":"2025-03-11T22:02:41.599Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-10T22:02:41.599Z","token":"68d48039-b173-4366-ac14-8bdb54c0c189-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T22:02:41.723Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T22:08:31.002Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T22:08:31.006Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T22:08:31.050Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-03-10T22:08:31.911Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T22:08:31.912Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T22:08:31.914Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T22:08:32.261Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T22:08:32.266Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T22:08:32.267Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T22:10:13.674Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T22:10:13.677Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T22:10:13.715Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T22:10:14.492Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T22:10:14.493Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T22:10:14.494Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T22:10:14.795Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T22:10:14.803Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T22:10:14.803Z"}
{"level":"info","message":"User created","timestamp":"2025-03-10T22:10:26.154Z","userId":"67cf6352379d9a98d8b3ecc8"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-10T22:10:26.629Z","expiresAt":"2025-03-11T22:10:26.629Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-10T22:10:26.629Z","token":"cf76724c-5f58-4843-ad6d-d31bc4710f97-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T22:10:26.746Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T22:12:25.750Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T22:12:25.754Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T22:12:25.788Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-03-10T22:12:26.518Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T22:12:26.520Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T22:12:26.521Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T22:12:26.800Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T22:12:26.805Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T22:12:26.805Z"}
{"level":"info","message":"User created","timestamp":"2025-03-10T22:12:39.879Z","userId":"67cf63d713efa00b9bf2dfe9"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-10T22:12:40.387Z","expiresAt":"2025-03-11T22:12:40.387Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-10T22:12:40.387Z","token":"4f897294-05c5-447b-a5d4-bdcbb8c7c6f0-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T22:12:40.491Z"}
{"level":"warn","message":"Mongoose not connected when initializing models","timestamp":"2025-03-10T22:14:44.789Z"}
{"connectionState":0,"existingModels":["CSIQuestion","Test","Student","CSIConfig"],"level":"info","message":"Initializing models...","timestamp":"2025-03-10T22:14:44.795Z"}
{"level":"info","message":"Model validation successful - all required models registered","timestamp":"2025-03-10T22:14:44.834Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-03-10T22:14:45.587Z"}
{"level":"info","message":"Database connesso con successo","timestamp":"2025-03-10T22:14:45.588Z"}
{"level":"info","message":"Tutti i modelli richiesti sono registrati correttamente","timestamp":"2025-03-10T22:14:45.589Z"}
{"environment":"development","level":"info","message":"Routes initialized:","protected":["/classes","/schools","/users","/students","/tests","/system-tests"],"public":["/auth","/student-auth","/tests/csi/public"],"timestamp":"2025-03-10T22:14:45.887Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-03-10T22:14:45.891Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-03-10T22:14:45.892Z"}
{"level":"info","message":"User created","timestamp":"2025-03-10T22:14:56.764Z","userId":"67cf6460a96426dd5c106af9"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-10T22:14:57.235Z","expiresAt":"2025-03-11T22:14:57.235Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-10T22:14:57.235Z","token":"a23c17b1-5c38-4fec-a3ea-f94c6aa103d6-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T22:14:57.338Z"}
{"level":"info","message":"User created","timestamp":"2025-03-10T22:25:19.804Z","userId":"67cf66cfdbee9aaf6a860900"}
{"context":{"userData":{"email":"test@example.com","firstName":"Duplicate","lastName":"User","password":"[REDACTED]","role":"teacher","sessionTokens":[{"createdAt":"2025-03-10T22:25:20.282Z","expiresAt":"2025-03-11T22:25:20.282Z","ipAddress":"127.0.0.1","lastUsedAt":"2025-03-10T22:25:20.282Z","token":"4db69a5c-ddb1-4894-9069-6cce39ab9902-duplicate","userAgent":"Test Browser"}],"status":"active"}},"errorCode":11000,"errorMessage":"E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }","errorName":"MongoServerError","level":"error","message":"Errore in UserRepository.create:","stack":"MongoServerError: E11000 duplicate key error collection: test.users index: email_1 dup key: { email: \"test@example.com\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\insert.ts:85:25\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\src\\operations\\command.ts:173:14\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-10T22:25:20.391Z"}

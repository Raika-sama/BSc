{"error":"School non trovato","level":"error","message":"Errore nel recupero delle sezioni:","timestamp":"2025-01-24T18:54:17.752Z"}
{"error":"School non trovato","level":"error","message":"Errore nel recupero delle sezioni:","timestamp":"2025-01-24T18:57:19.088Z"}
{"error":"School non trovato","level":"error","message":"Errore nel recupero delle sezioni:","timestamp":"2025-01-24T18:59:00.250Z"}
{"error":"Scuola non trovata","level":"error","message":"Error in SchoolRepository.findById:","timestamp":"2025-01-24T19:14:23.551Z"}
{"error":"Scuola non trovata","level":"error","message":"Errore nel recupero della scuola:","timestamp":"2025-01-24T19:14:23.552Z"}
{"error":{},"level":"error","message":"Errore nel recupero studenti per sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T19:32:39.660Z"}
{"error":"Student is not defined","level":"error","message":"Errore nella disattivazione della sezione:","stack":"ReferenceError: Student is not defined\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:555:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async SchoolController.deactivateSection (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:386:26)","timestamp":"2025-01-24T19:32:39.661Z"}
{"error":"Cannot read properties of undefined (reading 'updateStudentsForDeactivatedSection')","level":"error","message":"Errore nella disattivazione della sezione:","stack":"TypeError: Cannot read properties of undefined (reading 'updateStudentsForDeactivatedSection')\n    at SchoolController.deactivateSection (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:392:66)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T20:11:13.219Z"}
{"error":{},"level":"error","message":"Errore nel recupero della scuola","schoolId":"67843ee4e18f3b833160dda8","timestamp":"2025-01-24T20:18:42.957Z"}
{"error":{},"level":"error","message":"Errore nel recupero delle scuole","timestamp":"2025-01-24T20:18:44.672Z"}
{"body":{},"error":{"message":"Cannot read properties of undefined (reading 'findAll')","stack":"TypeError: Cannot read properties of undefined (reading 'findAll')\n    at SchoolController.getAll (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:229:49)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:113:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1737749924616_zthjymk6m","timestamp":"2025-01-24T20:18:44.674Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType="}
{"level":"error","message":"Cannot read properties of undefined (reading 'findAll')","stack":"TypeError: Cannot read properties of undefined (reading 'findAll')\n    at SchoolController.getAll (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:229:49)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:113:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T20:18:44.676Z"}
{"error":{},"level":"error","message":"Errore nel recupero delle scuole","timestamp":"2025-01-24T20:19:27.949Z"}
{"body":{},"error":{"message":"Cannot read properties of undefined (reading 'findAll')","stack":"TypeError: Cannot read properties of undefined (reading 'findAll')\n    at SchoolController.getAll (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:229:49)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:113:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1737749967886_15cixh7k3","timestamp":"2025-01-24T20:19:27.952Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType="}
{"level":"error","message":"Cannot read properties of undefined (reading 'findAll')","stack":"TypeError: Cannot read properties of undefined (reading 'findAll')\n    at SchoolController.getAll (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:229:49)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:113:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T20:19:27.954Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T20:50:04.617Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T20:50:04.619Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T20:50:14.502Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T20:50:14.503Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T20:50:43.236Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T20:50:43.238Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T20:57:45.371Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T20:57:45.372Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T20:58:09.823Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T20:58:09.824Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T20:58:31.550Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T20:58:31.551Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T21:03:26.421Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T21:03:26.422Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":"2025-01-24T21:07:15.665Z"},"value":"2025-01-24T21:07:15.665Z"}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la disattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T21:07:15.687Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella disattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T21:07:15.689Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":"2025-01-24T21:08:32.339Z"},"value":"2025-01-24T21:08:32.339Z"}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la disattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T21:08:32.365Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella disattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T21:08:32.367Z"}
{"error":"Cannot read properties of undefined (reading 'updateStudentsForDeactivatedSection')","level":"error","message":"Errore nella disattivazione della sezione:","stack":"TypeError: Cannot read properties of undefined (reading 'updateStudentsForDeactivatedSection')\n    at SchoolController.deactivateSection (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:394:66)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T21:12:17.944Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T21:12:32.584Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T21:12:32.586Z"}
{"error":"Cannot read properties of undefined (reading 'updateStudentsForDeactivatedSection')","level":"error","message":"Errore nella disattivazione della sezione:","stack":"TypeError: Cannot read properties of undefined (reading 'updateStudentsForDeactivatedSection')\n    at SchoolController.deactivateSection (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:394:66)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T21:12:45.828Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T21:16:36.651Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T21:16:36.652Z"}
{"error":"Cannot read properties of undefined (reading 'updateStudentsForDeactivatedSection')","level":"error","message":"Errore nella disattivazione della sezione:","stack":"TypeError: Cannot read properties of undefined (reading 'updateStudentsForDeactivatedSection')\n    at SchoolController.deactivateSection (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:394:66)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T21:17:57.560Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T21:18:41.194Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T21:18:41.195Z"}
{"error":{"kind":"embedded","message":"Cast to embedded failed for value \"{\n  fromClass: { '$first': '$classId' },\n  fromSection: 'A',\n  fromYear: { '$first': '$currentYear' },\n  date: 2025-01-24T21:26:32.972Z,\n  reason: 'Sezione disattivata',\n  academicYear: { '$first': '$academicYear' }\n}\" (type Object) at path \"classChangeHistory\" because of \"CastError\"","name":"CastError","path":"classChangeHistory","reason":{"kind":"ObjectId","message":"Cast to ObjectId failed for value \"{ '$first': '$classId' }\" (type Object) at path \"fromClass\" because of \"BSONError\"","name":"CastError","path":"fromClass","reason":{},"stringValue":"\"{ '$first': '$classId' }\"","value":{"$first":"$classId"},"valueType":"Object"},"stringValue":"\"{\n  fromClass: { '$first': '$classId' },\n  fromSection: 'A',\n  fromYear: { '$first': '$currentYear' },\n  date: 2025-01-24T21:26:32.972Z,\n  reason: 'Sezione disattivata',\n  academicYear: { '$first': '$academicYear' }\n}\"","value":{"academicYear":{"$first":"$academicYear"},"date":"2025-01-24T21:26:32.972Z","fromClass":{"$first":"$classId"},"fromSection":"A","fromYear":{"$first":"$currentYear"},"reason":"Sezione disattivata"},"valueType":"Object"},"level":"error","message":"Errore nell'aggiornamento degli studenti:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T21:26:32.993Z"}
{"error":"Cast to embedded failed for value \"{\n  fromClass: { '$first': '$classId' },\n  fromSection: 'A',\n  fromYear: { '$first': '$currentYear' },\n  date: 2025-01-24T21:26:32.972Z,\n  reason: 'Sezione disattivata',\n  academicYear: { '$first': '$academicYear' }\n}\" (type Object) at path \"classChangeHistory\" because of \"CastError\"","level":"error","message":"Errore nella disattivazione della sezione:","stack":"CastError: Cast to embedded failed for value \"{\n  fromClass: { '$first': '$classId' },\n  fromSection: 'A',\n  fromYear: { '$first': '$currentYear' },\n  date: 2025-01-24T21:26:32.972Z,\n  reason: 'Sezione disattivata',\n  academicYear: { '$first': '$academicYear' }\n}\" (type Object) at path \"classChangeHistory\" because of \"CastError\"\n    at DocumentArrayPath.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\documentarray.js:498:19)\n    at SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at castUpdateVal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:525:22)\n    at walkUpdatePath (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:280:26)\n    at castUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:110:7)\n    at model.Query._castUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4727:10)\n    at model.Query._updateThunk (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3892:25)\n    at model.Query._updateMany (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3967:23)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T21:26:32.996Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T21:27:09.664Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T21:27:09.666Z"}
{"error":{"kind":"embedded","message":"Cast to embedded failed for value \"{\n  fromClass: { '$first': '$classId' },\n  fromSection: 'A',\n  fromYear: { '$first': '$currentYear' },\n  date: 2025-01-24T21:27:49.208Z,\n  reason: 'Sezione disattivata',\n  academicYear: { '$first': '$academicYear' }\n}\" (type Object) at path \"classChangeHistory\" because of \"CastError\"","name":"CastError","path":"classChangeHistory","reason":{"kind":"ObjectId","message":"Cast to ObjectId failed for value \"{ '$first': '$classId' }\" (type Object) at path \"fromClass\" because of \"BSONError\"","name":"CastError","path":"fromClass","reason":{},"stringValue":"\"{ '$first': '$classId' }\"","value":{"$first":"$classId"},"valueType":"Object"},"stringValue":"\"{\n  fromClass: { '$first': '$classId' },\n  fromSection: 'A',\n  fromYear: { '$first': '$currentYear' },\n  date: 2025-01-24T21:27:49.208Z,\n  reason: 'Sezione disattivata',\n  academicYear: { '$first': '$academicYear' }\n}\"","value":{"academicYear":{"$first":"$academicYear"},"date":"2025-01-24T21:27:49.208Z","fromClass":{"$first":"$classId"},"fromSection":"A","fromYear":{"$first":"$currentYear"},"reason":"Sezione disattivata"},"valueType":"Object"},"level":"error","message":"Errore nell'aggiornamento degli studenti:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T21:27:49.230Z"}
{"error":"Cast to embedded failed for value \"{\n  fromClass: { '$first': '$classId' },\n  fromSection: 'A',\n  fromYear: { '$first': '$currentYear' },\n  date: 2025-01-24T21:27:49.208Z,\n  reason: 'Sezione disattivata',\n  academicYear: { '$first': '$academicYear' }\n}\" (type Object) at path \"classChangeHistory\" because of \"CastError\"","level":"error","message":"Errore nella disattivazione della sezione:","stack":"CastError: Cast to embedded failed for value \"{\n  fromClass: { '$first': '$classId' },\n  fromSection: 'A',\n  fromYear: { '$first': '$currentYear' },\n  date: 2025-01-24T21:27:49.208Z,\n  reason: 'Sezione disattivata',\n  academicYear: { '$first': '$academicYear' }\n}\" (type Object) at path \"classChangeHistory\" because of \"CastError\"\n    at DocumentArrayPath.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\documentarray.js:498:19)\n    at SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at castUpdateVal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:525:22)\n    at walkUpdatePath (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:280:26)\n    at castUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:110:7)\n    at model.Query._castUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4727:10)\n    at model.Query._updateThunk (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3892:25)\n    at model.Query._updateMany (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3967:23)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T21:27:49.232Z"}
{"errorMessage":"jwt expired","errorType":"TokenExpiredError","level":"error","message":"🔥 Authentication Error","stack":"TokenExpiredError: jwt expired\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jsonwebtoken\\verify.js:190:21\n    at getSecret (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jsonwebtoken\\verify.js:97:14)\n    at module.exports [as verify] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jsonwebtoken\\verify.js:101:10)\n    at protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:52:29)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)","timestamp":"2025-01-24T21:31:02.781Z","tokenInfo":{"expiredAt":"2025-01-24T21:30:02.000Z","now":"2025-01-24T21:31:02.781Z"}}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T21:32:13.369Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T21:32:13.370Z"}
{"error":{"_message":"Student validation failed","errors":{"classChangeHistory.0.academicYear":{"kind":"required","message":"Path `academicYear` is required.","name":"ValidatorError","path":"academicYear","properties":{"message":"Path `academicYear` is required.","path":"academicYear","type":"required"}}},"message":"Student validation failed: classChangeHistory.0.academicYear: Path `academicYear` is required.","name":"ValidationError"},"level":"error","message":"Errore nell'aggiornamento degli studenti:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T21:32:20.418Z"}
{"error":"Student validation failed: classChangeHistory.0.academicYear: Path `academicYear` is required.","level":"error","message":"Errore nella disattivazione della sezione:","stack":"ValidationError: Student validation failed: classChangeHistory.0.academicYear: Path `academicYear` is required.\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T21:32:20.419Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T21:32:24.708Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T21:32:24.709Z"}
{"error":{"_message":"Student validation failed","errors":{"classChangeHistory.0.academicYear":{"kind":"required","message":"Path `academicYear` is required.","name":"ValidatorError","path":"academicYear","properties":{"message":"Path `academicYear` is required.","path":"academicYear","type":"required"}}},"message":"Student validation failed: classChangeHistory.0.academicYear: Path `academicYear` is required.","name":"ValidationError"},"level":"error","message":"Errore nell'aggiornamento degli studenti:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T21:33:17.996Z"}
{"error":"Student validation failed: classChangeHistory.0.academicYear: Path `academicYear` is required.","level":"error","message":"Errore nella disattivazione della sezione:","stack":"ValidationError: Student validation failed: classChangeHistory.0.academicYear: Path `academicYear` is required.\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at Subdocument.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\types\\subdocument.js:229:12)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T21:33:17.998Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T21:39:19.248Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T21:39:19.249Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T21:39:41.107Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T21:39:41.108Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T21:41:58.898Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T21:41:58.900Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T21:42:15.980Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T21:42:15.982Z"}
{"error":"Cast to ObjectId failed for value \":id\" (type string) at path \"_id\" for model \"School\"","level":"error","message":"Error in SchoolRepository.findById:","schoolId":":id","timestamp":"2025-01-24T21:58:11.466Z","type":"string"}
{"error":"Cast to ObjectId failed for value \":id\" (type string) at path \"_id\" for model \"School\"","level":"error","message":"Errore nel recupero della scuola:","schoolId":":id","timestamp":"2025-01-24T21:58:11.466Z"}
{"error":{"kind":"ObjectId","message":"Cast to ObjectId failed for value \":id\" (type string) at path \"_id\" for model \"School\"","name":"CastError","path":"_id","reason":{},"stringValue":"\":id\"","value":":id","valueType":"string"},"level":"error","message":"Errore nel recupero della scuola con utenti","schoolId":":id","timestamp":"2025-01-24T22:33:42.031Z"}
{"error":{"code":"DB_001","message":"Errore nel recupero della scuola con utenti","metadata":{"originalError":"Cast to ObjectId failed for value \":id\" (type string) at path \"_id\" for model \"School\""},"status":500},"level":"error","message":"Errore nel recupero della scuola","schoolId":":id","timestamp":"2025-01-24T22:33:42.032Z"}
{"error":"Cast to ObjectId failed for value \":id\" (type string) at path \"_id\" for model \"School\"","level":"error","message":"Error in SchoolRepository.findById:","schoolId":":id","timestamp":"2025-01-24T22:33:42.110Z","type":"string"}
{"error":"Cast to ObjectId failed for value \":id\" (type string) at path \"_id\" for model \"School\"","level":"error","message":"Errore nel recupero della scuola:","schoolId":":id","timestamp":"2025-01-24T22:33:42.111Z"}

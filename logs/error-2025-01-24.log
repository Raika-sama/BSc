{"error":"School non trovato","level":"error","message":"Errore nel recupero delle sezioni:","timestamp":"2025-01-24T18:54:17.752Z"}
{"error":"School non trovato","level":"error","message":"Errore nel recupero delle sezioni:","timestamp":"2025-01-24T18:57:19.088Z"}
{"error":"School non trovato","level":"error","message":"Errore nel recupero delle sezioni:","timestamp":"2025-01-24T18:59:00.250Z"}
{"error":"Scuola non trovata","level":"error","message":"Error in SchoolRepository.findById:","timestamp":"2025-01-24T19:14:23.551Z"}
{"error":"Scuola non trovata","level":"error","message":"Errore nel recupero della scuola:","timestamp":"2025-01-24T19:14:23.552Z"}
{"error":{},"level":"error","message":"Errore nel recupero studenti per sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T19:32:39.660Z"}
{"error":"Student is not defined","level":"error","message":"Errore nella disattivazione della sezione:","stack":"ReferenceError: Student is not defined\n    at SchoolRepository.getStudentsBySection (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:555:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async SchoolController.deactivateSection (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:386:26)","timestamp":"2025-01-24T19:32:39.661Z"}
{"error":"Cannot read properties of undefined (reading 'updateStudentsForDeactivatedSection')","level":"error","message":"Errore nella disattivazione della sezione:","stack":"TypeError: Cannot read properties of undefined (reading 'updateStudentsForDeactivatedSection')\n    at SchoolController.deactivateSection (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:392:66)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T20:11:13.219Z"}
{"error":{},"level":"error","message":"Errore nel recupero della scuola","schoolId":"67843ee4e18f3b833160dda8","timestamp":"2025-01-24T20:18:42.957Z"}
{"error":{},"level":"error","message":"Errore nel recupero delle scuole","timestamp":"2025-01-24T20:18:44.672Z"}
{"body":{},"error":{"message":"Cannot read properties of undefined (reading 'findAll')","stack":"TypeError: Cannot read properties of undefined (reading 'findAll')\n    at SchoolController.getAll (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:229:49)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:113:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1737749924616_zthjymk6m","timestamp":"2025-01-24T20:18:44.674Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType="}
{"level":"error","message":"Cannot read properties of undefined (reading 'findAll')","stack":"TypeError: Cannot read properties of undefined (reading 'findAll')\n    at SchoolController.getAll (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:229:49)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:113:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T20:18:44.676Z"}
{"error":{},"level":"error","message":"Errore nel recupero delle scuole","timestamp":"2025-01-24T20:19:27.949Z"}
{"body":{},"error":{"message":"Cannot read properties of undefined (reading 'findAll')","stack":"TypeError: Cannot read properties of undefined (reading 'findAll')\n    at SchoolController.getAll (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:229:49)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:113:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1737749967886_15cixh7k3","timestamp":"2025-01-24T20:19:27.952Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType="}
{"level":"error","message":"Cannot read properties of undefined (reading 'findAll')","stack":"TypeError: Cannot read properties of undefined (reading 'findAll')\n    at SchoolController.getAll (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:229:49)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:113:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-01-24T20:19:27.954Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T20:50:04.617Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T20:50:04.619Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T20:50:14.502Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T20:50:14.503Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T20:50:43.236Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T20:50:43.238Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T20:57:45.371Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T20:57:45.372Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T20:58:09.823Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T20:58:09.824Z"}
{"error":{"_message":"Validation failed","errors":{"sections.0.deactivatedAt":{"kind":"user defined","message":"La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidatorError","path":"sections.0.deactivatedAt","properties":{"fullPath":"sections.0.deactivatedAt","message":"La data di disattivazione deve essere coerente con lo stato della sezione","path":"deactivatedAt","type":"user defined","value":null},"value":null}},"message":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","name":"ValidationError"},"level":"error","message":"Errore durante la riattivazione della sezione:","schoolId":"67843ee4e18f3b833160dda8","sectionName":"A","timestamp":"2025-01-24T20:58:31.550Z"}
{"error":"Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione","level":"error","message":"Errore nella riattivazione della sezione:","stack":"ValidationError: Validation failed: sections.0.deactivatedAt: La data di disattivazione deve essere coerente con lo stato della sezione\n    at _done (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:228:19)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:204:11\n    at schemaPath.doValidate.updateValidator (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\updateValidators.js:162:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-01-24T20:58:31.551Z"}

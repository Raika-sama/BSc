{"error":{"code":"AUTH_002","message":"Token scaduto","metadata":{},"status":401},"ip":"::1","level":"error","message":"Authentication failed","path":"/verify","timestamp":"2025-03-13T10:53:58.676Z"}
{"error":{"code":"AUTH_002","message":"Token scaduto","metadata":{},"status":401},"ip":"::1","level":"error","message":"Auth Error:","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-03-13T10:53:58.678Z"}
{"error":{"code":"AUTH_002","message":"Token scaduto","metadata":{},"status":401},"ip":"::1","level":"error","message":"Authentication failed","path":"/refresh-token","timestamp":"2025-03-13T10:53:58.749Z"}
{"error":{"code":"AUTH_002","message":"Token scaduto","metadata":{},"status":401},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/refresh-token","timestamp":"2025-03-13T10:53:58.750Z"}
{"error":"Studente non trovato","level":"error","message":"Student route error:","method":"GET","path":"/67b20991d8fdac4600a0def6","timestamp":"2025-03-13T10:54:25.576Z","userId":"677bfe44f6789c907c9f3766"}
{"error":"Studente non trovato","level":"error","message":"Student route error:","method":"GET","path":"/67b20991d8fdac4600a0def6","timestamp":"2025-03-13T10:54:25.799Z","userId":"677bfe44f6789c907c9f3766"}
{"error":"Studente non trovato","level":"error","message":"Student route error:","method":"GET","path":"/67b20991d8fdac4600a0def6","timestamp":"2025-03-13T11:30:56.139Z","userId":"677bfe44f6789c907c9f3766"}
{"error":"Studente non trovato","level":"error","message":"Student route error:","method":"GET","path":"/67b20991d8fdac4600a0def6","timestamp":"2025-03-13T11:30:56.352Z","userId":"677bfe44f6789c907c9f3766"}
{"error":"Studente non trovato","level":"error","message":"Student route error:","method":"GET","path":"/67b20991d8fdac4600a0def6","timestamp":"2025-03-13T11:32:44.395Z","userId":"677bfe44f6789c907c9f3766"}
{"error":"Studente non trovato","level":"error","message":"Student route error:","method":"GET","path":"/67b20991d8fdac4600a0def6","timestamp":"2025-03-13T11:32:44.633Z","userId":"677bfe44f6789c907c9f3766"}
{"error":"Studente non trovato","level":"error","message":"Student route error:","method":"GET","path":"/67b20991d8fdac4600a0def6","timestamp":"2025-03-13T11:33:27.578Z","userId":"677bfe44f6789c907c9f3766"}
{"error":"Studente non trovato","level":"error","message":"Student route error:","method":"GET","path":"/67b20991d8fdac4600a0def6","timestamp":"2025-03-13T11:59:36.842Z","userId":"677bfe44f6789c907c9f3766"}
{"error":"Studente non trovato","level":"error","message":"Student route error:","method":"GET","path":"/67b20991d8fdac4600a0def6","timestamp":"2025-03-13T11:59:37.021Z","userId":"677bfe44f6789c907c9f3766"}
{"error":{"message":"Autenticazione studente richiesta","metadata":{}},"ip":"::1","level":"error","message":"Student authentication failed","path":"/first-access/67c4908d647e9de1d9422ed8","timestamp":"2025-03-13T14:16:20.231Z"}
{"error":"Autenticazione studente richiesta","level":"error","message":"StudentAuth error:","method":"POST","path":"/student/first-access/67c4908d647e9de1d9422ed8","timestamp":"2025-03-13T14:16:20.234Z"}
{"error":{},"ip":"::1","level":"error","message":"Student authentication failed","path":"/profile","timestamp":"2025-03-13T14:21:26.697Z"}
{"error":"this.studentAuthService.verifyToken is not a function","level":"error","message":"StudentAuth error:","method":"GET","path":"/student/profile","stack":"TypeError: this.studentAuthService.verifyToken is not a function\n    at AuthMiddleware.protectStudent (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:159:59)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\studentAuthRoutes.js:39:9\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9","timestamp":"2025-03-13T14:21:26.699Z"}
{"error":{},"ip":"::1","level":"error","message":"Student authentication failed","path":"/profile","timestamp":"2025-03-13T14:21:26.712Z"}
{"error":"this.studentAuthService.verifyToken is not a function","level":"error","message":"StudentAuth error:","method":"GET","path":"/student/profile","stack":"TypeError: this.studentAuthService.verifyToken is not a function\n    at AuthMiddleware.protectStudent (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:159:59)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\studentAuthRoutes.js:39:9\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9","timestamp":"2025-03-13T14:21:26.714Z"}
{"error":{},"ip":"::1","level":"error","message":"Student authentication failed","path":"/profile","timestamp":"2025-03-13T14:22:10.043Z"}
{"error":"this.studentAuthService.verifyToken is not a function","level":"error","message":"StudentAuth error:","method":"GET","path":"/student/profile","stack":"TypeError: this.studentAuthService.verifyToken is not a function\n    at AuthMiddleware.protectStudent (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:159:59)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\studentAuthRoutes.js:39:9\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9","timestamp":"2025-03-13T14:22:10.045Z"}
{"error":{},"ip":"::1","level":"error","message":"Student authentication failed","path":"/profile","timestamp":"2025-03-13T14:22:10.055Z"}
{"error":"this.studentAuthService.verifyToken is not a function","level":"error","message":"StudentAuth error:","method":"GET","path":"/student/profile","stack":"TypeError: this.studentAuthService.verifyToken is not a function\n    at AuthMiddleware.protectStudent (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:159:59)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\routes\\studentAuthRoutes.js:39:9\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9","timestamp":"2025-03-13T14:22:10.056Z"}
{"error":"Credenziali non valide","level":"error","message":"Errore durante l'autenticazione dello studente","timestamp":"2025-03-13T14:27:00.847Z","username":"piero@matest.it"}
{"error":"Credenziali non valide","level":"error","message":"Errore durante il login dello studente","timestamp":"2025-03-13T14:27:00.848Z"}
{"error":"Credenziali non valide","level":"error","message":"StudentAuth error:","method":"POST","path":"/login","timestamp":"2025-03-13T14:27:00.849Z"}
{"error":"Credenziali non valide","level":"error","message":"Errore durante l'autenticazione dello studente","timestamp":"2025-03-13T14:27:05.690Z","username":"piero@matest.it"}
{"error":"Credenziali non valide","level":"error","message":"Errore durante il login dello studente","timestamp":"2025-03-13T14:27:05.691Z"}
{"error":"Credenziali non valide","level":"error","message":"StudentAuth error:","method":"POST","path":"/login","timestamp":"2025-03-13T14:27:05.692Z"}
{"error":"Credenziali non valide","level":"error","message":"Errore durante l'autenticazione dello studente","timestamp":"2025-03-13T14:27:13.587Z","username":"piero@matest.it"}
{"error":"Credenziali non valide","level":"error","message":"Errore durante il login dello studente","timestamp":"2025-03-13T14:27:13.587Z"}
{"error":"Credenziali non valide","level":"error","message":"StudentAuth error:","method":"POST","path":"/login","timestamp":"2025-03-13T14:27:13.588Z"}
{"error":"testId is not defined","level":"error","message":"Error checking test availability:","studentId":"67c4908d647e9de1d9422ed8","testType":"CSI","timestamp":"2025-03-13T18:55:16.201Z"}
{"error":"testId is not defined","level":"error","message":"Error starting assigned test:","studentId":"67c4908d647e9de1d9422ed8","testId":"67d323a162a9dd98430d0700","timestamp":"2025-03-13T18:55:16.202Z"}
{"context":{"assignedBy":"677bfe44f6789c907c9f3766","studentId":"67c4908d647e9de1d9422ed8","testData":{"configurazione":{"mostraRisultatiImmediati":false,"randomizzaDomande":true,"tempoLimite":30,"tentativiMax":1},"tipo":"CSI"}},"errorMessage":"Lo studente ha già un test CSI assegnato che non è ancora stato completato","level":"error","message":"Errore in TestRepository.assignTestToStudent:","timestamp":"2025-03-13T18:56:02.400Z"}
{"error":"testId is not defined","level":"error","message":"Error checking test availability:","studentId":"67c4908d647e9de1d9422ed8","testType":"CSI","timestamp":"2025-03-13T18:56:55.383Z"}
{"error":"testId is not defined","level":"error","message":"Error starting assigned test:","studentId":"67c4908d647e9de1d9422ed8","testId":"67d32a69c872220817669fb4","timestamp":"2025-03-13T18:56:55.384Z"}
{"error":"Cannot read properties of undefined (reading 'initializeCSITest')","level":"error","message":"Error starting assigned test:","studentId":"67c4908d647e9de1d9422ed8","testId":"67d32a69c872220817669fb4","timestamp":"2025-03-13T18:59:46.940Z"}
{"error":"this.csiController.initializeCSITest is not a function","level":"error","message":"Error initializing CSI test:","stack":"TypeError: this.csiController.initializeCSITest is not a function\n    at TestController.startAssignedTest (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\testController.js:554:57)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","studentId":"67c4908d647e9de1d9422ed8","testId":"67d32a69c872220817669fb4","timestamp":"2025-03-13T19:10:51.966Z"}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:29:16.843Z","token":"undefined..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:29:16.873Z","token":"undefined..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:33:09.162Z","token":"undefined..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:33:09.188Z","token":"undefined..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:33:14.661Z","token":"undefined..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:33:14.686Z","token":"undefined..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:42:10.177Z","token":"undefined..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:42:10.203Z","token":"undefined..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:45:53.320Z","token":"undefined..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:45:53.350Z","token":"undefined..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:49:55.354Z","token":"67d336d9bb..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:49:55.419Z","token":"67d336d9bb..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:49:55.454Z","token":"67d336d9bb..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:53:59.576Z","token":"67d337d2bb..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:53:59.632Z","token":"67d337d2bb..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:53:59.658Z","token":"67d337d2bb..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:59:19.977Z","token":"67d337d2bb..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:59:20.003Z","token":"67d337d2bb..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:59:31.979Z","token":"67d337d2bb..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T19:59:32.003Z","token":"67d337d2bb..."}
{"error":"Cannot destructure property 'token' of 'req.params' as it is undefined.","level":"error","message":"Error starting assigned test:","stack":"TypeError: Cannot destructure property 'token' of 'req.params' as it is undefined.\n    at CSIController.startTestWithToken (C:\\Users\\ricca\\Desktop\\BSc\\src\\engines\\CSI\\CSIController.js:190:17)\n    at TestController.startAssignedTest (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\testController.js:556:57)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","studentId":"67c4908d647e9de1d9422ed8","testId":"67d33b6fda053d03c87354c5","timestamp":"2025-03-13T20:09:26.192Z"}
{"error":"E11000 duplicate key error collection: brainScannerDB.studentAuth index: username_1 dup key: { username: \"pippo@test.it\" }","level":"error","message":"Errore durante la generazione delle credenziali","stack":"MongoServerError: E11000 duplicate key error collection: brainScannerDB.studentAuth index: username_1 dup key: { username: \"pippo@test.it\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\lib\\operations\\insert.js:50:33\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\lib\\operations\\command.js:84:64\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","studentId":"67d1dc3cf6b1bd007cd5a301","timestamp":"2025-03-13T20:22:25.292Z"}
{"error":"E11000 duplicate key error collection: brainScannerDB.studentAuth index: username_1 dup key: { username: \"pippo@test.it\" }","level":"error","message":"Errore durante la generazione delle credenziali","stack":"MongoServerError: E11000 duplicate key error collection: brainScannerDB.studentAuth index: username_1 dup key: { username: \"pippo@test.it\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\lib\\operations\\insert.js:50:33\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\lib\\operations\\command.js:84:64\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-13T20:22:25.293Z"}
{"error":"E11000 duplicate key error collection: brainScannerDB.studentAuth index: username_1 dup key: { username: \"pippo@test.it\" }","level":"error","message":"StudentAuth error:","method":"POST","path":"/admin/generate/67d1dc3cf6b1bd007cd5a301","stack":"MongoServerError: E11000 duplicate key error collection: brainScannerDB.studentAuth index: username_1 dup key: { username: \"pippo@test.it\" }\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\lib\\operations\\insert.js:50:33\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\lib\\operations\\command.js:84:64\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-13T20:22:25.294Z"}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T20:29:29.996Z","token":"undefined..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T20:29:30.038Z","token":"undefined..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T20:30:01.974Z","token":"undefined..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T20:30:02.001Z","token":"undefined..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T20:31:31.098Z","token":"67d3409aff..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T20:31:31.175Z","token":"67d3409aff..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T20:31:31.208Z","token":"67d3409aff..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T20:32:43.986Z","token":"67d3409aff..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T20:32:44.020Z","token":"67d3409aff..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T20:35:35.297Z","token":"67d3418e00..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T20:35:35.369Z","token":"67d3418e00..."}
{"error":"Token non valido o test non trovato","level":"error","message":"Error verifying CSI token:","timestamp":"2025-03-13T20:35:35.399Z","token":"67d3418e00..."}

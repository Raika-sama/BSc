{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/","timestamp":"2025-03-01T23:45:19.857Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{"limit":"25","page":"1","search":"","sort":"-createdAt"},"requestId":"req_1740872719854_0nd64p80e","timestamp":"2025-03-01T23:45:19.868Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt"}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-01T23:45:19.870Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/verify","timestamp":"2025-03-01T23:45:26.154Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-03-01T23:45:26.155Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/logout","timestamp":"2025-03-01T23:45:26.167Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-01T23:45:26.168Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/verify","timestamp":"2025-03-02T01:47:15.575Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-03-02T01:47:15.579Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/logout","timestamp":"2025-03-02T01:47:15.614Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-02T01:47:15.616Z"}
{"error":{"message":"Token non più valido","metadata":{}},"level":"error","message":"Logout error","timestamp":"2025-03-02T02:06:02.751Z"}
{"error":{"message":"Token non più valido","metadata":{}},"level":"error","message":"Logout failed","timestamp":"2025-03-02T02:06:02.756Z"}
{"error":{},"level":"error","message":"Auth Route Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-02T02:06:02.759Z"}
{"error":{},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-02T02:06:02.762Z","userId":"67c0296a250c5746c3d96444"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/verify","timestamp":"2025-03-02T11:01:11.343Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-03-02T11:01:11.345Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/logout","timestamp":"2025-03-02T11:01:11.367Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-02T11:01:11.368Z"}
{"error":{"message":"Token non più valido","metadata":{}},"level":"error","message":"Logout error","timestamp":"2025-03-02T11:01:35.750Z"}
{"error":{"message":"Token non più valido","metadata":{}},"level":"error","message":"Logout failed","timestamp":"2025-03-02T11:01:35.752Z"}
{"error":{},"level":"error","message":"Auth Route Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-02T11:01:35.753Z"}
{"error":{},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-02T11:01:35.755Z","userId":"67c0296a250c5746c3d96444"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/","timestamp":"2025-03-02T12:01:46.631Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1740916906628_3fhv50pt5","timestamp":"2025-03-02T12:01:46.639Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType="}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-02T12:01:46.643Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/verify","timestamp":"2025-03-02T12:01:50.111Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-03-02T12:01:50.112Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/logout","timestamp":"2025-03-02T12:01:50.124Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-02T12:01:50.125Z"}
{"error":"this.findById(...).session is not a function","level":"error","message":"Errore nel cambio tipo scuola:","schoolId":"679fdad474255ebc8afab683","stack":"TypeError: this.findById(...).session is not a function\n    at SchoolRepository.changeSchoolType (C:\\Users\\ricca\\Desktop\\BSc\\src\\repositories\\SchoolRepository.js:1077:54)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async SchoolController.changeSchoolType (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\schoolController.js:1026:28)","timestamp":"2025-03-02T12:34:10.457Z"}
{"error":"La scuola deve avere un manager","level":"error","message":"Errore nel cambio tipo scuola:","schoolId":"679fdad474255ebc8afab683","stack":"Error: La scuola deve avere un manager\n    at model.<anonymous> (C:\\Users\\ricca\\Desktop\\BSc\\src\\models\\School.js:157:19)\n    at callMiddlewareFunction (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\kareem\\index.js:628:27)\n    at model.next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\kareem\\index.js:93:7)\n    at _next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\kareem\\index.js:146:10)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\kareem\\index.js:653:30\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-02T12:38:19.552Z"}
{"error":"Cast to embedded failed for value \"{\n  fromClass: '$classId',\n  fromSection: '$section',\n  fromYear: '$year',\n  date: 2025-03-02T12:49:30.762Z,\n  reason: 'Disattivazione automatica per cambio tipo scuola',\n  academicYear: '2024/2025'\n}\" (type Object) at path \"classChangeHistory\" because of \"CastError\"","level":"error","message":"Errore nel cambio tipo scuola:","schoolId":"679fdad474255ebc8afab683","stack":"CastError: Cast to embedded failed for value \"{\n  fromClass: '$classId',\n  fromSection: '$section',\n  fromYear: '$year',\n  date: 2025-03-02T12:49:30.762Z,\n  reason: 'Disattivazione automatica per cambio tipo scuola',\n  academicYear: '2024/2025'\n}\" (type Object) at path \"classChangeHistory\" because of \"CastError\"\n    at DocumentArrayPath.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\documentarray.js:498:19)\n    at SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at castUpdateVal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:525:22)\n    at walkUpdatePath (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:280:26)\n    at castUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:110:7)\n    at model.Query._castUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4727:10)\n    at model.Query._updateThunk (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3892:25)\n    at model.Query._updateMany (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3967:23)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-02T12:49:30.784Z"}
{"error":"Class validation failed: year: 4 non è un anno valido per questo tipo di scuola","level":"error","message":"Errore nel cambio tipo scuola:","schoolId":"67c454061dbaba04e72dc2ec","stack":"ValidationError: Class validation failed: year: 4 non è un anno valido per questo tipo di scuola\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-02T12:50:27.918Z"}
{"error":"Class validation failed: year: 4 non è un anno valido per questo tipo di scuola","level":"error","message":"Errore nel cambio tipo scuola:","schoolId":"67c454061dbaba04e72dc2ec","stack":"ValidationError: Class validation failed: year: 4 non è un anno valido per questo tipo di scuola\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-02T12:54:38.300Z"}
{"error":"Class validation failed: year: 4 non è un anno valido per questo tipo di scuola","level":"error","message":"Errore nel cambio tipo scuola:","schoolId":"67c454061dbaba04e72dc2ec","stack":"ValidationError: Class validation failed: year: 4 non è un anno valido per questo tipo di scuola\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-02T12:54:57.352Z"}
{"error":"Class validation failed: year: 4 non è un anno valido per questo tipo di scuola","level":"error","message":"Errore nel cambio tipo scuola:","schoolId":"67c454061dbaba04e72dc2ec","stack":"ValidationError: Class validation failed: year: 4 non è un anno valido per questo tipo di scuola\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-02T12:58:34.523Z"}
{"error":"Cast to embedded failed for value \"{\n  fromClass: '$classId',\n  fromSection: '$section',\n  fromYear: '$year',\n  date: 2025-03-02T12:59:20.254Z,\n  reason: 'Disattivazione automatica per cambio tipo scuola',\n  academicYear: '2024/2025'\n}\" (type Object) at path \"classChangeHistory\" because of \"CastError\"","level":"error","message":"Errore nel cambio tipo scuola:","schoolId":"679fdad474255ebc8afab683","stack":"CastError: Cast to embedded failed for value \"{\n  fromClass: '$classId',\n  fromSection: '$section',\n  fromYear: '$year',\n  date: 2025-03-02T12:59:20.254Z,\n  reason: 'Disattivazione automatica per cambio tipo scuola',\n  academicYear: '2024/2025'\n}\" (type Object) at path \"classChangeHistory\" because of \"CastError\"\n    at DocumentArrayPath.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\documentarray.js:498:19)\n    at SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at castUpdateVal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:525:22)\n    at walkUpdatePath (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:280:26)\n    at castUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:110:7)\n    at model.Query._castUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4727:10)\n    at model.Query._updateThunk (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3892:25)\n    at model.Query._updateMany (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3967:23)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-02T12:59:20.274Z"}
{"error":"Cast to embedded failed for value \"{\n  fromClass: '$classId',\n  fromSection: '$section',\n  fromYear: '$year',\n  date: 2025-03-02T12:59:24.009Z,\n  reason: 'Disattivazione automatica per cambio tipo scuola',\n  academicYear: '2024/2025'\n}\" (type Object) at path \"classChangeHistory\" because of \"CastError\"","level":"error","message":"Errore nel cambio tipo scuola:","schoolId":"679fdad474255ebc8afab683","stack":"CastError: Cast to embedded failed for value \"{\n  fromClass: '$classId',\n  fromSection: '$section',\n  fromYear: '$year',\n  date: 2025-03-02T12:59:24.009Z,\n  reason: 'Disattivazione automatica per cambio tipo scuola',\n  academicYear: '2024/2025'\n}\" (type Object) at path \"classChangeHistory\" because of \"CastError\"\n    at DocumentArrayPath.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\documentarray.js:498:19)\n    at SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at castUpdateVal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:525:22)\n    at walkUpdatePath (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:280:26)\n    at castUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:110:7)\n    at model.Query._castUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4727:10)\n    at model.Query._updateThunk (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3892:25)\n    at model.Query._updateMany (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3967:23)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-02T12:59:24.027Z"}
{"error":"Class validation failed: year: 4 non è un anno valido per questo tipo di scuola","level":"error","message":"Errore nel cambio tipo scuola:","schoolId":"67c454061dbaba04e72dc2ec","stack":"ValidationError: Class validation failed: year: 4 non è un anno valido per questo tipo di scuola\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-02T12:59:36.088Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/verify","timestamp":"2025-03-02T13:03:02.196Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-03-02T13:03:02.197Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/logout","timestamp":"2025-03-02T13:03:02.210Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-02T13:03:02.211Z"}
{"error":"Cast to embedded failed for value \"{\n  fromClass: '$classId',\n  fromSection: '$section',\n  fromYear: '$year',\n  date: 2025-03-02T13:03:46.532Z,\n  reason: 'Disattivazione automatica per cambio tipo scuola',\n  academicYear: '2024/2025'\n}\" (type Object) at path \"classChangeHistory\" because of \"CastError\"","level":"error","message":"Errore nel cambio tipo scuola:","stack":"CastError: Cast to embedded failed for value \"{\n  fromClass: '$classId',\n  fromSection: '$section',\n  fromYear: '$year',\n  date: 2025-03-02T13:03:46.532Z,\n  reason: 'Disattivazione automatica per cambio tipo scuola',\n  academicYear: '2024/2025'\n}\" (type Object) at path \"classChangeHistory\" because of \"CastError\"\n    at DocumentArrayPath.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\documentarray.js:498:19)\n    at SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at castUpdateVal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:525:22)\n    at walkUpdatePath (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:280:26)\n    at castUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:110:7)\n    at model.Query._castUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4727:10)\n    at model.Query._updateThunk (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3892:25)\n    at model.Query._updateMany (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3967:23)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-02T13:03:46.551Z"}
{"error":"Cast to embedded failed for value \"{\n  fromClass: '$classId',\n  fromSection: '$section',\n  fromYear: '$year',\n  date: 2025-03-02T13:03:46.532Z,\n  reason: 'Disattivazione automatica per cambio tipo scuola',\n  academicYear: '2024/2025'\n}\" (type Object) at path \"classChangeHistory\" because of \"CastError\"","level":"error","message":"Errore nel cambio tipo scuola:","schoolId":"67c454061dbaba04e72dc2ec","stack":"CastError: Cast to embedded failed for value \"{\n  fromClass: '$classId',\n  fromSection: '$section',\n  fromYear: '$year',\n  date: 2025-03-02T13:03:46.532Z,\n  reason: 'Disattivazione automatica per cambio tipo scuola',\n  academicYear: '2024/2025'\n}\" (type Object) at path \"classChangeHistory\" because of \"CastError\"\n    at DocumentArrayPath.cast (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schema\\documentarray.js:498:19)\n    at SchemaType.applySetters (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n    at castUpdateVal (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:525:22)\n    at walkUpdatePath (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:280:26)\n    at castUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\helpers\\query\\castUpdate.js:110:7)\n    at model.Query._castUpdate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4727:10)\n    at model.Query._updateThunk (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3892:25)\n    at model.Query._updateMany (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:3967:23)\n    at model.Query.exec (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\query.js:4447:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-02T13:03:46.552Z"}
{"error":"E11000 duplicate key error collection: brainScannerDB.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('67c454061dbaba04e72dc2ec'), year: 4, section: \"A\", academicYear: \"2024/2025\" }","level":"error","message":"Errore nel cambio tipo scuola:","stack":"MongoBulkWriteError: E11000 duplicate key error collection: brainScannerDB.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('67c454061dbaba04e72dc2ec'), year: 4, section: \"A\", academicYear: \"2024/2025\" }\n    at OrderedBulkOperation.handleWriteError (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\lib\\bulk\\common.js:860:22)\n    at resultHandler (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\lib\\bulk\\common.js:350:27)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\lib\\utils.js:297:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-02T13:08:22.232Z"}
{"error":"E11000 duplicate key error collection: brainScannerDB.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('67c454061dbaba04e72dc2ec'), year: 4, section: \"A\", academicYear: \"2024/2025\" }","level":"error","message":"Errore nel cambio tipo scuola:","schoolId":"67c454061dbaba04e72dc2ec","stack":"MongoBulkWriteError: E11000 duplicate key error collection: brainScannerDB.classes index: schoolId_1_year_1_section_1_academicYear_1 dup key: { schoolId: ObjectId('67c454061dbaba04e72dc2ec'), year: 4, section: \"A\", academicYear: \"2024/2025\" }\n    at OrderedBulkOperation.handleWriteError (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\lib\\bulk\\common.js:860:22)\n    at resultHandler (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\lib\\bulk\\common.js:350:27)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\node_modules\\mongodb\\lib\\utils.js:297:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-02T13:08:22.233Z"}
{"error":"Class validation failed: year: 4 non è un anno valido per questo tipo di scuola","level":"error","message":"Errore nel cambio tipo scuola:","stack":"ValidationError: Class validation failed: year: 4 non è un anno valido per questo tipo di scuola\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-02T13:17:20.163Z"}
{"error":"Class validation failed: year: 4 non è un anno valido per questo tipo di scuola","level":"error","message":"Errore nel cambio tipo scuola:","schoolId":"67c454061dbaba04e72dc2ec","stack":"ValidationError: Class validation failed: year: 4 non è un anno valido per questo tipo di scuola\n    at Document.invalidate (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3219:32)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\document.js:3012:17\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\schematype.js:1368:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-02T13:17:20.164Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/","timestamp":"2025-03-02T14:04:23.050Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{"limit":"25","page":"1","search":"","sort":"-createdAt"},"requestId":"req_1740924263047_rbtxem7fz","timestamp":"2025-03-02T14:04:23.052Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt"}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-02T14:04:23.053Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/verify","timestamp":"2025-03-02T14:04:26.345Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-03-02T14:04:26.346Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/logout","timestamp":"2025-03-02T14:04:26.358Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-02T14:04:26.361Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/","timestamp":"2025-03-02T15:32:50.764Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{},"requestId":"req_1740929570760_qmgwhdd01","timestamp":"2025-03-02T15:32:50.765Z","url":"/api/v1/classes"}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-02T15:32:50.766Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/","timestamp":"2025-03-02T15:35:08.283Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{"limit":"25","page":"1","search":"","sort":"-createdAt"},"requestId":"req_1740929708281_tqyzuwozl","timestamp":"2025-03-02T15:35:08.284Z","url":"/api/v1/users?page=1&limit=25&search=&sort=-createdAt"}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-02T15:35:08.285Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/67c02995250c5746c3d9647c","timestamp":"2025-03-02T15:35:29.784Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{},"requestId":"req_1740929729779_bkxxaxotx","timestamp":"2025-03-02T15:35:29.786Z","url":"/api/v1/users/67c02995250c5746c3d9647c"}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-02T15:35:29.787Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/verify","timestamp":"2025-03-02T15:35:36.079Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-03-02T15:35:36.079Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/logout","timestamp":"2025-03-02T15:35:36.086Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-02T15:35:36.087Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/","timestamp":"2025-03-02T16:45:12.639Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{"institutionType":"","limit":"10","page":"1","populate":"manager","region":"","schoolType":""},"requestId":"req_1740933912635_2n0q110ut","timestamp":"2025-03-02T16:45:12.640Z","url":"/api/v1/schools?page=1&limit=10&populate=manager&region=&schoolType=&institutionType="}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-02T16:45:12.641Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/verify","timestamp":"2025-03-02T16:52:53.576Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-03-02T16:52:53.577Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/logout","timestamp":"2025-03-02T16:52:53.586Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-02T16:52:53.588Z"}
{"error":{"code":"RES_001","message":"Record di autenticazione non trovato","metadata":{},"status":404},"level":"error","message":"Error updating password in repository:","studentId":"67c4908d647e9de1d9422ed8","timestamp":"2025-03-02T17:41:21.134Z"}
{"code":"RES_001","level":"error","message":"Record di autenticazione non trovato","studentId":"67c4908d647e9de1d9422ed8","timestamp":"2025-03-02T17:41:21.135Z","type":"Object"}
{"code":"RES_001","level":"error","message":"Record di autenticazione non trovato","metadata":{},"status":404,"timestamp":"2025-03-02T17:41:21.136Z"}
{"error":"this.handleError is not a function","level":"error","message":"StudentAuth Route Error:","method":"POST","path":"/admin/generate/67c4908d647e9de1d9422ed8","timestamp":"2025-03-02T17:41:21.138Z"}
{"error":"this.handleError is not a function","level":"error","message":"StudentAuth error:","method":"POST","path":"/admin/generate/67c4908d647e9de1d9422ed8","stack":"TypeError: this.handleError is not a function\n    at StudentAuthController.generateCredentials (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\StudentAuthController.js:28:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-02T17:41:21.139Z"}
{"error":{"code":"RES_001","message":"Record di autenticazione non trovato","metadata":{},"status":404},"level":"error","message":"Error updating password in repository:","studentId":"67c4908d647e9de1d9422ed8","timestamp":"2025-03-02T17:45:38.958Z"}
{"code":"RES_001","level":"error","message":"Record di autenticazione non trovato","studentId":"67c4908d647e9de1d9422ed8","timestamp":"2025-03-02T17:45:38.962Z","type":"Object"}
{"code":"RES_001","level":"error","message":"Record di autenticazione non trovato","metadata":{},"status":404,"timestamp":"2025-03-02T17:45:38.965Z"}
{"error":"this.handleError is not a function","level":"error","message":"StudentAuth Route Error:","method":"POST","path":"/admin/generate/67c4908d647e9de1d9422ed8","timestamp":"2025-03-02T17:45:38.967Z"}
{"error":"this.handleError is not a function","level":"error","message":"StudentAuth error:","method":"POST","path":"/admin/generate/67c4908d647e9de1d9422ed8","stack":"TypeError: this.handleError is not a function\n    at StudentAuthController.generateCredentials (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\StudentAuthController.js:28:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-02T17:45:38.969Z"}
{"error":{"code":"RES_001","message":"Record di autenticazione non trovato","metadata":{},"status":404},"level":"error","message":"Error updating password in repository:","studentId":"67c4908d647e9de1d9422ed8","timestamp":"2025-03-02T17:48:13.982Z"}
{"code":"RES_001","level":"error","message":"Record di autenticazione non trovato","studentId":"67c4908d647e9de1d9422ed8","timestamp":"2025-03-02T17:48:13.983Z","type":"Object"}
{"code":"RES_001","level":"error","message":"Record di autenticazione non trovato","metadata":{},"status":404,"timestamp":"2025-03-02T17:48:13.984Z"}
{"error":"this.handleError is not a function","level":"error","message":"StudentAuth Route Error:","method":"POST","path":"/admin/generate/67c4908d647e9de1d9422ed8","timestamp":"2025-03-02T17:48:13.984Z"}
{"error":"this.handleError is not a function","level":"error","message":"StudentAuth error:","method":"POST","path":"/admin/generate/67c4908d647e9de1d9422ed8","stack":"TypeError: this.handleError is not a function\n    at StudentAuthController.generateCredentials (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\StudentAuthController.js:28:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-02T17:48:13.985Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/unassigned-to-school","timestamp":"2025-03-02T17:53:45.057Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{},"requestId":"req_1740938025055_31opwfrih","timestamp":"2025-03-02T17:53:45.060Z","url":"/api/v1/students/unassigned-to-school"}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-02T17:53:45.074Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/","timestamp":"2025-03-02T17:53:45.081Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/","timestamp":"2025-03-02T17:53:45.086Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{"limit":"10","page":"1","populate":"manager"},"requestId":"req_1740938025078_nr39k9dne","timestamp":"2025-03-02T17:53:45.089Z","url":"/api/v1/schools?page=1&limit=10&populate=manager"}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-02T17:53:45.090Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{"limit":"50","page":"1"},"requestId":"req_1740938025083_9amjxkkpg","timestamp":"2025-03-02T17:53:45.092Z","url":"/api/v1/students?page=1&limit=50"}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-02T17:53:45.093Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/67c4908d647e9de1d9422ed8","timestamp":"2025-03-02T17:53:46.971Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{"includeTestCount":"true"},"requestId":"req_1740938026967_jc714jhy7","timestamp":"2025-03-02T17:53:46.972Z","url":"/api/v1/students/67c4908d647e9de1d9422ed8?includeTestCount=true"}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-02T17:53:46.972Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/unassigned-to-school","timestamp":"2025-03-02T17:53:47.061Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{},"requestId":"req_1740938027059_97kk6bcv5","timestamp":"2025-03-02T17:53:47.062Z","url":"/api/v1/students/unassigned-to-school"}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-02T17:53:47.062Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/","timestamp":"2025-03-02T17:53:47.071Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/","timestamp":"2025-03-02T17:53:47.075Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{"limit":"10","page":"1","populate":"manager"},"requestId":"req_1740938027066_z8v3dfzsr","timestamp":"2025-03-02T17:53:47.075Z","url":"/api/v1/schools?page=1&limit=10&populate=manager"}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-02T17:53:47.076Z"}
{"body":{},"error":{"message":"Autenticazione richiesta"},"level":"error","message":"Errore richiesta","method":"GET","query":{"limit":"50","page":"1"},"requestId":"req_1740938027073_onzaeh62n","timestamp":"2025-03-02T17:53:47.079Z","url":"/api/v1/students?page=1&limit=50"}
{"level":"error","message":"Autenticazione richiesta","timestamp":"2025-03-02T17:53:47.079Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/verify","timestamp":"2025-03-02T17:53:50.358Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"GET","path":"/api/v1/auth/verify","timestamp":"2025-03-02T17:53:50.359Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Authentication failed","path":"/logout","timestamp":"2025-03-02T17:53:50.368Z"}
{"error":{"message":"Autenticazione richiesta","metadata":{}},"ip":"::1","level":"error","message":"Auth Error:","method":"POST","path":"/api/v1/auth/logout","timestamp":"2025-03-02T17:53:50.370Z"}
{"error":{"code":"RES_001","message":"Record di autenticazione non trovato","metadata":{},"status":404},"level":"error","message":"Error updating password in repository:","studentId":"67c4908d647e9de1d9422ed8","timestamp":"2025-03-02T17:53:57.616Z"}
{"code":"RES_001","level":"error","message":"Record di autenticazione non trovato","studentId":"67c4908d647e9de1d9422ed8","timestamp":"2025-03-02T17:53:57.617Z","type":"Object"}
{"code":"RES_001","level":"error","message":"Record di autenticazione non trovato","metadata":{},"status":404,"timestamp":"2025-03-02T17:53:57.618Z"}
{"error":"this.handleError is not a function","level":"error","message":"StudentAuth Route Error:","method":"POST","path":"/admin/generate/67c4908d647e9de1d9422ed8","timestamp":"2025-03-02T17:53:57.618Z"}
{"error":"this.handleError is not a function","level":"error","message":"StudentAuth error:","method":"POST","path":"/admin/generate/67c4908d647e9de1d9422ed8","stack":"TypeError: this.handleError is not a function\n    at StudentAuthController.generateCredentials (C:\\Users\\ricca\\Desktop\\BSc\\src\\controllers\\StudentAuthController.js:28:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-02T17:53:57.619Z"}

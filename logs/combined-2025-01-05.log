{"level":"error","message":"connect ECONNREFUSED ::1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{},"setName":null,"stale":false,"type":"Unknown"},"timestamp":"2025-01-05T15:01:46.076Z"}
{"level":"info","message":"Database connection closed","timestamp":"2025-01-05T15:01:46.086Z"}
{"level":"info","message":"Starting database migration...","timestamp":"2025-01-05T15:05:52.196Z"}
{"level":"info","message":"Attempting to connect to MongoDB Atlas...","timestamp":"2025-01-05T15:05:52.200Z"}
{"error":"connect ECONNREFUSED ::1:27017","level":"error","message":"Migration failed:","stack":"MongooseServerSelectionError: connect ECONNREFUSED ::1:27017\n    at _handleConnectionErrors (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\connection.js:816:11)\n    at NativeConnection.openUri (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\mongoose\\lib\\connection.js:791:11)\n    at async runMigration (C:\\Users\\ricca\\Desktop\\BSc\\src\\database\\migrations\\initial-setup.js:13:9)","timestamp":"2025-01-05T15:06:22.227Z"}
{"level":"info","message":"Database connection closed","timestamp":"2025-01-05T15:06:22.236Z"}
{"level":"info","message":"Starting database migration...","timestamp":"2025-01-05T15:16:02.982Z"}
{"level":"info","message":"Attempting to connect to MongoDB Atlas...","timestamp":"2025-01-05T15:16:02.986Z"}
{"level":"info","message":"Successfully connected to MongoDB Atlas","timestamp":"2025-01-05T15:16:03.485Z"}
{"level":"info","message":"Created collection: users","timestamp":"2025-01-05T15:16:03.533Z"}
{"level":"info","message":"Created collection: schools","timestamp":"2025-01-05T15:16:03.583Z"}
{"level":"info","message":"Created collection: classes","timestamp":"2025-01-05T15:16:03.633Z"}
{"level":"info","message":"Created index on users.email","timestamp":"2025-01-05T15:16:03.682Z"}
{"level":"info","message":"Created index on schools.name","timestamp":"2025-01-05T15:16:03.749Z"}
{"level":"info","message":"Migration completed successfully","timestamp":"2025-01-05T15:16:03.750Z"}
{"level":"info","message":"Database connection closed","timestamp":"2025-01-05T15:16:03.757Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:10:58.524Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-05T17:10:59.035Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:10:59.046Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:10:59.047Z"}
{"level":"info","message":"Auth Route Called: POST /api/v1/auth/register","timestamp":"2025-01-05T17:12:26.382Z"}
{"level":"info","message":"Nuovo utente registrato","timestamp":"2025-01-05T17:12:26.548Z","userId":"677abd7a4fce72d2489a3c60"}
{"level":"info","message":"Auth Route Called: POST /api/v1/auth/login","timestamp":"2025-01-05T17:14:32.393Z"}
{"level":"info","message":"Login utente effettuato","timestamp":"2025-01-05T17:14:32.519Z","userId":"677abd7a4fce72d2489a3c60"}
{"level":"info","message":"Route chiamata: [GET] /api/v1/protected-route","timestamp":"2025-01-05T17:14:40.943Z"}
{"level":"warn","message":"Route non trovata: GET /api/v1/protected-route","timestamp":"2025-01-05T17:14:40.943Z"}
{"duration":"2ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"GET","requestId":"req_1736097280942_ftxx6yom3","responseSize":"83 Bytes","statusCode":404,"timestamp":"2025-01-05T17:14:40.944Z","url":"/api/v1/protected-route","userAgent":"curl/8.11.0"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:16:09.873Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-05T17:16:10.369Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:16:10.378Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:16:10.380Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:17:04.490Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-05T17:17:04.972Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:17:04.978Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:17:04.979Z"}
{"level":"info","message":"Auth Route Called: GET /api/v1/auth/me","timestamp":"2025-01-05T17:17:15.882Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:18:22.987Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-05T17:18:23.375Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:18:23.381Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:18:23.383Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:18:53.228Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-05T17:18:53.605Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:18:53.612Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:18:53.613Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:24:19.318Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-05T17:24:19.746Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:24:19.759Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:24:19.760Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:26:50.732Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-05T17:26:51.198Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:26:51.207Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:26:51.208Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:26:52.942Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-05T17:26:53.382Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:26:53.389Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:26:53.390Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:31:23.881Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-05T17:31:24.357Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:31:24.365Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:31:24.366Z"}
{"level":"info","message":"Route chiamata: [GET] /api/v1/health","timestamp":"2025-01-05T17:32:51.360Z"}
{"level":"info","message":"Health check eseguito","status":{"database":{"connected":true},"environment":"development","memory":{"free":3156128,"usage":{"arrayBuffers":18385455,"external":20744872,"heapTotal":27201536,"heapUsed":24041400,"rss":68538368}},"status":"healthy","timestamp":"2025-01-05T17:32:51.361Z","uptime":88.4447011},"timestamp":"2025-01-05T17:32:51.361Z"}
{"level":"info","message":"Route chiamata: [POST] /api/v1/schools","timestamp":"2025-01-05T17:33:35.487Z"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"message":"jwt malformed","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\jsonwebtoken\\verify.js:70:17)\n    at exports.protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:30:29)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736098415486_3wxcb31en","timestamp":"2025-01-05T17:33:35.489Z","url":"/api/v1/schools"}
{"duration":"6ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736098415486_3wxcb31en","responseSize":"1.22 KB","statusCode":401,"timestamp":"2025-01-05T17:33:35.492Z","url":"/api/v1/schools","userAgent":"curl/8.11.0"}
{"level":"info","message":"Route chiamata: [POST] /api/v1/schools","timestamp":"2025-01-05T17:35:28.911Z"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"message":"AppError is not a constructor","stack":"TypeError: AppError is not a constructor\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:63:17\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at exports.protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:53:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736098528910_ad22wg35f","timestamp":"2025-01-05T17:35:28.943Z","url":"/api/v1/schools"}
{"duration":"36ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736098528910_ad22wg35f","responseSize":"1.2 KB","statusCode":500,"timestamp":"2025-01-05T17:35:28.946Z","url":"/api/v1/schools","userAgent":"curl/8.11.0"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:37:11.601Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-05T17:37:12.032Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:37:12.038Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:37:12.039Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:37:36.364Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-05T17:37:36.774Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:37:36.781Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:37:36.782Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:38:18.552Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-05T17:38:18.992Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:38:19.001Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:38:19.003Z"}
{"level":"info","message":"Route chiamata: [POST] /api/v1/schools","timestamp":"2025-01-05T17:38:53.330Z"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"message":"currentUser.hasPasswordChangedAfter is not a function","stack":"TypeError: currentUser.hasPasswordChangedAfter is not a function\n    at exports.protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:37:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736098733328_4mq4sju46","timestamp":"2025-01-05T17:38:53.359Z","url":"/api/v1/schools"}
{"duration":"36ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736098733328_4mq4sju46","responseSize":"435 Bytes","statusCode":500,"timestamp":"2025-01-05T17:38:53.365Z","url":"/api/v1/schools","userAgent":"curl/8.11.0"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:39:25.494Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-05T17:39:25.933Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:39:25.939Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:39:25.940Z"}
{"level":"info","message":"Route chiamata: [POST] /api/v1/schools","timestamp":"2025-01-05T17:39:26.745Z"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"message":"AppError is not a constructor","stack":"TypeError: AppError is not a constructor\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:63:17\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at exports.protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:53:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736098766744_on7nphpk0","timestamp":"2025-01-05T17:39:26.791Z","url":"/api/v1/schools"}
{"duration":"54ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736098766744_on7nphpk0","responseSize":"1.2 KB","statusCode":500,"timestamp":"2025-01-05T17:39:26.798Z","url":"/api/v1/schools","userAgent":"curl/8.11.0"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:41:18.397Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-05T17:41:18.819Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:41:18.826Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:41:18.827Z"}
{"level":"info","message":"Route chiamata: [POST] /api/v1/schools","timestamp":"2025-01-05T17:41:23.281Z"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"message":"Non hai i permessi per questa azione","stack":"Error: Non hai i permessi per questa azione\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:63:17\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at exports.protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:53:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736098883279_n9dey9vp0","timestamp":"2025-01-05T17:41:23.334Z","url":"/api/v1/schools"}
{"duration":"67ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736098883279_n9dey9vp0","responseSize":"1.22 KB","statusCode":403,"timestamp":"2025-01-05T17:41:23.347Z","url":"/api/v1/schools","userAgent":"curl/8.11.0"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:42:02.713Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-05T17:42:03.116Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:42:03.125Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:42:03.126Z"}
{"level":"info","message":"Route chiamata: [POST] /api/v1/schools","timestamp":"2025-01-05T17:42:05.599Z"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"message":"userRepository is not defined","stack":"ReferenceError: userRepository is not defined\n    at exports.protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:31:22)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:47:12)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:328:13)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736098925597_q4fpxctnd","timestamp":"2025-01-05T17:42:05.603Z","url":"/api/v1/schools"}
{"duration":"12ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736098925597_q4fpxctnd","responseSize":"1.26 KB","statusCode":500,"timestamp":"2025-01-05T17:42:05.609Z","url":"/api/v1/schools","userAgent":"curl/8.11.0"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:42:46.124Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-05T17:42:46.546Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:42:46.554Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:42:46.555Z"}
{"level":"info","message":"Route chiamata: [POST] /api/v1/schools","timestamp":"2025-01-05T17:42:49.422Z"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"message":"currentUser.hasPasswordChangedAfter is not a function","stack":"TypeError: currentUser.hasPasswordChangedAfter is not a function\n    at exports.protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:37:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736098969420_rbub8l0tb","timestamp":"2025-01-05T17:42:49.452Z","url":"/api/v1/schools"}
{"duration":"38ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736098969420_rbub8l0tb","responseSize":"435 Bytes","statusCode":500,"timestamp":"2025-01-05T17:42:49.458Z","url":"/api/v1/schools","userAgent":"curl/8.11.0"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:43:50.659Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-05T17:43:51.041Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:43:51.048Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:43:51.049Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:44:18.034Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-00.4nf56.mongodb.net","timestamp":"2025-01-05T17:44:18.436Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:44:18.443Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:44:18.444Z"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:44:22.772Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-01.4nf56.mongodb.net","timestamp":"2025-01-05T17:44:23.165Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:44:23.173Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:44:23.174Z"}
{"level":"info","message":"Route chiamata: [POST] /api/v1/schools","timestamp":"2025-01-05T17:44:32.158Z"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"message":"currentUser.hasPasswordChangedAfter is not a function","stack":"TypeError: currentUser.hasPasswordChangedAfter is not a function\n    at exports.protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:37:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736099072156_oul9om319","timestamp":"2025-01-05T17:44:32.191Z","url":"/api/v1/schools"}
{"duration":"42ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736099072156_oul9om319","responseSize":"435 Bytes","statusCode":500,"timestamp":"2025-01-05T17:44:32.199Z","url":"/api/v1/schools","userAgent":"curl/8.11.0"}
{"level":"info","message":"Repository caricati con successo","repositories":["school","user","class","student","test"],"timestamp":"2025-01-05T17:45:19.114Z"}
{"level":"info","message":"MongoDB Connected: cluster0-shard-00-02.4nf56.mongodb.net","timestamp":"2025-01-05T17:45:19.621Z"}
{"level":"info","message":"Server in esecuzione su localhost:5000","timestamp":"2025-01-05T17:45:19.629Z"}
{"level":"info","message":"Ambiente: development","timestamp":"2025-01-05T17:45:19.630Z"}
{"level":"info","message":"Route chiamata: [POST] /api/v1/schools","timestamp":"2025-01-05T17:45:21.811Z"}
{"body":{"institutionType":"higher","name":"ITS Angelo Rizzoli","region":"Lombardia","schoolType":"technical"},"error":{"message":"Non hai i permessi per questa azione","stack":"Error: Non hai i permessi per questa azione\n    at C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:48:19\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\ricca\\Desktop\\BSc\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at exports.protect (C:\\Users\\ricca\\Desktop\\BSc\\src\\middleware\\authMiddleware.js:39:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"level":"error","message":"Errore richiesta","method":"POST","query":{},"requestId":"req_1736099121809_4z5j39ofr","timestamp":"2025-01-05T17:45:21.841Z","url":"/api/v1/schools"}
{"duration":"38ms","ip":"::1","level":"warn","message":"Risposta inviata","method":"POST","requestId":"req_1736099121809_4z5j39ofr","responseSize":"1.22 KB","statusCode":403,"timestamp":"2025-01-05T17:45:21.847Z","url":"/api/v1/schools","userAgent":"curl/8.11.0"}
